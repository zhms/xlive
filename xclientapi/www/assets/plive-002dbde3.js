import{r as t,c as a,ao as N,b as c,aq as u,ap as O,O as P,a0 as T,w as U,o as k,e as V,f as e,ar as v,j as s,h as d,as as H,aj as M,at as R,k as I,aw as W,s as q,av as E,au as F,p as J,m as A}from"./index-d6b5b7ae.js";import{U as G,N as K,C as Q}from"./user-24cc7a99.js";import{_ as X}from"./plugin-vueexport-helper-73be2442.js";const Y=""+new URL("logo-9bc6f445.jpg",import.meta.url).href,Z=""+new URL("timetable-fe41cb1b.jpg",import.meta.url).href;const p=l=>(J("data-v-973e241d"),l=l(),A(),l),$={class:"live"},ee={class:"user-box"},te=p(()=>e("div",{class:"logo"},[e("img",{src:Y})],-1)),ae={class:"user-head flex flex-center"},se={class:"player"},le={class:"teacher-info flex"},oe=p(()=>e("canvas",{id:"canvas"},null,-1)),ne=["id","poster"],re=p(()=>e("div",{class:"course"},[e("img",{src:Z})],-1)),ie={class:"chat-box"},ce={__name:"plive",setup(l){const _=t(["https://oss.abutest.xyz/livebg/a.jpg","https://oss.abutest.xyz/livebg/b.jpg","https://oss.abutest.xyz/livebg/c.jpg","https://oss.abutest.xyz/livebg/d.jpg"]),o=t(0),S=a(()=>_.value[o.value]);N(()=>{o.value++,o.value>=_.value.length&&(o.value=0)},3e3),c("enter").value||u(),c("enter").value=null;const C=JSON.parse(c("user").value);a(()=>C.is_visitor==1);const h=a(()=>I.value-400-300-20),y=a(()=>W.value*.7-40),m=t("e"+ +new Date),i=t(!1),n=t(O());let r;const f=t(n.value.data.pull_url),L=a(()=>({src:f.value,isLive:!0}));function g(){if(f.value==""){q("The live is not ready yet, please try again later");return}r.setDataSource(L.value),i.value=!0}function z(B){r=window.neplayer(m.value,{controls:!0,autoplay:!0,loop:!1,errMsg7:"Live is over",streamTimeoutTime:30*1e3,techOrder:["html5","flvjs"],bigPlayButton:!1,decoderPath:"https://yx-web-nosdn.netease.im/sdk-release/webplayer/",canvasId:"canvas",enableStashBuffer:!0},()=>{}),r.on("play",()=>{i.value=!0})}return P(I,()=>{r.resize(h.value,y.value)}),t({data:{online_count:0}}),T(()=>{z()}),setTimeout(()=>U(),1e3),(B,b)=>{var x,w,j;return k(),V("div",$,[e("div",ee,[te,e("div",ae,[e("div",null,"Online("+v(s(E)||0)+")",1)]),d(G)]),e("div",se,[i.value?R("",!0):(k(),H(s(F),{key:0,name:"play-circle-o",class:"play-icon",onClick:g,size:"100",style:M({left:h.value/2+"px",top:(y.value-60)/2+"px"})},null,8,["style"])),e("div",le,[e("div",null,v((x=n.value)==null?void 0:x.data.name)+" | Current Lecturer: "+v((w=n.value)==null?void 0:w.data.account),1),e("div",{class:"logout",onClick:b[0]||(b[0]=(...D)=>s(u)&&s(u)(...D))},"Logout")]),oe,e("video",{id:m.value,"webkit-playsinline":"true",playsinline:"true",preload:"auto",onClick:g,poster:S.value,class:"video-js"},null,8,ne),re]),e("div",ie,[d(s(K),{text:(j=n.value)==null?void 0:j.data.title,"left-icon":"volume-o"},null,8,["text"]),d(Q)])])}}},fe=X(ce,[["__scopeId","data-v-973e241d"]]);export{fe as default};
