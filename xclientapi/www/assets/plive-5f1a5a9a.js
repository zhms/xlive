import{r as t,c as a,an as N,b as D,ao as P,N as T,$ as U,w as O,o as w,e as V,f as e,ar as c,j as s,h as u,ap as H,ai as M,aq as R,k,av as W,as as q,au as E,at as F,aw as j,p as J,m as $}from"./index-b88b3157.js";import{U as A,N as G,C as K}from"./user-78f7b50b.js";import{_ as Q}from"./plugin-vueexport-helper-9234e237.js";const X=""+new URL("logo-9bc6f445.jpg",import.meta.url).href,Y=""+new URL("timetable-fe41cb1b.jpg",import.meta.url).href;const d=o=>(J("data-v-05dd63e8"),o=o(),$(),o),Z={class:"live"},ee={class:"user-box"},te=d(()=>e("div",{class:"logo"},[e("img",{src:X})],-1)),ae={class:"user-head flex flex-center"},se={class:"player"},oe={class:"teacher-info flex"},le=d(()=>e("canvas",{id:"canvas"},null,-1)),ne=["id","poster"],ie=d(()=>e("div",{class:"course"},[e("img",{src:Y})],-1)),re={class:"chat-box"},ce={__name:"plive",setup(o){const v=t(["https://oss.abutest.xyz/livebg/a.jpg","https://oss.abutest.xyz/livebg/b.jpg","https://oss.abutest.xyz/livebg/c.jpg","https://oss.abutest.xyz/livebg/d.jpg"]),l=t(0),I=a(()=>v.value[l.value]);N(()=>{l.value++,l.value>=v.value.length&&(l.value=0)},3e3);const S=JSON.parse(D("user").value);a(()=>S.is_visitor==1);const p=a(()=>k.value-400-300-20),_=a(()=>W.value*.7-40),y=t("e"+ +new Date),r=t(!1),n=t(P());let i;const h=t(n.value.data.pull_url),C=a(()=>({type:"video/x-flv",src:h.value,isLive:!0}));function m(){if(h.value==""){q("The live is not ready yet, please try again later");return}i.setDataSource(C.value),r.value=!0}function L(z){i=window.neplayer(y.value,{controls:!0,autoplay:!0,loop:!1,errMsg7:"Live is over",streamTimeoutTime:30*1e3,techOrder:["html5","flvjs"],bigPlayButton:!1,decoderPath:"https://yx-web-nosdn.netease.im/sdk-release/webplayer/",canvasId:"canvas",enableStashBuffer:!0},()=>{}),i.on("play",()=>{r.value=!0})}return T(k,()=>{i.resize(p.value,_.value)}),t({data:{online_count:0}}),U(()=>{L()}),setTimeout(()=>O(),1e3),(z,f)=>{var g,b,x;return w(),V("div",Z,[e("div",ee,[te,e("div",ae,[e("div",null,"Online("+c(s(E)||0)+")",1)]),u(A)]),e("div",se,[r.value?R("",!0):(w(),H(s(F),{key:0,name:"play-circle-o",class:"play-icon",onClick:m,size:"100",style:M({left:p.value/2+"px",top:(_.value-60)/2+"px"})},null,8,["style"])),e("div",oe,[e("div",null,c((g=n.value)==null?void 0:g.data.name)+" | Current Lecturer: "+c((b=n.value)==null?void 0:b.data.account),1),e("div",{class:"logout",onClick:f[0]||(f[0]=(...B)=>s(j)&&s(j)(...B))},"Logout")]),le,e("video",{id:y.value,"webkit-playsinline":"true",playsinline:"true",preload:"auto",onClick:m,poster:I.value,class:"video-js"},null,8,ne),ie]),e("div",re,[u(s(G),{text:(x=n.value)==null?void 0:x.data.title,"left-icon":"volume-o"},null,8,["text"]),u(K)])])}}},me=Q(ce,[["__scopeId","data-v-05dd63e8"]]);export{me as default};
