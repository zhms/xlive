(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44a8afa5"],{1:function(t,e){},2:function(t,e){},3:function(t,e){},"6ec4":function(t,e,a){"use strict";a("a98f")},"7e79":function(t,e,a){},a417:function(t,e,a){"use strict";var i=a("5530"),n=(a("e9c4"),a("b64b"),a("d3b7"),a("159b"),a("5c96")),l=(a("0c6d"),a("2f62")),s=(a("73f5"),a("c1df")),o=a.n(s),r=a("f62d"),c=a("b76c");e["a"]={extends:c["a"],data:function(){return{filters:{},page:1,page_size:15,page_sizes:[15,50,100,200,500,1e3,1500],total:0,table_data:[],itemdata:null,Export:0,columnpicker:!1,column:{},dialog0:{show:!1,title:"",itemdata:{}},dialog1:{show:!1,title:"",itemdata:{}},dialog2:{show:!1,title:"",itemdata:{}},dialog3:{show:!1,title:"",itemdata:{}},dialog4:{show:!1,title:"",itemdata:{}},dialog5:{show:!1,title:"",itemdata:{}},dialog6:{show:!1,title:"",itemdata:{}},dialog7:{show:!1,title:"",itemdata:{}},dialog8:{show:!1,title:"",itemdata:{}},dialog9:{show:!1,title:"",itemdata:{}},symbols:[{id:"trx",name:"TRX"},{id:"usdt",name:"USDT"}]}},computed:Object(i["a"])({},Object(l["b"])(["sellers","channels","games","rooms","states"])),created:function(){if(this.columns){var t="column_".concat(this.$vnode.key),e=localStorage.getItem(t);if(e)this.column=JSON.parse(e);else{for(var a=0;a<this.columns.length;a++)this.column[this.columns[a]]=!0;localStorage.setItem(t,JSON.stringify(this.column))}}},methods:{pageChange:function(t){this.page=t,this.getTableData()},page_sizeChange:function(t){this.page=1,this.page_size=t,this.getTableData()},handleQuery:function(t){var e=this;1===t?(this.Export=1,this.getTableData((function(t){e.Export=0,window.open("/sapi"+t.filename)}))):(this.Export=0,this.page=1,this.getTableData())},handleAdd:function(t){var e=this;this.AddItem(t,(function(a,i){i=i||{},e["dialog".concat(t)].itemdata=i,e["dialog".concat(t)].title=a,e["dialog".concat(t)].show=!0}))},handleEdit:function(t,e){var a=this;this["dialog".concat(e)].itemdata=JSON.parse(JSON.stringify(t)),this.ModifyItem(e,(function(t){a["dialog".concat(e)].title=t,a["dialog".concat(e)].show=!0}),this["dialog".concat(e)].itemdata)},handleDelete:function(t,e){this.DeleteItem(t,e)},getQueryData:function(){var t={};t.page=this.page,t.page_size=this.page_size;var e=JSON.parse(JSON.stringify(this.filters));for(var a in e.channel_id=e.channel_id||0,e)null!=e[a]&&("DateRange"==a&&Object(r["a"])(e[a])?(t["start_time"]=o()(e[a][0]).format("YYYY-MM-DD HH:mm:ss"),t["end_time"]=o()(o()(e[a][1]).valueOf()+864e5).format("YYYY-MM-DD HH:mm:ss")):"DateTimeRange"==a&&Object(r["a"])(e[a])?(t["start_time"]=o()(e[a][0]).format("YYYY-MM-DD HH:mm:ss"),t["end_time"]=o()(o()(e[a][1]).valueOf()+1e3).format("YYYY-MM-DD HH:mm:ss")):(t[a]=e[a],"symbol"==a.toLowerCase()&&(t[a]=e[a].toLowerCase())));return 1==this.Export&&(t.Export=this.Export),t},copy:function(t){var e=document.createElement("textarea");e.value="".concat(t),document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),Object(n["Message"])({type:"success",message:"复制成功",center:!0})},getSummaries:function(t){var e=this,a=t.columns,i=[];return a.forEach((function(t,a){if(0!=a)e.getTotal&&(i[a]=e.getTotal(t.property));else{if(e.getTotal){var n=e.getTotal(0);if(n)return void(i[a]=n)}i[a]="总计"}})),i},selectColumn:function(){this.columnpicker=!0},setColumn:function(t){for(var e in t)this.column[e]=t[e];var a="column_".concat(this.$vnode.key);localStorage.setItem(a,JSON.stringify(this.column))}}}},a98f:function(t,e,a){},b76c:function(t,e,a){"use strict";e["a"]={data:function(){return{MapYesNo:{1:"是",2:"否"},ListYesNo:[{id:1,name:"是"},{id:2,name:"否"}]}}}},bccc:function(t,e,a){"use strict";var i=a("5530"),n=(a("b0c0"),a("2f62")),l=a("b76c");e["a"]={extends:l["a"],data:function(){return{table_data:[]}},props:{show:{type:Boolean,default:!1},title:{type:String,default:null},itemdata:{type:Object,default:function(){return{Password:""}}},filters:{type:Object,default:function(){return{}}}},computed:Object(i["a"])(Object(i["a"])({},Object(n["b"])(["sellers","channels","games","rooms","states"])),{},{visable:{get:function(){return this.show},set:function(t){this.$emit("update:show",t)}}}),methods:{handleCommit:function(){var t=this;this.commitData((function(e){t.visable=!e,t.$emit("getTableData")}))},handleOpen:function(){this.onOpen&&this.onOpen()},getMap:function(t){for(var e={},a=0;a<t.length;a++)e[t[a].id]=t[a].name;return e}}}},d9c2:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-form",{attrs:{inline:!0,model:t.filters}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"账号",clearable:!0},model:{value:t.filters.account,callback:function(e){t.$set(t.filters,"account",e)},expression:"filters.account"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"业务员",clearable:!0},model:{value:t.filters.agent,callback:function(e){t.$set(t.filters,"agent",e)},expression:"filters.agent"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"登录Ip",clearable:!0},model:{value:t.filters.login_ip,callback:function(e){t.$set(t.filters,"login_ip",e)},expression:"filters.login_ip"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"在线状态",clearable:""},model:{value:t.filters.is_online,callback:function(e){t.$set(t.filters,"is_online",e)},expression:"filters.is_online"}},t._l(t.online_options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.handleQuery}},[t._v("查询")]),a("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.handleAdd(0)}}},[t._v("添加")]),a("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:function(e){return t.handleAdd(1)}}},[t._v("批量导入")]),a("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"el-icon-bottom"},on:{click:function(e){return t.ExportUser()}}},[t._v("导出")]),a("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(e){return t.DownLoadExcelTemplate()}}},[t._v("下载导入模板")])],1)],1),a("el-row",[a("el-col",{staticStyle:{"margin-top":"-10px","padding-bottom":"10px"},attrs:{span:24}},[a("div",{staticClass:"grid-content"},[a("span",{staticStyle:{"margin-right":"30px",color:"#909399"}},[t._v("总人数 : "+t._s(t.total))]),a("span",{staticStyle:{"margin-right":"30px",color:"#909399"}},[t._v("在线人数 : "+t._s(t.online_count))]),a("span",{staticStyle:{"margin-right":"30px",color:"#909399"}},[t._v("合并Ip数 : "+t._s(t.ip_total))])])])],1),a("el-table",{staticClass:"table",staticStyle:{"margin-top":"-10px"},attrs:{data:t.table_data,border:"","max-height":"670px","cell-style":{padding:"0px"},"highlight-current-row":!0}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"id",width:"100"}}),a("el-table-column",{attrs:{align:"center",prop:"account",label:"账号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"blue",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.handleEdit(e.row,0)}}},[t._v(t._s(e.row.account))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"agent",label:"业务员",width:"120"}}),a("el-table-column",{attrs:{align:"center",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:1!=e.row.state?"red":""},[t._v(t._s(t._f("启用禁用")(e.row.state)))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"在线状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.is_online?"在线":"离线"))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"login_count",label:"登录次数",width:"100"}}),a("el-table-column",{attrs:{align:"center",prop:"login_ip",label:"登录Ip",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"login_ip_location",label:"登录地区",width:"200"}}),a("el-table-column",{attrs:{align:"center",prop:"create_time",label:"注册时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("北京时间")(e.row.create_time)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"left",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.state?a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.row,3)}}},[t._v("封号")]):t._e(),1!=e.row.state?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.row,4)}}},[t._v("解封")]):t._e(),1==e.row.chat_state?a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.row,2)}}},[t._v("禁言")]):t._e(),1!=e.row.chat_state?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.row,1)}}},[t._v("解除禁言")]):t._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{staticStyle:{"margin-right":"10px"},attrs:{background:"",layout:"sizes,total, prev, pager, next, jumper","current-page":t.page,"page-sizes":t.page_sizes,total:t.total,"page-size":t.page_size},on:{"size-change":t.page_sizeChange,"current-change":t.pageChange}})],1),a("edit-view",{attrs:{show:t.dialog0.show,title:t.dialog0.title,itemdata:t.dialog0.itemdata,filters:t.filters},on:{"update:show":function(e){return t.$set(t.dialog0,"show",e)},getTableData:t.getTableData}}),a("edit-view",{attrs:{show:t.dialog1.show,title:t.dialog1.title,itemdata:t.dialog1.itemdata,filters:t.filters},on:{"update:show":function(e){return t.$set(t.dialog1,"show",e)},getTableData:t.getTableData}})],1)},n=[],l=(a("7e79"),a("a417")),s=a("658f5"),o=a.n(s),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialogBox"},[a("el-dialog",{staticStyle:{"margin-top":"-100px"},attrs:{title:t.title,visible:t.visable,width:"630px",center:""},on:{"update:visible":function(e){t.visable=e},open:t.handleOpen}},["批量导入"!=t.title?a("div",[a("el-form",{attrs:{inline:!0,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"账号:"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{disabled:"编辑会员"==t.title},model:{value:t.itemdata.account,callback:function(e){t.$set(t.itemdata,"account",e)},expression:"itemdata.account"}})],1),a("el-form-item",{attrs:{label:"密码:"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{"show-password":""},model:{value:t.itemdata.password,callback:function(e){t.$set(t.itemdata,"password",e)},expression:"itemdata.password"}})],1)],1),a("div",{staticClass:"dlg-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleCommit}},[t._v("确定")])],1)],1):t._e(),"批量导入"==t.title?a("div",{staticClass:"upload-container"},[a("el-upload",{ref:"uploadRef",attrs:{"show-file-list":!1,action:"/upload","on-change":t.onUpload,"auto-upload":!1,accept:".xlsx,.xls"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传 xls/xlsx 文件，且不超过 2M.")])])],1):t._e()])],1)},c=[],u=a("c7eb"),d=a("1da1"),p=(a("ace4"),a("e9c4"),a("b64b"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac5"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("bccc")),f=a("1146"),h=a.n(f),m={extends:p["a"],data:function(){return{dlgroles:[],dlgchannels:[]}},methods:{commitData:function(t){var e=this;if("编辑会员"==this.title){if(!this.itemdata.password)return this.$message.error("请填写密码");var a=JSON.parse(JSON.stringify(this.itemdata));this.$post("/v1/user_list/update_user",a,{google:!0}).then((function(){e.$message.success("修改成功"),t(!0)}))}if("添加会员"==this.title){if(!this.itemdata.account)return this.$message.error("请填写账号");if(!this.itemdata.password)return this.$message.error("请填写密码");var i=JSON.parse(JSON.stringify(this.itemdata));this.$post("/v1/user_list/add_user",i,{google:!0}).then((function(){e.$message.success("添加成功"),t(!0)}))}},onOpen:function(){this.itemdata.state=1,this.dlgroles=[],this.dlgchannels=[],"编辑会员"==this.title&&delete this.itemdata.Password},onUpload:function(t){var e=this,a=new FileReader;return a.onload=function(){var t=Object(d["a"])(Object(u["a"])().mark((function t(a){var i,n,l,s,o,r,c;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=new Uint8Array(a.target.result),n=h.a.read(i,{type:"array"}),l=n.SheetNames[0],s=n.Sheets[l],o=h.a.utils.sheet_to_json(s,{header:1}),r=1;case 6:if(!(r<o.length)){t.next=14;break}if(c={account:"".concat(o[r][0]),password:"".concat(o[r][1])},!(c.account.length>0&&c.password.length>0)){t.next=11;break}return t.next=11,e.$post("/v1/user_list/add_user",c,{google:!1});case 11:r++,t.next=6;break;case 14:e.$message.success("上传成功"),e.visable=!1,e.$emit("getTableData");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.readAsArrayBuffer(t.raw),!1}}},g=m,b=(a("6ec4"),a("2877")),_=Object(b["a"])(g,r,c,!1,null,"c0f8e12e",null),v=_.exports,w=a("c1df"),y=a.n(w),x={extends:l["a"],components:{EditView:v,vueqr:o.a},data:function(){return{online_options:[{value:1,label:"在线"},{value:2,label:"离线"}],online_count:0,ip_total:0}},created:function(){this.getTableData()},methods:{getTableData:function(){var t=this,e=this.getQueryData();e.is_online=""==e.is_online?0:e.is_online,this.$post("/v1/get_user",e).then((function(e){t.table_data=e.data,t.total=e.total,t.online_count=e.online_count,t.ip_total=e.ip_total}))},ExportUser:function(){var t=this,e=this.getQueryData();this.$download("/v1/get_user",e).then((function(e){t.$message.success("导出成功")}))},ModifyItem:function(t,e,a){var i=this;if(0==t)return e("编辑会员");var n={id:a.id};1==t?n.chat_state=1:2==t?n.chat_state=2:3==t?n.state=2:4==t&&(n.state=1),this.$post("/v1/update_user",n,{google:!0}).then((function(){i.$message.success("修改成功"),i.getTableData()}))},AddItem:function(t,e){return 0==t?e("添加会员"):1==t?e("批量导入"):void 0},DownLoadExcelTemplate:function(){var t=h.a.utils.aoa_to_sheet([["账号","密码"]]),e=h.a.utils.book_new();h.a.utils.book_append_sheet(e,t,"kalacloud-data"),h.a.writeFile(e,"导入会员模板_".concat(y()().format("YYYY-MM-DD HH-mm-ss"),".xlsx"))}}},k=x,S=Object(b["a"])(k,i,n,!1,null,null,null);e["default"]=S.exports}}]);