import {
  __commonJS
} from "./chunk-CQXHTUV2.js";

// node_modules/@yxim/nim-web-sdk/dist/SDK/NIM_Web_SDK.js
var require_NIM_Web_SDK = __commonJS({
  "node_modules/@yxim/nim-web-sdk/dist/SDK/NIM_Web_SDK.js"(exports, module) {
    !function(e, t) {
      "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.SDK = t() : e.SDK = t();
    }(window, function() {
      return function(e) {
        var t = {};
        function n(r) {
          if (t[r])
            return t[r].exports;
          var o = t[r] = { i: r, l: false, exports: {} };
          return e[r].call(o.exports, o, o.exports, n), o.l = true, o.exports;
        }
        return n.m = e, n.c = t, n.d = function(e2, t2, r) {
          n.o(e2, t2) || Object.defineProperty(e2, t2, { enumerable: true, get: r });
        }, n.r = function(e2) {
          "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e2, "__esModule", { value: true });
        }, n.t = function(e2, t2) {
          if (1 & t2 && (e2 = n(e2)), 8 & t2)
            return e2;
          if (4 & t2 && "object" == typeof e2 && e2 && e2.__esModule)
            return e2;
          var r = /* @__PURE__ */ Object.create(null);
          if (n.r(r), Object.defineProperty(r, "default", { enumerable: true, value: e2 }), 2 & t2 && "string" != typeof e2)
            for (var o in e2)
              n.d(r, o, (function(t3) {
                return e2[t3];
              }).bind(null, o));
          return r;
        }, n.n = function(e2) {
          var t2 = e2 && e2.__esModule ? function() {
            return e2.default;
          } : function() {
            return e2;
          };
          return n.d(t2, "a", t2), t2;
        }, n.o = function(e2, t2) {
          return Object.prototype.hasOwnProperty.call(e2, t2);
        }, n.p = "", n(n.s = 916);
      }([function(e, t, n) {
        var r = n(51), o = n(2), s = n(7), i = n(15), a = n(4), c = n(121), u = n(71), l2 = n(122), m = n(32), p = n(6), d = n(9), f2 = n(8), g = n(123), h = n(141), y = n(24), v = n(16), b = n(462), T = n(466), S = n(3), M = n(88), k = n(89), x = n(72), C = n(52), I = n(53), w = n(54), _ = n(55), P = n(43), A = n(22);
        function N(e2, t2) {
          var n2 = a(e2);
          if (C) {
            var r2 = C(e2);
            t2 && (r2 = v(r2).call(r2, function(t3) {
              return I(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        function O(e2, t2) {
          var n2 = void 0 !== k && x(e2) || e2["@@iterator"];
          if (!n2) {
            if (m(e2) || (n2 = function(e3, t3) {
              var n3;
              if (!e3)
                return;
              if ("string" == typeof e3)
                return E(e3, t3);
              var r3 = i(n3 = Object.prototype.toString.call(e3)).call(n3, 8, -1);
              "Object" === r3 && e3.constructor && (r3 = e3.constructor.name);
              if ("Map" === r3 || "Set" === r3)
                return M(e3);
              if ("Arguments" === r3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r3))
                return E(e3, t3);
            }(e2)) || t2 && e2 && "number" == typeof e2.length) {
              n2 && (e2 = n2);
              var r2 = 0, o2 = function() {
              };
              return { s: o2, n: function() {
                return r2 >= e2.length ? { done: true } : { done: false, value: e2[r2++] };
              }, e: function(e3) {
                throw e3;
              }, f: o2 };
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          }
          var s2, a2 = true, c2 = false;
          return { s: function() {
            n2 = n2.call(e2);
          }, n: function() {
            var e3 = n2.next();
            return a2 = e3.done, e3;
          }, e: function(e3) {
            c2 = true, s2 = e3;
          }, f: function() {
            try {
              a2 || null == n2.return || n2.return();
            } finally {
              if (c2)
                throw s2;
            }
          } };
        }
        function E(e2, t2) {
          (null == t2 || t2 > e2.length) && (t2 = e2.length);
          for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
            r2[n2] = e2[n2];
          return r2;
        }
        var R = n(256), j2 = n(200);
        function F(e2) {
          "object" === A(e2) ? (this.callFunc = e2.callFunc || null, this.message = e2.message || "UNKNOW ERROR") : this.message = e2, this.time = /* @__PURE__ */ new Date(), this.timetag = +this.time;
        }
        n(490);
        var D, U, L = n(62), B = L.getGlobal(), q = /\s+/;
        L.deduplicate = function(e2) {
          var t2 = [];
          return o(e2).call(e2, function(e3) {
            -1 === s(t2).call(t2, e3) && t2.push(e3);
          }), t2;
        }, L.capFirstLetter = function(e2) {
          return e2 ? i(e2 = "" + e2).call(e2, 0, 1).toUpperCase() + i(e2).call(e2, 1) : "";
        }, L.guid = (D = function() {
          return (65536 * (1 + Math.random()) | 0).toString(16).substring(1);
        }, function() {
          return D() + D() + D() + D() + D() + D() + D() + D();
        }), L.extend = function(e2, t2, n2) {
          for (var r2 in t2)
            void 0 !== e2[r2] && true !== n2 || (e2[r2] = t2[r2]);
        }, L.filterObj = function(e2, t2) {
          var n2 = {};
          return L.isString(t2) && (t2 = t2.split(q)), o(t2).call(t2, function(t3) {
            e2.hasOwnProperty(t3) && (n2[t3] = e2[t3]);
          }), n2;
        }, L.copy = function(e2, t2) {
          var n2;
          return t2 = t2 || {}, e2 ? (o(n2 = a(e2)).call(n2, function(n3) {
            L.exist(e2[n3]) && (t2[n3] = e2[n3]);
          }), t2) : t2;
        }, L.copyWithNull = function(e2, t2) {
          var n2;
          return t2 = t2 || {}, e2 ? (o(n2 = a(e2)).call(n2, function(n3) {
            (L.exist(e2[n3]) || L.isnull(e2[n3])) && (t2[n3] = e2[n3]);
          }), t2) : t2;
        }, L.findObjIndexInArray = function(e2, t2) {
          e2 = e2 || [];
          var n2 = t2.keyPath || "id", r2 = -1;
          return c(e2).call(e2, function(e3, o2) {
            if (j2(e3, n2) === t2.value)
              return r2 = o2, true;
          }), r2;
        }, L.findObjInArray = function(e2, t2) {
          var n2 = L.findObjIndexInArray(e2, t2);
          return -1 === n2 ? null : e2[n2];
        }, L.mergeObjArray = function() {
          var e2 = [], t2 = i([]).call(arguments, 0, -1), n2 = arguments[arguments.length - 1];
          L.isArray(n2) && (t2.push(n2), n2 = {});
          var r2, s2 = n2.keyPath = n2.keyPath || "id";
          for (n2.sortPath = n2.sortPath || s2; !e2.length && t2.length; )
            e2 = t2.shift() || [], e2 = i(e2).call(e2, 0);
          return o(t2).call(t2, function(t3) {
            t3 && o(t3).call(t3, function(t4) {
              -1 !== (r2 = L.findObjIndexInArray(e2, { keyPath: s2, value: j2(t4, s2) })) ? e2[r2] = L.merge({}, e2[r2], t4) : e2.push(t4);
            });
          }), n2.notSort || (e2 = L.sortObjArray(e2, n2)), e2;
        }, L.cutObjArray = function(e2) {
          var t2 = i(e2).call(e2, 0), n2 = arguments.length, r2 = i([]).call(arguments, 1, n2 - 1), s2 = arguments[n2 - 1];
          L.isObject(s2) || (r2.push(s2), s2 = {});
          var a2, c2 = s2.keyPath = s2.keyPath || "id";
          return o(r2).call(r2, function(e3) {
            L.isArray(e3) || (e3 = [e3]), o(e3).call(e3, function(e4) {
              e4 && (s2.value = j2(e4, c2), -1 !== (a2 = L.findObjIndexInArray(t2, s2)) && u(t2).call(t2, a2, 1));
            });
          }), t2;
        }, L.sortObjArray = function(e2, t2) {
          var n2 = (t2 = t2 || {}).sortPath || "id";
          R.insensitive = !!t2.insensitive;
          var r2, o2, s2, i2 = !!t2.desc;
          return s2 = L.isFunction(t2.compare) ? t2.compare : function(e3, t3) {
            return r2 = j2(e3, n2), o2 = j2(t3, n2), i2 ? R(o2, r2) : R(r2, o2);
          }, l2(e2).call(e2, s2);
        }, L.emptyFunc = function() {
        }, L.isEmptyFunc = function(e2) {
          return e2 === L.emptyFunc;
        }, L.notEmptyFunc = function(e2) {
          return e2 !== L.emptyFunc;
        }, L.splice = function(e2, t2, n2) {
          return u([]).call(e2, t2, n2);
        }, L.reshape2d = function(e2, t2) {
          if (m(e2)) {
            L.verifyParamType("type", t2, "number", "util::reshape2d");
            var n2 = e2.length;
            if (n2 <= t2)
              return [e2];
            for (var r2 = Math.ceil(n2 / t2), o2 = [], s2 = 0; s2 < r2; s2++)
              o2.push(i(e2).call(e2, s2 * t2, (s2 + 1) * t2));
            return o2;
          }
          return e2;
        }, L.flatten2d = function(e2) {
          if (m(e2)) {
            var t2 = [];
            return o(e2).call(e2, function(e3) {
              t2 = p(t2).call(t2, e3);
            }), t2;
          }
          return e2;
        }, L.dropArrayDuplicates = function(e2) {
          if (m(e2)) {
            for (var t2 = {}, n2 = []; e2.length > 0; ) {
              t2[e2.shift()] = true;
            }
            for (var r2 in t2)
              true === t2[r2] && n2.push(r2);
            return n2;
          }
          return e2;
        }, L.onError = function(e2) {
          throw new F(e2);
        }, L.verifyParamPresent = function(e2, t2, n2, r2) {
          n2 = n2 || "";
          var o2 = false;
          switch (L.typeOf(t2)) {
            case "undefined":
            case "null":
              o2 = true;
              break;
            case "string":
              "" === t2 && (o2 = true);
              break;
            case "StrStrMap":
            case "object":
              a(t2).length || (o2 = true);
              break;
            case "array":
              t2.length ? c(t2).call(t2, function(e3) {
                if (L.notexist(e3))
                  return o2 = true, true;
              }) : o2 = true;
          }
          o2 && L.onParamAbsent(n2 + e2, r2);
        }, L.onParamAbsent = function(e2, t2) {
          L.onParamError("缺少参数 ".concat(e2, ", 请确保参数不是 空字符串、空对象、空数组、null或undefined, 或数组的内容不是 null/undefined"), t2);
        }, L.verifyParamAbsent = function(e2, t2, n2, r2) {
          n2 = n2 || "", void 0 !== t2 && L.onParamPresent(n2 + e2, r2);
        }, L.onParamPresent = function(e2, t2) {
          L.onParamError("多余的参数 ".concat(e2), t2);
        }, L.verifyParamType = function(e2, t2, n2, r2) {
          var o2 = L.typeOf(t2).toLowerCase();
          L.isArray(n2) || (n2 = [n2]), n2 = d(n2).call(n2, function(e3) {
            return e3.toLowerCase();
          });
          var i2 = true;
          switch (-1 === s(n2).call(n2, o2) && (i2 = false), o2) {
            case "number":
              isNaN(t2) && (i2 = false);
              break;
            case "string":
              "numeric or numeric string" === n2.join("") && (i2 = !!/^[0-9]+$/.test(t2));
          }
          i2 || L.onParamInvalidType(e2, n2, "", r2);
        }, L.onParamInvalidType = function(e2, t2, n2, r2) {
          n2 = n2 || "", t2 = L.isArray(t2) ? (t2 = d(t2).call(t2, function(e3) {
            return '"' + e3 + '"';
          })).join(", ") : '"' + t2 + '"', L.onParamError('参数"' + n2 + e2 + '"类型错误, 合法的类型包括: [' + t2 + "]", r2);
        }, L.verifyParamValid = function(e2, t2, n2, r2) {
          L.isArray(n2) || (n2 = [n2]), -1 === s(n2).call(n2, t2) && L.onParamInvalidValue(e2, n2, r2);
        }, L.onParamInvalidValue = function(e2, t2, n2) {
          var r2;
          L.isArray(t2) || (t2 = [t2]), t2 = d(t2).call(t2, function(e3) {
            return '"' + e3 + '"';
          }), L.isArray(t2) && (t2 = t2.join(", ")), L.onParamError(p(r2 = "参数 ".concat(e2, "值错误, 合法的值包括: [")).call(r2, f2(t2), "]"), n2);
        }, L.verifyParamMin = function(e2, t2, n2, r2) {
          t2 < n2 && L.onParamError("参数" + e2 + "的值不能小于" + n2, r2);
        }, L.verifyParamMax = function(e2, t2, n2, r2) {
          t2 > n2 && L.onParamError("参数" + e2 + "的值不能大于" + n2, r2);
        }, L.verifyArrayMax = function(e2, t2, n2, r2) {
          t2.length > n2 && L.onParamError("参数" + e2 + "的长度不能大于" + n2, r2);
        }, L.verifyEmail = (U = /^\S+@\S+$/, function(e2, t2, n2) {
          U.test(t2) || L.onParamError("参数" + e2 + "邮箱格式错误, 合法格式必须包含@符号, @符号前后至少要各有一个字符", n2);
        }), L.verifyTel = function() {
          var e2 = /^[+\-()\d]+$/;
          return function(t2, n2, r2) {
            e2.test(n2) || L.onParamError("参数" + t2 + "电话号码格式错误, 合法字符包括+、-、英文括号和数字", r2);
          };
        }(), L.verifyBirth = function() {
          var e2 = /^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;
          return function(t2, n2, r2) {
            e2.test(n2) || L.onParamError("参数" + t2 + '生日格式错误, 合法为"yyyy-MM-dd"', r2);
          };
        }(), L.onParamError = function(e2, t2) {
          L.onError({ message: e2, callFunc: t2 });
        }, L.verifyOptions = function(e2, t2, n2, r2, s2) {
          if (e2 = e2 || {}, t2 && (L.isString(t2) && (t2 = t2.split(q)), L.isArray(t2))) {
            "boolean" != typeof n2 && (s2 = n2 || null, n2 = true, r2 = "");
            var i2 = n2 ? L.verifyParamPresent : L.verifyParamAbsent;
            o(t2).call(t2, function(t3) {
              i2.call(L, t3, e2[t3], r2, s2);
            });
          }
          return e2;
        }, L.verifyParamAtLeastPresentOne = function(e2, t2, n2) {
          t2 && (L.isString(t2) && (t2 = t2.split(q)), L.isArray(t2) && (c(t2).call(t2, function(t3) {
            return L.exist(e2[t3]);
          }) || L.onParamError("以下参数[" + t2.join(", ") + "]至少需要传入一个", n2)));
        }, L.verifyParamPresentJustOne = function(e2, t2, n2) {
          t2 && (L.isString(t2) && (t2 = t2.split(q)), L.isArray(t2) && 1 !== g(t2).call(t2, function(t3, n3) {
            return L.exist(e2[n3]) && t3++, t3;
          }, 0) && L.onParamError("以下参数[" + t2.join(", ") + "]必须且只能传入一个", n2));
        }, L.verifyBooleanWithDefault = function(e2, t2, n2, r2, s2) {
          L.undef(n2) && (n2 = true), q.test(t2) && (t2 = t2.split(q)), L.isArray(t2) ? o(t2).call(t2, function(t3) {
            L.verifyBooleanWithDefault(e2, t3, n2, r2, s2);
          }) : void 0 === e2[t2] ? e2[t2] = n2 : L.isBoolean(e2[t2]) || L.onParamInvalidType(t2, "boolean", r2, s2);
        }, L.verifyFileInput = function(e2, t2) {
          var n2;
          (L.verifyParamPresent("fileInput", e2, "", t2), L.isString(e2) && ((e2 = "undefined" == typeof document ? void 0 : document.getElementById(e2)) || L.onParamError("找不到要上传的文件对应的input, 请检查fileInput id ".concat(e2), t2)), e2.tagName && "input" === e2.tagName.toLowerCase() && "file" === e2.type.toLowerCase()) || L.onParamError(p(n2 = "请提供正确的 fileInput, 必须为 file 类型的 input 节点 tagname:".concat(e2.tagName, ", filetype:")).call(n2, e2.type), t2);
          return e2;
        }, L.verifyFileType = function(e2, t2) {
          L.verifyParamValid("type", e2, L.validFileTypes, t2);
        }, L.verifyCallback = function(e2, t2, n2) {
          q.test(t2) && (t2 = t2.split(q)), L.isArray(t2) ? o(t2).call(t2, function(t3) {
            L.verifyCallback(e2, t3, n2);
          }) : e2[t2] ? L.isFunction(e2[t2]) || L.onParamInvalidType(t2, "function", "", n2) : e2[t2] = L.emptyFunc;
        }, L.verifyFileUploadCallback = function(e2, t2) {
          L.verifyCallback(e2, "uploadprogress uploaddone uploaderror uploadcancel", t2);
        }, L.validFileTypes = ["image", "audio", "video", "file"], L.validFileExts = { image: ["bmp", "gif", "jpg", "jpeg", "jng", "png", "webp"], audio: ["mp3", "wav", "aac", "wma", "wmv", "amr", "mp2", "flac", "vorbis", "ac3"], video: ["mp4", "rm", "rmvb", "wmv", "avi", "mpg", "mpeg", "mov"] }, L.filterFiles = function(e2, t2) {
          var n2, r2, a2 = "file" === (t2 = t2.toLowerCase()), c2 = [];
          return o([]).call(e2, function(e3) {
            var o2, u2;
            if (a2)
              c2.push(e3);
            else if (n2 = i(o2 = e3.name).call(o2, h(u2 = e3.name).call(u2, ".") + 1), (r2 = e3.type.split("/"))[0] && r2[1]) {
              var l3, m2 = false;
              if (r2[0].toLowerCase() === t2)
                m2 = true;
              else
                m2 = -1 !== s(l3 = L.validFileExts[t2]).call(l3, n2);
              m2 && c2.push(e3);
            }
          }), c2;
        };
        var H, z, W = L.supportFormData = L.notundef(B.FormData);
        L.getFileName = function(e2) {
          return e2 = L.verifyFileInput(e2), W ? e2.files[0].name : i(t2 = e2.value).call(t2, h(n2 = e2.value).call(n2, "\\") + 1);
          var t2, n2;
        }, L.getFileInfo = (H = { ppt: 1, pptx: 2, pdf: 3, doc: 6, docx: 7 }, function(e2) {
          var t2 = {};
          if (!(e2 = L.verifyFileInput(e2)).files)
            return t2;
          var n2 = e2.files[0];
          return W && (t2.name = n2.name, t2.size = n2.size, t2.type = n2.name.match(/\.(\w+)$/), t2.type = t2.type && t2.type[1].toLowerCase(), t2.transcodeType = H[t2.type] || 0), t2;
        }), L.sizeText = (z = ["B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "BB"], function(e2) {
          var t2, n2 = 0;
          do {
            t2 = (e2 = Math.floor(100 * e2) / 100) + z[n2], e2 /= 1024, n2++;
          } while (e2 > 1);
          return t2;
        }), L.promises2cmds = function(e2) {
          return d(e2).call(e2, function(e3) {
            return e3.cmd;
          });
        }, L.objs2accounts = function(e2) {
          return d(e2).call(e2, function(e3) {
            return e3.account;
          });
        }, L.teams2ids = function(e2) {
          return d(e2).call(e2, function(e3) {
            return e3.teamId;
          });
        }, L.objs2ids = function(e2) {
          return d(e2).call(e2, function(e3) {
            return e3.id;
          });
        }, L.getMaxUpdateTime = function(e2) {
          var t2 = d(e2).call(e2, function(e3) {
            return +e3.updateTime;
          });
          return Math.max.apply(Math, t2);
        }, L.genCheckUniqueFunc = function(e2) {
          return e2 = e2 || "id", function(t2) {
            this.uniqueSet = this.uniqueSet || {}, this.uniqueSet[e2] = this.uniqueSet[e2] || {};
            var n2 = this.uniqueSet[e2], r2 = t2[e2];
            return !n2[r2] && (n2[r2] = true, true);
          };
        }, L.fillPropertyWithDefault = function(e2, t2, n2) {
          return !!L.undef(e2[t2]) && (e2[t2] = n2, true);
        }, L.throttle = function(e2, t2, n2, r2) {
          var o2, s2, i2 = null, a2 = 0;
          n2 || (n2 = {});
          var c2 = function() {
            a2 = false === n2.leading ? 0 : (/* @__PURE__ */ new Date()).getTime(), i2 = null, e2.apply(o2, s2), i2 || (o2 = s2 = null);
          };
          return function() {
            var u2 = (/* @__PURE__ */ new Date()).getTime();
            a2 || false !== n2.leading || (a2 = u2);
            var l3 = t2 - (u2 - a2);
            return o2 = this, s2 = arguments, l3 <= 0 || l3 > t2 ? (clearTimeout(i2), i2 = null, a2 = u2, e2.apply(o2, s2), i2 || (o2 = s2 = null)) : i2 || false === n2.trailing ? i2 && r2 && r2.apply(o2, s2) : (i2 = y(c2, l3), r2 && r2.apply(o2, s2)), i2;
          };
        }, L.get = function(e2, t2) {
          var n2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0;
          if ("object" !== A(e2))
            return n2;
          var r2, o2 = t2.replace(/\[(\d+)\]/g, ".$1").split("."), s2 = e2, i2 = O(o2);
          try {
            for (i2.s(); !(r2 = i2.n()).done; ) {
              var a2 = r2.value;
              if (void 0 === (s2 = Object(s2)[a2]))
                return n2;
            }
          } catch (e3) {
            i2.e(e3);
          } finally {
            i2.f();
          }
          return s2;
        }, L.pickAsString = function(e2, t2) {
          var n2;
          return e2 ? d(n2 = v(t2).call(t2, function(t3) {
            return void 0 !== e2[t3];
          })).call(n2, function(t3) {
            var n3;
            return p(n3 = "".concat(t3, "=")).call(n3, e2[t3]);
          }).join(",") : "";
        }, L.omitAsString = function(e2, t2) {
          var n2, r2;
          if (!e2)
            return "";
          var s2 = {};
          return o(t2).call(t2, function(e3) {
            s2[e3] = true;
          }), d(n2 = v(r2 = a(e2)).call(r2, function(e3) {
            return !s2[e3];
          })).call(n2, function(t3) {
            var n3;
            return p(n3 = "".concat(t3, "=")).call(n3, e2[t3]);
          }).join(",");
        };
        var V = { session: function(e2) {
          var t2 = function(e3) {
            for (var t3 = 1; t3 < arguments.length; t3++) {
              var n3, s2, i2 = null != arguments[t3] ? arguments[t3] : {};
              t3 % 2 ? o(n3 = N(Object(i2), true)).call(n3, function(t4) {
                r(e3, t4, i2[t4]);
              }) : w ? _(e3, w(i2)) : o(s2 = N(Object(i2))).call(s2, function(t4) {
                P(e3, t4, I(i2, t4));
              });
            }
            return e3;
          }({}, e2), n2 = ["topCustom", "localCustom", "extra"];
          return o(n2).call(n2, function(e3) {
            t2[e3] && (t2[e3] = "***");
          }), t2.lastMsg && (t2.lastMsg = { idServer: t2.lastMsg.idServer, idClient: t2.lastMsg.idClient }), t2;
        } };
        L.secureOutput = function(e2, t2) {
          m(t2) || (t2 = [t2]);
          var n2 = V[e2];
          return 1 === (t2 = d(t2).call(t2, function(e3) {
            return n2(e3);
          })).length ? t2[0] : t2;
        };
        var G = { string: function(e2, t2, n2) {
          var r2 = n2.required, o2 = n2.allowEmpty, s2 = e2[t2];
          return false === r2 && void 0 === s2 || "string" == typeof s2 && !(!o2 && "" === s2);
        }, number: function(e2, t2, n2) {
          var r2 = n2.required, o2 = n2.min, s2 = e2[t2];
          return false === r2 && void 0 === s2 || "number" == typeof s2 && !(s2 < o2);
        }, enum: function(e2, t2, n2) {
          var r2 = n2.required, o2 = b(n2), i2 = e2[t2];
          return false === r2 && void 0 === i2 || s(o2).call(o2, i2) > -1;
        }, array: function(e2, t2, n2) {
          var r2 = n2.itemType, o2 = n2.min, s2 = n2.max, i2 = n2.required, a2 = e2[t2];
          return false === i2 && void 0 === a2 || !!m(a2) && (!("number" == typeof s2 && a2.length > s2) && (!("number" == typeof o2 && a2.length < o2) && !(r2 && "enum" !== r2 && !T(a2).call(a2, function(e3) {
            return A(e3) === r2;
          }))));
        } };
        L.validate = function(e2, t2, n2) {
          var r2, s2 = {};
          return o(r2 = a(e2)).call(r2, function(r3) {
            var o2, i2 = e2[r3].type, a2 = G[i2];
            a2 && !a2(t2, r3, e2[r3]) ? L.onError({ message: p(o2 = "Error in parameter verification, ".concat(r3, " expected value is ")).call(o2, f2(e2[r3])), callFunc: n2 }) : s2[r3] = t2[r3];
          }), s2;
        }, L.asyncPool = function(e2, t2, n2) {
          if ("number" != typeof e2 || "function" != typeof n2 || !t2 || !t2.length)
            return S.resolve();
          var r2 = 0, o2 = [], i2 = [];
          return function a2() {
            if (r2 === t2.length)
              return S.resolve();
            var c2 = t2[r2++], l3 = S.resolve().then(function() {
              return n2(c2, t2);
            });
            o2.push(l3);
            var m2 = S.resolve();
            if (e2 <= t2.length) {
              var p2 = l3.then(function() {
                return u(i2).call(i2, s(i2).call(i2, p2), 1);
              });
              i2.push(p2), i2.length >= e2 && (m2 = S.race(i2));
            }
            return m2.then(function() {
              return a2();
            });
          }().then(function() {
            return S.all(o2);
          });
        }, L.getIdArray = function(e2) {
          if (!e2 || "string" != typeof e2)
            throw new Error("id type error");
          var t2 = s(e2).call(e2, "-");
          if (t2 < 0 || t2 === e2.length - 1)
            throw new Error("id format error");
          return [i(e2).call(e2, 0, t2), i(e2).call(e2, t2 + 1)];
        }, e.exports = L;
      }, function(e, t, n) {
        "use strict";
        var r = n(14), o = n(79), s = n(159), i = n(17), a = n(95).f, c = n(211), u = n(13), l2 = n(34), m = n(61), p = n(30), d = function(e2) {
          var t2 = function(n2, r2, s2) {
            if (this instanceof t2) {
              switch (arguments.length) {
                case 0:
                  return new e2();
                case 1:
                  return new e2(n2);
                case 2:
                  return new e2(n2, r2);
              }
              return new e2(n2, r2, s2);
            }
            return o(e2, this, arguments);
          };
          return t2.prototype = e2.prototype, t2;
        };
        e.exports = function(e2, t2) {
          var n2, o2, f2, g, h, y, v, b, T, S = e2.target, M = e2.global, k = e2.stat, x = e2.proto, C = M ? r : k ? r[S] : (r[S] || {}).prototype, I = M ? u : u[S] || m(u, S, {})[S], w = I.prototype;
          for (g in t2)
            o2 = !(n2 = c(M ? g : S + (k ? "." : "#") + g, e2.forced)) && C && p(C, g), y = I[g], o2 && (v = e2.dontCallGetSet ? (T = a(C, g)) && T.value : C[g]), h = o2 && v ? v : t2[g], o2 && typeof y == typeof h || (b = e2.bind && o2 ? l2(h, r) : e2.wrap && o2 ? d(h) : x && i(h) ? s(h) : h, (e2.sham || h && h.sham || y && y.sham) && m(b, "sham", true), m(I, g, b), x && (p(u, f2 = S + "Prototype") || m(u, f2, {}), m(u[f2], g, h), e2.real && w && (n2 || !w[g]) && m(w, g, h)));
        };
      }, function(e, t, n) {
        e.exports = n(230);
      }, function(e, t, n) {
        e.exports = n(232);
      }, function(e, t, n) {
        e.exports = n(231);
      }, function(e, t) {
        e.exports = function(e2) {
          try {
            return !!e2();
          } catch (e3) {
            return true;
          }
        };
      }, function(e, t, n) {
        e.exports = n(323);
      }, function(e, t, n) {
        e.exports = n(207);
      }, function(e, t, n) {
        e.exports = n(384);
      }, function(e, t, n) {
        e.exports = n(440);
      }, function(e, t, n) {
        e.exports = n(276);
      }, function(e, t, n) {
        var r = n(7), o = n(6), s = false;
        try {
          "function" == typeof localStorage.setItem && "function" == typeof localStorage.getItem && (localStorage.setItem("nim_localstorage_exist_test", "1"), s = "1" === localStorage.getItem("nim_localstorage_exist_test"), localStorage.removeItem("nim_localstorage_exist_test"));
        } catch (e2) {
          s = false;
        }
        var i = { nodeEnv: "production", info: { hash: "4f8cb8077466d54ee9de28bb4302c1b7ec7436a3", shortHash: "4f8cb80", version: "8.9.124", sdkVersion: "2324", sdkHumanVersion: "8.9.124", protocolVersion: 1 }, lbsUrl: "https://lbs.netease.im/lbs/webconf.jsp", needToXHR: true, connectTimeout: 1e4, xhrTimeout: 8e3, reconnectionDelay: 1600, reconnectionDelayMax: 8e3, reconnectionJitter: 0.01, reconnectiontimer: null, heartbeatInterval: 3e4, cmdTimeout: 8e3, hbCmdTimeout: 5e3, isWeixinApp: false, isNodejs: false, isRN: false, ipVersion: 0, PUSHTOKEN: "", PUSHCONFIG: {}, CLIENTTYPE: 16, PushPermissionAsked: false, iosPushConfig: null, androidPushConfig: null, optionDefaultLinkUrl: "", defaultLinkUrl: "weblink.netease.im", ipv6DefaultLinkUrl: "weblink.netease.im", optionIpv6DefaultLinkUrl: "", wxDefaultLinkUrl: "wlnimsc0.netease.im", serverNosConfig: s ? { cdnDomain: localStorage.getItem("nim_cdn_domain") || "", objectPrefix: localStorage.getItem("nim_object_prefix") || "" } : {}, hasLocalStorage: s, privateConf: { isABTestEnable: false, isDataReportEnable: true, isMixStoreEnable: false, reportConfigUrl: "https://statistic.live.126.net/dispatcher/req", reportUrl: "https://statistic.live.126.net/statics/report/common/form" }, getDefaultLinkUrl: function(e2) {
          var t2, n2;
          1 === i.ipVersion ? (t2 = i.optionIpv6DefaultLinkUrl, n2 = i.ipv6DefaultLinkUrl) : (t2 = i.optionDefaultLinkUrl, n2 = i.defaultLinkUrl);
          var o2 = t2 || (i.isWeixinApp ? i.wxDefaultLinkUrl : n2);
          if (!o2)
            return false;
          var s2 = e2 ? "https" : "http", a = e2 ? "443" : "80", c = o2;
          return -1 === r(o2).call(o2, "http") && (c = s2 + "://" + c), -1 === r(o2).call(o2, ":") && (c = c + ":" + a), c;
        }, ipProbeAddr: { ipv4: "https://check-ipv4.netease.im/test/", ipv6: "https://check-ipv6.netease.im/test/" }, formatSocketUrl: function(e2) {
          var t2 = e2.url, n2 = e2.secure ? "https" : "http";
          return -1 === r(t2).call(t2, "http") ? n2 + "://" + t2 : t2;
        }, uploadUrl: "https://nos.netease.com", chunkUploadUrl: "https://wanproxy-web.127.net", commonMaxSize: 104857600, chunkSize: 4194304, chunkMaxSize: 4194304e4, replaceUrl: "https://{bucket}-nosdn.netease.im/{object}", downloadHost: "nos.netease.com", downloadHostList: ["nos.netease.com"], downloadUrl: "https://{bucket}-nosdn.netease.im/{object}", nosCdnEnable: true, httpsEnabled: false, threshold: 0, nosLbsUrls: [], edgeList: ["https://wanproxy-web.127.net", "https://nosup-hz1.127.net"], genUploadUrl: function(e2) {
          return i.uploadUrl + "/" + e2;
        }, genChunkUploadUrl: function(e2) {
          return i.chunkUploadUrl ? i.chunkUploadUrl + "/" + e2.bucket + "/" + e2.objectName : "";
        }, genDownloadUrl: function(e2, t2, n2) {
          var r2, s2, a, c, u, l2 = e2.bucket, m = e2.expireSec, p = +/* @__PURE__ */ new Date(), d = m ? "&survivalTime=".concat(m) : "";
          if (n2)
            return o(a = o(c = o(u = "https://".concat(n2, "/")).call(u, t2, "?createTime=")).call(c, p)).call(a, d);
          var f2 = o(r2 = o(s2 = "".concat(i.replaceUrl, "?createTime=")).call(s2, p)).call(r2, d);
          return (f2 = i.genNosProtocolUrl(f2)).replace("{bucket}", l2).replace("{object}", t2);
        }, genFileUrl: function(e2) {
          var t2 = e2.bucket, n2 = e2.objectName;
          return i.genNosProtocolUrl(i.replaceUrl).replace("{bucket}", t2).replace("{object}", n2);
        }, genNosProtocolUrl: function(e2) {
          return /^http/.test(e2) ? i.httpsEnabled && 0 !== r(e2).call(e2, "https://") && (e2 = e2.replace("http", "https")) : e2 = i.httpsEnabled ? "https://".concat(e2) : "http://".concat(e2), e2;
        } };
        i.hostEnv = "BROWSER", e.exports = i;
      }, function(e, t, n) {
        var r = n(109), o = Function.prototype, s = o.call, i = r && o.bind.bind(s, s);
        e.exports = r ? i : function(e2) {
          return function() {
            return s.apply(e2, arguments);
          };
        };
      }, function(e, t) {
        e.exports = {};
      }, function(e, t, n) {
        (function(t2) {
          var n2 = function(e2) {
            return e2 && e2.Math == Math && e2;
          };
          e.exports = n2("object" == typeof globalThis && globalThis) || n2("object" == typeof window && window) || n2("object" == typeof self && self) || n2("object" == typeof t2 && t2) || function() {
            return this;
          }() || Function("return this")();
        }).call(this, n(73));
      }, function(e, t, n) {
        e.exports = n(251);
      }, function(e, t, n) {
        e.exports = n(458);
      }, function(e, t, n) {
        var r = n(208), o = r.all;
        e.exports = r.IS_HTMLDDA ? function(e2) {
          return "function" == typeof e2 || e2 === o;
        } : function(e2) {
          return "function" == typeof e2;
        };
      }, function(e, t, n) {
        e.exports = n(216);
      }, function(e, t, n) {
        var r = n(12);
        e.exports = r({}.isPrototypeOf);
      }, function(e, t, n) {
        var r = n(109), o = Function.prototype.call;
        e.exports = r ? o.bind(o) : function() {
          return o.apply(o, arguments);
        };
      }, function(e, t, n) {
        var r = n(14), o = n(111), s = n(30), i = n(130), a = n(97), c = n(209), u = o("wks"), l2 = r.Symbol, m = l2 && l2.for, p = c ? l2 : l2 && l2.withoutSetter || i;
        e.exports = function(e2) {
          if (!s(u, e2) || !a && "string" != typeof u[e2]) {
            var t2 = "Symbol." + e2;
            a && s(l2, e2) ? u[e2] = l2[e2] : u[e2] = c && m ? m(t2) : p(t2);
          }
          return u[e2];
        };
      }, function(e, t, n) {
        var r = n(155), o = n(365);
        function s(t2) {
          return e.exports = s = "function" == typeof r && "symbol" == typeof o ? function(e2) {
            return typeof e2;
          } : function(e2) {
            return e2 && "function" == typeof r && e2.constructor === r && e2 !== r.prototype ? "symbol" : typeof e2;
          }, e.exports.__esModule = true, e.exports.default = e.exports, s(t2);
        }
        e.exports = s, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(13), o = n(30), s = n(136), i = n(39).f;
        e.exports = function(e2) {
          var t2 = r.Symbol || (r.Symbol = {});
          o(t2, e2) || i(t2, e2, { value: s.f(e2) });
        };
      }, function(e, t, n) {
        e.exports = n(454);
      }, function(e, t, n) {
        var r = n(51), o = n(60), s = n(6), i = n(24), a = n(8), c = n(32), u = n(4), l2 = n(52), m = n(16), p = n(53), d = n(2), f2 = n(54), g = n(55), h = n(43), y = n(15), v = n(88), b = n(89), T = n(72);
        function S(e2, t2) {
          var n2 = void 0 !== b && T(e2) || e2["@@iterator"];
          if (!n2) {
            if (c(e2) || (n2 = function(e3, t3) {
              var n3;
              if (!e3)
                return;
              if ("string" == typeof e3)
                return M(e3, t3);
              var r3 = y(n3 = Object.prototype.toString.call(e3)).call(n3, 8, -1);
              "Object" === r3 && e3.constructor && (r3 = e3.constructor.name);
              if ("Map" === r3 || "Set" === r3)
                return v(e3);
              if ("Arguments" === r3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r3))
                return M(e3, t3);
            }(e2)) || t2 && e2 && "number" == typeof e2.length) {
              n2 && (e2 = n2);
              var r2 = 0, o2 = function() {
              };
              return { s: o2, n: function() {
                return r2 >= e2.length ? { done: true } : { done: false, value: e2[r2++] };
              }, e: function(e3) {
                throw e3;
              }, f: o2 };
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          }
          var s2, i2 = true, a2 = false;
          return { s: function() {
            n2 = n2.call(e2);
          }, n: function() {
            var e3 = n2.next();
            return i2 = e3.done, e3;
          }, e: function(e3) {
            a2 = true, s2 = e3;
          }, f: function() {
            try {
              i2 || null == n2.return || n2.return();
            } finally {
              if (a2)
                throw s2;
            }
          } };
        }
        function M(e2, t2) {
          (null == t2 || t2 > e2.length) && (t2 = e2.length);
          for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
            r2[n2] = e2[n2];
          return r2;
        }
        function k(e2, t2) {
          var n2 = u(e2);
          if (l2) {
            var r2 = l2(e2);
            t2 && (r2 = m(r2).call(r2, function(t3) {
              return p(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        function x(e2) {
          for (var t2 = 1; t2 < arguments.length; t2++) {
            var n2, o2, s2 = null != arguments[t2] ? arguments[t2] : {};
            t2 % 2 ? d(n2 = k(Object(s2), true)).call(n2, function(t3) {
              r(e2, t3, s2[t3]);
            }) : f2 ? g(e2, f2(s2)) : d(o2 = k(Object(s2))).call(o2, function(t3) {
              h(e2, t3, p(s2, t3));
            });
          }
          return e2;
        }
        var C = n(45), I = n(0);
        function w(e2) {
          return I.get(e2, "code") || I.get(e2, "msg.code") || I.get(e2, "statusCode") || I.get(e2, "event.code") || 0;
        }
        function _(e2) {
          var t2, n2, r2 = "string" == typeof e2 ? e2 : I.get(e2, "msg") || I.get(e2, "message") || I.get(e2, "error") || I.get(e2, "event.msg") || I.get(e2, "event.message") || I.get(e2, "event") || "unknown", o2 = "", i2 = "";
          e2 && "function" == typeof e2.toString && (o2 = e2.toString());
          try {
            i2 = a(e2);
          } catch (e3) {
          }
          return s(t2 = s(n2 = "\nerrMsg: ".concat(r2, "\nerrStr: ")).call(n2, o2, "\nerrJsonStr: ")).call(t2, i2, "\n  ");
        }
        e.exports = { reportAPI: function(e2) {
          var t2 = e2.instance, n2 = e2.className, r2 = e2.funcName, a2 = e2.hasCallback, u2 = void 0 === a2 || a2, l3 = e2.done;
          if (!function(e3) {
            if (!e3 || !c(e3.experiments))
              return false;
            var t3, n3 = S(e3.experiments);
            try {
              for (n3.s(); !(t3 = n3.n()).done; ) {
                var r3 = t3.value;
                if ("api_trace_collection" === r3.experimentKey && "open_flow" === r3.schemeKey && c(r3.variates)) {
                  var o2, s2 = S(r3.variates);
                  try {
                    for (s2.s(); !(o2 = s2.n()).done; ) {
                      var i2 = o2.value;
                      if ("open" === i2.key && true === i2.value)
                        return true;
                    }
                  } catch (e4) {
                    s2.e(e4);
                  } finally {
                    s2.f();
                  }
                }
              }
            } catch (e4) {
              n3.e(e4);
            } finally {
              n3.f();
            }
            return false;
          }(t2.abtInfo))
            return l3;
          if (!t2.reporter || !t2.reporter.isUploadEnable)
            return l3;
          var m2, p2 = { user_id: I.get(t2, "options.account") || "", trace_id: I.get(t2, "socket.socket.sessionid"), class_name: n2, api_name: r2, action: u2 ? 1 : 0, active_id: C.deviceId, start_time: o() };
          return u2 ? (m2 = i(function() {
            t2 && t2.logger && t2.logger.warn("API 数据上报回调函数未调用", p2), t2 && t2.reporter && t2.reporter.report("nim_api_trace", x(x({}, p2), {}, { state: 1, error_code: 408, error_msg: "API回调函数未被调用", duration: o() - p2.start_time }));
          }, 1e4), function(e3) {
            if (clearTimeout(m2), "function" == typeof l3) {
              for (var n3, r3 = arguments.length, i2 = new Array(r3 > 1 ? r3 - 1 : 0), a3 = 1; a3 < r3; a3++)
                i2[a3 - 1] = arguments[a3];
              l3.apply(void 0, s(n3 = [e3]).call(n3, i2));
            }
            try {
              if (!t2 || !t2.reporter)
                return;
              e3 ? t2.reporter.report("nim_api_trace", x(x({}, p2), {}, { state: 1, error_code: w(e3), error_msg: _(e3), duration: o() - p2.start_time })) : t2.reporter.report("nim_api_trace", x(x({}, p2), {}, { state: 0, duration: o() - p2.start_time }));
            } catch (e4) {
              t2 && t2.logger && t2.logger.error("api report error", e4);
            }
          }) : (t2.reporter.report("nim_api_trace", x(x({}, p2), {}, { state: 0, duration: 1 })), l3);
        } };
      }, function(e, t, n) {
        e.exports = n(273);
      }, function(e, t, n) {
        var r = n(5);
        e.exports = !r(function() {
          return 7 != Object.defineProperty({}, 1, { get: function() {
            return 7;
          } })[1];
        });
      }, function(e, t, n) {
        var r = n(17), o = n(208), s = o.all;
        e.exports = o.IS_HTMLDDA ? function(e2) {
          return "object" == typeof e2 ? null !== e2 : r(e2) || e2 === s;
        } : function(e2) {
          return "object" == typeof e2 ? null !== e2 : r(e2);
        };
      }, function(e, t, n) {
        var r = n(13);
        e.exports = function(e2) {
          return r[e2 + "Prototype"];
        };
      }, function(e, t, n) {
        var r = n(12), o = n(42), s = r({}.hasOwnProperty);
        e.exports = Object.hasOwn || function(e2, t2) {
          return s(o(e2), t2);
        };
      }, function(e, t, n) {
        var r = n(17), o = n(81), s = TypeError;
        e.exports = function(e2) {
          if (r(e2))
            return e2;
          throw s(o(e2) + " is not a function");
        };
      }, function(e, t, n) {
        e.exports = n(300);
      }, function(e, t, n) {
        var r = n(13), o = n(14), s = n(17), i = function(e2) {
          return s(e2) ? e2 : void 0;
        };
        e.exports = function(e2, t2) {
          return arguments.length < 2 ? i(r[e2]) || i(o[e2]) : r[e2] && r[e2][t2] || o[e2] && o[e2][t2];
        };
      }, function(e, t, n) {
        var r = n(159), o = n(31), s = n(109), i = r(r.bind);
        e.exports = function(e2, t2) {
          return o(e2), void 0 === t2 ? e2 : s ? i(e2, t2) : function() {
            return e2.apply(t2, arguments);
          };
        };
      }, function(e, t, n) {
        var r = n(18), o = n(26), s = n(3), i = n(75), a = n(78), c = n(11), u = n(0), l2 = n(291), m = u.undef, p = n(310), d = n(149), f2 = n(153), g = n(784), h = n(785);
        function y(e2) {
          var t2, n2, r2, o2 = this;
          u.verifyOptions(e2, "appKey account token", "protocol::IMProtocol"), u.verifyCallback(e2, ["onconnect", "onerror", "onwillreconnect", "ondisconnect", "onloginportschange", "onmyinfo", "onblacklist", "onmutelist", "onfriends", "onusers", "onrobots", "onteams", "onSuperTeams", "onsessions", "onSessionsWithMoreRoaming", "onStickTopSessions", "onroamingmsgs", "onofflinemsgs", "onofflinefiltermsgs", "onroamingsysmsgs", "onofflinesysmsgs", "onofflinefiltersysmsgs", "onofflinecustomsysmsgs", "onofflinefiltercustomsysmsgs", "onbroadcastmsg", "onbroadcastmsgs", "onsysmsgunread", "onsyncdone", "onteammembers", "onsyncteammembersdone", "onsyncsuperteammembersdone", "onmsg", "onsysmsg", "oncustomsysmsg", "onupdatemyinfo", "onupdateuser", "onSyncUpdateServerSession", "onUpdateSuperTeamMember", "onMySuperTeamMembers", "onCreateSuperTeam", "onUpdateSuperTeam", "onAddSuperTeamMembers", "onRemoveSuperTeamMembers", "onUpdateSuperTeamManagers", "onDismissSuperTeam", "onTransferSuperTeam", "onUpdateSuperTeamMembersMute", "onupdateteammember", "onMyTeamMembers", "onMsgReceipts", "onCreateTeam", "onUpdateTeam", "onAddTeamMembers", "onRemoveTeamMembers", "onUpdateTeamManagers", "onDismissTeam", "onTransferTeam", "onUpdateTeamMembersMute", "onTeamMsgReceipt", "onupdatesession", "onQuickComment", "onDeleteQuickComment", "onPinMsgChange", "onupdatesysmsgunread", "onupdatesysmsg", "onsynccreateteam", "onsyncsupercreateteam", "onsyncmarkinblacklist", "onsyncmarkinmutelist", "onsyncfriendaction", "shouldIgnoreNotification", "shouldIgnoreMsg", "onDeleteMsgSelf", "shouldCountNotifyUnread", "onPushNotificationMultiportConfig", "onPushNotificationMultiportConfigUpdate", "onpushevents"], "protocol::IMProtocol"), t2 = "boolean" == typeof u.get(e2, "privateConf.isDataReportEnable") ? e2.privateConf.isDataReportEnable : c.privateConf.isDataReportEnable, n2 = "string" == typeof u.get(e2, "privateConf.reportConfigUrl") ? e2.privateConf.reportConfigUrl : c.privateConf.reportConfigUrl, r2 = "string" == typeof u.get(e2, "privateConf.reportUrl") ? e2.privateConf.reportUrl : c.privateConf.reportUrl, o2.reporter = l2.initReporter({ isDataReportEnable: t2, reportConfigUrl: n2, reportUrl: r2, appKey: e2.appKey, logger: o2.logger }), o2.db = e2.api.db = new i({ logger: e2.logger, reporter: o2.reporter, account: e2.account, core: o2, notifyError: function(e3) {
            o2.notifyError && o2.notifyError("DB error", e3);
          } }), this.processId = u.guid(), a.call(o2, e2);
        }
        var v = a.fn, b = y.fn = y.prototype = r(v);
        b.init = function() {
          var e2, t2, n2;
          v.init.call(this), d.IM.setProtocol(this), this.parser = d.IM, o(e2 = this.sendCmd).call(e2, this), this.socketUrls = [], this.syncing = true, this.canHandleDeletedMsgInSyncing = false, this.hasSynced = false, this.hasSyncedTeamMembers = false, this.syncPromiseArray = [], this.syncResult = {}, this.syncTeamMembersPromiseArray = [], this.syncSuperTeamMembersPromiseArray = [], this.syncTeamMembersResult = {}, this.syncSuperTeamMembersResult = {}, this.timetags = {}, this.superTeamMembersData = {}, this.saveAck = {}, this.sysMsgUnread = f2.completeUnread({}), this.resetUnsettledMsgs(), this.resetUnsettledSysMsgs(), this.msgPromise = s.resolve(), this.sysMsgPromise = s.resolve(), this.msgDelayArr = [], this.msgDelayTimer = null, this.msgStatEnable = false, this.nosCdnHostTimer = null, this.relativeServerTime = 0, this.sessionSet = {}, this.msgReceiptTasks = {}, this.userSet = {}, this.pushNotificationMultiportConfig = p.getDefaultConfig(), this.msgAckBufferManager = new g({ processFn: o(t2 = this.handleMsgsAck).call(t2, this), throttleTime: 500 }), this.roamingMsgSyncDoneBufferManager = new g({ processFn: o(n2 = this.onSyncDone).call(n2, this), throttleTime: 1500 }), this.reporterHookLBS = new h(this);
        }, b.reset = function() {
          v.reset.call(this);
          var e2 = this.options;
          this.db.reset(e2.db), m(e2.lbsUrl) && (e2.lbsUrl = c.lbsUrl), this.autoconnect = !!e2.autoconnect, this.resetAutoMarkRead();
        }, b.resetAutoMarkRead = function() {
          var e2 = this.options;
          u.verifyBooleanWithDefault(e2, "autoMarkRead", true, "", "protocol::resetAutoMarkRead");
        }, b.resetUnsettledMsgs = function() {
          this.unhandledMsgs = [], this.unupdatedMsgs = [];
        }, b.resetUnsettledSysMsgs = function() {
          this.unhandledSysMsgs = [], this.unhandledSysMsgsForDeletedMsgs = [], this.unupdatedSysMsgs = [];
        }, b.packetFromSync = function(e2) {
          return !e2.obj || !!e2.obj.sync;
        }, e.exports = y, n(786), n(787), n(788), n(808), n(810), n(811), n(812), n(813), n(814), n(815), n(816), n(821), n(822), n(823), n(824), n(828), n(829), n(830), n(831), n(832), n(833);
      }, function(e, t, n) {
        var r = n(28), o = String, s = TypeError;
        e.exports = function(e2) {
          if (r(e2))
            return e2;
          throw s(o(e2) + " is not an object");
        };
      }, function(e, t, n) {
        e.exports = n(305);
      }, function(e, t, n) {
        var r = n(81);
        e.exports = function(e2) {
          if ("object" == typeof e2 && "size" in e2 && "has" in e2 && "get" in e2 && "set" in e2 && "delete" in e2 && "entries" in e2)
            return e2;
          throw TypeError(r(e2) + " is not a map");
        };
      }, function(e, t, n) {
        var r = n(27), o = n(210), s = n(212), i = n(36), a = n(128), c = TypeError, u = Object.defineProperty, l2 = Object.getOwnPropertyDescriptor;
        t.f = r ? s ? function(e2, t2, n2) {
          if (i(e2), t2 = a(t2), i(n2), "function" == typeof e2 && "prototype" === t2 && "value" in n2 && "writable" in n2 && !n2.writable) {
            var r2 = l2(e2, t2);
            r2 && r2.writable && (e2[t2] = n2.value, n2 = { configurable: "configurable" in n2 ? n2.configurable : r2.configurable, enumerable: "enumerable" in n2 ? n2.enumerable : r2.enumerable, writable: false });
          }
          return u(e2, t2, n2);
        } : u : function(e2, t2, n2) {
          if (i(e2), t2 = a(t2), i(n2), o)
            try {
              return u(e2, t2, n2);
            } catch (e3) {
            }
          if ("get" in n2 || "set" in n2)
            throw c("Accessors not supported");
          return "value" in n2 && (e2[t2] = n2.value), e2;
        };
      }, function(e, t, n) {
        var r = n(18), o = n(77), s = n(35), i = n(11), a = n(834), c = n(149).IM, u = n(156);
        function l2(e2) {
          var t2 = u(e2);
          return this.subType = "im", this.nosScene = t2.nosScene || "im", this.nosSurvivalTime = t2.nosSurvivalTime, t2.Protocol = s, t2.Message = a, t2.constructor = l2, this.init(t2);
        }
        l2.Protocol = s, l2.parser = c, l2.use = o.use, l2.getInstance = o.getInstance, l2.rmAllInstances = o.rmAllInstances, l2.genInstanceName = function(e2) {
          return "NIM-account-" + e2.account;
        };
        var m = l2.fn = l2.prototype = r(o.prototype);
        l2.info = m.info = i.info, e.exports = l2, n(845), n(846), n(847), n(848), n(849), n(850), n(851), n(852), n(853), n(863), n(874), n(875), n(876), n(877), n(878), n(879), n(880), n(881), n(882), n(885), n(886);
      }, function(e, t, n) {
        var r = n(18), o = n(2), s = n(22);
        function i(e2, t2) {
          var n2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, r2 = this;
          r2.message = e2 || n2.message || "", "object" === s(t2) ? (r2.event = t2, r2.code = "Other_Error") : void 0 !== t2 && (r2.code = t2), r2.timetag = +/* @__PURE__ */ new Date(), void 0 !== n2 && (r2.event = n2), r2.event && (r2.callFunc = r2.event.callFunc || null, delete r2.event.callFunc);
        }
        i.prototype = r(Error.prototype), i.prototype.name = "NIMError";
        var a = { 201: "客户端版本不对, 需升级sdk", 302: "用户名或密码错误, 请检查appKey和token是否有效, account和token是否匹配", 403: "非法操作或没有权限", 404: "对象(用户/群/聊天室)不存在", 405: "参数长度过长", 408: "客户端请求超时", 414: "参数错误", 415: "服务不可用/没有聊天室服务器可分配", 416: "频率控制", 417: "重复操作", 422: "帐号被禁用", 500: "服务器内部错误", 501: "数据库操作失败", 503: "服务器繁忙", 508: "删除有效期过了", 509: "已失效", 7101: "被拉黑", 700: "批量操作部分失败", 801: "群人数达到上限", 802: "没有权限", 803: "群不存在或未发生变化", 804: "用户不在群里面", 805: "群类型不匹配", 806: "创建群数量达到限制", 807: "群成员状态不对", 809: "已经在群里", 811: "强推列表中帐号数量超限", 812: "群被禁言", 813: "因群数量限制，部分拉人成功", 814: "禁止使用群组消息已读服务", 815: "群管理员人数上限", 816: "批量操作部分失败", 997: "协议已失效", 998: "解包错误", 999: "打包错误", 9102: "通道失效", 9103: "已经在其他端接听/拒绝过这通电话", 11001: "对方离线, 通话不可送达", 13002: "聊天室状态异常", 13003: "在黑名单中", 13004: "在禁言名单中", 13006: "聊天室处于整体禁言状态,只有管理员能发言", Connect_Failed: "无法建立连接, 请确保能 ping/telnet 到云信服务器; 如果是IE8/9, 请确保项目部署在 HTTPS 环境下", Error_Internet_Disconnected: "网断了", Error_Connection_is_not_Established: "连接未建立", Error_Connection_Socket_State_not_Match: "socket状态不对", Error_Timeout: "超时", Param_Error: "参数错误", No_File_Selected: "请选择文件", Wrong_File_Type: "文件类型错误", File_Too_Large: "文件过大", Cross_Origin_Iframe: "不能获取跨域Iframe的内容", Not_Support: "不支持", NO_DB: "无数据库", DB: "数据库错误", Still_In_Team: "还在群里", Session_Exist: "会话已存在", Session_Not_Exist: "会话不存在", Error_Unknown: "未知错误", Operation_Canceled: "操作取消", Sync_Error: "同步数据失败" }, c = [200, 406, 808, 810];
        o(c).call(c, function(e2) {
          a[e2] = null;
        }), i.genError = function(e2) {
          var t2 = a[e2];
          return void 0 === t2 && (t2 = "操作失败"), null === t2 ? null : new i(t2, e2);
        }, i.multiInstance = function(e2) {
          return new i("不允许初始化多个实例", "Not_Allow_Multi_Instance", e2);
        }, i.newNetworkError = function(e2) {
          var t2 = "Error_Internet_Disconnected";
          return new i(a[t2], t2, e2);
        }, i.newConnectError = function(e2) {
          var t2 = "Connect_Failed";
          return new i(a[t2] || null, t2, e2);
        }, i.newConnectionError = function(e2) {
          var t2 = "Error_Connection_is_not_Established";
          return new i(a[t2], t2, e2);
        }, i.newSocketStateError = function(e2) {
          var t2 = "Error_Connection_Socket_State_not_Match";
          return new i(a[t2], t2, e2);
        }, i.newTimeoutError = function(e2) {
          var t2 = "Error_Timeout";
          return new i(a[t2], t2, e2);
        }, i.newFrequencyControlError = function(e2) {
          var t2 = new i(a[416], 416, e2);
          return t2.from = "local", t2;
        }, i.newParamError = function(e2, t2) {
          return new i(e2 || a.Param_Error, "Param_Error", t2);
        }, i.newNoFileError = function(e2, t2) {
          var n2 = "No_File_Selected";
          return new i(e2 || a[n2], n2, t2);
        }, i.newWrongFileTypeError = function(e2, t2) {
          var n2 = "Wrong_File_Type";
          return new i(e2 || a[n2], n2, t2);
        }, i.newFileTooLargeError = function(e2, t2) {
          var n2 = "File_Too_Large";
          return new i(e2 || a[n2], n2, t2);
        }, i.newCORSIframeError = function(e2) {
          var t2 = "Cross_Origin_Iframe";
          return new i(a[t2], t2, e2);
        }, i.newSupportError = function(e2, t2, n2) {
          return new i("不支持" + e2, "Not_Support_" + t2, n2);
        }, i.newSupportDBError = function(e2) {
          return i.newSupportError("数据库", "DB", e2);
        }, i.noDBError = function(e2) {
          return new i(a.NO_DB, "NO_DB", e2);
        }, i.newDBError = function(e2) {
          return new i(a.DB, "DB", e2);
        }, i.newUnknownError = function(e2) {
          var t2 = "Error_Unknown";
          return new i(a[t2], t2, e2);
        }, i.stillInTeamError = function(e2) {
          var t2 = "Still_In_Team";
          return new i(a[t2], t2, e2);
        }, i.sessionExist = function(e2) {
          var t2 = "Session_Exist";
          return new i(a[t2], t2, e2);
        }, i.sessionNotExist = function(e2) {
          var t2 = "Session_Not_Exist";
          return new i(a[t2], t2, e2);
        }, i.cancel = function(e2) {
          var t2 = "Operation_Canceled";
          return new i(a[t2], t2, e2);
        }, i.syncError = function(e2) {
          return new i(a.Sync_Error, "Sync_Error", e2);
        }, i.customError = function(e2, t2) {
          e2 = e2 || "Other_Error";
          var n2 = "";
          return (t2 = t2 || {}).message || (n2 = a[e2] || e2), "object" !== s(e2) ? new i(n2, e2, t2) : new i(n2, "Other_Error", void 0 === t2 ? e2 : t2);
        }, e.exports = i;
      }, function(e, t, n) {
        var r = n(110), o = Object;
        e.exports = function(e2) {
          return o(r(e2));
        };
      }, function(e, t, n) {
        e.exports = n(249);
      }, function(e, t, n) {
        var r = n(127), o = n(110);
        e.exports = function(e2) {
          return r(o(e2));
        };
      }, function(e, t, n) {
        var r = n(0), o = { init: function() {
          o.deviceId = r.guid();
        } };
        o.init(), o.clientTypeMap = { 1: "Android", 2: "iOS", 4: "PC", 8: "WindowsPhone", 16: "Web", 32: "Server", 64: "Mac" }, o.db = { open: function() {
        } }, o.rnfs = null, e.exports = o;
      }, function(e, t, n) {
        var r = n(322);
        e.exports = function(e2) {
          return r(e2.length);
        };
      }, function(e, t, n) {
        var r = n(34), o = n(20), s = n(36), i = n(81), a = n(235), c = n(46), u = n(19), l2 = n(236), m = n(139), p = n(237), d = TypeError, f2 = function(e2, t2) {
          this.stopped = e2, this.result = t2;
        }, g = f2.prototype;
        e.exports = function(e2, t2, n2) {
          var h, y, v, b, T, S, M, k = n2 && n2.that, x = !(!n2 || !n2.AS_ENTRIES), C = !(!n2 || !n2.IS_RECORD), I = !(!n2 || !n2.IS_ITERATOR), w = !(!n2 || !n2.INTERRUPTED), _ = r(t2, k), P = function(e3) {
            return h && p(h, "normal", e3), new f2(true, e3);
          }, A = function(e3) {
            return x ? (s(e3), w ? _(e3[0], e3[1], P) : _(e3[0], e3[1])) : w ? _(e3, P) : _(e3);
          };
          if (C)
            h = e2.iterator;
          else if (I)
            h = e2;
          else {
            if (!(y = m(e2)))
              throw d(i(e2) + " is not iterable");
            if (a(y)) {
              for (v = 0, b = c(e2); b > v; v++)
                if ((T = A(e2[v])) && u(g, T))
                  return T;
              return new f2(false);
            }
            h = l2(e2, y);
          }
          for (S = C ? e2.next : h.next; !(M = o(S, h)).done; ) {
            try {
              T = A(M.value);
            } catch (e3) {
              p(h, "throw", e3);
            }
            if ("object" == typeof T && T && u(g, T))
              return T;
          }
          return new f2(false);
        };
      }, function(e, t, n) {
        e.exports = n(563);
      }, function(e, t) {
        e.exports = true;
      }, function(e, t, n) {
        var r = n(67), o = String;
        e.exports = function(e2) {
          if ("Symbol" === r(e2))
            throw TypeError("Cannot convert a Symbol value to a string");
          return o(e2);
        };
      }, function(e, t, n) {
        var r = n(140), o = n(250);
        e.exports = function(e2, t2, n2) {
          return (t2 = o(t2)) in e2 ? r(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(255);
      }, function(e, t, n) {
        e.exports = n(481);
      }, function(e, t, n) {
        e.exports = n(484);
      }, function(e, t, n) {
        e.exports = n(487);
      }, function(e, t, n) {
        var r = n(258), o = "object" == typeof self && self && self.Object === Object && self, s = r || o || Function("return this")();
        e.exports = s;
      }, function(e, t, n) {
        var r = n(650)();
        e.exports = r;
        try {
          regeneratorRuntime = r;
        } catch (e2) {
          "object" == typeof globalThis ? globalThis.regeneratorRuntime = r : Function("r", "regeneratorRuntime = r")(r);
        }
      }, function(e, t, n) {
        var r = n(288);
        function o(e2, t2, n2, o2, s, i, a) {
          try {
            var c = e2[i](a), u = c.value;
          } catch (e3) {
            return void n2(e3);
          }
          c.done ? t2(u) : r.resolve(u).then(o2, s);
        }
        e.exports = function(e2) {
          return function() {
            var t2 = this, n2 = arguments;
            return new r(function(r2, s) {
              var i = e2.apply(t2, n2);
              function a(e3) {
                o(i, r2, s, a, c, "next", e3);
              }
              function c(e3) {
                o(i, r2, s, a, c, "throw", e3);
              }
              a(void 0);
            });
          };
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(721);
        e.exports = function(e2, t2, n2) {
          return n2 ? r(e2.entries(), function(e3) {
            return t2(e3[1], e3[0]);
          }) : e2.forEach(t2);
        };
      }, function(e, t, n) {
        e.exports = n(585);
      }, function(e, t, n) {
        var r = n(27), o = n(39), s = n(80);
        e.exports = r ? function(e2, t2, n2) {
          return o.f(e2, t2, s(1, n2));
        } : function(e2, t2, n2) {
          return e2[t2] = n2, e2;
        };
      }, function(e, t, n) {
        (function(t2) {
          var r = n(15), o = n(24), s = n(7), i = n(141), a = n(2), c = n(8), u = n(4), l2 = n(122), m = n(3), p = n(88), d = n(89), f2 = n(72), g = n(32);
          function h(e2, t3) {
            var n2 = void 0 !== d && f2(e2) || e2["@@iterator"];
            if (!n2) {
              if (g(e2) || (n2 = function(e3, t4) {
                var n3;
                if (!e3)
                  return;
                if ("string" == typeof e3)
                  return y(e3, t4);
                var o3 = r(n3 = Object.prototype.toString.call(e3)).call(n3, 8, -1);
                "Object" === o3 && e3.constructor && (o3 = e3.constructor.name);
                if ("Map" === o3 || "Set" === o3)
                  return p(e3);
                if ("Arguments" === o3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o3))
                  return y(e3, t4);
              }(e2)) || t3 && e2 && "number" == typeof e2.length) {
                n2 && (e2 = n2);
                var o2 = 0, s2 = function() {
                };
                return { s: s2, n: function() {
                  return o2 >= e2.length ? { done: true } : { done: false, value: e2[o2++] };
                }, e: function(e3) {
                  throw e3;
                }, f: s2 };
              }
              throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
            }
            var i2, a2 = true, c2 = false;
            return { s: function() {
              n2 = n2.call(e2);
            }, n: function() {
              var e3 = n2.next();
              return a2 = e3.done, e3;
            }, e: function(e3) {
              c2 = true, i2 = e3;
            }, f: function() {
              try {
                a2 || null == n2.return || n2.return();
              } finally {
                if (c2)
                  throw i2;
              }
            } };
          }
          function y(e2, t3) {
            (null == t3 || t3 > e2.length) && (t3 = e2.length);
            for (var n2 = 0, r2 = new Array(t3); n2 < t3; n2++)
              r2[n2] = e2[n2];
            return r2;
          }
          var v = n(156);
          function b() {
            return "undefined" != typeof window ? window : void 0 !== t2 ? t2 : "undefined" != typeof self ? self : {};
          }
          function T(e2) {
            var t3;
            return r(t3 = Object.prototype.toString.call(e2)).call(t3, 8, -1);
          }
          function S(e2) {
            return T(e2).toLowerCase();
          }
          function M(e2) {
            return "string" === S(e2);
          }
          function k(e2) {
            return "number" === S(e2);
          }
          function x(e2) {
            return "array" === S(e2);
          }
          function C(e2) {
            return "function" == typeof e2;
          }
          function I(e2) {
            return "date" === S(e2);
          }
          function w(e2) {
            return null === e2;
          }
          function _(e2) {
            return null !== e2;
          }
          function P(e2) {
            return void 0 === e2;
          }
          function A(e2) {
            return void 0 !== e2;
          }
          function N(e2) {
            return A(e2) && _(e2);
          }
          function O(e2) {
            return P(e2) || w(e2);
          }
          function E(e2) {
            return N(e2) && "object" === S(e2);
          }
          var R = function(e2, t3, n2) {
            e2.addEventListener ? e2.addEventListener(t3, n2, false) : e2.attachEvent && e2.attachEvent("on" + t3, n2);
          }, j2 = R, F = function(e2, t3, n2) {
            e2.removeEventListener ? e2.removeEventListener(t3, n2, false) : e2.detachEvent && e2.detachEvent("on" + t3, n2);
          }, D = F;
          function U() {
            var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : function() {
            }, n2 = arguments.length > 2 ? arguments[2] : void 0;
            for (var r2 in e2)
              e2.hasOwnProperty(r2) && t3.call(n2, r2, e2[r2]);
          }
          function L(e2, t3) {
            U(t3, function(t4, n2) {
              e2[t4] = n2;
            });
          }
          var B, q = (B = 0, function() {
            return "" + B++;
          });
          function H(e2) {
            return M(e2) && 0 === s(e2).call(e2, "{") && i(e2).call(e2, "}") === e2.length - 1;
          }
          function z(e2, t3, n2) {
            if (!e2)
              return "";
            var r2 = [];
            return U(e2, function(e3, t4) {
              C(t4) || (I(t4) ? t4 = t4.getTime() : x(t4) ? t4 = t4.join(",") : E(t4) && (t4 = c(t4)), n2 && (t4 = encodeURIComponent(t4)), r2.push(encodeURIComponent(e3) + "=" + t4));
            }), r2.join(t3 || ",");
          }
          var W, V = (W = /^([\w]+?:\/\/.*?(?=\/|$))/i, function(e2) {
            return W.test(e2 || "") ? RegExp.$1.toLowerCase() : "";
          });
          function G(e2) {
            var t3 = b();
            return e2.tagName && "INPUT" === e2.tagName.toUpperCase() || t3.Blob && e2 instanceof t3.Blob;
          }
          e.exports = { o: {}, emptyObj: {}, f: function() {
          }, emptyFunc: function() {
          }, regBlank: /\s+/gi, regWhiteSpace: /\s+/gi, getGlobal: b, getClass: T, typeOf: S, isString: M, isNumber: k, isInt: function(e2) {
            return k(e2) && e2 % 1 == 0;
          }, isBoolean: function(e2) {
            return "boolean" === S(e2);
          }, isArray: x, isFunction: C, isDate: I, isRegExp: function(e2) {
            return "regexp" === S(e2);
          }, isError: function(e2) {
            return "error" === S(e2);
          }, isnull: w, notnull: _, undef: P, notundef: A, exist: N, notexist: O, isObject: E, isEmpty: function(e2) {
            return O(e2) || (M(e2) || x(e2)) && 0 === e2.length;
          }, remove: function(e2) {
            e2.parentNode && e2.parentNode.removeChild(e2);
          }, dataset: function(e2, t3, n2) {
            if (!N(n2))
              return e2.getAttribute("data-" + t3);
            e2.setAttribute("data-" + t3, n2);
          }, addEventListener: R, on: j2, removeEventListener: F, off: D, target: function(e2) {
            return e2.target || e2.srcElement;
          }, createIframe: function(e2) {
            if ("undefined" != typeof document) {
              var t3;
              if ((e2 = e2 || {}).name)
                try {
                  (t3 = document.createElement('<iframe name="' + e2.name + '"></iframe>')).frameBorder = 0;
                } catch (n3) {
                  (t3 = document.createElement("iframe")).name = e2.name;
                }
              else
                t3 = document.createElement("iframe");
              e2.visible || (t3.style.display = "none"), C(e2.onload) && j2(t3, "load", function n3(r2) {
                t3.src && (e2.multi || D(t3, "load", n3), e2.onload(r2));
              }), (e2.parent || document.body).appendChild(t3);
              var n2 = e2.src || "about:blank";
              return o(function() {
                t3.src = n2;
              }, 0), t3;
            }
          }, html2node: function(e2) {
            if ("undefined" != typeof document) {
              var t3 = document.createElement("div");
              t3.innerHTML = e2;
              var n2, r2, o2 = [];
              if (t3.children)
                for (n2 = 0, r2 = t3.children.length; n2 < r2; n2++)
                  o2.push(t3.children[n2]);
              else
                for (n2 = 0, r2 = t3.childNodes.length; n2 < r2; n2++) {
                  var s2 = t3.childNodes[n2];
                  1 === s2.nodeType && o2.push(s2);
                }
              return o2.length > 1 ? t3 : o2[0];
            }
          }, forOwn: U, mixin: L, uniqueID: q, isJSON: H, parseJSON: function e2(t3) {
            try {
              H(t3) && (t3 = JSON.parse(t3)), E(t3) && U(t3, function(n2, r2) {
                switch (S(r2)) {
                  case "string":
                  case "object":
                    t3[n2] = e2(r2);
                }
              });
            } catch (e3) {
            }
            return t3;
          }, simpleClone: function(e2) {
            return v(e2);
          }, merge: function() {
            for (var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t3 = arguments.length, n2 = new Array(t3 > 1 ? t3 - 1 : 0), r2 = 1; r2 < t3; r2++)
              n2[r2 - 1] = arguments[r2];
            return a(n2).call(n2, function(t4) {
              L(e2, t4);
            }), e2;
          }, fillUndef: function(e2, t3) {
            return U(t3, function(t4, n2) {
              P(e2[t4]) && (e2[t4] = n2);
            }), e2;
          }, checkWithDefault: function(e2, t3, n2) {
            var r2 = e2[t3] || e2[t3.toLowerCase()];
            return O(r2) && (r2 = n2, e2[t3] = r2), r2;
          }, fetch: function(e2, t3) {
            return U(e2, function(n2) {
              N(t3[n2]) && (e2[n2] = t3[n2]);
            }), e2;
          }, string2object: function() {
            var e2, t3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "", n2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ",", r2 = {};
            return a(e2 = t3.split(n2)).call(e2, function(e3) {
              var t4 = e3.split("="), n3 = t4.shift();
              n3 && (r2[decodeURIComponent(n3)] = decodeURIComponent(t4.join("=")));
            }), r2;
          }, object2string: z, genUrlSep: function(e2) {
            return s(e2).call(e2, "?") < 0 ? "?" : "&";
          }, object2query: function(e2) {
            return z(e2, "&", true);
          }, url2origin: V, isFileInput: G, getKeys: function(e2, t3) {
            var n2 = u(e2);
            return t3 && l2(n2).call(n2, function(t4, n3) {
              var r2 = G(e2[t4]);
              return r2 === G(e2[n3]) ? 0 : r2 ? 1 : -1;
            }), n2;
          }, _get: function(e2, t3) {
            var n2, r2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0, o2 = t3.replace(/\[(\d+)\]/g, ".$1").split("."), s2 = e2, i2 = h(o2);
            try {
              for (i2.s(); !(n2 = i2.n()).done; ) {
                var a2 = n2.value;
                if (void 0 === (s2 = Object(s2)[a2]))
                  return r2;
              }
            } catch (e3) {
              i2.e(e3);
            } finally {
              i2.f();
            }
            return s2;
          }, getPromiseWithAbort: function(e2) {
            var t3 = {}, n2 = new m(function(e3, n3) {
              t3.abort = n3;
            });
            return t3.promise = m.race([e2, n2]), t3;
          } };
        }).call(this, n(73));
      }, function(e, t, n) {
        var r = n(33), o = n(718), s = r("Map");
        e.exports = { Map: s, set: o("set", 2), get: o("get", 1), has: o("has", 1), remove: o("delete", 1), proto: s.prototype };
      }, function(e, t, n) {
        (function(t2) {
          var r = n(15), o = n(7), s = n(303), i = n(48), a = n(22);
          var c = function() {
            "use strict";
            var e2 = "object" === (void 0 === t2 ? "undefined" : a(t2)) ? t2 : window, n2 = Math.pow(2, 53) - 1, c2 = /\bOpera/, u = Object.prototype, l2 = u.hasOwnProperty, m = u.toString;
            function p(e3) {
              return (e3 = String(e3)).charAt(0).toUpperCase() + r(e3).call(e3, 1);
            }
            function d(e3) {
              return e3 = v(e3), /^(?:webOS|i(?:OS|P))/.test(e3) ? e3 : p(e3);
            }
            function f2(e3, t3) {
              for (var n3 in e3)
                l2.call(e3, n3) && t3(e3[n3], n3, e3);
            }
            function g(e3) {
              var t3;
              return null == e3 ? p(e3) : r(t3 = m.call(e3)).call(t3, 8, -1);
            }
            function h(e3) {
              return String(e3).replace(/([ -])(?!$)/g, "$1?");
            }
            function y(e3, t3) {
              var r2 = null;
              return function(e4, t4) {
                var r3 = -1, o2 = e4 ? e4.length : 0;
                if ("number" == typeof o2 && o2 > -1 && o2 <= n2)
                  for (; ++r3 < o2; )
                    t4(e4[r3], r3, e4);
                else
                  f2(e4, t4);
              }(e3, function(n3, o2) {
                r2 = t3(r2, n3, o2, e3);
              }), r2;
            }
            function v(e3) {
              return String(e3).replace(/^ +| +$/g, "");
            }
            return function t3(n3) {
              var u2 = e2, l3 = n3 && "object" === a(n3) && "String" != g(n3);
              l3 && (u2 = n3, n3 = null);
              var p2 = u2.navigator || {}, b = p2.userAgent || "";
              n3 || (n3 = b);
              var T, S, M, k, x, C = l3 ? !!p2.likeChrome : /\bChrome\b/.test(n3) && !/internal|\n/i.test(m.toString()), I = l3 ? "Object" : "ScriptBridgingProxyObject", w = l3 ? "Object" : "Environment", _ = l3 && u2.java ? "JavaPackage" : g(u2.java), P = l3 ? "Object" : "RuntimeObject", A = /\bJava/.test(_) && u2.java, N = A && g(u2.environment) == w, O = A ? "a" : "α", E = A ? "b" : "β", R = u2.document || {}, j2 = u2.operamini || u2.opera, F = c2.test(F = l3 && j2 ? j2["[[Class]]"] : g(j2)) ? F : j2 = null, D = n3, U = [], L = null, B = n3 == b, q = B && j2 && "function" == typeof j2.version && j2.version(), H = y([{ label: "EdgeHTML", pattern: "Edge" }, "Trident", { label: "WebKit", pattern: "AppleWebKit" }, "iCab", "Presto", "NetFront", "Tasman", "KHTML", "Gecko"], function(e3, t4) {
                return e3 || RegExp("\\b" + (t4.pattern || h(t4)) + "\\b", "i").exec(n3) && (t4.label || t4);
              }), z = function(e3) {
                return y(e3, function(e4, t4) {
                  return e4 || RegExp("\\b" + (t4.pattern || h(t4)) + "\\b", "i").exec(n3) && (t4.label || t4);
                });
              }(["Adobe AIR", "Arora", "Avant Browser", "Breach", "Camino", "Electron", "Epiphany", "Fennec", "Flock", "Galeon", "GreenBrowser", "iCab", "Iceweasel", "K-Meleon", "Konqueror", "Lunascape", "Maxthon", { label: "Microsoft Edge", pattern: "Edge" }, "Midori", "Nook Browser", "PaleMoon", "PhantomJS", "Raven", "Rekonq", "RockMelt", { label: "Samsung Internet", pattern: "SamsungBrowser" }, "SeaMonkey", { label: "Silk", pattern: "(?:Cloud9|Silk-Accelerated)" }, "Sleipnir", "SlimBrowser", { label: "SRWare Iron", pattern: "Iron" }, "Sunrise", "Swiftfox", "Waterfox", "WebPositive", "Opera Mini", { label: "Opera Mini", pattern: "OPiOS" }, "Opera", { label: "Opera", pattern: "OPR" }, "Chrome", { label: "Chrome", pattern: "(?:HeadlessChrome)" }, { label: "Chrome Mobile", pattern: "(?:CriOS|CrMo)" }, { label: "Firefox", pattern: "(?:Firefox|Minefield)" }, { label: "Firefox for iOS", pattern: "FxiOS" }, { label: "IE", pattern: "IEMobile" }, { label: "IE", pattern: "MSIE" }, "Safari"]), W = Q([{ label: "BlackBerry", pattern: "BB10" }, "BlackBerry", { label: "Galaxy S", pattern: "GT-I9000" }, { label: "Galaxy S2", pattern: "GT-I9100" }, { label: "Galaxy S3", pattern: "GT-I9300" }, { label: "Galaxy S4", pattern: "GT-I9500" }, { label: "Galaxy S5", pattern: "SM-G900" }, { label: "Galaxy S6", pattern: "SM-G920" }, { label: "Galaxy S6 Edge", pattern: "SM-G925" }, { label: "Galaxy S7", pattern: "SM-G930" }, { label: "Galaxy S7 Edge", pattern: "SM-G935" }, "Google TV", "Lumia", "iPad", "iPod", "iPhone", "Kindle", { label: "Kindle Fire", pattern: "(?:Cloud9|Silk-Accelerated)" }, "Nexus", "Nook", "PlayBook", "PlayStation Vita", "PlayStation", "TouchPad", "Transformer", { label: "Wii U", pattern: "WiiU" }, "Wii", "Xbox One", { label: "Xbox 360", pattern: "Xbox" }, "Xoom"]), V = function(e3) {
                return y(e3, function(e4, t4, r2) {
                  return e4 || (t4[W] || t4[/^[a-z]+(?: +[a-z]+\b)*/i.exec(W)] || RegExp("\\b" + h(r2) + "(?:\\b|\\w*\\d)", "i").exec(n3)) && r2;
                });
              }({ Apple: { iPad: 1, iPhone: 1, iPod: 1 }, Archos: {}, Amazon: { Kindle: 1, "Kindle Fire": 1 }, Asus: { Transformer: 1 }, "Barnes & Noble": { Nook: 1 }, BlackBerry: { PlayBook: 1 }, Google: { "Google TV": 1, Nexus: 1 }, HP: { TouchPad: 1 }, HTC: {}, LG: {}, Microsoft: { Xbox: 1, "Xbox One": 1 }, Motorola: { Xoom: 1 }, Nintendo: { "Wii U": 1, Wii: 1 }, Nokia: { Lumia: 1 }, Samsung: { "Galaxy S": 1, "Galaxy S2": 1, "Galaxy S3": 1, "Galaxy S4": 1 }, Sony: { PlayStation: 1, "PlayStation Vita": 1 } }), G = function(e3) {
                return y(e3, function(e4, t4) {
                  var r2 = t4.pattern || h(t4);
                  return !e4 && (e4 = RegExp("\\b" + r2 + "(?:/[\\d.]+|[ \\w.]*)", "i").exec(n3)) && (e4 = function(e5, t5, n4) {
                    var r3 = { "10.0": "10", 6.4: "10 Technical Preview", 6.3: "8.1", 6.2: "8", 6.1: "Server 2008 R2 / 7", "6.0": "Server 2008 / Vista", 5.2: "Server 2003 / XP 64-bit", 5.1: "XP", 5.01: "2000 SP1", "5.0": "2000", "4.0": "NT", "4.90": "ME" };
                    return t5 && n4 && /^Win/i.test(e5) && !/^Windows Phone /i.test(e5) && (r3 = r3[/[\d.]+$/.exec(e5)]) && (e5 = "Windows " + r3), e5 = String(e5), t5 && n4 && (e5 = e5.replace(RegExp(t5, "i"), n4)), e5 = d(e5.replace(/ ce$/i, " CE").replace(/\bhpw/i, "web").replace(/\bMacintosh\b/, "Mac OS").replace(/_PowerPC\b/i, " OS").replace(/\b(OS X) [^ \d]+/i, "$1").replace(/\bMac (OS X)\b/, "$1").replace(/\/(\d)/, " $1").replace(/_/g, ".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i, "").replace(/\bx86\.64\b/gi, "x86_64").replace(/\b(Windows Phone) OS\b/, "$1").replace(/\b(Chrome OS \w+) [\d.]+\b/, "$1").split(" on ")[0]);
                  }(e4, r2, t4.label || t4)), e4;
                });
              }(["Windows Phone", "Android", "CentOS", { label: "Chrome OS", pattern: "CrOS" }, "Debian", "Fedora", "FreeBSD", "Gentoo", "Haiku", "Kubuntu", "Linux Mint", "OpenBSD", "Red Hat", "SuSE", "Ubuntu", "Xubuntu", "Cygwin", "Symbian OS", "hpwOS", "webOS ", "webOS", "Tablet OS", "Tizen", "Linux", "Mac OS X", "Macintosh", "Mac", "Windows 98;", "Windows "]);
              function Q(e3) {
                return y(e3, function(e4, t4) {
                  var r2 = t4.pattern || h(t4);
                  return !e4 && (e4 = RegExp("\\b" + r2 + " *\\d+[.\\w_]*", "i").exec(n3) || RegExp("\\b" + r2 + " *\\w+-[\\w]*", "i").exec(n3) || RegExp("\\b" + r2 + "(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)", "i").exec(n3)) && ((e4 = String(t4.label && !RegExp(r2, "i").test(t4.label) ? t4.label : e4).split("/"))[1] && !/[\d.]+/.test(e4[0]) && (e4[0] += " " + e4[1]), t4 = t4.label || t4, e4 = d(e4[0].replace(RegExp(r2, "i"), t4).replace(RegExp("; *(?:" + t4 + "[_-])?", "i"), " ").replace(RegExp("(" + t4 + ")[-_.]?(\\w)", "i"), "$1 $2"))), e4;
                });
              }
              if (H && (H = [H]), V && !W && (W = Q([V])), (T = /\bGoogle TV\b/.exec(W)) && (W = T[0]), /\bSimulator\b/i.test(n3) && (W = (W ? W + " " : "") + "Simulator"), "Opera Mini" == z && /\bOPiOS\b/.test(n3) && U.push("running in Turbo/Uncompressed mode"), "IE" == z && /\blike iPhone OS\b/.test(n3) ? (V = (T = t3(n3.replace(/like iPhone OS/, ""))).manufacturer, W = T.product) : /^iP/.test(W) ? (z || (z = "Safari"), G = "iOS" + ((T = / OS ([\d_]+)/i.exec(n3)) ? " " + T[1].replace(/_/g, ".") : "")) : "Konqueror" != z || /buntu/i.test(G) ? V && "Google" != V && (/Chrome/.test(z) && !/\bMobile Safari\b/i.test(n3) || /\bVita\b/.test(W)) || /\bAndroid\b/.test(G) && /^Chrome/.test(z) && /\bVersion\//i.test(n3) ? (z = "Android Browser", G = /\bAndroid\b/.test(G) ? G : "Android") : "Silk" == z ? (/\bMobi/i.test(n3) || (G = "Android", U.unshift("desktop mode")), /Accelerated *= *true/i.test(n3) && U.unshift("accelerated")) : "PaleMoon" == z && (T = /\bFirefox\/([\d.]+)\b/.exec(n3)) ? U.push("identifying as Firefox " + T[1]) : "Firefox" == z && (T = /\b(Mobile|Tablet|TV)\b/i.exec(n3)) ? (G || (G = "Firefox OS"), W || (W = T[1])) : !z || (T = !/\bMinefield\b/i.test(n3) && /\b(?:Firefox|Safari)\b/.exec(z)) ? (z && !W && /[\/,]|^[^(]+?\)/.test(r(n3).call(n3, o(n3).call(n3, T + "/") + 8)) && (z = null), (T = W || V || G) && (W || V || /\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(G)) && (z = /[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(G) ? G : T) + " Browser")) : "Electron" == z && (T = (/\bChrome\/([\d.]+)\b/.exec(n3) || 0)[1]) && U.push("Chromium " + T) : G = "Kubuntu", q || (q = y(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))", "Version", "HeadlessChrome", h(z), "(?:Firefox|Minefield|NetFront)"], function(e3, t4) {
                return e3 || (RegExp(t4 + "(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)", "i").exec(n3) || 0)[1] || null;
              })), (T = ("iCab" == H && s(q) > 3 ? "WebKit" : /\bOpera\b/.test(z) && (/\bOPR\b/.test(n3) ? "Blink" : "Presto")) || /\b(?:Midori|Nook|Safari)\b/i.test(n3) && !/^(?:Trident|EdgeHTML)$/.test(H) && "WebKit" || !H && /\bMSIE\b/i.test(n3) && ("Mac OS" == G ? "Tasman" : "Trident") || "WebKit" == H && /\bPlayStation\b(?! Vita\b)/i.test(z) && "NetFront") && (H = [T]), "IE" == z && (T = (/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(n3) || 0)[1]) ? (z += " Mobile", G = "Windows Phone " + (/\+$/.test(T) ? T : T + ".x"), U.unshift("desktop mode")) : /\bWPDesktop\b/i.test(n3) ? (z = "IE Mobile", G = "Windows Phone 8.x", U.unshift("desktop mode"), q || (q = (/\brv:([\d.]+)/.exec(n3) || 0)[1])) : "IE" != z && "Trident" == H && (T = /\brv:([\d.]+)/.exec(n3)) && (z && U.push("identifying as " + z + (q ? " " + q : "")), z = "IE", q = T[1]), B) {
                if (k = "global", x = null != (M = u2) ? a(M[k]) : "number", /^(?:boolean|number|string|undefined)$/.test(x) || "object" == x && !M[k])
                  g(T = u2.runtime) == I ? (z = "Adobe AIR", G = T.flash.system.Capabilities.os) : g(T = u2.phantom) == P ? (z = "PhantomJS", q = (T = T.version || null) && T.major + "." + T.minor + "." + T.patch) : "number" == typeof R.documentMode && (T = /\bTrident\/(\d+)/i.exec(n3)) ? (q = [q, R.documentMode], (T = +T[1] + 4) != q[1] && (U.push("IE " + q[1] + " mode"), H && (H[1] = ""), q[1] = T), q = "IE" == z ? String(q[1].toFixed(1)) : q[0]) : "number" == typeof R.documentMode && /^(?:Chrome|Firefox)\b/.test(z) && (U.push("masking as " + z + " " + q), z = "IE", q = "11.0", H = ["Trident"], G = "Windows");
                else if (A && (D = (T = A.lang.System).getProperty("os.arch"), G = G || T.getProperty("os.name") + " " + T.getProperty("os.version")), N) {
                  try {
                    q = u2.require("ringo/engine").version.join("."), z = "RingoJS";
                  } catch (e3) {
                    (T = u2.system) && T.global.system == u2.system && (z = "Narwhal", G || (G = T[0].os || null));
                  }
                  z || (z = "Rhino");
                } else
                  "object" === a(u2.process) && !u2.process.browser && (T = u2.process) && ("object" === a(T.versions) && ("string" == typeof T.versions.electron ? (U.push("Node " + T.versions.node), z = "Electron", q = T.versions.electron) : "string" == typeof T.versions.nw && (U.push("Chromium " + q, "Node " + T.versions.node), z = "NW.js", q = T.versions.nw)), z || (z = "Node.js", D = T.arch, G = T.platform, q = (q = /[\d.]+/.exec(T.version)) ? q[0] : null));
                G = G && d(G);
              }
              if (q && (T = /(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(q) || /(?:alpha|beta)(?: ?\d)?/i.exec(n3 + ";" + (B && p2.appMinorVersion)) || /\bMinefield\b/i.test(n3) && "a") && (L = /b/i.test(T) ? "beta" : "alpha", q = q.replace(RegExp(T + "\\+?$"), "") + ("beta" == L ? E : O) + (/\d+\+?/.exec(T) || "")), "Fennec" == z || "Firefox" == z && /\b(?:Android|Firefox OS)\b/.test(G))
                z = "Firefox Mobile";
              else if ("Maxthon" == z && q)
                q = q.replace(/\.[\d.]+/, ".x");
              else if (/\bXbox\b/i.test(W))
                "Xbox 360" == W && (G = null), "Xbox 360" == W && /\bIEMobile\b/.test(n3) && U.unshift("mobile mode");
              else if (!/^(?:Chrome|IE|Opera)$/.test(z) && (!z || W || /Browser|Mobi/.test(z)) || "Windows CE" != G && !/Mobi/i.test(n3))
                if ("IE" == z && B)
                  try {
                    null === u2.external && U.unshift("platform preview");
                  } catch (e3) {
                    U.unshift("embedded");
                  }
                else
                  (/\bBlackBerry\b/.test(W) || /\bBB10\b/.test(n3)) && (T = (RegExp(W.replace(/ +/g, " *") + "/([.\\d]+)", "i").exec(n3) || 0)[1] || q) ? (G = ((T = [T, /BB10/.test(n3)])[1] ? (W = null, V = "BlackBerry") : "Device Software") + " " + T[0], q = null) : this != f2 && "Wii" != W && (B && j2 || /Opera/.test(z) && /\b(?:MSIE|Firefox)\b/i.test(n3) || "Firefox" == z && /\bOS X (?:\d+\.){2,}/.test(G) || "IE" == z && (G && !/^Win/.test(G) && q > 5.5 || /\bWindows XP\b/.test(G) && q > 8 || 8 == q && !/\bTrident\b/.test(n3))) && !c2.test(T = t3.call(f2, n3.replace(c2, "") + ";")) && T.name && (T = "ing as " + T.name + ((T = T.version) ? " " + T : ""), c2.test(z) ? (/\bIE\b/.test(T) && "Mac OS" == G && (G = null), T = "identify" + T) : (T = "mask" + T, z = F ? d(F.replace(/([a-z])([A-Z])/g, "$1 $2")) : "Opera", /\bIE\b/.test(T) && (G = null), B || (q = null)), H = ["Presto"], U.push(T));
              else
                z += " Mobile";
              if (T = (/\bAppleWebKit\/([\d.]+\+?)/i.exec(n3) || 0)[1]) {
                var J, K;
                if (T = [s(T.replace(/\.(\d)$/, ".0$1")), T], "Safari" == z && "+" == r(J = T[1]).call(J, -1))
                  z = "WebKit Nightly", L = "alpha", q = r(K = T[1]).call(K, 0, -1);
                else
                  q != T[1] && q != (T[2] = (/\bSafari\/([\d.]+\+?)/i.exec(n3) || 0)[1]) || (q = null);
                T[1] = (/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(n3) || 0)[1], 537.36 == T[0] && 537.36 == T[2] && s(T[1]) >= 28 && "WebKit" == H && (H = ["Blink"]), B && (C || T[1]) ? (H && (H[1] = "like Chrome"), T = T[1] || ((T = T[0]) < 530 ? 1 : T < 532 ? 2 : T < 532.05 ? 3 : T < 533 ? 4 : T < 534.03 ? 5 : T < 534.07 ? 6 : T < 534.1 ? 7 : T < 534.13 ? 8 : T < 534.16 ? 9 : T < 534.24 ? 10 : T < 534.3 ? 11 : T < 535.01 ? 12 : T < 535.02 ? "13+" : T < 535.07 ? 15 : T < 535.11 ? 16 : T < 535.19 ? 17 : T < 536.05 ? 18 : T < 536.1 ? 19 : T < 537.01 ? 20 : T < 537.11 ? "21+" : T < 537.13 ? 23 : T < 537.18 ? 24 : T < 537.24 ? 25 : T < 537.36 ? 26 : "Blink" != H ? "27" : "28")) : (H && (H[1] = "like Safari"), T = (T = T[0]) < 400 ? 1 : T < 500 ? 2 : T < 526 ? 3 : T < 533 ? 4 : T < 534 ? "4+" : T < 535 ? 5 : T < 537 ? 6 : T < 538 ? 7 : T < 601 ? 8 : "8"), H && (H[1] += " " + (T += "number" == typeof T ? ".x" : /[.+]/.test(T) ? "" : "+")), "Safari" == z && (!q || i(q) > 45) && (q = T);
              }
              "Opera" == z && (T = /\bzbov|zvav$/.exec(G)) ? (z += " ", U.unshift("desktop mode"), "zvav" == T ? (z += "Mini", q = null) : z += "Mobile", G = G.replace(RegExp(" *" + T + "$"), "")) : "Safari" == z && /\bChrome\b/.exec(H && H[1]) && (U.unshift("desktop mode"), z = "Chrome Mobile", q = null, /\bOS X\b/.test(G) ? (V = "Apple", G = "iOS 4.3+") : G = null), q && 0 == o(q).call(q, T = /[\d.]+$/.exec(G)) && o(n3).call(n3, "/" + T + "-") > -1 && (G = v(G.replace(T, ""))), H && !/\b(?:Avant|Nook)\b/.test(z) && (/Browser|Lunascape|Maxthon/.test(z) || "Safari" != z && /^iOS/.test(G) && /\bSafari\b/.test(H[1]) || /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(z) && H[1]) && (T = H[H.length - 1]) && U.push(T), U.length && (U = ["(" + U.join("; ") + ")"]), V && W && o(W).call(W, V) < 0 && U.push("on " + V), W && U.push((/^on /.test(U[U.length - 1]) ? "" : "on ") + W), G && (T = / ([\d.+]+)$/.exec(G), S = T && "/" == G.charAt(G.length - T[0].length - 1), G = { architecture: 32, family: T && !S ? G.replace(T[0], "") : G, version: T ? T[1] : null, toString: function() {
                var e3 = this.version;
                return this.family + (e3 && !S ? " " + e3 : "") + (64 == this.architecture ? " 64-bit" : "");
              } }), (T = /\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(D)) && !/\bi686\b/i.test(D) ? (G && (G.architecture = 64, G.family = G.family.replace(RegExp(" *" + T), "")), z && (/\bWOW64\b/i.test(n3) || B && /\w(?:86|32)$/.test(p2.cpuClass || p2.platform) && !/\bWin64; x64\b/i.test(n3)) && U.unshift("32-bit")) : G && /^OS X/.test(G.family) && "Chrome" == z && s(q) >= 39 && (G.architecture = 64), n3 || (n3 = null);
              var $ = {};
              return $.description = n3, $.layout = H && H[0], $.manufacturer = V, $.name = z, $.prerelease = L, $.product = W, $.ua = n3, $.version = z && q, $.os = G || { architecture: null, family: null, version: null, toString: function() {
                return "null";
              } }, $.parse = t3, $.toString = function() {
                return this.description || "";
              }, $.version && U.unshift(q), $.name && U.unshift(z), G && z && (G != String(G).split(" ")[0] || G != z.split(" ")[0] && !W) && U.push(W ? "(" + G + ")" : "on " + G), U.length && ($.description = U.join(" ")), $;
            }();
          }();
          e.exports = c;
        }).call(this, n(73));
      }, function(e, t, n) {
        var r = n(12), o = r({}.toString), s = r("".slice);
        e.exports = function(e2) {
          return s(o(e2), 8, -1);
        };
      }, function(e, t, n) {
        var r = n(33);
        e.exports = r("navigator", "userAgent") || "";
      }, function(e, t, n) {
        var r = n(165), o = n(17), s = n(65), i = n(21)("toStringTag"), a = Object, c = "Arguments" == s(function() {
          return arguments;
        }());
        e.exports = r ? s : function(e2) {
          var t2, n2, r2;
          return void 0 === e2 ? "Undefined" : null === e2 ? "Null" : "string" == typeof (n2 = function(e3, t3) {
            try {
              return e3[t3];
            } catch (e4) {
            }
          }(t2 = a(e2), i)) ? n2 : c ? s(t2) : "Object" == (r2 = s(t2)) && o(t2.callee) ? "Arguments" : r2;
        };
      }, function(e, t, n) {
        var r = n(61);
        e.exports = function(e2, t2, n2, o) {
          return o && o.enumerable ? e2[t2] = n2 : r(e2, t2, n2), e2;
        };
      }, function(e, t, n) {
        n(86);
        var r = n(356), o = n(14), s = n(67), i = n(61), a = n(103), c = n(21)("toStringTag");
        for (var u in r) {
          var l2 = o[u], m = l2 && l2.prototype;
          m && s(m) !== c && i(m, c, u), a[u] = a.Array;
        }
      }, function(e, t, n) {
        "use strict";
        var r = n(31), o = TypeError, s = function(e2) {
          var t2, n2;
          this.promise = new e2(function(e3, r2) {
            if (void 0 !== t2 || void 0 !== n2)
              throw o("Bad Promise constructor");
            t2 = e3, n2 = r2;
          }), this.resolve = r(t2), this.reject = r(n2);
        };
        e.exports.f = function(e2) {
          return new s(e2);
        };
      }, function(e, t, n) {
        e.exports = n(427);
      }, function(e, t, n) {
        e.exports = n(475);
      }, function(e, t) {
        var n;
        n = function() {
          return this;
        }();
        try {
          n = n || new Function("return this")();
        } catch (e2) {
          "object" == typeof window && (n = window);
        }
        e.exports = n;
      }, function(e, t, n) {
        var r = n(34), o = n(12), s = n(127), i = n(42), a = n(46), c = n(164), u = o([].push), l2 = function(e2) {
          var t2 = 1 == e2, n2 = 2 == e2, o2 = 3 == e2, l3 = 4 == e2, m = 6 == e2, p = 7 == e2, d = 5 == e2 || m;
          return function(f2, g, h, y) {
            for (var v, b, T = i(f2), S = s(T), M = r(g, h), k = a(S), x = 0, C = y || c, I = t2 ? C(f2, k) : n2 || p ? C(f2, 0) : void 0; k > x; x++)
              if ((d || x in S) && (b = M(v = S[x], x, T), e2))
                if (t2)
                  I[x] = b;
                else if (b)
                  switch (e2) {
                    case 3:
                      return true;
                    case 5:
                      return v;
                    case 6:
                      return x;
                    case 2:
                      u(I, v);
                  }
                else
                  switch (e2) {
                    case 4:
                      return false;
                    case 7:
                      u(I, v);
                  }
            return m ? -1 : o2 || l3 ? l3 : I;
          };
        };
        e.exports = { forEach: l2(0), map: l2(1), filter: l2(2), some: l2(3), every: l2(4), find: l2(5), findIndex: l2(6), filterReject: l2(7) };
      }, function(e, t, n) {
        var r = n(771);
        r.fn = r.prototype, e.exports = r, n(773), n(774), n(775), n(776), n(777), n(778), n(779), n(780), n(781), n(782), n(783);
      }, function(e, t, n) {
        var r = n(22), o = n(4), s = n(8), i = n(16), a = n(2), c = n(9), u = n(15), l2 = n(88), m = n(89), p = n(72), d = n(32);
        function f2(e2, t2) {
          var n2 = void 0 !== m && p(e2) || e2["@@iterator"];
          if (!n2) {
            if (d(e2) || (n2 = function(e3, t3) {
              var n3;
              if (!e3)
                return;
              if ("string" == typeof e3)
                return g(e3, t3);
              var r3 = u(n3 = Object.prototype.toString.call(e3)).call(n3, 8, -1);
              "Object" === r3 && e3.constructor && (r3 = e3.constructor.name);
              if ("Map" === r3 || "Set" === r3)
                return l2(e3);
              if ("Arguments" === r3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r3))
                return g(e3, t3);
            }(e2)) || t2 && e2 && "number" == typeof e2.length) {
              n2 && (e2 = n2);
              var r2 = 0, o2 = function() {
              };
              return { s: o2, n: function() {
                return r2 >= e2.length ? { done: true } : { done: false, value: e2[r2++] };
              }, e: function(e3) {
                throw e3;
              }, f: o2 };
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          }
          var s2, i2 = true, a2 = false;
          return { s: function() {
            n2 = n2.call(e2);
          }, n: function() {
            var e3 = n2.next();
            return i2 = e3.done, e3;
          }, e: function(e3) {
            a2 = true, s2 = e3;
          }, f: function() {
            try {
              i2 || null == n2.return || n2.return();
            } finally {
              if (a2)
                throw s2;
            }
          } };
        }
        function g(e2, t2) {
          (null == t2 || t2 > e2.length) && (t2 = e2.length);
          for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
            r2[n2] = e2[n2];
          return r2;
        }
        var h = n(0), y = h.undef, v = h.notundef, b = h.exist, T = n(195), S = n(297), M = { p2p: 0, team: 1, superTeam: 5 }, k = { 0: "p2p", 1: "team", 5: "superTeam" }, x = o(M), C = S.typeMap, I = S.validTypes;
        function w(e2) {
          h.verifyOptions(e2, "scene to type", "msg::Message"), h.verifyParamValid("scene", e2.scene, x, "msg::Message");
          this.scene = M[e2.scene], this.to = "" + e2.to, this.type = C[e2.type], this.resend = e2.resend ? 1 : 0, e2.resend ? (h.verifyOptions(e2, "idClient", "msg::Message"), this.idClient = e2.idClient) : this.idClient = h.guid(), v(e2.subType) && (h.isInt(+e2.subType) && +e2.subType > 0 ? this.subType = +e2.subType : h.onParamError("subType只能是大于0的整数", "msg::Message"));
          var t2 = e2.replyMsg;
          t2 && t2.idServer && t2.from && t2.to && t2.time && (this.replyMsgFromAccount = t2.from, this.replyMsgToAccount = t2.to, this.replyMsgTime = t2.time, this.replyMsgIdServer = t2.idServer, this.replyMsgIdClient = t2.idClient, t2.threadMsgFromAccount && t2.threadMsgIdServer && t2.threadMsgTime && t2.threadMsgToAccount ? (this.threadMsgFromAccount = t2.threadMsgFromAccount, this.threadMsgToAccount = t2.threadMsgToAccount, this.threadMsgTime = t2.threadMsgTime, this.threadMsgIdServer = t2.threadMsgIdServer, this.threadMsgIdClient = t2.threadMsgIdClient) : (this.threadMsgFromAccount = t2.from, this.threadMsgToAccount = t2.to, this.threadMsgTime = t2.time, this.threadMsgIdServer = t2.idServer, this.threadMsgIdClient = t2.idClient)), v(e2.text) && (this.body = "" + e2.text), v(e2.custom) && ("object" === r(e2.custom) ? this.custom = s(e2.custom) : this.custom = "" + e2.custom), v(e2.body) && (this.body = "" + e2.body), v(e2.pushContent) && (this.pushContent = "" + e2.pushContent), v(e2.pushPayload) && (this.pushPayload = "" + e2.pushPayload);
          var n2 = e2.apns;
          if (v(n2) && "team" === e2.scene) {
            var o2 = n2.accounts;
            v(o2) && h.verifyParamType("apns.accounts", o2, "array", "msg::Message"), this.apnsAccounts = o2 ? s(o2) : "#%@all@%#", this.apnsContent = n2.content || e2.pushContent || "", h.verifyBooleanWithDefault(n2, "forcePush", true, "options.apns", "msg::Message"), this.apnsForcePush = n2.forcePush ? 1 : 0;
          }
          var i2 = e2.robotInfo;
          v(i2) && ("team" === e2.scene && h.verifyOptions(e2.robotInfo, "account", "msg::Message::robotInfo scene === team"), i2.function && (this.robotInfoFunction = i2.function), i2.topic && (this.robotInfoTopic = i2.topic), i2.customContent && (this.robotInfoCustomContent = i2.customContent), i2.account && (this.robotInfoAccount = i2.account)), v(e2.isHistoryable) && (this.isHistoryable = e2.isHistoryable ? 1 : 0), v(e2.isRoamingable) && (this.isRoamingable = e2.isRoamingable ? 1 : 0), v(e2.isSyncable) && (this.isSyncable = e2.isSyncable ? 1 : 0), v(e2.cc) && (this.cc = e2.cc ? 1 : 0), v(e2.env) && (this.env = e2.env), v(e2.isPushable) && (this.isPushable = e2.isPushable ? 1 : 0), v(e2.isOfflinable) && (this.isOfflinable = e2.isOfflinable ? 1 : 0), v(e2.isUnreadable) && (this.isUnreadable = e2.isUnreadable ? 1 : 0), v(e2.needPushNick) && (this.needPushNick = e2.needPushNick ? 1 : 0), v(e2.needMsgReceipt) && (this.needMsgReceipt = e2.needMsgReceipt ? 1 : 0), v(e2.yidunEnable) && (this.yidunEnable = e2.yidunEnable ? 1 : 0), this.needUpdateSession = false === e2.needUpdateSession ? 0 : 1, v(e2.antiSpamUsingYidun) && (this.antiSpamUsingYidun = e2.antiSpamUsingYidun ? 1 : 0), v(e2.clientAntiSpam) && (this.clientAntiSpam = e2.clientAntiSpam ? 1 : 0), v(e2.antiSpamContent) && ("object" === r(e2.antiSpamContent) ? this.antiSpamContent = s(e2.antiSpamContent) : this.antiSpamContent = "" + e2.antiSpamContent), v(e2.antiSpamBusinessId) && ("object" === r(e2.antiSpamBusinessId) ? this.antiSpamBusinessId = s(e2.antiSpamBusinessId) : this.antiSpamBusinessId = "" + e2.antiSpamBusinessId), v(e2.yidunAntiCheating) && (this.yidunAntiCheating = e2.yidunAntiCheating), v(e2.yidunAntiSpamExt) && (this.yidunAntiSpamExt = e2.yidunAntiSpamExt);
        }
        h.merge(w.prototype, S.prototype), w.prototype.getScene = function() {
          return k[this.scene];
        }, w.getType = S.getType, w.setFlow = S.setFlow, w.reverse = function(e2) {
          var t2, n2 = k[e2.scene];
          if (t2 = "1" === e2.delete ? { delete: true, scene: n2 || e2.scene, from: e2.from, time: +e2.time, to: "" + e2.to } : { scene: n2 || e2.scene, from: e2.from, fromNick: e2.fromNick, fromClientType: T.reverseType(e2.fromClientType), fromDeviceId: e2.fromDeviceId, to: "" + e2.to, time: +e2.time, type: w.getType(e2), text: b(e2.body) ? e2.body : e2.text || "", isHistoryable: y(e2.isHistoryable) || 1 == +e2.isHistoryable, isRoamingable: y(e2.isRoamingable) || 1 == +e2.isRoamingable, isSyncable: y(e2.isSyncable) || 1 == +e2.isSyncable, cc: y(e2.cc) || 1 == +e2.cc, isPushable: y(e2.isPushable) || 1 == +e2.isPushable, isOfflinable: y(e2.isOfflinable) || 1 == +e2.isOfflinable, isUnreadable: y(e2.isUnreadable) || 1 == +e2.isUnreadable, isReplyMsg: y(e2.isReplyMsg) || 1 == +e2.isReplyMsg, needPushNick: y(e2.needPushNick) || 1 == +e2.needPushNick, needMsgReceipt: 1 == +e2.needMsgReceipt, isLocal: false }, e2.isInBlackList && (t2.isInBlackList = 1 == +e2.isInBlackList, t2.isInBlackList && (e2.status = "fail")), v(e2.isMuted) && (t2.isMuted = 1 == +e2.isMuted), v(e2.resend) && (t2.resend = 1 == +e2.resend), v(e2.idClient) && (t2.idClient = e2.idClient), v(e2.idServer) && (t2.idServer = "" + e2.idServer), v(e2.userUpdateTime) && (t2.userUpdateTime = +e2.userUpdateTime), v(e2.custom) && (t2.custom = e2.custom), v(e2.callbackExt) && (t2.callbackExt = e2.callbackExt), v(e2.subType) && (t2.subType = +e2.subType), v(e2.pushContent) && (t2.pushContent = e2.pushContent), v(e2.pushPayload) && (t2.pushPayload = e2.pushPayload), v(e2.tempTeamMemberCount) && (t2.tempTeamMemberCount = +e2.tempTeamMemberCount), v(e2.yidunAntiSpamRes) && (t2.yidunAntiSpamRes = e2.yidunAntiSpamRes), v(e2.apnsAccounts)) {
            if (t2.apns = {}, "#%@all@%#" !== e2.apnsAccounts) {
              var r2 = e2.apnsAccounts;
              try {
                t2.apns.accounts = JSON.parse(r2);
              } catch (e3) {
                t2.apns.accounts = [];
              }
            }
            t2.apns.content = e2.apnsContent || "", t2.apns.forcePush = 1 == +e2.apnsForcePush;
          }
          if (v(e2.robotInfoFunction) && (t2.robotInfo = t2.robotInfo || {}, e2.robotInfoFunction && (t2.robotInfo.function = e2.robotInfoFunction)), v(e2.robotInfoCustomContent) && (t2.robotInfo = t2.robotInfo || {}, e2.robotInfoCustomContent && (t2.robotInfo.customContent = e2.robotInfoCustomContent)), v(e2.robotInfoTopic) && (t2.robotInfo = t2.robotInfo || {}, e2.robotInfoTopic && (t2.robotInfo.topic = e2.robotInfoTopic)), v(e2.robotInfoAccount) && (t2.robotInfo = t2.robotInfo || {}, e2.robotInfoAccount && (t2.robotInfo.account = e2.robotInfoAccount)), v(e2.needUpdateSession) && (t2.needUpdateSession = 1 == +e2.needUpdateSession), t2.status = e2.status || "success", v(i(e2)) && (t2.filter = i(e2)), e2.replyMsgIdServer && e2.threadMsgIdServer) {
            var o2 = ["replyMsgFromAccount", "replyMsgToAccount", "replyMsgTime", "replyMsgIdServer", "replyMsgIdClient", "threadMsgFromAccount", "threadMsgToAccount", "threadMsgTime", "threadMsgIdServer", "threadMsgIdClient"];
            a(o2).call(o2, function(n3) {
              t2[n3] = e2[n3];
            }), t2.replyMsgTime = +t2.replyMsgTime, t2.threadMsgTime = +t2.threadMsgTime;
          }
          return t2;
        }, w.setExtra = function(e2, t2) {
          e2.target = w.getMsgTarget(e2, t2), e2.sessionId = e2.scene + "-" + e2.target, S.setFlow(e2, t2);
        }, w.getMsgTarget = function(e2, t2) {
          return "p2p" === e2.scene ? e2.to === t2 ? e2.from : e2.to : "team" === e2.scene || "superTeam" === e2.scene ? e2.to : void 0;
        }, w.deduplication = function(e2) {
          var t2, n2, r2 = {}, s2 = f2(e2);
          try {
            for (s2.s(); !(n2 = s2.n()).done; ) {
              var i2 = n2.value, a2 = r2[i2.idClient];
              a2 && a2.time > i2.time || (r2[i2.idClient] = i2);
            }
          } catch (e3) {
            s2.e(e3);
          } finally {
            s2.f();
          }
          return c(t2 = o(r2)).call(t2, function(e3) {
            return r2[e3];
          });
        }, w.sortMsgs = function(e2) {
          return e2 = u(e2).call(e2, 0), h.sortObjArray(e2, { sortPath: "time" }), e2;
        }, w.getLastMsg = function(e2) {
          return (e2 = w.sortMsgs(e2))[e2.length - 1];
        }, w.getLastNotIgnoredMsg = function(e2) {
          for (var t2 = null, n2 = (e2 = w.sortMsgs(e2)).length - 1; n2 >= 0; n2--)
            if (!(t2 = e2[n2]).ignore)
              return t2;
          return null;
        }, w.getMaxTimetag = function(e2) {
          return w.getLastMsg(e2).time;
        }, w.validScenes = x, w.validTypes = I, w.sceneMap = M, w.sceneReverseMap = k, e.exports = w;
      }, function(e, t, n) {
        var r = n(22), o = n(18), s = n(32), i = n(2), a = n(378), c = n(7), u = n(4), l2 = n(8), m = n(3), p = n(173), d = n(0), f2 = d.notundef, g = n(558), h = n(11), y = (n(186), n(45)), v = n(584).wrapSafeCallback, b = n(25).reportAPI, T = n(156);
        function S() {
        }
        var M = {};
        S.getInstance = function(e2) {
          e2 = x(e2), d.verifyOptions(e2, "account", "api::Base.getInstance");
          var t2 = this.genInstanceName(e2), n2 = M[t2];
          return n2 ? S.updateInstance(n2, e2) : n2 = M[t2] = new this(e2), n2;
        }, S.updateInstance = function(e2, t2) {
          e2.setOptions(t2), e2.connect();
        };
        var k = S.fn = S.prototype = o(new p()), x = function(e2) {
          return e2.nosSurvivalTime ? (d.verifyParamType("nosSurvivalTime", e2.nosSurvivalTime, "number", "api::Base.getInstance"), d.verifyParamMin("nosSurvivalTime", e2.nosSurvivalTime, 86400, "api::Base.getInstance")) : e2.nosSurvivalTime = 1 / 0, e2;
        };
        k.updatePrivateConf = function(e2) {
          if (b({ instance: this, className: "ApiBaseFn", funcName: "updatePrivateConf", hasCallback: false }), e2 && "object" === r(e2.privateConf)) {
            var t2 = e2.privateConf;
            "string" == typeof t2.lbs_web && (e2.lbsUrl = t2.lbs_web), "boolean" == typeof t2.link_ssl_web && (e2.secure = t2.link_ssl_web), "boolean" == typeof t2.https_enabled && (e2.httpsEnabled = t2.https_enabled), e2.uploadUrl = t2.nos_uploader_web ? t2.nos_uploader_web : null, e2.chunkUploadUrl = t2.nos_uploader_web ? t2.nos_uploader_web : null, e2.replaceUrl = t2.nos_downloader ? t2.nos_downloader : null, e2.downloadUrl = t2.nos_accelerate ? t2.nos_accelerate : null, e2.downloadHost = t2.nos_accelerate_host ? t2.nos_accelerate_host : null, e2.downloadHostList = t2.nos_accelerate_host_list || [], e2.downloadHost && e2.downloadHostList.push(e2.downloadHost), e2.nosCdnEnable = false !== t2.nos_cdn_enable, e2.ntServerAddress = t2.nt_server || null, e2.kibanaServer = t2.kibana_server, e2.statisticServer = t2.statistic_server, e2.reportGlobalServer = t2.report_global_server, e2.ipVersion = t2.ip_protocol_version || e2.ipVersion, e2.defaultLink = t2.link_web || e2.defaultLink, e2.ipv6DefaultLink = t2.link_ipv6_web || e2.ipv6DefaultLink, "string" == typeof t2.nos_lbs ? e2.nosLbsUrls = [t2.nos_lbs] : e2.nosLbsUrls = [], s(t2.nos_edge_list) && (e2.edgeList = t2.nos_edge_list);
          }
          return null === e2.ntServerAddress || "" === e2.ntServerAddress ? h.ntServerAddress = null : h.ntServerAddress = e2.ntServerAddress, h.uploadUrl = e2.uploadUrl || h.uploadUrl, h.chunkUploadUrl = e2.chunkUploadUrl || h.chunkUploadUrl, h.downloadUrl = e2.downloadUrl || h.downloadUrl, h.downloadHost = e2.downloadHost || h.downloadHost, h.downloadHostList = e2.downloadHostList && e2.downloadHostList.length > 0 ? e2.downloadHostList : h.downloadHostList, h.nosCdnEnable = false !== e2.nosCdnEnable, h.replaceUrl = e2.replaceUrl || h.replaceUrl, h.httpsEnabled = e2.httpsEnabled || h.httpsEnabled, e2.probe_ipv4_url && (h.ipProbeAddr.ipv4 = e2.probe_ipv4_url), e2.probe_ipv6_url && (h.ipProbeAddr.ipv6 = e2.probe_ipv6_url), e2;
        }, k.init = function(e2) {
          d.verifyOptions(e2, "account", "api::Base.init"), e2 = this.updatePrivateConf(e2), d.verifyBooleanWithDefault(e2, "exifOrientation", true, "", "api::Base.init"), e2.lbsBackup = void 0 === e2.lbsBackup || e2.lbsBackup;
          var t2 = this.account = e2.account = e2.account + "", n2 = e2.constructor.genInstanceName(e2), r2 = M[n2];
          if (e2._disableSingleton && (r2 = null), r2)
            return S.updateInstance(r2, e2), r2;
          this.logger = e2.logger = new g({ debug: e2.debug, logFunc: e2.logFunc, prefix: this.subType, dbLog: false !== e2.dbLog, account: e2.account, expire: e2.expire, logLevel: e2.logLevel }), this.options = v(e2, this), e2.api = this;
          var o2 = this.protocol = new e2.Protocol(e2);
          return o2.name = "Protocol-" + n2, o2.account = t2, o2.api = this, o2.message = this.message = new e2.Message({ account: t2 }), this.reporter = o2.reporter, this.statusProtector = o2.statusProtector, this.reporterHook = o2.reporterHook, this.abtInfo = {}, ("boolean" == typeof d.get(e2, "privateConf.isABTestEnable") ? e2.privateConf.isABTestEnable : h.privateConf.isABTestEnable) && this.abTestConfigRequset(), this.name = n2, M[n2] = this, this;
        }, k.destroy = function(e2) {
          var t2 = this;
          (e2 = e2 || {}).done = b({ instance: this, className: "ApiBaseFn", funcName: "destroy", done: e2.done });
          var n2 = this;
          if (!n2.__beginDestroy) {
            var o2;
            n2.__beginDestroy = true, e2 = e2 || {};
            var s2, l3 = this.name;
            if (this.logger.warn("destroy::start"), !l3)
              return this.logger && this.logger.warn && this.logger.warn("destroy::no instanceName"), void (n2.__beginDestroy = void 0);
            if (this.protocol && (o2 = this.protocol.connectTimer), this.protocol && this.protocol.resetPush && this.protocol.resetPush(), this.eventNames && "function" == typeof this.eventNames)
              i(s2 = this.eventNames()).call(s2, function(e3) {
                delete t2._events[e3];
              });
            this.disconnect({ done: function(t3) {
              var s3, m2, p2;
              n2.logger.warn("ApiBase::destroy: instance destroyed ...\n\n"), n2.__beginDestroy = void 0, n2.reporter.destroy(), n2.statusProtector.destroy(), n2.reporterHook.destroy(), i(s3 = a(n2.options)).call(s3, function(e3) {
                0 === c(e3).call(e3, "on") && (n2.options[e3] = function() {
                }, n2.protocol.options[e3] = function() {
                }, n2.protocol.api.options[e3] = function() {
                });
              }), n2.logger.destroy(), "object" === r(n2.protocol.sessionSet) && i(m2 = u(n2.protocol.sessionSet)).call(m2, function(e3) {
                n2.protocol.sessionSet[e3].unreadMsgs = [], n2.protocol.sessionSet[e3] = void 0;
              }), n2.protocol.syncResult = {}, n2.db && n2.db.close();
              var d2 = n2.protocol;
              i(p2 = a(n2)).call(p2, function(e3) {
                n2[e3] = void 0;
              }), M && (M[l3] = null, clearTimeout(o2)), d2 && (d2.__destroyed = true), e2.done instanceof Function && e2.done(t3);
            } });
          }
        }, k.setOptions = function(e2) {
          var t2 = T(e2);
          t2 = v(t2, this), this.protocol.setOptions(t2);
        }, k.abTestConfigRequset = function() {
          var e2 = this, t2 = e2.options.abTestUrl || "https://abt-online.netease.im/v1/api/abt/client/getExperimentInfo", n2 = { projectKey: "im1_sdk_abtest_web", appKey: e2.options.appKey, osType: "Web", sdkVersion: e2.info.version, deviceId: y.deviceId }, r2 = l2({ clientInfo: n2 });
          this.protocol.adaptersRequest(t2, { method: "POST", timeout: 5e3, headers: { "Content-Type": "application/json" }, data: r2, onload: function(t3) {
            var n3 = JSON.parse(t3);
            e2.abtInfo = n3.data.abtInfo || {}, e2.logger && e2.logger.info("abTestConfigRequset::success", e2.abtInfo);
          }, onerror: function() {
            e2.logger && e2.logger.info("abTestConfigRequset::fail");
          } }, { exception_service: 7 });
        }, k.processCallback = function(e2, t2) {
          C(e2, t2);
        }, k.processCallbackPromise = function(e2, t2) {
          return new m(function(n2, r2) {
            C(e2, t2, true, n2, r2);
          });
        };
        var C = function(e2, t2, n2, r2, o2) {
          var s2 = "api::processCallback";
          n2 && (s2 = "api::processCallbackPromise"), d.verifyCallback(e2, "done", s2), e2.callback = function(i2, a2, c2) {
            var u2 = e2.callback.options;
            if (a2 = a2 || u2, t2 && (a2 = u2), d.isFunction(e2.cbaop)) {
              var l3 = e2.cbaop(i2, a2);
              f2(l3) && (a2 = l3);
            }
            var m2 = e2.done;
            d.isObject(a2) && (delete a2.done, delete a2.cb, delete a2.callback), n2 ? i2 ? o2({ message: "生成接口回调错误", callFunc: s2, event: i2 }) : r2(a2) : m2(i2, a2, c2);
          }, e2.callback.options = d.copy(e2);
        };
        k.processPs = function(e2) {
          d.notexist(e2.ps) && (e2.ps = ""), d.verifyArrayMax("ps", e2.ps, 5e3);
        }, k.processCustom = function(e2) {
          d.notexist(e2.custom) && (e2.custom = "");
        }, k.sendCmd = function() {
          this.protocol.sendCmd.apply(this.protocol, arguments);
        }, k.sendCmdWithResp = function(e2, t2, n2) {
          this.sendCmd(e2, t2, function(e3, t3, r2) {
            d.isFunction(n2) && (e3 ? n2(e3, t3) : n2(null, r2));
          });
        }, k.cbAndSendCmd = function(e2, t2) {
          var n2 = this.processCallbackPromise(t2);
          return this.sendCmd(e2, t2), n2;
        }, k.sendCmdUsePromise = function(e2, t2) {
          var n2 = this, r2 = b({ instance: this, className: "ApiBaseFn", funcName: e2, hasCallback: true });
          return new m(function(o2, s2) {
            n2.sendCmd(e2, t2, function(e3, t3, n3) {
              if (e3)
                "function" == typeof r2 && r2(e3), s2(e3);
              else {
                var i2 = d.merge({}, t3, n3);
                "function" == typeof r2 && r2(void 0), o2(i2);
              }
            });
          });
        }, S.use = function(e2, t2) {
          e2 && e2.install && d.isFunction(e2.install) && e2.install(this, t2);
        }, S.rmAllInstances = function() {
          for (var e2 in M)
            M[e2].destroy();
          M = {};
        }, k.logout = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          e2.callback = b({ instance: this, className: "ApiBaseFn", funcName: "logout", done: e2.callback }), e2 = e2 || {}, this.protocol.shouldReconnect = false, this.protocol.doLogout = true, this.processCallback(e2), this.sendCmd("logout", e2, e2.callback), this.protocol.statusProtector.emit("auth/loginLifeCycleLogout");
        }, e.exports = S, n(588), n(589), n(631), n(632), n(642), n(646);
      }, function(e, t, n) {
        var r = n(90), o = n(32), s = n(4), i = n(16), a = n(158), c = n(7), u = n(71), l2 = n(6), m = n(2), p = n(8), d = n(60), f2 = n(24), g = n(26), h = n(0), y = h.undef, v = n(11), b = n(41), T = n(157), S = T.StatusProtector, M = (T.V2NIMLoginStatus, n(107)), k = M.ReporterHook, x = M.EMSyncType, C = n(647), I = n(648), w = n(649);
        function _(e2) {
          h.undef(e2.secure) && (e2.secure = true), this.options = e2, this.keepNosSafeUrl = this.options.keepNosSafeUrl || false;
          var t2 = e2.defaultLink || e2.defaultLinkUrl;
          h.notundef(t2) && h.isString(t2) && (v.optionDefaultLinkUrl = r(t2).call(t2)), h.notundef(e2.ipv6DefaultLink) && h.isString(e2.ipv6DefaultLink) && (v.optionIpv6DefaultLinkUrl = e2.ipv6DefaultLink), "number" == typeof e2.heartbeatInterval && (v.heartbeatInterval = e2.heartbeatInterval), o(e2.nosLbsUrls) && (v.nosLbsUrls = e2.nosLbsUrls);
          var n2 = this.options.socketConcurrent;
          n2 = "number" == typeof n2 && n2 >= 1 && n2 <= 3 ? n2 : 1, this.options.socketConcurrent = n2, void 0 !== this.options.rollbackDelMsgUnread && "boolean" == typeof this.options.rollbackDelMsgUnread || (this.options.rollbackDelMsgUnread = true), this.init(), this.connect();
        }
        var P = _.fn = _.prototype;
        P.init = function() {
          var e2 = this;
          this.logger = this.options.logger, this.getNosOriginUrlReqNum = 0, this.checkNosReqNum = 0, this.timerMap = {}, this.cmdCallbackMap = {}, this.cmdContentMap = {}, this.initConnect(), this.reset(), this.statusProtector = new S(this), this.reporterHook = new k(this, this.options.reporterHookConfig), this.reporterHookLinkKeep = new C(this), this.promiseAbortManager = new I(), this.imsocket = new w(this, { socketConcurrent: this.options.socketConcurrent }), this.statusProtector.on("auth/loginLifeCycleLogout", function() {
            e2.promiseAbortManager.clear();
          }), this.statusProtector.on("auth/loginLifeCycleLoginSucc", function() {
            e2.reporterHook.reset(), e2.reporterHook.setOriginTimetick();
          });
        }, P.reset = function() {
          y(this.options.thumbnailToStatic) && (this.options.thumbnailToStatic = true), this.resetConnect();
        }, P.setOptions = function(e2) {
          var t2 = this.options, n2 = s(t2), r2 = s(e2), o2 = ["onconnect", "onerror", "onwillreconnect", "ondisconnect", "onloginportschange", "onmyinfo", "onblacklist", "onmutelist", "onfriends", "onusers", "onrobots", "onteams", "onSuperTeams", "onsessions", "onSessionsWithMoreRoaming", "onStickTopSessions", "onroamingmsgs", "onofflinemsgs", "onofflinefiltermsgs", "onroamingsysmsgs", "onofflinesysmsgs", "onofflinefiltersysmsgs", "onofflinecustomsysmsgs", "onofflinefiltercustomsysmsgs", "onbroadcastmsg", "onbroadcastmsgs", "onsysmsgunread", "onsyncdone", "onteammembers", "onsyncteammembersdone", "onsyncsuperteammembersdone", "onmsg", "onsysmsg", "oncustomsysmsg", "onupdatemyinfo", "onupdateuser", "onSyncUpdateServerSession", "onUpdateSuperTeamMember", "onMySuperTeamMembers", "onCreateSuperTeam", "onUpdateSuperTeam", "onAddSuperTeamMembers", "onRemoveSuperTeamMembers", "onUpdateSuperTeamManagers", "onDismissSuperTeam", "onTransferSuperTeam", "onUpdateSuperTeamMembersMute", "onupdateteammember", "onMyTeamMembers", "onMsgReceipts", "onCreateTeam", "onUpdateTeam", "onAddTeamMembers", "onRemoveTeamMembers", "onUpdateTeamManagers", "onDismissTeam", "onTransferTeam", "onUpdateTeamMembersMute", "onTeamMsgReceipt", "onupdatesession", "onQuickComment", "onDeleteQuickComment", "onPinMsgChange", "onupdatesysmsgunread", "onupdatesysmsg", "onsynccreateteam", "onsyncsupercreateteam", "onsyncmarkinblacklist", "onsyncmarkinmutelist", "onsyncfriendaction", "reconnectDelayProvider", "shouldIgnoreNotification", "shouldIgnoreMsg", "onDeleteMsgSelf", "shouldCountNotifyUnread", "onPushNotificationMultiportConfig", "onPushNotificationMultiportConfigUpdate", "onpushevents"], l3 = i(r2).call(r2, function(e3) {
            return a(o2).call(o2, e3);
          }), m2 = c(n2).call(n2, "account");
          h.verifyCallback(e2, l3, "protocol::IMProtocol"), this.logger.info("setOptions::", h.omitAsString(e2, ["appKey", "token", "loginExt", "customTag"])), -1 !== m2 && u(n2).call(n2, m2, 1), e2 = h.filterObj(e2, n2), this.options = h.merge(t2, e2), this.reset();
        }, P.sendCmd = function(e2) {
          var t2, n2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", r2 = arguments.length > 2 ? arguments[2] : void 0, o2 = this;
          o2.heartbeat();
          var i2, a2 = e2, c2 = (e2 = o2.parser.createCmd(e2, n2)).SER;
          n2 = n2 || {}, o2.cmdContentMap[c2] = n2, n2.single && (delete n2.single, 1 === (i2 = s(n2)).length && (o2.cmdContentMap[c2] = n2[i2[0]])), n2.__exceptionInfo = { target: l2(t2 = "".concat(e2.SID, "-")).call(t2, e2.CID), context: c2, startTime: o2.reporterHook.getSafeClock() }, n2.NOTSTORE && (i2 = n2.NOTSTORE.split(" "), m(i2).call(i2, function(e3) {
            delete n2[e3];
          }), delete n2.NOTSTORE), (r2 = r2 || n2.callback) && (o2.cmdCallbackMap[c2] = r2), o2.executeCmdTask({ cmdName: a2, cmd: p(e2) });
        }, P.executeCmdTask = function(e2) {
          var t2 = e2.cmdName, n2 = e2.cmd, r2 = (n2 = JSON.parse(n2)).SER;
          this.isFrequencyControlled(t2) ? (this.logger.warn("protocol::executeCmdTask: ".concat(t2, " hit freq control")), this.markCallbackInvalid(r2, b.newFrequencyControlError({ callFunc: "protocol::executeCmdTask", message: "".concat(t2, " hit freq control") }))) : this.hasLogin ? ("heartbeat" !== t2 && (this.logger.debugEnable ? this.logger.debug("protocol::sendCmd: ".concat(e2.cmd)) : this.logger.info("protocol::sendCmd: ".concat(t2))), this.doSendCmd(n2)) : "login" === t2 && this.isConnected() ? (this.logger.debugEnable ? this.logger.debug("protocol::sendCmd: ".concat(e2.cmd)) : this.logger.info("protocol::sendCmd: ".concat(t2)), this.doSendCmd(n2)) : (this.logger.warn("protocol::executeCmdTask: ".concat(t2, " not connected or login")), this.markCallbackInvalid(r2, b.newSocketStateError({ callFunc: "protocol::executeCmdTask", message: "".concat(t2, " not connected or not login") })));
        }, P.isFrequencyControlled = function(e2) {
          var t2 = this.frequencyControlMap && this.frequencyControlMap[e2];
          if (t2) {
            if (d() < t2.from + t2.duration)
              return true;
            delete this.frequencyControlMap[e2];
          }
        }, P.doSendCmd = function(e2) {
          var t2 = this, n2 = e2.SER, r2 = 0 === n2 ? v.hbCmdTimeout : v.cmdTimeout, o2 = (/* @__PURE__ */ new Date()).getTime(), s2 = t2.cmdContentMap[n2];
          function i2() {
            t2.markCallbackInvalid(n2, b.newSocketStateError({ callFunc: "protocol::doSendCmd", message: "ser ".concat(n2, " socketSendJson Error") })), t2.onDisconnect("protocol::doSendCmd:socketSendJson", "broken");
          }
          s2 && s2.__exceptionInfo && (s2.__exceptionInfo.startTime = t2.reporterHook.getSafeClock()), e2.isAwaitable && (t2.timerMap[n2] = f2(function() {
            var r3;
            1 !== e2.SID && 2 !== e2.CID && t2.detectHeartbeat(), t2.markCallbackInvalid(n2, b.newTimeoutError({ callFunc: "protocol::doSendCmd", message: "ser ".concat(n2, " Timeout Error") })), t2.reporter.reportTraceStart("exceptions", { user_id: h.get(t2, "options.account") || "", trace_id: h.get(t2, "socket.socket.sessionid"), start_time: o2, action: 2, exception_service: 6 }), t2.reporter.reportTraceUpdateV2("exceptions", { code: 408, description: "Packet timeout", operation_type: 1, target: l2(r3 = "".concat(e2.SID, "-")).call(r3, e2.CID), context: "".concat(e2.SER), net_connect: t2.checkNetworkAvailable() }), t2.reporter.reportTraceEnd("exceptions", 1);
          }, r2));
          try {
            t2.socket && t2.socket.send ? t2.socket.send(p(e2)) : i2();
          } catch (e3) {
            i2();
          }
        }, P.getObjWithSer = function(e2) {
          var t2 = this.cmdContentMap[e2];
          return t2 && !t2.isImSyncDataObj && delete this.cmdContentMap[e2], t2 && h.copy(t2);
        }, P.getCallbackWithSer = function(e2) {
          var t2 = this.cmdCallbackMap[e2];
          return t2 && !t2.isImSyncDataCb && delete this.cmdCallbackMap[e2], t2;
        }, P.getTimerWithSer = function(e2) {
          var t2 = this.timerMap[e2];
          return delete this.timerMap[e2], t2;
        }, P.clearTimerWithSer = function(e2) {
          var t2 = this.getTimerWithSer(e2);
          t2 && clearTimeout(t2);
        }, P.markCallbackInvalid = function(e2, t2) {
          this.getObjWithSer(e2), this.clearTimerWithSer(e2);
          var n2 = this.getCallbackWithSer(e2);
          if (n2) {
            var r2 = n2.options;
            f2(function() {
              n2(t2 || b.newUnknownError({ ser: e2 }), r2);
            }, 0);
          }
        }, P.markAllCallbackInvalid = function(e2) {
          var t2 = this;
          try {
            var n2, r2;
            m(n2 = s(this.cmdContentMap)).call(n2, function(n3) {
              var r3 = t2.getObjWithSer(n3);
              if (r3 && r3.__exceptionInfo) {
                var o2 = r3.__exceptionInfo.target, s2 = r3.__exceptionInfo.context, i2 = h.get(e2, "event.uploadCode") || e2 && e2.code;
                i2 = "number" != typeof i2 ? 415 : i2;
                var a2 = h.get(e2, "event.disconnectReason"), c2 = a2 ? p({ disconnect_reason: a2 }) : e2 && e2.message || "send cmd failed";
                t2.reporter.reportTraceStart("exceptions", { user_id: h.get(t2, "options.account") || "", trace_id: h.get(t2, "socket.socket.sessionid"), start_time: t2.reporterHook.getNTPTime(r3.__exceptionInfo.startTime), action: 2, exception_service: 6 }), t2.reporter.reportTraceUpdateV2("exceptions", { code: i2, description: c2, operation_type: 1, target: o2, context: s2, net_connect: t2.checkNetworkAvailable() }), t2.reporter.reportTraceEnd("exceptions", 1), delete r3.__exceptionInfo;
              }
            }), m(r2 = s(this.cmdCallbackMap)).call(r2, function(n3) {
              t2.markCallbackInvalid(n3, e2);
            });
          } catch (e3) {
            t2.logger && t2.logger.error("protocol::markAllCallbackInvalid error: ", e3);
          }
        }, P.getPacketObj = function(e2) {
          var t2 = null;
          if (e2 && e2.raw) {
            var n2 = e2.raw.ser;
            h.notundef(n2) && (t2 = this.getObjWithSer(n2));
          }
          return t2;
        }, P.callPacketAckCallback = function(e2) {
          var t2 = this;
          if (e2 && e2.raw) {
            var n2 = e2.raw.ser;
            if (h.notundef(n2)) {
              t2.clearTimerWithSer(n2);
              var r2 = t2.getCallbackWithSer(n2);
              if (r2) {
                var o2;
                if (r2.originUrl && e2.obj && e2.obj.file) {
                  if (e2.obj.file._url_safe = e2.obj.file.url, e2.obj.file.url = r2.originUrl, "audio" === e2.obj.type)
                    e2.obj.file.mp3Url = r2.originUrl + (~c(o2 = r2.originUrl).call(o2, "?") ? "&" : "?") + "audioTrans&type=mp3";
                }
                e2.promise ? e2.promise.then(function() {
                  r2(e2.error, e2.obj);
                }, function(o3) {
                  var s2, i2;
                  o3.callFunc = "protocol::callPacketAckCallback", o3.message = l2(s2 = l2(i2 = "Resp Promoise Error: cmd: ".concat(e2.cmd, ", ser: ")).call(i2, n2, ", reason: ")).call(s2, o3.message);
                  var a2 = b.customError("CALLBACK_ACK_ERR", o3);
                  t2.logger.error("protocol::callPacketAckCallback error stack: \n".concat(o3.stack || o3.event && o3.event.stack)), r2(a2, e2.obj, e2.content);
                }) : r2(e2.error, e2.obj, e2.content);
              }
            }
          }
        }, P.onMessage = function(e2) {
          var t2 = this;
          t2.heartbeat(), t2.parser.parseResponse(e2).then(function(e3) {
            var n2;
            if (e3.notFound && t2.logger.warn("protocol::onMessage: packet not found ".concat(p(e3))), e3.error) {
              var r2, s2;
              e3.error.message = l2(r2 = "".concat(e3.cmd, " error: ")).call(r2, e3.error.message), t2.logger.error(l2(s2 = "protocol::onMessage: packet error ".concat(p(e3.error), "，raw cmd ")).call(s2, e3.rawStr));
              var a2 = e3.raw || {};
              408 !== a2.code && 415 !== a2.code && 500 !== a2.code || t2.reporter.report("nimErrEvent", { code: a2.code, module: e3.cmd, accid: t2.account });
            }
            e3.__receiveTime = t2.reporterHook.getSafeClock();
            var c2 = x[l2(n2 = "kSyncType".concat(e3.raw.sid, "_")).call(n2, e3.raw.cid)];
            if (c2) {
              var u2 = h.get(e3, "raw.r"), m2 = 1;
              if (u2 && u2.length > 0) {
                var d2 = i(u2).call(u2, function(e4) {
                  return o(e4);
                }), y2 = h.get(d2, "0.length");
                m2 = "number" == typeof y2 ? y2 : 1;
              }
              t2.reporterHook.emit("reporter/syncItem", c2, m2);
            }
            e3.frequencyControlDuration && (t2.logger.error("protocol::onMessage: server freq control ".concat(p(e3.cmd))), t2.frequencyControlMap = t2.frequencyControlMap || {}, t2.frequencyControlMap[e3.cmd] = { from: +/* @__PURE__ */ new Date(), duration: e3.frequencyControlDuration }), e3.obj = t2.getPacketObj(e3), e3.obj && e3.obj.__exceptionInfo && delete e3.obj.__exceptionInfo, "heartbeat" !== e3.cmd && (t2.logger.debugEnable ? t2.logger.debug("protocol::recvCmd: ".concat(e3.rawStr)) : t2.logger.log("protocol::recvCmd: ".concat(e3.cmd)));
            var v2 = "process" + h.capFirstLetter(e3.service);
            if (t2[v2])
              if ("syncDone" === e3.cmd) {
                if (t2.cmdCallbackMap[e3.raw.ser] && t2.cmdCallbackMap[e3.raw.ser].isImSyncDataCb) {
                  var b2;
                  t2.cmdCallbackMap[e3.raw.ser].isImSyncDataCb = false;
                  var T2 = g(b2 = function(e4, t3) {
                    this.checkNosReqNum++, this.getNosOriginUrlReqNum <= 0 || this.checkNosReqNum >= 20 ? this[e4](t3) : f2(T2, 300);
                  }).call(b2, t2, v2, e3);
                  f2(function() {
                    T2.call(t2, v2, e3);
                  }, 10);
                }
              } else {
                "syncTeamMembersDone" !== e3.cmd && "syncSuperTeamMembersDone" !== e3.cmd || t2.cmdCallbackMap[e3.raw.ser] && t2.cmdCallbackMap[e3.raw.ser].isImSyncDataCb && (t2.cmdCallbackMap[e3.raw.ser].isImSyncDataCb = false);
                try {
                  t2[v2](e3);
                } catch (n3) {
                  var S2, M2;
                  t2.logger.warn(l2(S2 = l2(M2 = "protocol::onMessage: ".concat(v2, ".")).call(M2, e3.cmd, " excute failed ")).call(S2, e3.obj ? "" : ", maybe the packet timed out", ": "), n3.message);
                }
              }
            else
              t2.logger.warn("protocol::onMessage: ".concat(v2, " not found"));
            t2.callPacketAckCallback(e3);
          });
        }, P.onMiscError = function(e2, t2, n2) {
          t2 && this.notifyError(e2, t2, n2);
        }, P.onCustomError = function(e2, t2) {
          var n2 = b.customError(e2, t2), r2 = t2.message || "未知错误";
          this.onMiscError(r2, n2);
        }, P.notifyError = function(e2, t2, n2) {
          var r2;
          this.isConnected() && (this.logger.error(l2(r2 = "".concat(e2 || "", " ")).call(r2, this.name), t2, n2), this.options.onerror(t2, n2));
        }, P.emitAPI = function(e2) {
          var t2 = e2.type, n2 = e2.obj;
          this.api.emit(t2, n2);
        }, e.exports = _, n(669), n(685), n(686), n(687), n(688), n(689);
      }, function(e, t, n) {
        var r = n(109), o = Function.prototype, s = o.apply, i = o.call;
        e.exports = "object" == typeof Reflect && Reflect.apply || (r ? i.bind(s) : function() {
          return i.apply(s, arguments);
        });
      }, function(e, t) {
        e.exports = function(e2, t2) {
          return { enumerable: !(1 & e2), configurable: !(2 & e2), writable: !(4 & e2), value: t2 };
        };
      }, function(e, t) {
        var n = String;
        e.exports = function(e2) {
          try {
            return n(e2);
          } catch (e3) {
            return "Object";
          }
        };
      }, function(e, t, n) {
        "use strict";
        var r = n(5);
        e.exports = function(e2, t2) {
          var n2 = [][e2];
          return !!n2 && r(function() {
            n2.call(null, t2 || function() {
              return 1;
            }, 1);
          });
        };
      }, function(e, t, n) {
        var r = n(65);
        e.exports = Array.isArray || function(e2) {
          return "Array" == r(e2);
        };
      }, function(e, t, n) {
        var r, o = n(36), s = n(166), i = n(167), a = n(114), c = n(218), u = n(162), l2 = n(133), m = l2("IE_PROTO"), p = function() {
        }, d = function(e2) {
          return "<script>" + e2 + "<\/script>";
        }, f2 = function(e2) {
          e2.write(d("")), e2.close();
          var t2 = e2.parentWindow.Object;
          return e2 = null, t2;
        }, g = function() {
          try {
            r = new ActiveXObject("htmlfile");
          } catch (e3) {
          }
          var e2, t2;
          g = "undefined" != typeof document ? document.domain && r ? f2(r) : ((t2 = u("iframe")).style.display = "none", c.appendChild(t2), t2.src = String("javascript:"), (e2 = t2.contentWindow.document).open(), e2.write(d("document.F=Object")), e2.close(), e2.F) : f2(r);
          for (var n2 = i.length; n2--; )
            delete g.prototype[i[n2]];
          return g();
        };
        a[m] = true, e.exports = Object.create || function(e2, t2) {
          var n2;
          return null !== e2 ? (p.prototype = o(e2), n2 = new p(), p.prototype = null, n2[m] = e2) : n2 = g(), void 0 === t2 ? n2 : s.f(n2, t2);
        };
      }, function(e, t, n) {
        var r = n(165), o = n(39).f, s = n(61), i = n(30), a = n(334), c = n(21)("toStringTag");
        e.exports = function(e2, t2, n2, u) {
          if (e2) {
            var l2 = n2 ? e2 : e2.prototype;
            i(l2, c) || o(l2, c, { configurable: true, value: t2 }), u && !r && s(l2, "toString", a);
          }
        };
      }, function(e, t, n) {
        "use strict";
        var r = n(44), o = n(199), s = n(103), i = n(101), a = n(39).f, c = n(169), u = n(170), l2 = n(49), m = n(27), p = i.set, d = i.getterFor("Array Iterator");
        e.exports = c(Array, "Array", function(e2, t2) {
          p(this, { type: "Array Iterator", target: r(e2), index: 0, kind: t2 });
        }, function() {
          var e2 = d(this), t2 = e2.target, n2 = e2.kind, r2 = e2.index++;
          return !t2 || r2 >= t2.length ? (e2.target = void 0, u(void 0, true)) : u("keys" == n2 ? r2 : "values" == n2 ? t2[r2] : [r2, t2[r2]], false);
        }, "values");
        var f2 = s.Arguments = s.Array;
        if (o("keys"), o("values"), o("entries"), !l2 && m && "values" !== f2.name)
          try {
            a(f2, "name", { value: "values" });
          } catch (e2) {
          }
      }, function(e, t, n) {
        var r = n(503), o = n(508);
        e.exports = function(e2, t2) {
          var n2 = o(e2, t2);
          return r(n2) ? n2 : void 0;
        };
      }, function(e, t, n) {
        e.exports = n(301);
      }, function(e, t, n) {
        e.exports = n(219);
      }, function(e, t, n) {
        e.exports = n(577);
      }, function(e, t) {
        e.exports = function(e2) {
          var t2 = typeof e2;
          return null != e2 && ("object" == t2 || "function" == t2);
        };
      }, function(e, t) {
        e.exports = function(e2, t2) {
          if (!(e2 instanceof t2))
            throw new TypeError("Cannot call a class as a function");
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(140), o = n(250);
        function s(e2, t2) {
          for (var n2 = 0; n2 < t2.length; n2++) {
            var s2 = t2[n2];
            s2.enumerable = s2.enumerable || false, s2.configurable = true, "value" in s2 && (s2.writable = true), r(e2, o(s2.key), s2);
          }
        }
        e.exports = function(e2, t2, n2) {
          return t2 && s(e2.prototype, t2), n2 && s(e2, n2), r(e2, "prototype", { writable: false }), e2;
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        (function(t2) {
          var r;
          e.exports = (r = r || function(e2, r2) {
            var o;
            if ("undefined" != typeof window && window.crypto && (o = window.crypto), "undefined" != typeof self && self.crypto && (o = self.crypto), "undefined" != typeof globalThis && globalThis.crypto && (o = globalThis.crypto), !o && "undefined" != typeof window && window.msCrypto && (o = window.msCrypto), !o && void 0 !== t2 && t2.crypto && (o = t2.crypto), !o)
              try {
                o = n(892);
              } catch (e3) {
              }
            var s = function() {
              if (o) {
                if ("function" == typeof o.getRandomValues)
                  try {
                    return o.getRandomValues(new Uint32Array(1))[0];
                  } catch (e3) {
                  }
                if ("function" == typeof o.randomBytes)
                  try {
                    return o.randomBytes(4).readInt32LE();
                  } catch (e3) {
                  }
              }
              throw new Error("Native crypto module could not be used to get secure random number.");
            }, i = Object.create || function() {
              function e3() {
              }
              return function(t3) {
                var n2;
                return e3.prototype = t3, n2 = new e3(), e3.prototype = null, n2;
              };
            }(), a = {}, c = a.lib = {}, u = c.Base = { extend: function(e3) {
              var t3 = i(this);
              return e3 && t3.mixIn(e3), t3.hasOwnProperty("init") && this.init !== t3.init || (t3.init = function() {
                t3.$super.init.apply(this, arguments);
              }), t3.init.prototype = t3, t3.$super = this, t3;
            }, create: function() {
              var e3 = this.extend();
              return e3.init.apply(e3, arguments), e3;
            }, init: function() {
            }, mixIn: function(e3) {
              for (var t3 in e3)
                e3.hasOwnProperty(t3) && (this[t3] = e3[t3]);
              e3.hasOwnProperty("toString") && (this.toString = e3.toString);
            }, clone: function() {
              return this.init.prototype.extend(this);
            } }, l2 = c.WordArray = u.extend({ init: function(e3, t3) {
              e3 = this.words = e3 || [], this.sigBytes = null != t3 ? t3 : 4 * e3.length;
            }, toString: function(e3) {
              return (e3 || p).stringify(this);
            }, concat: function(e3) {
              var t3 = this.words, n2 = e3.words, r3 = this.sigBytes, o2 = e3.sigBytes;
              if (this.clamp(), r3 % 4)
                for (var s2 = 0; s2 < o2; s2++) {
                  var i2 = n2[s2 >>> 2] >>> 24 - s2 % 4 * 8 & 255;
                  t3[r3 + s2 >>> 2] |= i2 << 24 - (r3 + s2) % 4 * 8;
                }
              else
                for (var a2 = 0; a2 < o2; a2 += 4)
                  t3[r3 + a2 >>> 2] = n2[a2 >>> 2];
              return this.sigBytes += o2, this;
            }, clamp: function() {
              var t3 = this.words, n2 = this.sigBytes;
              t3[n2 >>> 2] &= 4294967295 << 32 - n2 % 4 * 8, t3.length = e2.ceil(n2 / 4);
            }, clone: function() {
              var e3 = u.clone.call(this);
              return e3.words = this.words.slice(0), e3;
            }, random: function(e3) {
              for (var t3 = [], n2 = 0; n2 < e3; n2 += 4)
                t3.push(s());
              return new l2.init(t3, e3);
            } }), m = a.enc = {}, p = m.Hex = { stringify: function(e3) {
              for (var t3 = e3.words, n2 = e3.sigBytes, r3 = [], o2 = 0; o2 < n2; o2++) {
                var s2 = t3[o2 >>> 2] >>> 24 - o2 % 4 * 8 & 255;
                r3.push((s2 >>> 4).toString(16)), r3.push((15 & s2).toString(16));
              }
              return r3.join("");
            }, parse: function(e3) {
              for (var t3 = e3.length, n2 = [], r3 = 0; r3 < t3; r3 += 2)
                n2[r3 >>> 3] |= parseInt(e3.substr(r3, 2), 16) << 24 - r3 % 8 * 4;
              return new l2.init(n2, t3 / 2);
            } }, d = m.Latin1 = { stringify: function(e3) {
              for (var t3 = e3.words, n2 = e3.sigBytes, r3 = [], o2 = 0; o2 < n2; o2++) {
                var s2 = t3[o2 >>> 2] >>> 24 - o2 % 4 * 8 & 255;
                r3.push(String.fromCharCode(s2));
              }
              return r3.join("");
            }, parse: function(e3) {
              for (var t3 = e3.length, n2 = [], r3 = 0; r3 < t3; r3++)
                n2[r3 >>> 2] |= (255 & e3.charCodeAt(r3)) << 24 - r3 % 4 * 8;
              return new l2.init(n2, t3);
            } }, f2 = m.Utf8 = { stringify: function(e3) {
              try {
                return decodeURIComponent(escape(d.stringify(e3)));
              } catch (e4) {
                throw new Error("Malformed UTF-8 data");
              }
            }, parse: function(e3) {
              return d.parse(unescape(encodeURIComponent(e3)));
            } }, g = c.BufferedBlockAlgorithm = u.extend({ reset: function() {
              this._data = new l2.init(), this._nDataBytes = 0;
            }, _append: function(e3) {
              "string" == typeof e3 && (e3 = f2.parse(e3)), this._data.concat(e3), this._nDataBytes += e3.sigBytes;
            }, _process: function(t3) {
              var n2, r3 = this._data, o2 = r3.words, s2 = r3.sigBytes, i2 = this.blockSize, a2 = s2 / (4 * i2), c2 = (a2 = t3 ? e2.ceil(a2) : e2.max((0 | a2) - this._minBufferSize, 0)) * i2, u2 = e2.min(4 * c2, s2);
              if (c2) {
                for (var m2 = 0; m2 < c2; m2 += i2)
                  this._doProcessBlock(o2, m2);
                n2 = o2.splice(0, c2), r3.sigBytes -= u2;
              }
              return new l2.init(n2, u2);
            }, clone: function() {
              var e3 = u.clone.call(this);
              return e3._data = this._data.clone(), e3;
            }, _minBufferSize: 0 }), h = (c.Hasher = g.extend({ cfg: u.extend(), init: function(e3) {
              this.cfg = this.cfg.extend(e3), this.reset();
            }, reset: function() {
              g.reset.call(this), this._doReset();
            }, update: function(e3) {
              return this._append(e3), this._process(), this;
            }, finalize: function(e3) {
              return e3 && this._append(e3), this._doFinalize();
            }, blockSize: 16, _createHelper: function(e3) {
              return function(t3, n2) {
                return new e3.init(n2).finalize(t3);
              };
            }, _createHmacHelper: function(e3) {
              return function(t3, n2) {
                return new h.HMAC.init(e3, n2).finalize(t3);
              };
            } }), a.algo = {});
            return a;
          }(Math), r);
        }).call(this, n(73));
      }, function(e, t, n) {
        var r = n(27), o = n(20), s = n(150), i = n(80), a = n(44), c = n(128), u = n(30), l2 = n(210), m = Object.getOwnPropertyDescriptor;
        t.f = r ? m : function(e2, t2) {
          if (e2 = a(e2), t2 = c(t2), l2)
            try {
              return m(e2, t2);
            } catch (e3) {
            }
          if (u(e2, t2))
            return i(!o(s.f, e2, t2), e2[t2]);
        };
      }, function(e, t) {
        e.exports = function(e2) {
          return null == e2;
        };
      }, function(e, t, n) {
        var r = n(98), o = n(5);
        e.exports = !!Object.getOwnPropertySymbols && !o(function() {
          var e2 = Symbol();
          return !String(e2) || !(Object(e2) instanceof Symbol) || !Symbol.sham && r && r < 41;
        });
      }, function(e, t, n) {
        var r, o, s = n(14), i = n(66), a = s.process, c = s.Deno, u = a && a.versions || c && c.version, l2 = u && u.v8;
        l2 && (o = (r = l2.split("."))[0] > 0 && r[0] < 4 ? 1 : +(r[0] + r[1])), !o && i && (!(r = i.match(/Edge\/(\d+)/)) || r[1] >= 74) && (r = i.match(/Chrome\/(\d+)/)) && (o = +r[1]), e.exports = o;
      }, function(e, t, n) {
        "use strict";
        var r = n(128), o = n(39), s = n(80);
        e.exports = function(e2, t2, n2) {
          var i = r(t2);
          i in e2 ? o.f(e2, i, s(0, n2)) : e2[i] = n2;
        };
      }, function(e, t) {
      }, function(e, t, n) {
        var r, o, s, i = n(335), a = n(14), c = n(28), u = n(61), l2 = n(30), m = n(161), p = n(133), d = n(114), f2 = a.TypeError, g = a.WeakMap;
        if (i || m.state) {
          var h = m.state || (m.state = new g());
          h.get = h.get, h.has = h.has, h.set = h.set, r = function(e2, t2) {
            if (h.has(e2))
              throw f2("Object already initialized");
            return t2.facade = e2, h.set(e2, t2), t2;
          }, o = function(e2) {
            return h.get(e2) || {};
          }, s = function(e2) {
            return h.has(e2);
          };
        } else {
          var y = p("state");
          d[y] = true, r = function(e2, t2) {
            if (l2(e2, y))
              throw f2("Object already initialized");
            return t2.facade = e2, u(e2, y, t2), t2;
          }, o = function(e2) {
            return l2(e2, y) ? e2[y] : {};
          }, s = function(e2) {
            return l2(e2, y);
          };
        }
        e.exports = { set: r, get: o, has: s, enforce: function(e2) {
          return s(e2) ? o(e2) : r(e2, {});
        }, getterFor: function(e2) {
          return function(t2) {
            var n2;
            if (!c(t2) || (n2 = o(t2)).type !== e2)
              throw f2("Incompatible receiver, " + e2 + " required");
            return n2;
          };
        } };
      }, function(e, t, n) {
        var r = n(12);
        e.exports = r([].slice);
      }, function(e, t) {
        e.exports = {};
      }, function(e, t) {
        e.exports = function(e2) {
          try {
            return { error: false, value: e2() };
          } catch (e3) {
            return { error: true, value: e3 };
          }
        };
      }, function(e, t, n) {
        var r = n(14);
        e.exports = r.Promise;
      }, function(e, t) {
        e.exports = function(e2) {
          return null != e2 && "object" == typeof e2;
        };
      }, function(e, t, n) {
        var r = n(279), o = n(60), s = n(3), i = n(24), a = n(26), c = n(6), u = n(48), l2 = n(16), m = n(2), p = n(4), d = n(9), f2 = n(123), g = n(37), h = n(92), y = n(93), v = n(281), b = n(282), T = n(192);
        function S(e2) {
          var t2 = function() {
            if ("undefined" == typeof Reflect || !r)
              return false;
            if (r.sham)
              return false;
            if ("function" == typeof Proxy)
              return true;
            try {
              return Boolean.prototype.valueOf.call(r(Boolean, [], function() {
              })), true;
            } catch (e3) {
              return false;
            }
          }();
          return function() {
            var n2, o2 = T(e2);
            if (t2) {
              var s2 = T(this).constructor;
              n2 = r(o2, arguments, s2);
            } else
              n2 = o2.apply(this, arguments);
            return b(this, n2);
          };
        }
        var M = n(173), k = n(0), x = n(11).heartbeatInterval, C = n(157).V2NIMLoginStatus, I = n(11), w = { kSyncAction5_1: 0, kSyncAction5_2: 1, kSyncAction5_3: 2 }, _ = { kKnown: -1, kSucceed: 0, kFailed: 1, kAborted: 2, kCanceled: 3 }, P = function(e2) {
          "use strict";
          v(n2, e2);
          var t2 = S(n2);
          function n2(e3) {
            var r2, o2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            return h(this, n2), (r2 = t2.call(this)).clientProto = e3, r2.logger = e3.logger, r2.reporter = e3.reporter, r2.timer = null, r2.setClientOrigin(), r2.serverOrigin = { timeStamp: null, rtt: null, baseTimeStamp: null }, r2.tolerantRTT = o2.tolerantRTT || 3e3, r2.bestRTT = o2.bestRTT || 100, r2.maxChances = o2.maxChances || 10, r2.isSettingNTP = false, r2.currentChance = 0, r2.syncTraceData = {}, r2.syncTraceMap = {}, r2.syncTraceLastItem = {}, r2.uploadTraceData = {}, r2.setMonitorForSync(), r2.setMonitorForResources(), r2;
          }
          return y(n2, [{ key: "hasOriginTimetick", value: function() {
            return !!this.serverOrigin.timeStamp;
          } }, { key: "setOriginTimetick", value: function() {
            var e3 = this, t3 = this.clientProto.options;
            if (("boolean" == typeof k.get(t3, "privateConf.isDataReportEnable") ? t3.privateConf.isDataReportEnable : I.privateConf.isDataReportEnable) && I.isBrowser && performance && performance.now && !(this.isSettingNTP || this.currentChance >= this.maxChances)) {
              this.isSettingNTP = true, this.currentChance++, clearTimeout(this.timer), this.timer = null;
              var n3 = "ReporterHook::setOriginTimetick:", r2 = o();
              return this.logger.info("".concat(n3, " getServerTime start, times ").concat(this.currentChance)), new s(function(t4) {
                e3.clientProto.sendCmd("getServerTime", {}, function(s2, u2) {
                  if (e3.isSettingNTP = false, s2) {
                    var l3;
                    e3.logger.warn("".concat(n3, " Calculate Delay time, getServerTime error"), s2), e3.clientProto.statusProtector.getLoginStatus() === C.V2NIM_LOGIN_STATUS_LOGINED && (e3.timer = i(a(l3 = e3.setOriginTimetick).call(l3, e3), x)), t4();
                  } else {
                    if (!u2)
                      return e3.logger.warn("".concat(n3, " Calculate Delay time, getServerTime not correct")), void t4();
                    var m2, p2 = o() - r2;
                    if (p2 > e3.tolerantRTT)
                      e3.logger.warn("".concat(n3, " Denied, cause of exceeding the maximum tolerance range of RTT: ").concat(p2)), e3.timer = i(a(m2 = e3.setOriginTimetick).call(m2, e3), x);
                    else if (p2 > e3.bestRTT) {
                      var d2, f3, g2;
                      if (e3.serverOrigin.rtt && p2 >= e3.serverOrigin.rtt)
                        e3.logger.info("".concat(n3, " Denied, cause of current.RTT >= serverOrigin.RTT: ").concat(p2));
                      else
                        e3.setServerOrigin(p2, u2), e3.logger.info(c(f3 = c(g2 = "".concat(n3, " Accept within maximum tolerance range of RTT: ").concat(p2, ", ntpTimestamp: ")).call(g2, e3.serverOrigin.timeStamp, ", localClock: ")).call(f3, e3.serverOrigin.baseTimeStamp));
                      e3.timer = i(a(d2 = e3.setOriginTimetick).call(d2, e3), x);
                    } else {
                      var h2, y2;
                      e3.setServerOrigin(p2, u2), e3.logger.info(c(h2 = c(y2 = "".concat(n3, " Accept within best RTT: ").concat(p2, ", ntpTimestamp: ")).call(y2, e3.serverOrigin.timeStamp, ", localClock: ")).call(h2, e3.serverOrigin.baseTimeStamp));
                    }
                    t4();
                  }
                });
              });
            }
          } }, { key: "getNTPTime", value: function(e3) {
            if ("number" != typeof e3 && (e3 = this.getSafeClock()), this.serverOrigin.timeStamp) {
              var t3 = u(e3 - this.serverOrigin.baseTimeStamp);
              return this.serverOrigin.timeStamp + t3;
            }
            var n3 = u(e3 - this.clientOrigin.baseTimeStamp);
            return this.clientOrigin.timeStamp + n3;
          } }, { key: "getSafeClock", value: function() {
            return I.isBrowser && performance && performance.now ? performance.now() : o();
          } }, { key: "setMonitorForSync", value: function() {
            var e3 = this, t3 = "ReporterHook::setMonitorForSync:";
            this.on("reporter/syncStart", function() {
              e3.logger.info("".concat(t3, " sync start")), e3.syncTraceData = { user_id: e3.clientProto.account, trace_id: k.get(e3.clientProto, "socket.socket.sessionid"), action: w.kSyncAction5_1, sync_begin_time: e3.getSafeClock(), sync_end_time: 0, sync_duration: 0, overall_duration: 0, extension: [] };
            }), this.on("reporter/syncRecv", function() {
              e3.syncTraceData.user_id && (e3.logger.info("".concat(t3, " sync receive packet")), e3.syncTraceData.sync_end_time = e3.getSafeClock(), e3.syncTraceData.sync_duration = u(e3.syncTraceData.sync_end_time - e3.syncTraceData.sync_begin_time));
            }), this.on("reporter/syncItem", function(n3, r2) {
              var o2;
              if ("number" == typeof n3 && e3.syncTraceData.user_id) {
                e3.logger.info(c(o2 = "".concat(t3, " receive sync item: ").concat(n3, ", total: ")).call(o2, r2));
                var s2 = e3.getSafeClock();
                e3.syncTraceMap[n3] = e3.syncTraceMap[n3] ? e3.syncTraceMap[n3] : { sync_type: n3, times: 0, total: 0, sync_duration: 0, proc_duration: 0, description: "", items: [] };
                var i2 = { total: r2, pre_item_recv_time: e3.syncTraceLastItem.cur_item_recv_time ? e3.syncTraceLastItem.cur_item_recv_time : e3.syncTraceData.sync_begin_time, cur_item_recv_time: s2 };
                e3.syncTraceMap[n3].items.push(i2), e3.syncTraceLastItem = i2;
              }
            }), this.on("reporter/syncItemComplete", function(n3) {
              var r2;
              if ("number" == typeof n3 && e3.syncTraceData.user_id) {
                var o2 = e3.syncTraceMap[n3];
                if (o2) {
                  e3.logger.info("".concat(t3, " sync item ").concat(n3, " callback done"));
                  var s2 = l2(r2 = o2.items).call(r2, function(e4) {
                    return !e4.callback_time;
                  });
                  if (0 !== s2.length)
                    s2[0].callback_time = e3.getSafeClock();
                }
              }
            }), this.on("reporter/syncComplete", function() {
              var n3;
              e3.syncTraceData.user_id && (e3.logger.info("".concat(t3, " sync complete")), m(n3 = p(e3.syncTraceMap)).call(n3, function(t4) {
                var n4, r2 = d(n4 = e3.syncTraceMap[t4].items).call(n4, function(t5) {
                  return { total: t5.total, pre_item_recv_time: e3.getNTPTime(t5.pre_item_recv_time), cur_item_recv_time: e3.getNTPTime(t5.cur_item_recv_time), callback_time: e3.getNTPTime(t5.callback_time) };
                }), o2 = f2(r2).call(r2, function(e4, t5) {
                  return e4.times += 1, e4.total += t5.total, e4.sync_duration += t5.cur_item_recv_time - t5.pre_item_recv_time, e4.proc_duration += t5.callback_time - t5.cur_item_recv_time, e4;
                }, { times: 0, total: 0, sync_duration: 0, proc_duration: 0 });
                e3.syncTraceMap[t4].items = r2, g(e3.syncTraceMap[t4], o2), e3.syncTraceData.extension.push(e3.syncTraceMap[t4]);
              }), e3.syncTraceData.sync_begin_time = e3.getNTPTime(e3.syncTraceData.sync_begin_time), e3.syncTraceData.sync_end_time = e3.getNTPTime(e3.syncTraceData.sync_end_time), e3.syncTraceData.overall_duration = e3.getNTPTime() - e3.syncTraceData.sync_begin_time, e3.reporter.report("nim_sdk_sync", e3.syncTraceData), e3.syncTraceData = {}, e3.syncTraceMap = {});
            });
          } }, { key: "setMonitorForResources", value: function() {
            var e3 = this, t3 = "ReporterHook::setMonitorForResources:";
            this.on("reporter/uploadStart", function() {
              e3.logger.info("".concat(t3, " upload start")), e3.uploadTraceData = { user_id: e3.clientProto.account, trace_id: k.get(e3.clientProto, "socket.socket.sessionid"), action: 0, duration: 0, start_time: e3.getSafeClock(), offset: 0, full_size: 0, transferred_size: 0 };
            }), this.on("reporter/uploadUpdate", function() {
              var n3, r2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
              e3.uploadTraceData.user_id && (e3.logger.info("".concat(t3, " upload update"), r2), m(n3 = p(r2)).call(n3, function(t4) {
                e3.uploadTraceData[t4] = r2[t4];
              }));
            }), this.on("reporter/uploadEnd", function() {
              var n3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : _.kKnown;
              e3.uploadTraceData.user_id && (e3.logger.info("".concat(t3, " upload end cause of ").concat(n3)), e3.uploadTraceData.state = n3, e3.uploadTraceData.start_time = e3.getNTPTime(e3.uploadTraceData.start_time), e3.uploadTraceData.duration = e3.getNTPTime(e3.getSafeClock()) - e3.uploadTraceData.start_time, e3.reporter.report("nim_sdk_resources", e3.uploadTraceData), e3.uploadTraceData = {});
            });
          } }, { key: "destroy", value: function() {
            this.reset(), this.removeAllListeners(), this.logger.info("ReporterHook::destroy: complete");
          } }, { key: "reset", value: function() {
            this.logger.info("ReporterHook::reset"), this.serverOrigin = {}, this.setClientOrigin(), this.currentChance = 0, this.timer && clearTimeout(this.timer), this.syncTraceData = {}, this.syncTraceMap = {}, this.syncTraceLastItem = {}, this.uploadTraceData = {};
          } }, { key: "setClientOrigin", value: function() {
            this.clientOrigin = { timeStamp: o(), baseTimeStamp: this.getSafeClock() };
          } }, { key: "setServerOrigin", value: function(e3, t3) {
            this.serverOrigin = { timeStamp: t3 + u(e3 / 2), rtt: e3, baseTimeStamp: this.getSafeClock() };
          } }]), n2;
        }(M);
        e.exports = { EMSyncAction: w, EMSyncType: { kSyncType3_8: 30008, kSyncType3_109: 30109, kSyncType4_4: 40004, kSyncType4_6: 40006, kSyncType4_9: 40009, kSyncType4_12: 40012, kSyncType4_13: 40013, kSyncType4_14: 40014, kSyncType4_16: 40016, kSyncType4_17: 40017, kSyncType4_18: 40018, kSyncType4_19: 40019, kSyncType4_20: 40020, kSyncType4_21: 40021, kSyncType4_23: 40023, kSyncType4_24: 40024, kSyncType4_100: 40100, kSyncType4_101: 40101, kSyncType7_15: 70015, kSyncType8_109: 80109, kSyncType8_126: 80126, kSyncType12_5: 12005, kSyncType12_6: 12006, kSyncType15_13: 15013, kSyncType21_109: 21109, kSyncType21_111: 21111 }, ReporterHook: P, EMExceptionState: _, EMResourceUploadWay: { kResourceUploadWayNOS: 0, kResourceUploadWayAWSPlugin: 1, kResourceUploadWayNOSPlugin: 2 } };
      }, function(e, t, n) {
        var r = n(7), o = n(15), s = n(2), i = n(6), a = n(158), c = n(16), u = n(88), l2 = n(89), m = n(72), p = n(32);
        function d(e2, t2) {
          var n2 = void 0 !== l2 && m(e2) || e2["@@iterator"];
          if (!n2) {
            if (p(e2) || (n2 = function(e3, t3) {
              var n3;
              if (!e3)
                return;
              if ("string" == typeof e3)
                return f2(e3, t3);
              var r3 = o(n3 = Object.prototype.toString.call(e3)).call(n3, 8, -1);
              "Object" === r3 && e3.constructor && (r3 = e3.constructor.name);
              if ("Map" === r3 || "Set" === r3)
                return u(e3);
              if ("Arguments" === r3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r3))
                return f2(e3, t3);
            }(e2)) || t2 && e2 && "number" == typeof e2.length) {
              n2 && (e2 = n2);
              var r2 = 0, s2 = function() {
              };
              return { s: s2, n: function() {
                return r2 >= e2.length ? { done: true } : { done: false, value: e2[r2++] };
              }, e: function(e3) {
                throw e3;
              }, f: s2 };
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          }
          var i2, a2 = true, c2 = false;
          return { s: function() {
            n2 = n2.call(e2);
          }, n: function() {
            var e3 = n2.next();
            return a2 = e3.done, e3;
          }, e: function(e3) {
            c2 = true, i2 = e3;
          }, f: function() {
            try {
              a2 || null == n2.return || n2.return();
            } finally {
              if (c2)
                throw i2;
            }
          } };
        }
        function f2(e2, t2) {
          (null == t2 || t2 > e2.length) && (t2 = e2.length);
          for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
            r2[n2] = e2[n2];
          return r2;
        }
        var g = n(11), h = { genUrlSep: function(e2) {
          return -1 === r(e2 = "" + e2).call(e2, "?") ? "?imageView&" : "&";
        }, urlQuery2Object: function(e2) {
          if ("[object String]" !== Object.prototype.toString.call(e2) || "" === e2)
            return {};
          var t2 = r(e2).call(e2, "?");
          if (-1 !== t2) {
            var n2 = o(e2).call(e2, t2 + 1).split("&"), i2 = {};
            return s(n2).call(n2, function(e3) {
              if (~r(e3).call(e3, "=")) {
                var t3 = e3.split("=");
                i2[t3[0]] = decodeURIComponent(t3[1]);
              } else
                i2[e3] = "";
            }), i2;
          }
        }, url2object: function(e2) {
          "[object String]" !== Object.prototype.toString.call(e2) && (e2 = "");
          var t2 = r(e2 = e2 || "").call(e2, "https") >= 0 ? "https://" : "http://", n2 = e2.replace(t2, "");
          r(n2).call(n2, "?") >= 0 && (n2 = n2.substring(0, r(n2).call(n2, "?")));
          var i2 = n2.split("/");
          n2 = i2[0];
          var a2 = "";
          if (i2.length > 0 && (a2 = o(i2).call(i2, 1).join("/")), -1 === r(e2).call(e2, "?"))
            return { protocol: t2, hostname: n2, path: a2, query: {} };
          var c2 = e2.substr(r(e2).call(e2, "?") + 1).split("&"), u2 = {};
          return s(c2).call(c2, function(e3) {
            if (r(e3).call(e3, "=") > 0) {
              var t3 = e3.split("=");
              u2[t3[0]] = decodeURIComponent(t3[1]);
            } else
              u2[e3] = "";
          }), { protocol: t2, hostname: n2, path: a2, query: u2 };
        }, object2url: function(e2) {
          var t2, n2 = e2.protocol, r2 = e2.hostname, o2 = e2.path, s2 = e2.query;
          (n2 = n2 || "http://", r2 = r2 || "", o2) && (r2 = i(t2 = "".concat(r2, "/")).call(t2, o2));
          s2 = s2 || {};
          var a2, c2, u2, l3 = [];
          for (var m2 in s2) {
            var p2;
            if ("imageView" !== m2)
              l3.push(i(p2 = "".concat(m2, "=")).call(p2, encodeURIComponent(s2[m2])));
          }
          return l3.length > 0 ? i(a2 = i(c2 = "".concat(n2)).call(c2, r2, "?imageView&")).call(a2, l3.join("&")) : i(u2 = "".concat(n2)).call(u2, r2);
        }, genPrivateUrl: function(e2, t2, n2) {
          if (t2 && t2.length) {
            var s2, u2 = d(t2);
            try {
              for (u2.s(); !(s2 = u2.n()).done; ) {
                var l3 = s2.value;
                if (r(e2).call(e2, l3) >= 0)
                  return l3 !== n2 && (e2 = e2.replace(l3, n2)), e2;
                if (r(e2).call(e2, l3) >= 0 && l3 === n2)
                  return e2;
              }
            } catch (e3) {
              u2.e(e3);
            } finally {
              u2.f();
            }
          }
          var m2, p2, f3 = h.url2object(e2), y = f3.hostname, v = f3.path, b = g.downloadUrl, T = g.downloadHostList, S = g.nosCdnEnable, M = g.serverNosConfig.cdnDomain, k = decodeURIComponent(g.serverNosConfig.objectPrefix), x = decodeURIComponent(v), C = r(x).call(x, k);
          if (M && C > -1 && S)
            return i(m2 = i(p2 = "".concat(f3.protocol)).call(p2, M, "/")).call(m2, o(x).call(x, C));
          if (a(T).call(T, y) && a(v).call(v, "/")) {
            var I = r(v).call(v, "/"), w = v.substring(0, I), _ = v.substring(I + 1);
            return b.replace("{bucket}", w).replace("{object}", _);
          }
          var P = c(T).call(T, function(e3) {
            return "string" == typeof y && a(y).call(y, e3);
          })[0], A = P ? y.replace(P, "").replace(/\W/g, "") : null;
          return A ? b.replace("{bucket}", A).replace("{object}", v) : e2;
        } };
        e.exports = h;
      }, function(e, t, n) {
        var r = n(5);
        e.exports = !r(function() {
          var e2 = (function() {
          }).bind();
          return "function" != typeof e2 || e2.hasOwnProperty("prototype");
        });
      }, function(e, t, n) {
        var r = n(96), o = TypeError;
        e.exports = function(e2) {
          if (r(e2))
            throw o("Can't call method on " + e2);
          return e2;
        };
      }, function(e, t, n) {
        var r = n(49), o = n(161);
        (e.exports = function(e2, t2) {
          return o[e2] || (o[e2] = void 0 !== t2 ? t2 : {});
        })("versions", []).push({ version: "3.27.1", mode: r ? "pure" : "global", copyright: "© 2014-2022 Denis Pushkarev (zloirock.ru)", license: "https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE", source: "https://github.com/zloirock/core-js" });
      }, function(e, t, n) {
        var r = n(321);
        e.exports = function(e2) {
          var t2 = +e2;
          return t2 != t2 || 0 === t2 ? 0 : r(t2);
        };
      }, function(e, t, n) {
        var r = n(5), o = n(21), s = n(98), i = o("species");
        e.exports = function(e2) {
          return s >= 51 || !r(function() {
            var t2 = [];
            return (t2.constructor = {})[i] = function() {
              return { foo: 1 };
            }, 1 !== t2[e2](Boolean).foo;
          });
        };
      }, function(e, t) {
        e.exports = {};
      }, function(e, t, n) {
        "use strict";
        var r = n(371).charAt, o = n(50), s = n(101), i = n(169), a = n(170), c = s.set, u = s.getterFor("String Iterator");
        i(String, "String", function(e2) {
          c(this, { type: "String Iterator", string: o(e2), index: 0 });
        }, function() {
          var e2, t2 = u(this), n2 = t2.string, o2 = t2.index;
          return o2 >= n2.length ? a(void 0, true) : (e2 = r(n2, o2), t2.index += e2.length, a(e2, false));
        });
      }, function(e, t, n) {
        var r = n(65), o = n(14);
        e.exports = "process" == r(o.process);
      }, function(e, t, n) {
        var r = n(14), o = n(105), s = n(17), i = n(211), a = n(215), c = n(21), u = n(400), l2 = n(243), m = n(49), p = n(98), d = o && o.prototype, f2 = c("species"), g = false, h = s(r.PromiseRejectionEvent), y = i("Promise", function() {
          var e2 = a(o), t2 = e2 !== String(o);
          if (!t2 && 66 === p)
            return true;
          if (m && (!d.catch || !d.finally))
            return true;
          if (!p || p < 51 || !/native code/.test(e2)) {
            var n2 = new o(function(e3) {
              e3(1);
            }), r2 = function(e3) {
              e3(function() {
              }, function() {
              });
            };
            if ((n2.constructor = {})[f2] = r2, !(g = n2.then(function() {
            }) instanceof r2))
              return true;
          }
          return !t2 && (u || l2) && !h;
        });
        e.exports = { CONSTRUCTOR: y, REJECTION_EVENT: h, SUBCLASSING: g };
      }, function(e, t, n) {
        var r = n(26), o = n(62), s = n(574), i = n(576), a = n(582), c = {}, u = o.f;
        function l2(e2) {
          var t2 = e2.upload = "multipart/form-data" === (e2.headers || o.o)["Content-Type"], n2 = false;
          try {
            n2 = (location.protocol + "//" + location.host).toLowerCase() !== o.url2origin(e2.url);
          } catch (e3) {
          }
          return e2.cors = n2, t2 || n2 || e2.mode ? function(e3) {
            var t3 = e3.mode, n3 = s, r2 = o.getGlobal();
            return !r2.FormData && r2.document && (t3 = "iframe"), "iframe" === t3 && (n3 = e3.upload ? i : a), new n3(e3);
          }(e2) : new s(e2);
        }
        function m(e2, t2, n2) {
          var r2 = c[e2];
          if (r2) {
            "onload" === t2 && r2.result && (n2 = function(e3, t3) {
              t3 = { data: t3 };
              var n3 = e3.result.headers;
              return n3 && (t3.headers = e3.req.header(n3)), t3;
            }(r2, n2)), function(e3) {
              var t3 = c[e3];
              t3 && (t3.req.destroy(), delete c[e3]);
            }(e2);
            var o2 = { type: t2, result: n2 };
            u(o2), o2.stopped || r2[t2](o2.result);
          }
        }
        function p(e2, t2) {
          m(e2, "onload", t2);
        }
        function d(e2, t2) {
          m(e2, "onerror", t2);
        }
        function f2(e2, t2) {
          var n2 = o.genUrlSep(e2);
          return t2 = t2 || "", o.isObject(t2) && (t2 = o.object2query(t2)), t2 && (e2 += n2 + t2), e2;
        }
        function g(e2, t2) {
          t2 = t2 || {};
          var n2 = o.uniqueID(), s2 = { result: t2.result, onload: t2.onload || o.f, onerror: t2.onerror || o.f };
          c[n2] = s2, t2.onload = r(p).call(p, null, n2), t2.onerror = r(d).call(d, null, n2), t2.query && (e2 = f2(e2, t2.query));
          var i2 = t2.method || "";
          return i2 && !/get/i.test(i2) || !t2.data || (e2 = f2(e2, t2.data), t2.data = null), t2.url = e2, s2.req = l2(t2), n2;
        }
        g.filter = function(e2) {
          o.isFunction(e2) && (u = e2);
        }, g.abort = function(e2) {
          var t2 = c[e2];
          t2 && t2.req && t2.req.abort();
        }, e.exports = g;
      }, function(e, t, n) {
        var r = n(8), o = n(303), s = n(22), i = n(108).genPrivateUrl, a = n(0), c = a.notundef, u = a.exist, l2 = n(195), m = n(297), p = m.typeMap;
        function d(e2) {
          e2.resend ? (a.verifyOptions(e2, "idClient", "msg::Message"), this.idClient = e2.idClient) : this.idClient = a.guid(), this.type = p[e2.type], this.resend = e2.resend ? 1 : 0, c(e2.subType) && (a.isInt(+e2.subType) && +e2.subType > 0 ? this.subType = +e2.subType : a.onParamError("subType只能是大于0的整数", "msg::Message")), c(e2.custom) && ("object" === s(e2.custom) ? this.custom = r(e2.custom) : this.custom = "" + e2.custom), c(e2.text) && (this.body = "" + e2.text), c(e2.body) && (this.body = "" + e2.body), c(e2.yidunEnable) && (this.yidunEnable = e2.yidunEnable ? 1 : 0), c(e2.antiSpamUsingYidun) && (this.antiSpamUsingYidun = e2.antiSpamUsingYidun ? 1 : 0), c(e2.antiSpamContent) && ("object" === s(e2.antiSpamContent) ? this.antiSpamContent = r(e2.antiSpamContent) : this.antiSpamContent = "" + e2.antiSpamContent), c(e2.antiSpamBusinessId) && ("object" === s(e2.antiSpamBusinessId) ? this.antiSpamBusinessId = r(e2.antiSpamBusinessId) : this.antiSpamBusinessId = "" + e2.antiSpamBusinessId), c(e2.yidunAntiCheating) && (this.yidunAntiCheating = e2.yidunAntiCheating + ""), c(e2.skipHistory) && (this.skipHistory = e2.skipHistory ? 1 : 0), c(e2.highPriority) && (this.highPriority = e2.highPriority ? 1 : 0), c(e2.clientAntiSpam) && (this.clientAntiSpam = e2.clientAntiSpam ? 1 : 0), c(e2.env) && (this.env = e2.env), c(e2.notifyTargetTags) && (this.notifyTargetTags = e2.notifyTargetTags), c(e2.yidunAntiSpamExt) && (this.yidunAntiSpamExt = e2.yidunAntiSpamExt), (c(e2.loc_x) || c(e2.loc_y) || c(e2.loc_z)) && (this.loc_x = e2.loc_x, this.loc_y = e2.loc_y, this.loc_z = e2.loc_z);
        }
        d.validTypes = m.validTypes, a.merge(d.prototype, m.prototype), d.getType = m.getType, d.setFlow = m.setFlow, d.reverse = function(e2) {
          var t2 = a.filterObj(e2, "chatroomId idClient from fromNick fromAvatar _fromAvatar_safe fromCustom userUpdateTime custom status notifyTargetTags");
          return c(t2.fromAvatar) && (t2.fromAvatar = i(t2.fromAvatar)), t2 = a.merge(t2, { fromClientType: l2.reverseType(e2.fromClientType), time: +e2.time, type: d.getType(e2), text: u(e2.body) ? e2.body : e2.text || "", resend: 1 == +e2.resend }), c(t2.userUpdateTime) && (t2.userUpdateTime = +t2.userUpdateTime), c(e2.callbackExt) && (t2.callbackExt = e2.callbackExt), c(e2.subType) && (t2.subType = +e2.subType), c(e2.yidunAntiSpamRes) && (t2.yidunAntiSpamRes = e2.yidunAntiSpamRes), c(e2.loc_x) && (t2.x = o(e2.loc_x), t2.y = o(e2.loc_y), t2.z = o(e2.loc_z)), c(e2.toAccids) && (t2.toAccids = e2.toAccids), t2.status = t2.status || "success", t2;
        }, d.setExtra = function(e2, t2) {
          m.setFlow(e2, t2);
        }, e.exports = d;
      }, function(e, t, n) {
        var r = n(217), o = n(167);
        e.exports = Object.keys || function(e2) {
          return r(e2, o);
        };
      }, function(e, t, n) {
        e.exports = n(423);
      }, function(e, t, n) {
        e.exports = n(432);
      }, function(e, t, n) {
        e.exports = n(444);
      }, function(e, t, n) {
        var r = n(175), o = n(504), s = n(505), i = r ? r.toStringTag : void 0;
        e.exports = function(e2) {
          return null == e2 ? void 0 === e2 ? "[object Undefined]" : "[object Null]" : i && i in Object(e2) ? o(e2) : s(e2);
        };
      }, function(e, t, n) {
        var r = n(596), o = n(188), s = n(603);
        e.exports = function(e2, t2) {
          if (null == e2)
            return {};
          var n2, i, a = s(e2, t2);
          if (r) {
            var c = r(e2);
            for (i = 0; i < c.length; i++)
              n2 = c[i], o(t2).call(t2, n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (a[n2] = e2[n2]);
          }
          return a;
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(570);
      }, function(e, t, n) {
        var r = n(12), o = n(5), s = n(65), i = Object, a = r("".split);
        e.exports = o(function() {
          return !i("z").propertyIsEnumerable(0);
        }) ? function(e2) {
          return "String" == s(e2) ? a(e2, "") : i(e2);
        } : i;
      }, function(e, t, n) {
        var r = n(318), o = n(129);
        e.exports = function(e2) {
          var t2 = r(e2, "string");
          return o(t2) ? t2 : t2 + "";
        };
      }, function(e, t, n) {
        var r = n(33), o = n(17), s = n(19), i = n(209), a = Object;
        e.exports = i ? function(e2) {
          return "symbol" == typeof e2;
        } : function(e2) {
          var t2 = r("Symbol");
          return o(t2) && s(t2.prototype, a(e2));
        };
      }, function(e, t, n) {
        var r = n(12), o = 0, s = Math.random(), i = r(1 .toString);
        e.exports = function(e2) {
          return "Symbol(" + (void 0 === e2 ? "" : e2) + ")_" + i(++o + s, 36);
        };
      }, function(e, t, n) {
        var r = n(112), o = Math.max, s = Math.min;
        e.exports = function(e2, t2) {
          var n2 = r(e2);
          return n2 < 0 ? o(n2 + t2, 0) : s(n2, t2);
        };
      }, function(e, t, n) {
        var r = n(12), o = n(5), s = n(17), i = n(67), a = n(33), c = n(215), u = function() {
        }, l2 = [], m = a("Reflect", "construct"), p = /^\s*(?:class|function)\b/, d = r(p.exec), f2 = !p.exec(u), g = function(e2) {
          if (!s(e2))
            return false;
          try {
            return m(u, l2, e2), true;
          } catch (e3) {
            return false;
          }
        }, h = function(e2) {
          if (!s(e2))
            return false;
          switch (i(e2)) {
            case "AsyncFunction":
            case "GeneratorFunction":
            case "AsyncGeneratorFunction":
              return false;
          }
          try {
            return f2 || !!d(p, c(e2));
          } catch (e3) {
            return true;
          }
        };
        h.sham = true, e.exports = !m || o(function() {
          var e2;
          return g(g.call) || !g(Object) || !g(function() {
            e2 = true;
          }) || e2;
        }) ? h : g;
      }, function(e, t, n) {
        var r = n(111), o = n(130), s = r("keys");
        e.exports = function(e2) {
          return s[e2] || (s[e2] = o(e2));
        };
      }, function(e, t, n) {
        var r = n(217), o = n(167).concat("length", "prototype");
        t.f = Object.getOwnPropertyNames || function(e2) {
          return r(e2, o);
        };
      }, function(e, t) {
        t.f = Object.getOwnPropertySymbols;
      }, function(e, t, n) {
        var r = n(21);
        t.f = r;
      }, function(e, t, n) {
        var r = n(30), o = n(17), s = n(42), i = n(133), a = n(229), c = i("IE_PROTO"), u = Object, l2 = u.prototype;
        e.exports = a ? u.getPrototypeOf : function(e2) {
          var t2 = s(e2);
          if (r(t2, c))
            return t2[c];
          var n2 = t2.constructor;
          return o(n2) && t2 instanceof n2 ? n2.prototype : t2 instanceof u ? l2 : null;
        };
      }, function(e, t, n) {
        var r = n(12), o = n(36), s = n(355);
        e.exports = Object.setPrototypeOf || ("__proto__" in {} ? function() {
          var e2, t2 = false, n2 = {};
          try {
            (e2 = r(Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set))(n2, []), t2 = n2 instanceof Array;
          } catch (e3) {
          }
          return function(n3, r2) {
            return o(n3), s(r2), t2 ? e2(n3, r2) : n3.__proto__ = r2, n3;
          };
        }() : void 0);
      }, function(e, t, n) {
        var r = n(67), o = n(160), s = n(96), i = n(103), a = n(21)("iterator");
        e.exports = function(e2) {
          if (!s(e2))
            return o(e2, a) || o(e2, "@@iterator") || i[r(e2)];
        };
      }, function(e, t, n) {
        e.exports = n(407);
      }, function(e, t, n) {
        e.exports = n(449);
      }, function(e, t, n) {
        var r = n(493), o = n(494), s = n(495), i = n(496), a = n(497);
        function c(e2) {
          var t2 = -1, n2 = null == e2 ? 0 : e2.length;
          for (this.clear(); ++t2 < n2; ) {
            var r2 = e2[t2];
            this.set(r2[0], r2[1]);
          }
        }
        c.prototype.clear = r, c.prototype.delete = o, c.prototype.get = s, c.prototype.has = i, c.prototype.set = a, e.exports = c;
      }, function(e, t, n) {
        var r = n(201);
        e.exports = function(e2, t2) {
          for (var n2 = e2.length; n2--; )
            if (r(e2[n2][0], t2))
              return n2;
          return -1;
        };
      }, function(e, t, n) {
        var r = n(87)(Object, "create");
        e.exports = r;
      }, function(e, t, n) {
        var r = n(517);
        e.exports = function(e2, t2) {
          var n2 = e2.__data__;
          return r(t2) ? n2["string" == typeof t2 ? "string" : "hash"] : n2.map;
        };
      }, function(e, t, n) {
        var r = n(261), o = n(262);
        e.exports = function(e2, t2, n2, s) {
          var i = !n2;
          n2 || (n2 = {});
          for (var a = -1, c = t2.length; ++a < c; ) {
            var u = t2[a], l2 = s ? s(n2[u], e2[u], u, n2, e2) : void 0;
            void 0 === l2 && (l2 = e2[u]), i ? o(n2, u, l2) : r(n2, u, l2);
          }
          return n2;
        };
      }, function(e, t) {
        e.exports = function(e2) {
          return e2.webpackPolyfill || (e2.deprecate = function() {
          }, e2.paths = [], e2.children || (e2.children = []), Object.defineProperty(e2, "loaded", { enumerable: true, get: function() {
            return e2.l;
          } }), Object.defineProperty(e2, "id", { enumerable: true, get: function() {
            return e2.i;
          } }), e2.webpackPolyfill = 1), e2;
        };
      }, function(e, t) {
        e.exports = "	\n\v\f\r                　\u2028\u2029\uFEFF";
      }, function(e, t, n) {
        var r, o = n(18), s = n(2), i = n(9), a = n(3), c = n(6), u = n(7), l2 = n(26), m = n(8), p = n(108).urlQuery2Object, d = n(0), f2 = n(41), g = n(744), h = n(745), y = n(746), v = n(747), b = n(748), T = n(749);
        function S(e2) {
          this.mixin(e2);
        }
        S.prototype = o((function() {
        }).prototype, { protocol: { value: null, writable: true, enumerable: true, configurable: true } }), S.prototype.setProtocol = function(e2) {
          this.protocol = e2;
        }, S.prototype.mixin = function(e2) {
          var t2, n2, r2 = this;
          this.configMap = this.configMap || {}, s(t2 = ["idMap", "cmdConfig", "packetConfig"]).call(t2, function(t3) {
            r2.configMap[t3] = d.merge({}, r2.configMap[t3], e2.configMap && e2.configMap[t3]);
          }), s(n2 = ["serializeMap", "unserializeMap"]).call(n2, function(t3) {
            r2[t3] = d.merge({}, r2[t3], e2[t3]);
          });
        }, S.prototype.createCmd = (r = 1, function(e2, t2) {
          var n2, o2 = this, a2 = this.configMap.cmdConfig[e2], c2 = this.configMap.packetConfig[a2.sid + "_" + a2.cid], u2 = "heartbeat" === e2 ? 0 : r++;
          return u2 > 32767 && (u2 = 1, r = 2), e2 = { SID: a2.sid, CID: a2.cid, SER: u2, isAwaitable: "boolean" == typeof a2.isAwaitable ? a2.isAwaitable : !(!c2 || !c2.response) }, a2.params && (e2.Q = [], s(n2 = a2.params).call(n2, function(n3) {
            var r2 = n3.type, s2 = n3.name, a3 = n3.entity, c3 = t2[s2];
            if (!d.undef(c3)) {
              switch (r2) {
                case "PropertyArray":
                  r2 = "ArrayMable", c3 = i(c3).call(c3, function(e3) {
                    return { t: "Property", v: o2.serialize(e3, a3) };
                  });
                  break;
                case "Property":
                  c3 = o2.serialize(c3, s2);
                  break;
                case "bool":
                  c3 = c3 ? "true" : "false";
              }
              e2.Q.push({ t: r2, v: c3 });
            }
          })), e2;
        }), S.prototype.parseResponse = function(e2) {
          var t2 = this;
          return new a(function(n2) {
            var r2 = JSON.parse(e2), o2 = { raw: r2, rawStr: e2, error: f2.genError(r2.code) }, i2 = t2.configMap.packetConfig[r2.sid + "_" + r2.cid];
            if (!i2)
              return o2.notFound = { sid: r2.sid, cid: r2.cid }, void n2(o2);
            var m2 = r2.r, p2 = "notify" === i2.service && !i2.cmd;
            if (o2.isNotify = p2, p2) {
              var g2 = r2.r[1].headerPacket;
              if (i2 = t2.configMap.packetConfig[g2.sid + "_" + g2.cid], m2 = r2.r[1].body, !i2)
                return o2.notFound = { sid: g2.sid, cid: g2.cid }, void n2(o2);
            }
            if (o2.service = i2.service, o2.cmd = i2.cmd, o2.error) {
              var h2, y2, v2 = c(h2 = "".concat(r2.sid, "_")).call(h2, r2.cid);
              if (p2)
                v2 = c(y2 = "".concat(g2.sid, "_")).call(y2, g2.cid);
              if (o2.error.cmd = o2.cmd, o2.error.callFunc = "protocol::parseResponse: ".concat(v2), 416 === o2.error.code) {
                var b2 = m2[0];
                b2 && (o2.frequencyControlDuration = 1e3 * b2);
              }
            }
            var T2, S2 = false;
            o2.error && i2.trivialErrorCodes && (S2 = -1 !== u(T2 = i2.trivialErrorCodes).call(T2, o2.error.code));
            var M2 = [];
            if ((!o2.error || S2) && i2.response) {
              var k2;
              o2.content = {};
              var x2 = function(e3, t3, n3, r3) {
                if (e3 && "msg" === r3 || "sysMsg" === r3) {
                  var o3 = n3.content[r3];
                  d.isObject(o3) && !o3.idServer && (o3.idServer = "" + t3.r[0]);
                }
              };
              s(k2 = i2.response).call(k2, function(e3, n3) {
                var i3, a2 = m2[n3];
                if (!d.undef(a2)) {
                  var c2 = e3.type, u2 = e3.name, f3 = e3.entity || u2;
                  switch (c2) {
                    case "Property":
                      M2.push(t2.unserialize(a2, f3).then(l2(i3 = function(e4, t3, n4, r3, o3) {
                        n4.content[r3] = o3, x2(e4, t3, n4, r3);
                      }).call(i3, this, p2, r2, o2, u2)));
                      break;
                    case "PropertyArray":
                      o2.content[u2] = [], s(a2).call(a2, function(e4, n4) {
                        var r3;
                        M2.push(t2.unserialize(e4, f3).then(l2(r3 = function(e5, t3, r4) {
                          e5.content[t3][n4] = r4;
                        }).call(r3, this, o2, u2)));
                      });
                      break;
                    case "KVArray":
                      o2.content[u2] = a2, x2(p2, r2, o2, u2);
                      break;
                    case "long":
                    case "Long":
                    case "byte":
                    case "Byte":
                    case "Number":
                      o2.content[u2] = +a2;
                      break;
                    default:
                      o2.content[u2] = a2, x2(p2, r2, o2, u2);
                  }
                }
              });
            }
            a.all(M2).then(function() {
              n2(o2);
            });
          });
        }, S.prototype.serialize = function(e2, t2) {
          var n2 = this.serializeMap[t2], r2 = {};
          for (var o2 in n2)
            e2.hasOwnProperty(o2) && (r2[n2[o2]] = e2[o2]);
          return r2;
        }, S.prototype.matchNosSafeUrl = function(e2) {
          if (!d.isString(e2) || !~u(e2).call(e2, "_im_url=1"))
            return false;
          var t2 = p(e2);
          return !(!t2 || !t2._im_url || 1 != t2._im_url);
        }, S.prototype.getOneNosOriginUrl = function(e2, t2, n2) {
          var r2 = this;
          return new a(function(o2) {
            r2.protocol.getNosOriginUrlReqNum++, r2.protocol.sendCmd("getNosOriginUrl", { nosFileUrlTag: { safeUrl: e2 } }, function(e3, s2, i2) {
              r2.protocol.getNosOriginUrlReqNum--, e3 ? r2.protocol.logger.warn("error: get nos originUrl failed", e3) : (t2["_" + n2 + "_safe"] = t2[n2], t2[n2] = i2.nosFileUrlTag && i2.nosFileUrlTag.originUrl), o2();
            });
          });
        }, S.prototype.checkObjSafeUrl = function(e2, t2, n2) {
          var r2 = this;
          for (var o2 in e2)
            if (e2.hasOwnProperty(o2)) {
              var i2 = e2[o2];
              if (d.isString(i2)) {
                if (this.matchNosSafeUrl(i2)) {
                  var a2 = this.getOneNosOriginUrl(i2, e2, o2);
                  t2.push(a2), n2.push(a2);
                }
              } else
                d.isObject(i2) ? this.checkObjSafeUrl(i2, t2, n2) : d.isArray(i2) && s(i2).call(i2, function(e3) {
                  d.isObject(e3) && r2.checkObjSafeUrl(e3, t2, n2);
                });
            }
        };
        var M = ["url", "avatar", "fromAvatar", "chatroomAvatar"];
        S.prototype.unserialize = function(e2, t2) {
          var n2 = this;
          return new a(function(r2) {
            var o2 = n2.unserializeMap[t2], s2 = {}, i2 = [];
            if (e2)
              for (var c2 in o2) {
                var p2, d2 = [];
                if (e2.hasOwnProperty(c2)) {
                  if (s2[o2[c2]] = e2[c2], n2.protocol.hasLogin && !n2.protocol.keepNosSafeUrl)
                    if ("attach" === o2[c2] && e2[c2] && u(e2[c2]) && ~u(p2 = e2[c2]).call(p2, "_im_url=1"))
                      try {
                        var f3, g2 = JSON.parse(e2[c2]);
                        g2.isS3 || n2.checkObjSafeUrl(g2, d2, i2), a.all(d2).then(l2(f3 = function(e3, t3) {
                          e3.attach = m(t3);
                        }).call(f3, n2, s2, g2));
                      } catch (e3) {
                        n2.logger.warn("unserialize", e3 && e3.message);
                      }
                    else
                      ~u(M).call(M, o2[c2]) && e2[c2] && n2.matchNosSafeUrl(e2[c2]) && i2.push(n2.getOneNosOriginUrl(e2[c2], s2, o2[c2]));
                }
              }
            a.all(i2).then(function() {
              r2(s2);
            });
          });
        }, S.prototype.syncUnserialize = function(e2, t2) {
          var n2 = this.unserializeMap[t2], r2 = {};
          if (e2)
            for (var o2 in n2)
              e2.hasOwnProperty(o2) && (r2[n2[o2]] = e2[o2]);
          return r2;
        };
        var k = new S({ configMap: g, serializeMap: h, unserializeMap: y }), x = new S({ configMap: v, serializeMap: b, unserializeMap: T });
        e.exports = { IM: k, Chatroom: x };
      }, function(e, t, n) {
        "use strict";
        var r = {}.propertyIsEnumerable, o = Object.getOwnPropertyDescriptor, s = o && !r.call({ 1: 2 }, 1);
        t.f = s ? function(e2) {
          var t2 = o(this, e2);
          return !!t2 && t2.enumerable;
        } : r;
      }, function(e, t, n) {
        e.exports = n(622);
      }, function(e, t, n) {
        var r = n(9), o = n(10), s = n(0), i = s.notundef, a = s.fillPropertyWithDefault, c = { 0: "normal", 1: "owner", 2: "manager" };
        function u(e2) {
          s.verifyOptions(e2, "teamId", "team::TeamMember"), s.verifyParamAtLeastPresentOne(e2, "nickInTeam muteTeam muteNotiType custom", "team::TeamMember"), this.teamId = e2.teamId, i(e2.account) && (this.account = e2.account), i(e2.nickInTeam) && (this.nickInTeam = e2.nickInTeam), i(e2.muteNotiType) ? this.bits = e2.muteNotiType : i(e2.muteTeam) && (this.bits = 0, e2.muteTeam && (this.bits += 1)), i(e2.mute) && (this.mute = e2.mute ? 1 : 0), i(e2.custom) && (this.custom = "" + e2.custom);
        }
        u.reverse = function(e2) {
          var t2 = s.copy(e2);
          if (i(t2.teamId) && (t2.teamId = "" + t2.teamId), i(t2.type) && (t2.type = c[t2.type]), i(t2.active) && (t2.active = 1 == +t2.active), i(t2.valid) && (t2.valid = 1 == +t2.valid), i(t2.mute) && (t2.mute = 1 == +t2.mute), i(t2.joinTime) && (t2.joinTime = +t2.joinTime), i(t2.updateTime) && (t2.updateTime = +t2.updateTime), i(t2.bits)) {
            var n2 = t2.bits;
            delete t2.bits, t2.muteTeam = !!(1 & n2), t2.muteNotiType = n2;
          }
          return i(t2.teamId) && i(t2.account) && (t2.id = u.genId(t2.teamId, t2.account)), i(t2.followAccountIds) && (t2.followAccountIds = JSON.parse(t2.followAccountIds)), t2;
        }, u.reverseMembers = function(e2) {
          return r(e2).call(e2, function(e3) {
            return o(u).call(u, e3);
          });
        }, u.fillProperties = function(e2) {
          var t2 = a(e2, "mute", false), n2 = a(e2, "custom", "");
          return t2 || n2;
        }, u.genId = function(e2, t2) {
          return e2 + "-" + t2;
        }, u.accounts2ids = function(e2, t2) {
          return r(t2).call(t2, function(t3) {
            return u.genId(e2, t3);
          });
        }, u.assembleMembers = function(e2, t2) {
          return s.isArray(t2) || (t2 = [t2]), r(t2).call(t2, function(t3) {
            return u.assembleMember(e2, t3);
          });
        }, u.assembleMember = function(e2, t2) {
          return { id: u.genId(e2.teamId, t2), account: t2, teamId: e2.teamId, type: "normal", nickInTeam: "", muteTeam: false, mute: false, joinTime: e2.memberUpdateTime, updateTime: e2.memberUpdateTime, active: true, valid: true, invitorAccid: "", followAccountIds: [] };
        }, u.assembleOwner = function(e2) {
          var t2 = u.assembleMember(e2, e2.owner);
          return t2.type = "owner", t2;
        }, e.exports = u;
      }, function(e, t, n) {
        var r, o = n(22), s = n(7), i = n(8), a = n(6), c = n(4), u = n(10), l2 = n(16), m = n(9), p = n(2), d = n(0), f2 = d.undef, g = d.notundef, h = n(149).IM, y = n(194), v = n(152), b = { customP2p: 100, customTeam: 101, customSuperTeam: 103, deleteMsgP2p: 7, deleteMsgTeam: 8, deleteMsgSuperTeam: 12, deleteOnewayMsgP2p: 13, deleteOnewayMsgTeam: 14 }, T = { 0: "applyTeam", 1: "rejectTeamApply", 2: "teamInvite", 3: "rejectTeamInvite", 5: "friendRequest", 6: "deleteFriend", 7: "deleteMsgP2p", 8: "deleteMsgTeam", 12: "deleteMsgSuperTeam", 13: "deleteMsgP2pOneWay", 14: "deleteMsgTeamOneWay", 15: "applySuperTeam", 16: "rejectSuperTeamApply", 17: "superTeamInvite", 18: "rejectSuperTeamInvite", 100: "customP2p", 101: "customTeam", 103: "customSuperTeam", 102: "customP2p" }, S = { 1: "addFriend", 2: "applyFriend", 3: "passFriendApply", 4: "rejectFriendApply" }, M = ["team", "superTeam", "friend", "msg"], k = { applyTeam: "team", rejectTeamApply: "team", teamInvite: "team", rejectTeamInvite: "team", applySuperTeam: "superTeam", rejectSuperTeamApply: "superTeam", superTeamInvite: "superTeam", rejectSuperTeamInvite: "superTeam", addFriend: "friend", applyFriend: "friend", passFriendApply: "friend", rejectFriendApply: "friend", deleteFriend: "friend", deleteMsg: "msg" };
        function x(e2) {
          var t2, n2;
          d.verifyOptions(e2, "type to", "sysmsg::SystemMessage"), d.verifyParamValid("type", e2.type, x.validTypes, "sysmsg::SystemMessage"), -1 !== s(t2 = e2.type).call(t2, "custom") && (d.verifyOptions(e2, "content", "sysmsg::SystemMessage"), this.attach = e2.content, g(e2.apnsText) && (this.apnsText = "" + e2.apnsText), g(e2.pushPayload) && ("object" === o(e2.pushPayload) ? this.pushPayload = i(e2.pushPayload) : this.pushPayload = "" + e2.pushPayload), g(e2.sendToOnlineUsersOnly) && (this.sendToOnlineUsersOnly = e2.sendToOnlineUsersOnly ? 0 : 1), g(e2.cc) && (this.cc = e2.cc ? 1 : 0), g(e2.isPushable) && (this.isPushable = e2.isPushable ? 1 : 0), g(e2.isUnreadable) && (this.isUnreadable = e2.isUnreadable ? 1 : 0), g(e2.needPushNick) && (this.needPushNick = e2.needPushNick ? 1 : 0)), 0 === s(n2 = e2.type).call(n2, "deleteMsg") && (e2.apnsText && (this.apnsText = e2.apnsText), e2.pushPayload && (this.pushPayload = e2.pushPayload), e2.attach && (this.attach = e2.attach)), this.time = e2.time || +/* @__PURE__ */ new Date(), this.type = b[e2.type], this.to = e2.to, g(e2.from) && (this.from = e2.from), g(e2.ps) && (this.ps = e2.ps), g(e2.deletedIdClient) && (this.deletedIdClient = e2.deletedIdClient), g(e2.deletedIdServer) && (this.deletedIdServer = e2.deletedIdServer), g(e2.opeAccount) && (this.opeAccount = e2.opeAccount), g(e2.yidunEnable) && (this.yidunEnable = e2.yidunEnable ? 1 : 0), g(e2.antiSpamContent) && ("object" === o(e2.antiSpamContent) ? this.antiSpamContent = i(e2.antiSpamContent) : this.antiSpamContent = "" + e2.antiSpamContent), g(e2.antiSpamBusinessId) && ("object" === o(e2.antiSpamBusinessId) ? this.antiSpamBusinessId = i(e2.antiSpamBusinessId) : this.antiSpamBusinessId = "" + e2.antiSpamBusinessId), g(e2.env) && (this.env = e2.env), this.idClient = e2.idClient || d.guid();
        }
        x.validTypes = a(r = c(b)).call(r, c(k)), x.validCategories = ["team", "friend"], x.isCustom = function(e2) {
          return "custom" === e2.type;
        }, x.reverse = function(e2) {
          var t2, n2 = { time: +e2.time, to: e2.to, type: T[e2.type] };
          if (g(e2.from) && (n2.from = e2.from), g(e2.idClient) && (n2.idClient = e2.idClient), g(e2.idServer) && (n2.idServer = "" + e2.idServer), g(e2.deletedIdClient) && (n2.deletedIdClient = e2.deletedIdClient), g(e2.deletedIdServer) && (n2.deletedIdServer = "" + e2.deletedIdServer), g(e2.deletedMsgTime) && (n2.deletedMsgTime = +e2.deletedMsgTime), g(e2.deletedMsgFromNick) && (n2.deletedMsgFromNick = "" + e2.deletedMsgFromNick), g(e2.opeAccount) && (n2.opeAccount = e2.opeAccount), g(e2.ps) && (n2.ps = e2.ps), g(e2.callbackExt) && (n2.callbackExt = e2.callbackExt), e2.attach = e2.attach ? "" + e2.attach : "", "customP2p" === n2.type || "customTeam" === n2.type || "customSuperTeam" === n2.type)
            n2.content = e2.attach, g(e2.apnsText) && (n2.apnsText = e2.apnsText), g(e2.pushPayload) && (n2.pushPayload = e2.pushPayload), d.merge(n2, { sendToOnlineUsersOnly: f2(e2.sendToOnlineUsersOnly) || 0 == +e2.sendToOnlineUsersOnly, cc: f2(e2.cc) || 1 == +e2.cc, isPushable: f2(e2.isPushable) || 1 == +e2.isPushable, isUnreadable: f2(e2.isUnreadable) || 1 == +e2.isUnreadable, needPushNick: g(e2.needPushNick) && 1 == +e2.needPushNick }), "customP2p" === n2.type ? n2.scene = "p2p" : "customSuperTeam" === n2.type ? n2.scene = "superTeam" : "customTeam" === n2.type && (n2.scene = "team"), n2.type = "custom";
          else if (0 === s(t2 = n2.type).call(t2, "deleteMsg")) {
            e2.apnsText && (n2.apnsText = e2.apnsText), e2.pushPayload && (n2.pushPayload = e2.pushPayload), e2.attach && (n2.attach = e2.attach);
            var r2 = n2.type.toLowerCase();
            s(r2).call(r2, "p2p") > -1 ? n2.scene = "p2p" : s(r2).call(r2, "superteam") > -1 ? n2.scene = "superTeam" : s(r2).call(r2, "team") > -1 && (n2.scene = "team"), n2.type = "deleteMsg";
          } else {
            if (e2.attach) {
              n2.attach = {};
              var o2 = JSON.parse(e2.attach);
              g(o2.vt) ? (n2.type = S[o2.vt], o2.serverex && 1 === o2.serverex[0] && (n2.serverex = o2.serverex[1]), delete n2.attach) : (g(o2.tinfo) && (n2.attach.team = u(y).call(y, h.syncUnserialize(o2.tinfo, "team"))), g(o2.tlist) && (n2.attach.member = u(v).call(v, h.syncUnserialize(o2.tlist, "teamMember"))), g(o2.attach) && (n2.attach.custom = o2.attach));
            }
            n2.category = k[n2.type], n2.read = false, n2.state = "init";
          }
          return g(e2.cc) && (n2.cc = 1 == +e2.cc), n2.status = e2.status || "success", g(l2(e2)) && (n2.filter = l2(e2)), n2;
        }, x.reverseSysMsgs = function(e2, t2) {
          var n2 = (t2 = t2 || {}).mapper, r2 = d.isFunction(n2);
          return m(e2).call(e2, function(e3) {
            return e3 = u(x).call(x, e3), r2 && (e3 = n2(e3)), e3;
          });
        }, x.completeUnread = function(e2) {
          var t2, n2;
          return e2 = e2 || {}, p(M).call(M, function(t3) {
            delete e2[t3];
          }), p(t2 = c(k)).call(t2, function(t3) {
            e2[t3] = e2[t3] || 0, e2[t3] < 0 && (e2[t3] = 0), e2[n2 = k[t3]] = e2[n2] || 0, e2[n2] = e2[n2] + e2[t3];
          }), e2.total = 0, p(M).call(M, function(t3) {
            e2.total += e2[t3];
          }), e2;
        }, e.exports = x;
      }, function(e, t, n) {
        var r = n(125), o = ["unreadMsgs"], s = n(0);
        function i() {
        }
        i.parse = function(e2) {
          var t2 = e2.split("|");
          return { scene: t2[0], to: t2[1] };
        }, i.genSessionByMsg = function(e2) {
          return { id: e2.sessionId, scene: e2.scene, to: e2.target, updateTime: e2.time, lastMsg: e2 };
        }, i.appendLastMsg = function(e2) {
          var t2 = e2.lastMsg;
          e2["last" + s.capFirstLetter(t2.type) + "Msg"] = t2, e2["last" + s.capFirstLetter(t2.flow) + "Msg"] = t2;
        }, i.genSessionByMsgs = function(e2, t2) {
          var n2 = e2.getLastNotIgnoredMsg(t2);
          return n2 ? i.genSessionByMsg(n2) : null;
        }, i.trim = function(e2) {
          var t2 = e2 = s.simpleClone(e2);
          t2.unreadMsgs;
          return r(t2, o);
        }, i.isComplete = function(e2) {
          return e2.id && e2.scene && e2.to;
        }, e.exports = i;
      }, function(e, t, n) {
        e.exports = n(329);
      }, function(e, t, n) {
        var r = n(491);
        e.exports = function(e2) {
          return r(e2, 5);
        };
      }, function(e, t, n) {
        var r = n(18), o = n(173), s = { V2NIM_LOGIN_STATUS_LOGOUT: 0, V2NIM_LOGIN_STATUS_LOGINED: 1, V2NIM_LOGIN_STATUS_LOGINING: 2 }, i = { V2NIM_CONNECT_STATUS_DISCONNECTED: 0, V2NIM_CONNECT_STATUS_CONNECTED: 1, V2NIM_CONNECT_STATUS_CONNECTING: 2, V2NIM_CONNECT_STATUS_WAITING: 3 };
        function a(e2) {
          this.loginStatus = s.V2NIM_LOGIN_STATUS_LOGOUT, this.connectStatus = i.V2NIM_CONNECT_STATUS_DISCONNECTED, this.logger = e2.logger, this.setMonitor();
        }
        a.prototype = r(new o()), a.prototype.setMonitor = function() {
          var e2 = this;
          this.on("auth/loginLifeCycleAddressing", function() {
            e2.logger.log("auth::life cycle addressing"), e2.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGINING), e2.setConnectStatus(i.V2NIM_CONNECT_STATUS_CONNECTING);
          }), this.on("auth/loginLifeCycleConnect", function() {
            e2.logger.log("auth::life cycle connecting"), e2.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGINING), e2.setConnectStatus(i.V2NIM_CONNECT_STATUS_CONNECTING);
          }), this.on("auth/loginLifeCycleConnectSucc", function() {
            e2.logger.log("auth::life cycle connect success"), e2.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGINING), e2.setConnectStatus(i.V2NIM_CONNECT_STATUS_CONNECTED);
          }), this.on("auth/loginLifeCycleConnectFail", function(t2) {
            e2.logger.log("auth::life cycle connect fail"), e2.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT), e2.setConnectStatus(i.V2NIM_CONNECT_STATUS_DISCONNECTED, t2);
          }), this.on("auth/loginLifeCycleDisconnected", function(t2) {
            e2.logger.log("auth::life cycle disconnected:", t2 && t2.message), e2.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT), e2.setConnectStatus(i.V2NIM_CONNECT_STATUS_DISCONNECTED, t2);
          }), this.on("auth/loginLifeCycleLoginSucc", function() {
            e2.logger.log("auth::life cycle login success, verify authentication success"), e2.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGINED);
          }), this.on("auth/loginLifeCycleLoginFail", function(t2) {
            e2.logger.log("auth::life cycle login fail due to verify authentication failed:", t2), e2.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT, t2);
          }), this.on("auth/loginLifeCycleLogout", function() {
            e2.logger.log("auth::life cycle logout"), e2.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT);
          }), this.on("auth/loginLifeCycleKicked", function(t2) {
            e2.logger.log("auth::life cycle kicked", t2), e2.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT);
          }), this.on("auth/loginLifeCycleWaiting", function() {
            e2.logger.log("auth::life cycle waiting to reconnect");
            e2.getConnectStatus();
            e2.setLoginStatus(s.V2NIM_LOGIN_STATUS_LOGOUT), e2.setConnectStatus(i.V2NIM_CONNECT_STATUS_WAITING);
          });
        }, a.prototype.getConnectStatus = function() {
          return this.connectStatus;
        }, a.prototype.getLoginStatus = function() {
          return this.loginStatus;
        }, a.prototype.setLoginStatus = function(e2, t2) {
          if (e2 !== this.loginStatus) {
            var n2 = this.loginStatus;
            this.loginStatus = e2, this.emit("loginStatus", e2), this.delegateLoginEvent(n2, e2, t2);
          }
        }, a.prototype.delegateLoginEvent = function(e2, t2, n2) {
          e2 === s.V2NIM_LOGIN_STATUS_LOGINING && t2 === s.V2NIM_LOGIN_STATUS_LOGOUT && this.emit("loginFailed", n2);
        }, a.prototype.setConnectStatus = function(e2, t2) {
          if (e2 !== this.connectStatus) {
            var n2 = this.connectStatus;
            this.connectStatus = e2, this.emit("connectStatus", e2), this.delegateConnectEvent(n2, e2, t2);
          }
        }, a.prototype.delegateConnectEvent = function(e2, t2, n2) {
          e2 === i.V2NIM_CONNECT_STATUS_CONNECTED && t2 === i.V2NIM_CONNECT_STATUS_DISCONNECTED && this.emit("disconnected", n2), e2 === i.V2NIM_CONNECT_STATUS_CONNECTING && t2 === i.V2NIM_CONNECT_STATUS_CONNECTED && this.emit("connectSuccess"), e2 === i.V2NIM_CONNECT_STATUS_CONNECTING && t2 === i.V2NIM_CONNECT_STATUS_DISCONNECTED && this.emit("connectFailed", n2), e2 !== i.V2NIM_CONNECT_STATUS_DISCONNECTED && this.connectStatus !== i.V2NIM_CONNECT_STATUS_WAITING || t2 !== i.V2NIM_CONNECT_STATUS_CONNECTING || this.emit("connecting");
        }, a.prototype.destroy = function() {
          this.removeAllListeners();
        }, e.exports = { V2NIMLoginStatus: s, V2NIMConnectStatus: i, StatusProtector: a };
      }, function(e, t, n) {
        e.exports = n(633);
      }, function(e, t, n) {
        var r = n(65), o = n(12);
        e.exports = function(e2) {
          if ("Function" === r(e2))
            return o(e2);
        };
      }, function(e, t, n) {
        var r = n(31), o = n(96);
        e.exports = function(e2, t2) {
          var n2 = e2[t2];
          return o(n2) ? void 0 : r(n2);
        };
      }, function(e, t, n) {
        var r = n(14), o = n(320), s = r["__core-js_shared__"] || o("__core-js_shared__", {});
        e.exports = s;
      }, function(e, t, n) {
        var r = n(14), o = n(28), s = r.document, i = o(s) && o(s.createElement);
        e.exports = function(e2) {
          return i ? s.createElement(e2) : {};
        };
      }, function(e, t, n) {
        var r = n(44), o = n(131), s = n(46), i = function(e2) {
          return function(t2, n2, i2) {
            var a, c = r(t2), u = s(c), l2 = o(i2, u);
            if (e2 && n2 != n2) {
              for (; u > l2; )
                if ((a = c[l2++]) != a)
                  return true;
            } else
              for (; u > l2; l2++)
                if ((e2 || l2 in c) && c[l2] === n2)
                  return e2 || l2 || 0;
            return !e2 && -1;
          };
        };
        e.exports = { includes: i(true), indexOf: i(false) };
      }, function(e, t, n) {
        var r = n(326);
        e.exports = function(e2, t2) {
          return new (r(e2))(0 === t2 ? 0 : t2);
        };
      }, function(e, t, n) {
        var r = {};
        r[n(21)("toStringTag")] = "z", e.exports = "[object z]" === String(r);
      }, function(e, t, n) {
        var r = n(27), o = n(212), s = n(39), i = n(36), a = n(44), c = n(120);
        t.f = r && !o ? Object.defineProperties : function(e2, t2) {
          i(e2);
          for (var n2, r2 = a(t2), o2 = c(t2), u = o2.length, l2 = 0; u > l2; )
            s.f(e2, n2 = o2[l2++], r2[n2]);
          return e2;
        };
      }, function(e, t) {
        e.exports = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"];
      }, function(e, t, n) {
        var r = n(65), o = n(44), s = n(134).f, i = n(221), a = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
        e.exports.f = function(e2) {
          return a && "Window" == r(e2) ? function(e3) {
            try {
              return s(e3);
            } catch (e4) {
              return i(a);
            }
          }(e2) : s(o(e2));
        };
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(20), s = n(49), i = n(227), a = n(17), c = n(354), u = n(137), l2 = n(138), m = n(85), p = n(61), d = n(68), f2 = n(21), g = n(103), h = n(228), y = i.PROPER, v = i.CONFIGURABLE, b = h.IteratorPrototype, T = h.BUGGY_SAFARI_ITERATORS, S = f2("iterator"), M = function() {
          return this;
        };
        e.exports = function(e2, t2, n2, i2, f3, h2, k) {
          c(n2, t2, i2);
          var x, C, I, w = function(e3) {
            if (e3 === f3 && O)
              return O;
            if (!T && e3 in A)
              return A[e3];
            switch (e3) {
              case "keys":
              case "values":
              case "entries":
                return function() {
                  return new n2(this, e3);
                };
            }
            return function() {
              return new n2(this);
            };
          }, _ = t2 + " Iterator", P = false, A = e2.prototype, N = A[S] || A["@@iterator"] || f3 && A[f3], O = !T && N || w(f3), E = "Array" == t2 && A.entries || N;
          if (E && (x = u(E.call(new e2()))) !== Object.prototype && x.next && (s || u(x) === b || (l2 ? l2(x, b) : a(x[S]) || d(x, S, M)), m(x, _, true, true), s && (g[_] = M)), y && "values" == f3 && N && "values" !== N.name && (!s && v ? p(A, "name", "values") : (P = true, O = function() {
            return o(N, this);
          })), f3)
            if (C = { values: w("values"), keys: h2 ? O : w("keys"), entries: w("entries") }, k)
              for (I in C)
                (T || P || !(I in A)) && d(A, I, C[I]);
            else
              r({ target: t2, proto: true, forced: T || P }, C);
          return s && !k || A[S] === O || d(A, S, O, { name: f3 }), g[t2] = O, C;
        };
      }, function(e, t) {
        e.exports = function(e2, t2) {
          return { value: e2, done: t2 };
        };
      }, function(e, t, n) {
        var r = n(19), o = TypeError;
        e.exports = function(e2, t2) {
          if (r(t2, e2))
            return e2;
          throw o("Incorrect invocation");
        };
      }, function(e, t, n) {
        var r = n(132), o = n(81), s = TypeError;
        e.exports = function(e2) {
          if (r(e2))
            return e2;
          throw s(o(e2) + " is not a constructor");
        };
      }, function(e, t, n) {
        "use strict";
        var r = Object.prototype.hasOwnProperty, o = "~";
        function s() {
        }
        function i(e2, t2, n2) {
          this.fn = e2, this.context = t2, this.once = n2 || false;
        }
        function a(e2, t2, n2, r2, s2) {
          if ("function" != typeof n2)
            throw new TypeError("The listener must be a function");
          var a2 = new i(n2, r2 || e2, s2), c2 = o ? o + t2 : t2;
          return e2._events[c2] ? e2._events[c2].fn ? e2._events[c2] = [e2._events[c2], a2] : e2._events[c2].push(a2) : (e2._events[c2] = a2, e2._eventsCount++), e2;
        }
        function c(e2, t2) {
          0 == --e2._eventsCount ? e2._events = new s() : delete e2._events[t2];
        }
        function u() {
          this._events = new s(), this._eventsCount = 0;
        }
        Object.create && (s.prototype = /* @__PURE__ */ Object.create(null), new s().__proto__ || (o = false)), u.prototype.eventNames = function() {
          var e2, t2, n2 = [];
          if (0 === this._eventsCount)
            return n2;
          for (t2 in e2 = this._events)
            r.call(e2, t2) && n2.push(o ? t2.slice(1) : t2);
          return Object.getOwnPropertySymbols ? n2.concat(Object.getOwnPropertySymbols(e2)) : n2;
        }, u.prototype.listeners = function(e2) {
          var t2 = o ? o + e2 : e2, n2 = this._events[t2];
          if (!n2)
            return [];
          if (n2.fn)
            return [n2.fn];
          for (var r2 = 0, s2 = n2.length, i2 = new Array(s2); r2 < s2; r2++)
            i2[r2] = n2[r2].fn;
          return i2;
        }, u.prototype.listenerCount = function(e2) {
          var t2 = o ? o + e2 : e2, n2 = this._events[t2];
          return n2 ? n2.fn ? 1 : n2.length : 0;
        }, u.prototype.emit = function(e2, t2, n2, r2, s2, i2) {
          var a2 = o ? o + e2 : e2;
          if (!this._events[a2])
            return false;
          var c2, u2, l2 = this._events[a2], m = arguments.length;
          if (l2.fn) {
            switch (l2.once && this.removeListener(e2, l2.fn, void 0, true), m) {
              case 1:
                return l2.fn.call(l2.context), true;
              case 2:
                return l2.fn.call(l2.context, t2), true;
              case 3:
                return l2.fn.call(l2.context, t2, n2), true;
              case 4:
                return l2.fn.call(l2.context, t2, n2, r2), true;
              case 5:
                return l2.fn.call(l2.context, t2, n2, r2, s2), true;
              case 6:
                return l2.fn.call(l2.context, t2, n2, r2, s2, i2), true;
            }
            for (u2 = 1, c2 = new Array(m - 1); u2 < m; u2++)
              c2[u2 - 1] = arguments[u2];
            l2.fn.apply(l2.context, c2);
          } else {
            var p, d = l2.length;
            for (u2 = 0; u2 < d; u2++)
              switch (l2[u2].once && this.removeListener(e2, l2[u2].fn, void 0, true), m) {
                case 1:
                  l2[u2].fn.call(l2[u2].context);
                  break;
                case 2:
                  l2[u2].fn.call(l2[u2].context, t2);
                  break;
                case 3:
                  l2[u2].fn.call(l2[u2].context, t2, n2);
                  break;
                case 4:
                  l2[u2].fn.call(l2[u2].context, t2, n2, r2);
                  break;
                default:
                  if (!c2)
                    for (p = 1, c2 = new Array(m - 1); p < m; p++)
                      c2[p - 1] = arguments[p];
                  l2[u2].fn.apply(l2[u2].context, c2);
              }
          }
          return true;
        }, u.prototype.on = function(e2, t2, n2) {
          return a(this, e2, t2, n2, false);
        }, u.prototype.once = function(e2, t2, n2) {
          return a(this, e2, t2, n2, true);
        }, u.prototype.removeListener = function(e2, t2, n2, r2) {
          var s2 = o ? o + e2 : e2;
          if (!this._events[s2])
            return this;
          if (!t2)
            return c(this, s2), this;
          var i2 = this._events[s2];
          if (i2.fn)
            i2.fn !== t2 || r2 && !i2.once || n2 && i2.context !== n2 || c(this, s2);
          else {
            for (var a2 = 0, u2 = [], l2 = i2.length; a2 < l2; a2++)
              (i2[a2].fn !== t2 || r2 && !i2[a2].once || n2 && i2[a2].context !== n2) && u2.push(i2[a2]);
            u2.length ? this._events[s2] = 1 === u2.length ? u2[0] : u2 : c(this, s2);
          }
          return this;
        }, u.prototype.removeAllListeners = function(e2) {
          var t2;
          return e2 ? (t2 = o ? o + e2 : e2, this._events[t2] && c(this, t2)) : (this._events = new s(), this._eventsCount = 0), this;
        }, u.prototype.off = u.prototype.removeListener, u.prototype.addListener = u.prototype.on, u.prefixed = o, u.EventEmitter = u, e.exports = u;
      }, function(e, t, n) {
        var r = n(87)(n(56), "Map");
        e.exports = r;
      }, function(e, t, n) {
        var r = n(56).Symbol;
        e.exports = r;
      }, function(e, t, n) {
        var r = n(263), o = n(530), s = n(202);
        e.exports = function(e2) {
          return s(e2) ? r(e2) : o(e2);
        };
      }, function(e, t) {
        var n = Array.isArray;
        e.exports = n;
      }, function(e, t) {
        e.exports = function(e2) {
          return function(t2) {
            return e2(t2);
          };
        };
      }, function(e, t, n) {
        (function(e2) {
          var r = n(258), o = t && !t.nodeType && t, s = o && "object" == typeof e2 && e2 && !e2.nodeType && e2, i = s && s.exports === o && r.process, a = function() {
            try {
              var e3 = s && s.require && s.require("util").types;
              return e3 || i && i.binding && i.binding("util");
            } catch (e4) {
            }
          }();
          e2.exports = a;
        }).call(this, n(147)(e));
      }, function(e, t) {
        var n = Object.prototype;
        e.exports = function(e2) {
          var t2 = e2 && e2.constructor;
          return e2 === ("function" == typeof t2 && t2.prototype || n);
        };
      }, function(e, t, n) {
        var r = n(263), o = n(533), s = n(202);
        e.exports = function(e2) {
          return s(e2) ? r(e2, true) : o(e2);
        };
      }, function(e, t, n) {
        var r = n(538), o = n(267), s = Object.prototype.propertyIsEnumerable, i = Object.getOwnPropertySymbols, a = i ? function(e2) {
          return null == e2 ? [] : (e2 = Object(e2), r(i(e2), function(t2) {
            return s.call(e2, t2);
          }));
        } : o;
        e.exports = a;
      }, function(e, t, n) {
        var r = n(542), o = n(174), s = n(543), i = n(272), a = n(544), c = n(124), u = n(259), l2 = u(r), m = u(o), p = u(s), d = u(i), f2 = u(a), g = c;
        (r && "[object DataView]" != g(new r(new ArrayBuffer(1))) || o && "[object Map]" != g(new o()) || s && "[object Promise]" != g(s.resolve()) || i && "[object Set]" != g(new i()) || a && "[object WeakMap]" != g(new a())) && (g = function(e2) {
          var t2 = c(e2), n2 = "[object Object]" == t2 ? e2.constructor : void 0, r2 = n2 ? u(n2) : "";
          if (r2)
            switch (r2) {
              case l2:
                return "[object DataView]";
              case m:
                return "[object Map]";
              case p:
                return "[object Promise]";
              case d:
                return "[object Set]";
              case f2:
                return "[object WeakMap]";
            }
          return t2;
        }), e.exports = g;
      }, function(e, t, n) {
        var r = n(547);
        e.exports = function(e2) {
          var t2 = new e2.constructor(e2.byteLength);
          return new r(t2).set(new r(e2)), t2;
        };
      }, function(e, t, n) {
        var r = n(12), o = n(110), s = n(50), i = n(148), a = r("".replace), c = "[" + i + "]", u = RegExp("^" + c + c + "*"), l2 = RegExp(c + c + "*$"), m = function(e2) {
          return function(t2) {
            var n2 = s(o(t2));
            return 1 & e2 && (n2 = a(n2, u, "")), 2 & e2 && (n2 = a(n2, l2, "")), n2;
          };
        };
        e.exports = { start: m(1), end: m(2), trim: m(3) };
      }, function(e, t, n) {
        var r = n(118), o = n(583);
        r.json = o, e.exports = r;
      }, function(e, t, n) {
        var r = n(18), o = n(24), s = n(7), i = n(2), a = n(62), c = a.f, u = n(575);
        function l2(e2) {
          e2.onload && this.once("load", e2.onload), e2.onerror && this.once("error", e2.onerror), e2.onbeforesend && this.once("beforesend", e2.onbeforesend), e2.onaftersend && this.once("aftersend", e2.onaftersend);
          var t2 = (e2 = this.options = a.fetch({ method: "GET", url: "", sync: false, data: null, headers: {}, cookie: false, timeout: 6e4, type: "text", form: null, input: null, putFileAtEnd: false, proxyUrl: "" }, e2)).headers;
          a.notexist(t2["Content-Type"]) && (t2["Content-Type"] = "application/x-www-form-urlencoded"), this.send();
        }
        var m = l2.prototype = r(u.prototype);
        m.send = function() {
          var e2 = this, t2 = e2.options;
          o(function() {
            try {
              try {
                e2.emit("beforesend", t2);
              } catch (e3) {
              }
              e2.doSend();
            } catch (t3) {
              e2.onError("serverError", "请求失败:" + t3.message);
            }
          }, 0);
        }, m.doSend = c, m.afterSend = function() {
          var e2 = this;
          o(function() {
            e2.emit("aftersend", e2.options);
          }, 0);
        }, m.onLoad = function(e2) {
          var t2, n2 = this.options, r2 = e2.status, o2 = e2.result;
          if ("number" != typeof r2 || 0 !== r2)
            if (0 === s(t2 = "" + r2).call(t2, "2")) {
              if ("json" === n2.type)
                try {
                  o2 = JSON.parse(o2);
                } catch (e3) {
                  return void this.onError("parseError", o2);
                }
              this.emit("load", o2);
            } else
              this.onError("serverError", "服务器返回异常状态", { status: r2, result: o2, date: e2.date });
          else
            this.onError("netError", "网络错误", { status: 408 });
        }, m.onError = function(e2, t2, n2) {
          var r2 = a.isObject(n2) ? n2 : {};
          r2.code = e2 || "error", r2.message = t2 || "发生错误", this.emit("error", r2);
        }, m.onTimeout = function() {
          this.onError("timeout", "请求超时", { status: 408 });
        }, m.abort = function() {
          this.onError("abort", "客户端中止", { status: 415 });
        }, m.header = function(e2) {
          var t2 = this;
          if (!a.isArray(e2))
            return t2.getResponseHeader(e2 || "");
          var n2 = {};
          return i(e2).call(e2, function(e3) {
            n2[e3] = t2.header(e3);
          }), n2;
        }, m.getResponseHeader = c, m.destroy = c, e.exports = l2;
      }, function(e, t, n) {
        e.exports = n(600);
      }, function(e, t, n) {
        e.exports = n(613);
      }, function(e, t, n) {
        var r = n(191), o = n(151);
        function s(t2, n2) {
          var i;
          return e.exports = s = r ? o(i = r).call(i) : function(e2, t3) {
            return e2.__proto__ = t3, e2;
          }, e.exports.__esModule = true, e.exports.default = e.exports, s(t2, n2);
        }
        e.exports = s, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(616);
      }, function(e, t, n) {
        var r = n(191), o = n(151), s = n(283);
        function i(t2) {
          var n2;
          return e.exports = i = r ? o(n2 = s).call(n2) : function(e2) {
            return e2.__proto__ || s(e2);
          }, e.exports.__esModule = true, e.exports.default = e.exports, i(t2);
        }
        e.exports = i, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t) {
        var n = { link: { id: 1, heartbeat: 2, negotiateTransport: 5, initTransport: 6 }, sync: { id: 5, sync: 1, syncTeamMembers: 2 }, misc: { id: 6, getSimpleNosToken: 1, getNosToken: 2, notifyUploadLog: 3, uploadSdkLogUrl: 4, audioToText: 5, processImage: 6, getNosTokenTrans: 7, notifyTransLog: 8, fetchFile: 9, fetchFileList: 10, removeFile: 11, getClientAntispam: 17, fileQuickTransfer: 18, getNosOriginUrl: 22, getServerTime: 23, getNosAccessToken: 24, deleteNosAccessToken: 25, getNosCdnHost: 26, getGrayscaleConfig: 27, getMixStorePolicy: 28, getMixStoreToken: 29, getBackSourceToken: 30, uploadDetect: 32 }, avSignal: { id: 15, signalingCreate: 1, signalingDelay: 2, signalingClose: 3, signalingJoin: 4, signalingLeave: 5, signalingInvite: 6, signalingCancel: 7, signalingReject: 8, signalingAccept: 9, signalingControl: 10, signalingNotify: 11, signalingMutilClientSyncNotify: 12, signalingUnreadMessageSyncNotify: 13, signalingChannelsSyncNotify: 14, signalingGetChannelInfo: 15, signalingCallEx: 16, signalingJoinAndAccept: 17 } }, r = { heartbeat: { sid: n.link.id, cid: n.link.heartbeat }, negotiateTransport: { sid: n.link.id, cid: n.link.negotiateTransport, params: [{ type: "int", name: "sdkVersion" }, { type: "Property", name: "negotiateTransportTag" }] }, initTransport: { sid: n.link.id, cid: n.link.initTransport, params: [{ type: "Property", name: "initTransportTag" }] }, getGrayscaleConfig: { sid: n.misc.id, cid: n.misc.getGrayscaleConfig, params: [{ type: "Property", name: "providers" }] }, getMixStorePolicy: { sid: n.misc.id, cid: n.misc.getMixStorePolicy, params: [{ type: "LongArray", name: "providers" }] }, getMixStoreToken: { sid: n.misc.id, cid: n.misc.getMixStoreToken, params: [{ type: "Property", name: "mixTokenReq" }] }, getBackSourceToken: { sid: n.misc.id, cid: n.misc.getBackSourceToken, params: [{ type: "Property", name: "mixAuthTokenReq" }] }, uploadDetect: { sid: n.misc.id, cid: n.misc.uploadDetect, isAwaitable: false, params: [{ type: "Property", name: "notifyDetectTag" }] }, getSimpleNosToken: { sid: n.misc.id, cid: n.misc.getSimpleNosToken, params: [{ type: "int", name: "num" }] }, getNosToken: { sid: n.misc.id, cid: n.misc.getNosToken, params: [{ type: "String", name: "responseBody" }, { type: "Property", name: "nosToken", entity: "nosToken" }] }, uploadSdkLogUrl: { sid: n.misc.id, cid: n.misc.uploadSdkLogUrl, params: [{ type: "string", name: "url" }] }, audioToText: { sid: n.misc.id, cid: n.misc.audioToText, params: [{ type: "Property", name: "audioToText" }] }, processImage: { sid: n.misc.id, cid: n.misc.processImage, params: [{ type: "String", name: "url" }, { type: "PropertyArray", name: "imageOps", entity: "imageOp" }] }, getClientAntispam: { sid: n.misc.id, cid: n.misc.getClientAntispam, params: [{ type: "Property", name: "clientAntispam" }] }, fileQuickTransfer: { sid: n.misc.id, cid: n.misc.fileQuickTransfer, params: [{ type: "Property", name: "fileQuickTransfer" }] }, getNosOriginUrl: { sid: n.misc.id, cid: n.misc.getNosOriginUrl, params: [{ type: "Property", name: "nosFileUrlTag" }] }, getServerTime: { sid: n.misc.id, cid: n.misc.getServerTime, params: [] }, getNosAccessToken: { sid: n.misc.id, cid: n.misc.getNosAccessToken, params: [{ type: "Property", name: "nosAccessTokenTag" }] }, deleteNosAccessToken: { sid: n.misc.id, cid: n.misc.deleteNosAccessToken, params: [{ type: "Property", name: "nosAccessTokenTag" }] }, getNosTokenTrans: { sid: n.misc.id, cid: n.misc.getNosTokenTrans, params: [{ type: "Property", name: "transToken" }] }, fetchFile: { sid: n.misc.id, cid: n.misc.fetchFile, params: [{ type: "String", name: "docId" }] }, fetchFileList: { sid: n.misc.id, cid: n.misc.fetchFileList, params: [{ type: "Property", name: "fileListParam" }] }, removeFile: { sid: n.misc.id, cid: n.misc.removeFile, params: [{ type: "String", name: "docId" }] }, getNosCdnHost: { sid: n.misc.id, cid: n.misc.getNosCdnHost, params: [] }, signalingCreate: { sid: n.avSignal.id, cid: n.avSignal.signalingCreate, params: [{ type: "Property", name: "avSignalTag" }] }, signalingDelay: { sid: n.avSignal.id, cid: n.avSignal.signalingDelay, params: [{ type: "Property", name: "avSignalTag" }] }, signalingClose: { sid: n.avSignal.id, cid: n.avSignal.signalingClose, params: [{ type: "Property", name: "avSignalTag" }] }, signalingJoin: { sid: n.avSignal.id, cid: n.avSignal.signalingJoin, params: [{ type: "Property", name: "avSignalTag" }] }, signalingLeave: { sid: n.avSignal.id, cid: n.avSignal.signalingLeave, params: [{ type: "Property", name: "avSignalTag" }] }, signalingInvite: { sid: n.avSignal.id, cid: n.avSignal.signalingInvite, params: [{ type: "Property", name: "avSignalTag" }] }, signalingCancel: { sid: n.avSignal.id, cid: n.avSignal.signalingCancel, params: [{ type: "Property", name: "avSignalTag" }] }, signalingReject: { sid: n.avSignal.id, cid: n.avSignal.signalingReject, params: [{ type: "Property", name: "avSignalTag" }] }, signalingAccept: { sid: n.avSignal.id, cid: n.avSignal.signalingAccept, params: [{ type: "Property", name: "avSignalTag" }] }, signalingControl: { sid: n.avSignal.id, cid: n.avSignal.signalingControl, params: [{ type: "Property", name: "avSignalTag" }] }, signalingGetChannelInfo: { sid: n.avSignal.id, cid: n.avSignal.signalingGetChannelInfo, params: [{ type: "Property", name: "avSignalTag" }] }, signalingCallEx: { sid: n.avSignal.id, cid: n.avSignal.signalingCallEx, params: [{ type: "Property", name: "avSignalTag" }] }, signalingJoinAndAccept: { sid: n.avSignal.id, cid: n.avSignal.signalingJoinAndAccept, params: [{ type: "Property", name: "avSignalTag" }] } };
        e.exports = { idMap: n, cmdConfig: r, packetConfig: { "1_2": { service: "link", cmd: "heartbeat", response: [] }, "1_5": { service: "link", cmd: "negotiateTransport", response: [{ type: "Property", name: "negotiateTransportTag" }] }, "1_6": { service: "link", cmd: "initTransport", response: [{ type: "Property", name: "initTransportTag" }] }, "6_1": { service: "misc", cmd: "getSimpleNosToken", response: [{ type: "PropertyArray", name: "nosTokens", entity: "nosToken" }] }, "6_2": { service: "misc", cmd: "getNosToken", response: [{ type: "Property", name: "nosToken" }] }, "6_3": { service: "misc", cmd: "notifyUploadLog" }, "6_4": { service: "misc", cmd: "uploadSdkLogUrl" }, "6_5": { service: "misc", cmd: "audioToText", response: [{ type: "String", name: "text" }] }, "6_6": { service: "misc", cmd: "processImage", response: [{ type: "String", name: "url" }] }, "6_7": { service: "misc", cmd: "getNosTokenTrans", response: [{ type: "Property", name: "nosToken" }, { type: "String", name: "docId" }] }, "6_8": { service: "misc", cmd: "notifyTransLog", response: [{ type: "Property", name: "transInfo" }] }, "6_9": { service: "misc", cmd: "fetchFile", response: [{ type: "Property", name: "info", entity: "transInfo" }] }, "6_10": { service: "misc", cmd: "fetchFileList", response: [{ type: "PropertyArray", name: "list", entity: "transInfo" }, { type: "Number", name: "totalCount" }] }, "6_11": { service: "misc", cmd: "removeFile", response: [{ type: "String", name: "res" }] }, "6_17": { service: "misc", cmd: "getClientAntispam", response: [{ type: "Property", name: "clientAntispam" }] }, "6_18": { service: "misc", cmd: "fileQuickTransfer", response: [{ type: "Property", name: "fileQuickTransfer" }] }, "6_22": { service: "misc", cmd: "getNosOriginUrl", response: [{ type: "Property", name: "nosFileUrlTag" }] }, "6_23": { service: "misc", cmd: "getServerTime", response: [{ type: "Number", name: "time" }] }, "6_24": { service: "misc", cmd: "getNosAccessToken", response: [{ type: "Property", name: "nosAccessTokenTag" }] }, "6_25": { service: "misc", cmd: "deleteNosAccessToken" }, "6_26": { service: "misc", cmd: "getNosCdnHost", response: [{ type: "Property", name: "nosConfigTag" }] }, "6_27": { service: "misc", cmd: "getGrayscaleConfig", response: [{ type: "Property", name: "appGrayConfigTag" }] }, "6_28": { service: "misc", cmd: "getMixStorePolicy", response: [{ type: "Property", name: "mixStorePolicyTag" }] }, "6_29": { service: "misc", cmd: "getMixStoreToken", response: [{ type: "Property", name: "mixStoreTokenTag" }] }, "6_30": { service: "misc", cmd: "getBackSourceToken", response: [{ type: "Property", name: "backSourceTokenTag" }] }, "6_31": { service: "link", cmd: "notifyDetect", response: [{ type: "Property", name: "notifyDetectTag" }] }, "6_32": { service: "link", cmd: "uploadDetect", response: [] }, "15_1": { service: "avSignal", cmd: "signalingCreate", response: [{ type: "Property", name: "avSignalTag" }] }, "15_2": { service: "avSignal", cmd: "signalingDelay", response: [{ type: "Property", name: "avSignalTag" }] }, "15_3": { service: "avSignal", cmd: "signalingClose", response: [{ type: "Property", name: "avSignalTag" }] }, "15_4": { service: "avSignal", cmd: "signalingJoin", response: [{ type: "Property", name: "avSignalTag" }] }, "15_5": { service: "avSignal", cmd: "signalingLeave", response: [] }, "15_6": { service: "avSignal", cmd: "signalingInvite", response: [] }, "15_7": { service: "avSignal", cmd: "signalingCancel", response: [] }, "15_8": { service: "avSignal", cmd: "signalingReject", response: [] }, "15_9": { service: "avSignal", cmd: "signalingAccept", response: [] }, "15_10": { service: "avSignal", cmd: "signalingControl", response: [] }, "15_11": { service: "avSignal", cmd: "signalingNotify", response: [{ type: "Property", name: "avSignalTag" }] }, "15_12": { service: "avSignal", cmd: "signalingMutilClientSyncNotify", response: [{ type: "Property", name: "avSignalTag" }] }, "15_13": { service: "avSignal", cmd: "signalingUnreadMessageSyncNotify", response: [{ type: "PropertyArray", name: "avSignalTag" }] }, "15_14": { service: "avSignal", cmd: "signalingChannelsSyncNotify", response: [{ type: "PropertyArray", name: "avSignalTag" }] }, "15_15": { service: "avSignal", cmd: "signalingGetChannelInfo", response: [{ type: "Property", name: "avSignalTag" }] }, "15_16": { service: "avSignal", cmd: "signalingCallEx", response: [{ type: "Property", name: "avSignalTag" }] }, "15_17": { service: "avSignal", cmd: "signalingJoinAndAccept", response: [{ type: "Property", name: "avSignalTag" }] } } };
      }, function(e, t, n) {
        var r = n(4), o = n(2), s = n(26), i = n(0), a = i.notundef, c = i.fillPropertyWithDefault, u = r, l2 = {}, m = {}, p = [], d = {}, f2 = { normal: 0, advanced: 1 }, g = { 0: "normal", 1: "advanced" }, h = u(f2), y = l2.joinMode = { noVerify: 0, needVerify: 1, rejectAll: 2 };
        m.joinMode = { 0: "noVerify", 1: "needVerify", 2: "rejectAll" }, p.push("join"), d.joinMode = u(y);
        var v = l2.beInviteMode = { needVerify: 0, noVerify: 1 };
        m.beInviteMode = { 0: "needVerify", 1: "noVerify" }, p.push("beInvite"), d.beInviteMode = u(v);
        var b = l2.inviteMode = { manager: 0, all: 1 };
        m.inviteMode = { 0: "manager", 1: "all" }, p.push("invite"), d.inviteMode = u(b);
        var T = l2.updateTeamMode = { manager: 0, all: 1 };
        m.updateTeamMode = { 0: "manager", 1: "all" }, p.push("updateTeam"), d.updateTeamMode = u(T);
        var S = l2.updateCustomMode = { manager: 0, all: 1 };
        function M(e2) {
          var t2;
          switch (i.verifyOptions(e2, "action", "team::Team"), e2.action) {
            case "create":
              i.verifyOptions(e2, "teamId", false, "team::Team"), i.verifyOptions(e2, "type name", "team::Team"), i.verifyParamValid("type", e2.type, h, "team::Team"), a(e2.level) && (i.verifyParamType("level", e2.level, "number", "team::Team"), this.level = e2.level);
              break;
            case "update":
              i.verifyOptions(e2, "teamId", "team::Team"), i.verifyOptions(e2, "type", false, "team::Team");
          }
          a(e2.teamId) && (this.teamId = e2.teamId), a(e2.type) && (this.type = f2[e2.type]), a(e2.avatar) && (this.avatar = "" + e2.avatar), a(e2.name) && (this.name = "" + e2.name), a(e2.intro) && (this.intro = "" + e2.intro), a(e2.announcement) && (this.announcement = "" + e2.announcement), o(p).call(p, s(t2 = this.setMode).call(t2, this, e2)), a(e2.custom) && (this.custom = "" + e2.custom);
        }
        function k(e2, t2) {
          a(e2[t2 += "Mode"]) && (e2[t2] = m[t2][e2[t2]]);
        }
        m.updateCustomMode = { 0: "manager", 1: "all" }, p.push("updateCustom"), d.updateCustomMode = u(S), M.prototype.setMode = function(e2, t2) {
          a(e2[t2 += "Mode"]) && (i.verifyParamValid(t2, e2[t2], d[t2], "team::Team"), this[t2] = l2[t2][e2[t2]]);
        }, M.reverse = function(e2, t2) {
          var n2 = i.copy(e2);
          if (a(n2.teamId) && (n2.teamId = "" + n2.teamId), a(n2.type) && (n2.type = g[n2.type]), a(n2.level) && (n2.level = +n2.level), a(n2.valid) && (n2.valid = 1 == +n2.valid), a(n2.memberNum) && (n2.memberNum = +n2.memberNum), a(n2.memberUpdateTime) && (n2.memberUpdateTime = +n2.memberUpdateTime), a(n2.createTime) && (n2.createTime = +n2.createTime), a(n2.updateTime) && (n2.updateTime = +n2.updateTime), a(n2.validToCurrentUser) && (n2.validToCurrentUser = "1" === n2.validToCurrentUser), a(n2.mute) && (n2.mute = "1" === n2.mute), a(n2.muteType))
            switch (n2.muteType) {
              case "0":
                n2.mute = false, n2.muteType = "none";
                break;
              case "1":
                n2.mute = true, n2.muteType = "normal";
                break;
              case "3":
                n2.mute = true, n2.muteType = "all";
            }
          else
            a(n2.mute) && (1 === n2.mute ? (n2.mute = true, n2.muteType = "normal") : (n2.mute = false, n2.muteType = "none"));
          return o(p).call(p, s(k).call(k, null, n2)), delete n2.bits, t2 || M.fillProperties(n2), n2;
        }, M.fillProperties = function(e2) {
          var t2 = c(e2, "beInviteMode", "needVerify"), n2 = c(e2, "inviteMode", "manager"), r2 = c(e2, "updateTeamMode", "manager"), o2 = c(e2, "updateCustomMode", "manager"), s2 = c(e2, "avatar", "");
          return t2 || n2 || r2 || o2 || s2;
        }, e.exports = M;
      }, function(e, t, n) {
        var r = n(45).clientTypeMap;
        function o() {
        }
        o.reverse = function(e2) {
          var t2 = e2;
          return t2.type = r[t2.type], t2;
        }, o.reverseType = function(e2) {
          return r[e2] || e2;
        }, e.exports = o;
      }, function(e, t, n) {
        var r = n(22), o = n(121), s = n(7), i = n(11), a = n(64);
        function c() {
          if (!navigator || !navigator.userAgent)
            return false;
          var e2 = [/Android/i, /webOS/i, /iPhone/i, /iPad/i, /iPod/i, /BlackBerry/i, /Windows Phone/i];
          return o(e2).call(e2, function(e3) {
            return navigator.userAgent.match(e3);
          });
        }
        function u() {
          var e2;
          return !(!navigator || !navigator.userAgent) && ("object" === ("undefined" == typeof navigator ? "undefined" : r(navigator)) && "string" == typeof navigator.userAgent && s(e2 = navigator.userAgent).call(e2, "Electron") >= 0);
        }
        function l2() {
          return navigator && navigator.userAgent;
        }
        e.exports = { getHostEnv: function() {
          return i.isBrowser ? u() ? "Electron" : c() ? "H5" : l2() ? "BROWSER" : "Unset" : i.isRN ? "RN" : i.isWeixinApp ? "Weixin" : "Unset";
        }, getHostEnvEnum: function() {
          return i.isBrowser ? u() ? 5 : c() ? 101 : l2() ? 100 : 0 : i.isRN ? 2 : i.isWeixinApp ? 6 : 0;
        }, getHostEnvVer: function() {
          if (!i.isBrowser)
            return "";
          if (!u())
            return a.version;
          try {
            return navigator.userAgent.match(/Electron\/([\d.]+\d+)/)[1] || a.version;
          } catch (e2) {
            return a.version;
          }
        }, getLibEnv: function() {
          return "BROWSER";
        } };
      }, function(e, t, n) {
        var r = n(18), o = n(37), s = n(8), i = n(77), a = n(198), c = n(11), u = n(767), l2 = n(900), m = n(0), p = m.verifyOptions, d = m.verifyParamType, f2 = n(25).reportAPI, g = n(149).Chatroom, h = n(156);
        function y(e2) {
          var t2 = h(e2);
          return this.subType = "chatroom", this.nosScene = t2.nosScene || "chatroom", this.nosSurvivalTime = t2.nosSurvivalTime, t2.Protocol = a, t2.Message = l2, t2.constructor = y, t2.isAnonymous && (t2.account = t2.account || "nimanon_".concat(m.guid()), t2.isAnonymous = 1, m.verifyOptions(t2, "chatroomNick", "api::Chatroom"), t2.chatroomAvatar = t2.chatroomAvatar || " "), this.init(t2);
        }
        y.Protocol = a, y.parser = g, y.use = i.use, y.getInstance = function(e2) {
          return e2.isAnonymous && (e2.account = e2.account || "nimanon_".concat(m.guid()), e2.isAnonymous = 1, m.verifyOptions(e2, "chatroomNick", "api::Chatroom.getInstance"), e2.chatroomAvatar = e2.chatroomAvatar || " "), i.getInstance.call(this, e2);
        }, y.genInstanceName = function(e2) {
          return m.verifyOptions(e2, "chatroomId", "api::Chatroom.genInstanceName"), "Chatroom-account-" + e2.account + "-chatroomId-" + e2.chatroomId;
        };
        var v = y.fn = y.prototype = r(i.prototype);
        y.info = v.info = c.info, v.getChatroom = function(e2) {
          (e2 = e2 || {}).done = f2({ instance: this, className: "ChatroomFn", funcName: "getChatroom", done: e2.done });
          this.processCallback(e2), this.sendCmd("getChatroom", e2);
        }, v.updateChatroom = function(e2) {
          (e2 = e2 || {}).done = f2({ instance: this, className: "ChatroomFn", funcName: "updateChatroom", done: e2.done }), p(e2, "chatroom needNotify", "api::updateChatroom"), d("needNotify", e2.needNotify, "boolean"), this.processCustom(e2), this.processCallback(e2), e2.chatroom = new u(e2.chatroom), e2.antispamTag = { antiSpamBusinessId: e2.antiSpamBusinessId }, this.sendCmd("updateChatroom", e2);
        }, v.closeChatroom = function(e2) {
          (e2 = e2 || {}).done = f2({ instance: this, className: "ChatroomFn", funcName: "closeChatroom", done: e2.done });
          this.processCustom(e2), this.processCallback(e2), this.sendCmd("closeChatroom", e2);
        }, v.updateTags = function(e2) {
          (e2 = e2 || {}).done = f2({ instance: this, className: "ChatroomFn", funcName: "updateTags", done: e2.done }), m.validate({ tags: { type: "array", required: false }, notifyTargetTags: { type: "string", allowEmpty: true, required: false }, needNotify: { type: "boolean", required: false } }, e2, "chatroom::updateTags");
          var t2 = o({}, e2);
          this.processCallback(t2), t2.tags && (t2.tags = s(t2.tags)), t2.needNotify && (t2.needNotify = t2.needNotify ? 1 : 0), this.sendCmd("updateChatroomTags", { chatRoomTagsUpdateTag: t2 }, t2.done);
        }, e.exports = y, n(910), n(911), n(912), n(913);
      }, function(e, t, n) {
        var r = n(18), o = n(26), s = n(9), i = n(10), a = n(78), c = n(0), u = c.undef, l2 = c.notundef, m = n(291), p = n(11), d = n(149), f2 = n(767), g = n(312);
        function h(e2) {
          var t2, n2, r2;
          c.verifyOptions(e2, "appKey account chatroomId chatroomAddresses", "protocol::ChatroomProtocol"), e2.isAnonymous || c.verifyOptions(e2, "token", "protocol::ChatroomProtocol"), c.verifyParamType("chatroomAddresses", e2.chatroomAddresses, "array", "protocol::ChatroomProtocol"), c.verifyCallback(e2, "onconnect onerror onwillreconnect ondisconnect onmsg onmsgs onrobots", "protocol::ChatroomProtocol"), t2 = "boolean" == typeof c.get(e2, "privateConf.isDataReportEnable") ? e2.privateConf.isDataReportEnable : p.privateConf.isDataReportEnable, n2 = "string" == typeof c.get(e2, "privateConf.reportConfigUrl") ? e2.privateConf.reportConfigUrl : p.privateConf.reportConfigUrl, r2 = "string" == typeof c.get(e2, "privateConf.reportUrl") ? e2.privateConf.reportUrl : p.privateConf.reportUrl, this.reporter = m.initReporter({ isDataReportEnable: t2, reportConfigUrl: n2, reportUrl: r2, appKey: e2.appKey, logger: this.logger }), a.call(this, e2);
        }
        var y = a.fn, v = h.fn = h.prototype = r(y);
        v.init = function() {
          var e2;
          y.init.call(this), d.Chatroom.setProtocol(this), this.parser = d.Chatroom, o(e2 = this.sendCmd).call(e2, this), this.syncResult = {}, this.timetags = {}, this.msgBuffer = [];
        }, v.reset = function() {
          var e2 = this;
          y.reset.call(e2);
          var t2, n2 = e2.options;
          (e2.autoconnect = !!n2.autoconnect, u(n2.msgBufferInterval) && (n2.msgBufferInterval = 300), c.verifyParamType("msgBufferInterval", n2.msgBufferInterval, "number", "protocol::ChatroomProtocol.reset"), u(n2.msgBufferSize) && (n2.msgBufferSize = 500), c.verifyParamType("msgBufferSize", n2.msgBufferSize, "number", "protocol::ChatroomProtocol.reset"), l2(n2.chatroomAddresses)) && (e2.socketUrlsBackup = s(t2 = n2.chatroomAddresses).call(t2, function(t3) {
            return p.formatSocketUrl({ url: t3, secure: e2.options.secure });
          }));
        }, v.processChatroom = function(e2) {
          switch (e2.cmd) {
            case "login":
              e2.error || (e2.obj = { chatroom: i(f2).call(f2, e2.content.chatroom), member: i(g).call(g, e2.content.chatroomMember) }, this.cdnInfo = {}, this.initCdnData(), clearTimeout(this.queryCdnTimer), this.onCdnMsgInfo(e2.content.chatroomCdnInfo));
              break;
            case "kicked":
              this.onKicked(e2);
              break;
            case "logout":
              break;
            case "sendMsg":
              this.onSendMsg(e2);
              break;
            case "msg":
              this.onMsg(e2), this.cdnInfo && this.cdnInfo.enable && this.correctCdnTime(+e2.content.msg.time);
              break;
            case "getChatroomMembers":
            case "getChatroomMembersByTag":
              this.onChatroomMembers(e2);
              break;
            case "getChatroomMemberCountByTag":
              this.onGetChatroomMemberCountByTag(e2);
              break;
            case "getHistoryMsgs":
            case "getHistoryMsgsByTags":
              this.onHistoryMsgs(e2);
              break;
            case "markChatroomMember":
              this.onMarkChatroomMember(e2);
              break;
            case "closeChatroom":
              break;
            case "getChatroom":
              this.onChatroom(e2);
              break;
            case "updateChatroom":
              break;
            case "updateMyChatroomMemberInfo":
              delete e2.obj.chatroomMember;
              break;
            case "getChatroomMembersInfo":
              this.onChatroomMembersInfo(e2);
              break;
            case "kickChatroomMember":
            case "updateChatroomMemberTempMute":
              break;
            case "queueList":
              e2.error || (e2.obj = e2.content);
              break;
            case "syncRobot":
              this.onSyncRobot(e2);
              break;
            case "notifyCdnInfo":
              this.onCdnMsgInfo(e2.content && e2.content.chatroomCdnInfo);
              break;
            case "updateChatroomTag":
              this.onTagsUpdate(e2.content);
          }
        }, v.onChatroom = function(e2) {
          e2.error || (e2.obj.chatroom = i(f2).call(f2, e2.content.chatroom));
        }, v.onTagsUpdate = function(e2) {
          if (this.logger.info("onTagsUpdate:: ", e2), this.options.onTagsUpdate && "function" == typeof this.options.onTagsUpdate) {
            var t2 = e2.updateTags && e2.updateTags.currentTags;
            try {
              t2 = JSON.parse(t2);
            } catch (e3) {
              this.logger.error("onTagsUpdate:: parse tags failed", e3);
            }
            this.options.onTagsUpdate(t2);
          }
        }, e.exports = h, n(888), n(889), n(890), n(899);
      }, function(e, t) {
        e.exports = function() {
        };
      }, function(e, t) {
        e.exports = function(e2, t2) {
          var n = t2.split(".");
          for (; n.length; ) {
            var r = n.shift(), o = false;
            if ("?" == r[r.length - 1] && (r = r.slice(0, -1), o = true), !(e2 = e2[r]) && o)
              return e2;
          }
          return e2;
        };
      }, function(e, t) {
        e.exports = function(e2, t2) {
          return e2 === t2 || e2 != e2 && t2 != t2;
        };
      }, function(e, t, n) {
        var r = n(257), o = n(265);
        e.exports = function(e2) {
          return null != e2 && o(e2.length) && !r(e2);
        };
      }, function(e, t, n) {
        var r = n(9), o = n(10), s = n(0), i = s.notundef, a = s.fillPropertyWithDefault, c = { 0: "normal", 1: "owner", 2: "manager" };
        function u(e2) {
          s.verifyOptions(e2, "teamId", "superTeam::TeamMember"), s.verifyParamAtLeastPresentOne(e2, "nickInTeam muteTeam custom muteNotiType", "superTeam::SuperTeamMember"), this.teamId = e2.teamId, i(e2.account) && (this.account = e2.account), i(e2.nickInTeam) && (this.nickInTeam = e2.nickInTeam), i(e2.muteNotiType) ? this.bits = e2.muteNotiType : i(e2.muteTeam) && (this.bits = 0, e2.muteTeam && (this.bits += 1)), i(e2.mute) && (this.mute = e2.mute ? 1 : 0), i(e2.custom) && (this.custom = "" + e2.custom);
        }
        u.reverse = function(e2) {
          var t2 = s.copy(e2);
          if (i(t2.teamId) && (t2.teamId = "" + t2.teamId), i(t2.type) && (t2.type = c[t2.type]), i(t2.active) && (t2.active = 1 == +t2.active), i(t2.valid) && (t2.valid = 1 == +t2.valid), i(t2.mute) && (t2.mute = 1 == +t2.mute), i(t2.joinTime) && (t2.joinTime = +t2.joinTime), i(t2.updateTime) && (t2.updateTime = +t2.updateTime), i(t2.bits)) {
            var n2 = t2.bits;
            delete t2.bits, t2.muteTeam = !!(1 & n2), t2.muteNotiType = n2;
          }
          return i(t2.teamId) && i(t2.account) && (t2.id = u.genId(t2.teamId, t2.account)), i(t2.followAccountIds) && (t2.followAccountIds = JSON.parse(t2.followAccountIds)), t2;
        }, u.reverseMembers = function(e2) {
          return r(e2).call(e2, function(e3) {
            return o(u).call(u, e3);
          });
        }, u.fillProperties = function(e2) {
          var t2 = a(e2, "mute", false), n2 = a(e2, "custom", "");
          return t2 || n2;
        }, u.genId = function(e2, t2) {
          return e2 + "-" + t2;
        }, u.accounts2ids = function(e2, t2) {
          return r(t2).call(t2, function(t3) {
            return u.genId(e2, t3);
          });
        }, u.assembleMembers = function(e2, t2) {
          return s.isArray(t2) || (t2 = [t2]), r(t2).call(t2, function(t3) {
            return u.assembleMember(e2, t3);
          });
        }, u.assembleMember = function(e2, t2) {
          return { id: u.genId(e2.teamId, t2), account: t2, teamId: e2.teamId, type: "normal", nickInTeam: "", muteTeam: false, mute: false, joinTime: e2.memberUpdateTime, updateTime: e2.memberUpdateTime, active: true, valid: true, followAccountIds: [] };
        }, u.assembleOwner = function(e2) {
          var t2 = u.assembleMember(e2, e2.owner);
          return t2.type = "owner", t2;
        }, e.exports = u;
      }, function(e, t, n) {
        var r = n(9), o = n(10), s = n(4), i = n(108).genPrivateUrl, a = n(0), c = { unknown: 0, male: 1, female: 2 }, u = { 0: "unknown", 1: "male", 2: "female" };
        function l2(e2) {
          a.merge(this, e2), a.notundef(this.gender) && (a.verifyParamValid("gender", this.gender, l2.validGenders, "user::User"), this.gender = c[this.gender]), a.notundef(this.email) && "" !== this.email && a.verifyEmail("email", this.email, "user::User"), a.notundef(this.birth) && "" !== this.birth && a.verifyBirth("birth", this.birth, "user::User"), a.notundef(this.tel) && "" !== this.tel && a.verifyTel("tel", this.tel, "user::User");
        }
        l2.reverse = function(e2, t2, n2) {
          var r2 = a.filterObj(e2, "account nick avatar _avatar_safe sign gender email birth tel custom createTime updateTime");
          return a.notundef(r2.avatar) && (r2.avatar = i(r2.avatar, t2, n2)), a.notundef(r2.gender) && (r2.gender = u[r2.gender]), a.notundef(r2.createTime) && (r2.createTime = +r2.createTime), a.notundef(r2.updateTime) && (r2.updateTime = +r2.updateTime), r2;
        }, l2.reverseUsers = function(e2) {
          return r(e2).call(e2, function(e3) {
            return o(l2).call(l2, e3);
          });
        }, l2.validGenders = s(c), e.exports = l2;
      }, function(e, t, n) {
        var r = n(8), o = n(18), s = n(10), i = n(7), a = n(108).genPrivateUrl, c = n(76), u = n(0), l2 = n(11);
        function m(e2, t2) {
          switch (u.notundef(e2.type) ? u.verifyFileType(e2.type, "msg::FileMessage") : e2.type = "file", u.verifyOptions(e2, "file", "msg::FileMessage"), u.verifyOptions(e2.file, "url ext size", true, "file.", "msg::FileMessage"), e2.type) {
            case "image":
              p.verifyFile(e2.file, "msg::FileMessage");
              break;
            case "audio":
              d.verifyFile(e2.file, "msg::FileMessage");
              break;
            case "video":
              f2.verifyFile(e2.file, "msg::FileMessage");
          }
          c.call(this, e2), t2 && (this.idClient = t2), this.attach = r(e2.file);
        }
        m.prototype = o(c.prototype), m.reverse = function(e2) {
          var t2 = s(c).call(c, e2);
          if (e2.attach = e2.attach ? "" + e2.attach : "", e2.attach && (t2.file = JSON.parse(e2.attach), !t2.file.isS3)) {
            var n2, r2;
            if (t2.file.url = a(t2.file.url) || "", "audio" === t2.type && t2.file.url && !t2.file.mp3Url)
              t2.file.mp3Url = t2.file.url + (~i(r2 = t2.file.url).call(r2, "?") ? "&" : "?") + "audioTrans&type=mp3";
            l2.httpsEnabled && 0 !== i(n2 = t2.file.url).call(n2, "https://") && (t2.file.url = t2.file.url.replace("http", "https"));
          }
          return t2;
        }, e.exports = m;
        var p = n(836), d = n(837), f2 = n(838);
      }, function(e, t, n) {
        var r = n(8), o = n(18), s = n(10), i = n(7), a = n(108).genPrivateUrl, c = n(119), u = n(0), l2 = n(11);
        function m(e2, t2) {
          switch (u.notundef(e2.type) ? u.verifyFileType(e2.type, "msg::FileMessage") : e2.type = "file", u.verifyOptions(e2, "file", "msg::FileMessage"), u.verifyOptions(e2.file, "url ext size", true, "file.", "msg::FileMessage"), e2.type) {
            case "image":
              p.verifyFile(e2.file, "msg::FileMessage");
              break;
            case "audio":
              d.verifyFile(e2.file, "msg::FileMessage");
              break;
            case "video":
              f2.verifyFile(e2.file, "msg::FileMessage");
          }
          c.call(this, e2), t2 && (this.idClient = t2), this.attach = r(e2.file);
        }
        m.prototype = o(c.prototype), m.reverse = function(e2) {
          var t2 = s(c).call(c, e2);
          if (e2.attach = e2.attach ? "" + e2.attach : "", e2.attach && (t2.file = JSON.parse(e2.attach), !t2.file.isS3)) {
            var n2, r2;
            if (t2.file.url = a(t2.file.url) || "", "audio" === t2.type && t2.file.url && !t2.file.mp3Url)
              t2.file.mp3Url = t2.file.url + (~i(r2 = t2.file.url).call(r2, "?") ? "&" : "?") + "audioTrans&type=mp3";
            l2.httpsEnabled && 0 !== i(n2 = t2.file.url).call(n2, "https://") && (t2.file.url = t2.file.url.replace("http", "https"));
          }
          return t2;
        }, e.exports = m;
        var p = n(902), d = n(903), f2 = n(904);
      }, function(e, t, n) {
        var r = n(315);
        e.exports = r;
      }, function(e, t) {
        var n = "object" == typeof document && document.all, r = void 0 === n && void 0 !== n;
        e.exports = { all: n, IS_HTMLDDA: r };
      }, function(e, t, n) {
        var r = n(97);
        e.exports = r && !Symbol.sham && "symbol" == typeof Symbol.iterator;
      }, function(e, t, n) {
        var r = n(27), o = n(5), s = n(162);
        e.exports = !r && !o(function() {
          return 7 != Object.defineProperty(s("div"), "a", { get: function() {
            return 7;
          } }).a;
        });
      }, function(e, t, n) {
        var r = n(5), o = n(17), s = /#|\.prototype\./, i = function(e2, t2) {
          var n2 = c[a(e2)];
          return n2 == l2 || n2 != u && (o(t2) ? r(t2) : !!t2);
        }, a = i.normalize = function(e2) {
          return String(e2).replace(s, ".").toLowerCase();
        }, c = i.data = {}, u = i.NATIVE = "N", l2 = i.POLYFILL = "P";
        e.exports = i;
      }, function(e, t, n) {
        var r = n(27), o = n(5);
        e.exports = r && o(function() {
          return 42 != Object.defineProperty(function() {
          }, "prototype", { value: 42, writable: false }).prototype;
        });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(5), s = n(83), i = n(28), a = n(42), c = n(46), u = n(214), l2 = n(99), m = n(164), p = n(113), d = n(21), f2 = n(98), g = d("isConcatSpreadable"), h = f2 >= 51 || !o(function() {
          var e2 = [];
          return e2[g] = false, e2.concat()[0] !== e2;
        }), y = p("concat"), v = function(e2) {
          if (!i(e2))
            return false;
          var t2 = e2[g];
          return void 0 !== t2 ? !!t2 : s(e2);
        };
        r({ target: "Array", proto: true, arity: 1, forced: !h || !y }, { concat: function(e2) {
          var t2, n2, r2, o2, s2, i2 = a(this), p2 = m(i2, 0), d2 = 0;
          for (t2 = -1, r2 = arguments.length; t2 < r2; t2++)
            if (v(s2 = -1 === t2 ? i2 : arguments[t2]))
              for (o2 = c(s2), u(d2 + o2), n2 = 0; n2 < o2; n2++, d2++)
                n2 in s2 && l2(p2, d2, s2[n2]);
            else
              u(d2 + 1), l2(p2, d2++, s2);
          return p2.length = d2, p2;
        } });
      }, function(e, t) {
        var n = TypeError;
        e.exports = function(e2) {
          if (e2 > 9007199254740991)
            throw n("Maximum allowed index exceeded");
          return e2;
        };
      }, function(e, t, n) {
        var r = n(12), o = n(17), s = n(161), i = r(Function.toString);
        o(s.inspectSource) || (s.inspectSource = function(e2) {
          return i(e2);
        }), e.exports = s.inspectSource;
      }, function(e, t, n) {
        var r = n(327);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(12), o = n(30), s = n(44), i = n(163).indexOf, a = n(114), c = r([].push);
        e.exports = function(e2, t2) {
          var n2, r2 = s(e2), u = 0, l2 = [];
          for (n2 in r2)
            !o(a, n2) && o(r2, n2) && c(l2, n2);
          for (; t2.length > u; )
            o(r2, n2 = t2[u++]) && (~i(l2, n2) || c(l2, n2));
          return l2;
        };
      }, function(e, t, n) {
        var r = n(33);
        e.exports = r("document", "documentElement");
      }, function(e, t, n) {
        var r = n(332);
        n(69), e.exports = r;
      }, function(e, t, n) {
        n(333), n(336), n(337), n(224), n(338);
      }, function(e, t, n) {
        var r = n(131), o = n(46), s = n(99), i = Array, a = Math.max;
        e.exports = function(e2, t2, n2) {
          for (var c = o(e2), u = r(t2, c), l2 = r(void 0 === n2 ? c : n2, c), m = i(a(l2 - u, 0)), p = 0; u < l2; u++, p++)
            s(m, p, e2[u]);
          return m.length = p, m;
        };
      }, function(e, t, n) {
        var r = n(20), o = n(33), s = n(21), i = n(68);
        e.exports = function() {
          var e2 = o("Symbol"), t2 = e2 && e2.prototype, n2 = t2 && t2.valueOf, a = s("toPrimitive");
          t2 && !t2[a] && i(t2, a, function(e3) {
            return r(n2, this);
          }, { arity: 1 });
        };
      }, function(e, t, n) {
        var r = n(97);
        e.exports = r && !!Symbol.for && !!Symbol.keyFor;
      }, function(e, t, n) {
        var r = n(1), o = n(33), s = n(79), i = n(20), a = n(12), c = n(5), u = n(83), l2 = n(17), m = n(28), p = n(129), d = n(102), f2 = n(97), g = o("JSON", "stringify"), h = a(/./.exec), y = a("".charAt), v = a("".charCodeAt), b = a("".replace), T = a(1 .toString), S = /[\uD800-\uDFFF]/g, M = /^[\uD800-\uDBFF]$/, k = /^[\uDC00-\uDFFF]$/, x = !f2 || c(function() {
          var e2 = o("Symbol")();
          return "[null]" != g([e2]) || "{}" != g({ a: e2 }) || "{}" != g(Object(e2));
        }), C = c(function() {
          return '"\\udf06\\ud834"' !== g("\uDF06\uD834") || '"\\udead"' !== g("\uDEAD");
        }), I = function(e2, t2) {
          var n2 = d(arguments), r2 = t2;
          if ((m(t2) || void 0 !== e2) && !p(e2))
            return u(t2) || (t2 = function(e3, t3) {
              if (l2(r2) && (t3 = i(r2, this, e3, t3)), !p(t3))
                return t3;
            }), n2[1] = t2, s(g, null, n2);
        }, w = function(e2, t2, n2) {
          var r2 = y(n2, t2 - 1), o2 = y(n2, t2 + 1);
          return h(M, e2) && !h(k, o2) || h(k, e2) && !h(M, r2) ? "\\u" + T(v(e2, 0), 16) : e2;
        };
        g && r({ target: "JSON", stat: true, arity: 3, forced: x || C }, { stringify: function(e2, t2, n2) {
          var r2 = d(arguments), o2 = s(x ? I : g, null, r2);
          return C && "string" == typeof o2 ? b(o2, S, w) : o2;
        } });
      }, function(e, t, n) {
        n(23)("iterator");
      }, function(e, t, n) {
        var r = n(23), o = n(222);
        r("toPrimitive"), o();
      }, function(e, t, n) {
        var r = n(27), o = n(30), s = Function.prototype, i = r && Object.getOwnPropertyDescriptor, a = o(s, "name"), c = a && "something" === (function() {
        }).name, u = a && (!r || r && i(s, "name").configurable);
        e.exports = { EXISTS: a, PROPER: c, CONFIGURABLE: u };
      }, function(e, t, n) {
        "use strict";
        var r, o, s, i = n(5), a = n(17), c = n(28), u = n(84), l2 = n(137), m = n(68), p = n(21), d = n(49), f2 = p("iterator"), g = false;
        [].keys && ("next" in (s = [].keys()) ? (o = l2(l2(s))) !== Object.prototype && (r = o) : g = true), !c(r) || i(function() {
          var e2 = {};
          return r[f2].call(e2) !== e2;
        }) ? r = {} : d && (r = u(r)), a(r[f2]) || m(r, f2, function() {
          return this;
        }), e.exports = { IteratorPrototype: r, BUGGY_SAFARI_ITERATORS: g };
      }, function(e, t, n) {
        var r = n(5);
        e.exports = !r(function() {
          function e2() {
          }
          return e2.prototype.constructor = null, Object.getPrototypeOf(new e2()) !== e2.prototype;
        });
      }, function(e, t, n) {
        n(69);
        var r = n(67), o = n(30), s = n(19), i = n(374), a = Array.prototype, c = { DOMTokenList: true, NodeList: true };
        e.exports = function(e2) {
          var t2 = e2.forEach;
          return e2 === a || s(a, e2) && t2 === a.forEach || o(c, r(e2)) ? i : t2;
        };
      }, function(e, t, n) {
        var r = n(382);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(386);
        n(69), e.exports = r;
      }, function(e, t, n) {
        n(387);
      }, function(e, t, n) {
        var r = n(33), o = n(12), s = n(134), i = n(135), a = n(36), c = o([].concat);
        e.exports = r("Reflect", "ownKeys") || function(e2) {
          var t2 = s.f(a(e2)), n2 = i.f;
          return n2 ? c(t2, n2(e2)) : t2;
        };
      }, function(e, t, n) {
        var r = n(21), o = n(103), s = r("iterator"), i = Array.prototype;
        e.exports = function(e2) {
          return void 0 !== e2 && (o.Array === e2 || i[s] === e2);
        };
      }, function(e, t, n) {
        var r = n(20), o = n(31), s = n(36), i = n(81), a = n(139), c = TypeError;
        e.exports = function(e2, t2) {
          var n2 = arguments.length < 2 ? a(e2) : t2;
          if (o(n2))
            return s(r(n2, e2));
          throw c(i(e2) + " is not iterable");
        };
      }, function(e, t, n) {
        var r = n(20), o = n(36), s = n(160);
        e.exports = function(e2, t2, n2) {
          var i, a;
          o(e2);
          try {
            if (!(i = s(e2, "return"))) {
              if ("throw" === t2)
                throw n2;
              return n2;
            }
            i = r(i, e2);
          } catch (e3) {
            a = true, i = e3;
          }
          if ("throw" === t2)
            throw n2;
          if (a)
            throw i;
          return o(i), n2;
        };
      }, function(e, t, n) {
        "use strict";
        var r = n(33), o = n(39), s = n(21), i = n(27), a = s("species");
        e.exports = function(e2) {
          var t2 = r(e2), n2 = o.f;
          i && t2 && !t2[a] && n2(t2, a, { configurable: true, get: function() {
            return this;
          } });
        };
      }, function(e, t, n) {
        var r = n(36), o = n(172), s = n(96), i = n(21)("species");
        e.exports = function(e2, t2) {
          var n2, a = r(e2).constructor;
          return void 0 === a || s(n2 = r(a)[i]) ? t2 : o(n2);
        };
      }, function(e, t, n) {
        var r, o, s, i, a = n(14), c = n(79), u = n(34), l2 = n(17), m = n(30), p = n(5), d = n(218), f2 = n(102), g = n(162), h = n(241), y = n(242), v = n(116), b = a.setImmediate, T = a.clearImmediate, S = a.process, M = a.Dispatch, k = a.Function, x = a.MessageChannel, C = a.String, I = 0, w = {};
        try {
          r = a.location;
        } catch (e2) {
        }
        var _ = function(e2) {
          if (m(w, e2)) {
            var t2 = w[e2];
            delete w[e2], t2();
          }
        }, P = function(e2) {
          return function() {
            _(e2);
          };
        }, A = function(e2) {
          _(e2.data);
        }, N = function(e2) {
          a.postMessage(C(e2), r.protocol + "//" + r.host);
        };
        b && T || (b = function(e2) {
          h(arguments.length, 1);
          var t2 = l2(e2) ? e2 : k(e2), n2 = f2(arguments, 1);
          return w[++I] = function() {
            c(t2, void 0, n2);
          }, o(I), I;
        }, T = function(e2) {
          delete w[e2];
        }, v ? o = function(e2) {
          S.nextTick(P(e2));
        } : M && M.now ? o = function(e2) {
          M.now(P(e2));
        } : x && !y ? (i = (s = new x()).port2, s.port1.onmessage = A, o = u(i.postMessage, i)) : a.addEventListener && l2(a.postMessage) && !a.importScripts && r && "file:" !== r.protocol && !p(N) ? (o = N, a.addEventListener("message", A, false)) : o = "onreadystatechange" in g("script") ? function(e2) {
          d.appendChild(g("script")).onreadystatechange = function() {
            d.removeChild(this), _(e2);
          };
        } : function(e2) {
          setTimeout(P(e2), 0);
        }), e.exports = { set: b, clear: T };
      }, function(e, t) {
        var n = TypeError;
        e.exports = function(e2, t2) {
          if (e2 < t2)
            throw n("Not enough arguments");
          return e2;
        };
      }, function(e, t, n) {
        var r = n(66);
        e.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(r);
      }, function(e, t) {
        e.exports = "object" == typeof Deno && Deno && "object" == typeof Deno.version;
      }, function(e, t, n) {
        var r = n(105), o = n(245), s = n(117).CONSTRUCTOR;
        e.exports = s || !o(function(e2) {
          r.all(e2).then(void 0, function() {
          });
        });
      }, function(e, t, n) {
        var r = n(21)("iterator"), o = false;
        try {
          var s = 0, i = { next: function() {
            return { done: !!s++ };
          }, return: function() {
            o = true;
          } };
          i[r] = function() {
            return this;
          }, Array.from(i, function() {
            throw 2;
          });
        } catch (e2) {
        }
        e.exports = function(e2, t2) {
          if (!t2 && !o)
            return false;
          var n2 = false;
          try {
            var s2 = {};
            s2[r] = function() {
              return { next: function() {
                return { done: n2 = true };
              } };
            }, e2(s2);
          } catch (e3) {
          }
          return n2;
        };
      }, function(e, t, n) {
        var r = n(36), o = n(28), s = n(70);
        e.exports = function(e2, t2) {
          if (r(e2), o(t2) && t2.constructor === e2)
            return t2;
          var n2 = s.f(e2);
          return (0, n2.resolve)(t2), n2.promise;
        };
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(20), s = n(31), i = n(70), a = n(104), c = n(47);
        r({ target: "Promise", stat: true }, { allSettled: function(e2) {
          var t2 = this, n2 = i.f(t2), r2 = n2.resolve, u = n2.reject, l2 = a(function() {
            var n3 = s(t2.resolve), i2 = [], a2 = 0, u2 = 1;
            c(e2, function(e3) {
              var s2 = a2++, c2 = false;
              u2++, o(n3, t2, e3).then(function(e4) {
                c2 || (c2 = true, i2[s2] = { status: "fulfilled", value: e4 }, --u2 || r2(i2));
              }, function(e4) {
                c2 || (c2 = true, i2[s2] = { status: "rejected", reason: e4 }, --u2 || r2(i2));
              });
            }), --u2 || r2(i2);
          });
          return l2.error && u(l2.value), n2.promise;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(20), s = n(31), i = n(33), a = n(70), c = n(104), u = n(47);
        r({ target: "Promise", stat: true }, { any: function(e2) {
          var t2 = this, n2 = i("AggregateError"), r2 = a.f(t2), l2 = r2.resolve, m = r2.reject, p = c(function() {
            var r3 = s(t2.resolve), i2 = [], a2 = 0, c2 = 1, p2 = false;
            u(e2, function(e3) {
              var s2 = a2++, u2 = false;
              c2++, o(r3, t2, e3).then(function(e4) {
                u2 || p2 || (p2 = true, l2(e4));
              }, function(e4) {
                u2 || p2 || (u2 = true, i2[s2] = e4, --c2 || m(new n2(i2, "No one promise resolved")));
              });
            }), --c2 || m(new n2(i2, "No one promise resolved"));
          });
          return p.error && m(p.value), r2.promise;
        } });
      }, function(e, t, n) {
        var r = n(410);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(22).default, o = n(412);
        e.exports = function(e2) {
          var t2 = o(e2, "string");
          return "symbol" === r(t2) ? t2 : String(t2);
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(420);
        e.exports = r;
      }, function(e, t, n) {
        "use strict";
        var r = n(81), o = TypeError;
        e.exports = function(e2, t2) {
          if (!delete e2[t2])
            throw o("Cannot delete property " + r(t2) + " of " + r(e2));
        };
      }, function(e, t, n) {
        n(455), n(457);
      }, function(e, t, n) {
        "use strict";
        var r, o = n(14), s = n(79), i = n(17), a = n(456), c = n(66), u = n(102), l2 = n(241), m = o.Function, p = /MSIE .\./.test(c) || a && ((r = o.Bun.version.split(".")).length < 3 || 0 == r[0] && (r[1] < 3 || 3 == r[1] && 0 == r[2]));
        e.exports = function(e2, t2) {
          var n2 = t2 ? 2 : 1;
          return p ? function(r2, o2) {
            var a2 = l2(arguments.length, 1) > n2, c2 = i(r2) ? r2 : m(r2), p2 = a2 ? u(arguments, n2) : [], d = a2 ? function() {
              s(c2, this, p2);
            } : c2;
            return t2 ? e2(d, o2) : e2(d);
          } : e2;
        };
      }, function(e, t, n) {
        var r = n(480);
        e.exports = r;
      }, function(e, t) {
        e.exports = function e2(t2, n) {
          "use strict";
          var r, o, s = /(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi, i = /(^[ ]*|[ ]*$)/g, a = /(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/, c = /^0x[0-9a-f]+$/i, u = /^0/, l2 = function(t3) {
            return e2.insensitive && ("" + t3).toLowerCase() || "" + t3;
          }, m = l2(t2).replace(i, "") || "", p = l2(n).replace(i, "") || "", d = m.replace(s, "\0$1\0").replace(/\0$/, "").replace(/^\0/, "").split("\0"), f2 = p.replace(s, "\0$1\0").replace(/\0$/, "").replace(/^\0/, "").split("\0"), g = parseInt(m.match(c), 16) || 1 !== d.length && m.match(a) && Date.parse(m), h = parseInt(p.match(c), 16) || g && p.match(a) && Date.parse(p) || null;
          if (h) {
            if (g < h)
              return -1;
            if (g > h)
              return 1;
          }
          for (var y = 0, v = Math.max(d.length, f2.length); y < v; y++) {
            if (r = !(d[y] || "").match(u) && parseFloat(d[y]) || d[y] || 0, o = !(f2[y] || "").match(u) && parseFloat(f2[y]) || f2[y] || 0, isNaN(r) !== isNaN(o))
              return isNaN(r) ? 1 : -1;
            if (typeof r != typeof o && (r += "", o += ""), r < o)
              return -1;
            if (r > o)
              return 1;
          }
          return 0;
        };
      }, function(e, t, n) {
        var r = n(124), o = n(91);
        e.exports = function(e2) {
          if (!o(e2))
            return false;
          var t2 = r(e2);
          return "[object Function]" == t2 || "[object GeneratorFunction]" == t2 || "[object AsyncFunction]" == t2 || "[object Proxy]" == t2;
        };
      }, function(e, t, n) {
        (function(t2) {
          var n2 = "object" == typeof t2 && t2 && t2.Object === Object && t2;
          e.exports = n2;
        }).call(this, n(73));
      }, function(e, t) {
        var n = Function.prototype.toString;
        e.exports = function(e2) {
          if (null != e2) {
            try {
              return n.call(e2);
            } catch (e3) {
            }
            try {
              return e2 + "";
            } catch (e3) {
            }
          }
          return "";
        };
      }, function(e, t, n) {
        var r = n(509), o = n(516), s = n(518), i = n(519), a = n(520);
        function c(e2) {
          var t2 = -1, n2 = null == e2 ? 0 : e2.length;
          for (this.clear(); ++t2 < n2; ) {
            var r2 = e2[t2];
            this.set(r2[0], r2[1]);
          }
        }
        c.prototype.clear = r, c.prototype.delete = o, c.prototype.get = s, c.prototype.has = i, c.prototype.set = a, e.exports = c;
      }, function(e, t, n) {
        var r = n(262), o = n(201), s = Object.prototype.hasOwnProperty;
        e.exports = function(e2, t2, n2) {
          var i = e2[t2];
          s.call(e2, t2) && o(i, n2) && (void 0 !== n2 || t2 in e2) || r(e2, t2, n2);
        };
      }, function(e, t, n) {
        var r = n(522);
        e.exports = function(e2, t2, n2) {
          "__proto__" == t2 && r ? r(e2, t2, { configurable: true, enumerable: true, value: n2, writable: true }) : e2[t2] = n2;
        };
      }, function(e, t, n) {
        var r = n(524), o = n(525), s = n(177), i = n(264), a = n(302), c = n(528), u = Object.prototype.hasOwnProperty;
        e.exports = function(e2, t2) {
          var n2 = s(e2), l2 = !n2 && o(e2), m = !n2 && !l2 && i(e2), p = !n2 && !l2 && !m && c(e2), d = n2 || l2 || m || p, f2 = d ? r(e2.length, String) : [], g = f2.length;
          for (var h in e2)
            !t2 && !u.call(e2, h) || d && ("length" == h || m && ("offset" == h || "parent" == h) || p && ("buffer" == h || "byteLength" == h || "byteOffset" == h) || a(h, g)) || f2.push(h);
          return f2;
        };
      }, function(e, t, n) {
        (function(e2) {
          var r = n(56), o = n(527), s = t && !t.nodeType && t, i = s && "object" == typeof e2 && e2 && !e2.nodeType && e2, a = i && i.exports === s ? r.Buffer : void 0, c = (a ? a.isBuffer : void 0) || o;
          e2.exports = c;
        }).call(this, n(147)(e));
      }, function(e, t) {
        e.exports = function(e2) {
          return "number" == typeof e2 && e2 > -1 && e2 % 1 == 0 && e2 <= 9007199254740991;
        };
      }, function(e, t) {
        e.exports = function(e2, t2) {
          return function(n) {
            return e2(t2(n));
          };
        };
      }, function(e, t) {
        e.exports = function() {
          return [];
        };
      }, function(e, t, n) {
        var r = n(269), o = n(270), s = n(182), i = n(267), a = Object.getOwnPropertySymbols ? function(e2) {
          for (var t2 = []; e2; )
            r(t2, s(e2)), e2 = o(e2);
          return t2;
        } : i;
        e.exports = a;
      }, function(e, t) {
        e.exports = function(e2, t2) {
          for (var n = -1, r = t2.length, o = e2.length; ++n < r; )
            e2[o + n] = t2[n];
          return e2;
        };
      }, function(e, t, n) {
        var r = n(266)(Object.getPrototypeOf, Object);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(269), o = n(177);
        e.exports = function(e2, t2, n2) {
          var s = t2(e2);
          return o(e2) ? s : r(s, n2(e2));
        };
      }, function(e, t, n) {
        var r = n(87)(n(56), "Set");
        e.exports = r;
      }, function(e, t, n) {
        var r = n(571);
        e.exports = r;
      }, function(e, t, n) {
        "use strict";
        var r = n(12), o = n(31), s = n(28), i = n(30), a = n(102), c = n(109), u = Function, l2 = r([].concat), m = r([].join), p = {}, d = function(e2, t2, n2) {
          if (!i(p, t2)) {
            for (var r2 = [], o2 = 0; o2 < t2; o2++)
              r2[o2] = "a[" + o2 + "]";
            p[t2] = u("C,a", "return new C(" + m(r2, ",") + ")");
          }
          return p[t2](e2, n2);
        };
        e.exports = c ? u.bind : function(e2) {
          var t2 = o(this), n2 = t2.prototype, r2 = a(arguments, 1), i2 = function() {
            var n3 = l2(r2, a(arguments));
            return this instanceof i2 ? d(t2, n3.length, n3) : t2.apply(e2, n3);
          };
          return s(n2) && (i2.prototype = n2), i2;
        };
      }, function(e, t, n) {
        var r = n(90), o = n(7), s = n(71), i = n(126), a = n(8), c = n(62), u = c.getGlobal(), l2 = {}, m = u.name || "_parent", p = [], d = [];
        l2.addMsgListener = function(e2) {
          p.push(e2);
        };
        var f2, g, h, y, v = (f2 = /^([\w]+?:\/\/.*?(?=\/|$))/i, function(e2) {
          return e2 = e2 || "", f2.test(e2) ? RegExp.$1 : "*";
        }), b = function() {
          var e2, t2, n2 = r(e2 = unescape(u.name || "")).call(e2);
          if (n2 && 0 === o(n2).call(n2, "MSG|")) {
            u.name = "";
            var s2 = c.string2object(n2.replace("MSG|", ""), "|"), i2 = (s2.origin || "").toLowerCase();
            i2 && "*" !== i2 && 0 !== o(t2 = location.href.toLowerCase()).call(t2, i2) || function(e3) {
              for (var t3 = 0, n3 = p.length; t3 < n3; t3++)
                try {
                  p[t3].call(null, e3);
                } catch (e4) {
                }
            }({ data: JSON.parse(s2.data || "null"), source: u.frames[s2.self] || s2.self, origin: v(s2.ref || ("undefined" == typeof document ? "" : document.referrer)) });
          }
        }, T = (h = function(e2, t2) {
          for (var n2 = 0, r2 = e2.length; n2 < r2; n2++)
            if (e2[n2] === t2)
              return true;
          return false;
        }, function() {
          if (d.length) {
            g = [];
            for (var e2, t2 = d.length - 1; t2 >= 0; t2--)
              e2 = d[t2], h(g, e2.w) || (g.push(e2.w), s(d).call(d, t2, 1), e2.w.name = e2.d);
            g = null;
          }
        }), S = l2.startTimer = (y = false, function() {
          y || (y = true, u.postMessage || (i(T, 100), i(b, 20)));
        });
        l2.postMessage = function(e2) {
          var t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
          if (c.fillUndef(t2, { origin: "*", source: m }), u.postMessage) {
            var n2 = t2.data;
            u.FormData || (n2 = a(n2)), e2.postMessage(n2, t2.origin);
          } else {
            if (S(), c.isObject(t2)) {
              var r2 = {};
              r2.origin = t2.origin || "", r2.ref = location.href, r2.self = t2.source, r2.data = a(t2.data), t2 = "MSG|" + c.object2string(r2, "|", true);
            }
            d.unshift({ w: e2, d: escape(t2) });
          }
        }, e.exports = l2;
      }, function(e, t, n) {
        var r = n(593);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(0), o = { file: { md5: "$(Etag)", size: "$(ObjectSize)" }, image: { md5: "$(Etag)", size: "$(ObjectSize)", w: "$(ImageInfo.Width)", h: "$(ImageInfo.Height)", orientation: "$(ImageInfo.Orientation)" }, audio: { md5: "$(Etag)", size: "$(ObjectSize)", dur: "$(AVinfo.Audio.Duration)" }, video: { md5: "$(Etag)", size: "$(ObjectSize)", dur: "$(AVinfo.Video.Duration)", w: "$(AVinfo.Video.Width)", h: "$(AVinfo.Video.Height)" } }, s = { genResponseBody: function(e2) {
          return o[e2 = e2 || "file"];
        }, parseResponse: function(e2, t2) {
          r.notundef(e2.size) && (e2.size = +e2.size), r.notundef(e2.w) && (e2.w = +e2.w), r.notundef(e2.h) && (e2.h = +e2.h), r.notundef(e2.dur) && (e2.dur = +e2.dur);
          var n2 = e2.orientation;
          if (r.notundef(n2) && (delete e2.orientation, t2 && ("right, top" === n2 || "left, bottom" === n2))) {
            var o2 = e2.w;
            e2.w = e2.h, e2.h = o2;
          }
          return e2;
        } };
        e.exports = s;
      }, function(e, t, n) {
        var r = n(125), o = n(15), s = n(7), i = n(60), a = n(48), c = n(24), u = ["Code", "code", "Message", "message"], l2 = n(11), m = n(0), p = n(41), d = n(609), f2 = n(610), g = n(107), h = g.EMResourceUploadWay, y = g.EMExceptionState, v = n(186).abort, b = m.supportFormData;
        function T(e2, t2) {
          var n2 = this, r2 = e2.uploadprogress, o2 = e2.uploaddone, s2 = e2.beginupload;
          return { beginupload: "function" == typeof s2 ? function(e3) {
            try {
              s2(e3, t2);
            } catch (e4) {
              n2.logger.error("Upload::options.beginupload execute error", e4);
            }
          } : function() {
          }, uploadprogress: "function" == typeof r2 ? function(e3) {
            n2.reporterHook.emit("reporter/uploadUpdate", { transferred_size: e3.loaded });
            try {
              r2(e3, t2);
            } catch (e4) {
              n2.logger.error("Upload::options.uploadprogress execute error", e4);
            }
          } : function(e3) {
            n2.reporterHook.emit("reporter/uploadUpdate", { transferred_size: e3.loaded });
          }, uploaddone: function(e3, r3) {
            e3 ? n2.reporterHook.emit("reporter/uploadEnd", "RequestAbortedError" === e3.code || "abort" === e3.code ? y.kCanceled : y.kFailed) : n2.reporterHook.emit("reporter/uploadEnd", y.kSucceed);
            try {
              o2(e3, r3, null, t2);
            } catch (e4) {
              n2.logger.error("Upload::options.uploaddone execute error", e4);
            }
          } };
        }
        function S(e2, t2, n2) {
          var r2 = this;
          r2.options = m.copy(e2), e2 = r2.options, m.verifyOptions(e2, "url fileName"), m.verifyParamPresentJustOne(e2, "blob fileInput"), m.verifyCallback(e2, "beginupload uploadprogress uploaddone"), r2.reporterHook = t2.reporterHook, r2.logger = t2.logger, r2.message = n2;
          var c2 = T.call(this, e2, n2), u2 = c2.beginupload, g2 = c2.uploadprogress, y2 = c2.uploaddone;
          r2.options.beginupload = u2, r2.options.uploadprogress = g2, r2.options.uploaddone = y2, e2.fileInput && (e2.fileInput = m.verifyFileInput(e2.fileInput)), e2.type && m.verifyFileType(e2.type), e2.timeout ? m.verifyParamType("timeout", e2.timeout, "number") : e2.timeout = 6e5, m.verifyFileUploadCallback(e2), e2.data = {}, e2.params && m.merge(e2.data, e2.params);
          var v2, S2, M = e2.fileName, k = e2.fileInput;
          if (b) {
            if (k) {
              if (!(S2 = e2.type ? m.filterFiles(k.files, e2.type) : o([]).call(k.files, 0)) || !S2.length)
                return void e2.uploaddone(p.newWrongFileTypeError("未读取到" + e2.type + "类型的文件, 请确保文件选择节点的文件不为空, 并且请确保选择了" + e2.type + "类型的文件"));
              e2.data[M] = S2[0], v2 = k.files[0].size;
            } else if (e2.blob) {
              var x;
              if (e2.data[M] = e2.blob, "file" !== e2.type && e2.blob.type && -1 === s(x = e2.blob.type).call(x, e2.type))
                return void e2.uploaddone(p.newWrongFileTypeError("未读取到" + e2.type + "类型的文件, 请确保选择了" + e2.type + "类型的文件"));
              v2 = e2.blob.size;
            }
            if (r2.reporterHook.emit("reporter/uploadUpdate", { full_size: v2 }), e2.maxSize && v2 > e2.maxSize)
              return void e2.uploaddone(p.newFileTooLargeError("上传文件大小超过".concat(e2.maxSize, "限制")));
          }
          function C() {
            if (r2.logger.info("Upload:enter aws upload"), v2) {
              if (v2 > l2.chunkMaxSize)
                e2.uploaddone(p.newFileTooLargeError("直传文件大小超过".concat(l2.commonMaxSize, "限制")));
              else if (e2.s3Policy && e2.s3Policy.uploadConfig && e2.s3Policy.uploadConfig.retryPolicy) {
                var t3 = e2.s3Policy.uploadConfig.retryPolicy, n3 = { accessKeyId: e2.mixStoreToken.accessKeyId, secretAccessKey: e2.mixStoreToken.secretAccessKey, sessionToken: e2.mixStoreToken.sessionToken, region: e2.mixStoreToken.region, maxRetries: t3.retry }, o2 = new (0, e2.s3)();
                o2.config.update(n3);
                var a2 = r2.reporterHook.getNTPTime();
                o2.config.systemClockOffset = a2 - i();
                var c3 = decodeURIComponent(e2.mixStoreToken.bucket), u3 = decodeURIComponent(e2.mixStoreToken.objectName), m2 = e2.data[M], d2 = o2.upload({ Bucket: c3, Key: u3, Body: m2, Metadata: { token: e2.mixStoreToken.token }, ContentType: m2.type || "application/octet-stream" });
                d2.on("httpUploadProgress", function(t4) {
                  var n4 = Math.floor(1e4 * t4.loaded / t4.total) / 100, r3 = { docId: e2.docId, total: t4.total, loaded: t4.loaded, percentage: n4, percentageText: n4 + "%" };
                  e2.fileInput && (r3.fileInput = e2.fileInput), e2.blob && (r3.blob = e2.blob), e2.uploadprogress(r3);
                }), d2.send(function(n4, o3) {
                  if (e2.errorHook({ bucket: c3, object: u3 }, { provider: "s3" }), e2.docId && (o3.docId = e2.docId), n4 && "RequestAbortedError" === n4.code)
                    r2.logger.error("uploadFile:", "api::s3:upload file abort", n4), r2.onError(n4);
                  else if (n4) {
                    var i2;
                    e2.logger.error("error:", "api::s3:upload file failed", n4);
                    var a3 = e2.providers[(s(i2 = e2.providers).call(i2, e2.curProvider) + 1) % e2.providers.length];
                    t3.retryNext && a3 ? (r2.addCircuitTimer(e2, a3), 1 === a3 && e2.getMixStoreToken(1, function(t4) {
                      e2.mixStoreToken = t4, I();
                    })) : r2.onError(o3), e2.errorHook(n4, { provider: "s3" });
                  } else {
                    var l3 = r2.options.s3Policy.cdnSchema;
                    l3 = (l3 = l3.replace("{cdnDomain}", r2.options.s3Policy.dlcdn)).replace("{objectName}", o3.Key), e2.uploaddone(null, { size: m2.size, name: m2.name, url: l3, ext: m2.name && m2.name.split(".")[1] || "unknown", _url_safe: e2.mixStoreToken.shortUrl, isS3: true }), e2.logger.info("s3 Upload done: fileObj is", { size: m2.size, name: m2.name, url: l3, ext: m2.name && m2.name.split(".")[1] || "unknown", _url_safe: e2.mixStoreToken.shortUrl, isS3: true });
                  }
                }), "function" == typeof e2.beginupload && e2.beginupload(d2);
              }
            } else
              e2.uploaddone(p.newFileTooLargeError("Browser version is too low"));
          }
          function I() {
            if (r2.logger.info("Upload:enter nos upload"), v2 && !e2.commonUpload)
              return r2.logger.info("Upload:use chunk upload, url ".concat(e2.url)), v2 > l2.chunkMaxSize ? void e2.uploaddone(p.newFileTooLargeError("直传文件大小超过".concat(l2.chunkMaxSize, "限制"))) : void (r2.sn = f2(e2, M, r2, -1));
            if (r2.logger.info("Upload:use common upload, url ".concat(e2.url)), v2 && v2 > l2.commonMaxSize)
              e2.uploaddone(p.newFileTooLargeError("普通上传文件大小超过".concat(l2.commonMaxSize, "限制")));
            else {
              v2 || (m.dataset(k, "name", M), e2.data.input = k);
              var t3 = 0, n3 = { data: e2.data, onaftersend: function() {
                e2.beginupload(r2, r2.message);
              }, onuploading: function(n4) {
                if (100 !== t3) {
                  var r3 = Math.floor(1e4 * n4.loaded / n4.total) / 100;
                  a(r3) >= 100 && (t3 = r3 = 100);
                  var o2 = { docId: e2.docId, total: n4.total, loaded: n4.loaded, percentage: r3, percentageText: r3 + "%" };
                  e2.fileInput && (o2.fileInput = e2.fileInput), e2.blob && (o2.blob = e2.blob), e2.uploadprogress(o2);
                }
              }, onload: function(t4) {
                var n4;
                if (e2.docId && (t4.docId = e2.docId), !t4.Error)
                  return e2.uploaddone(null, t4), void e2.logger.info("nos Upload done: fileObj is", t4);
                if (e2.mixEnable && 1 === e2.curProvider) {
                  var o2 = e2.nosPolicy.uploadConfig.retryPolicy, i2 = e2.providers[(s(n4 = e2.providers).call(n4, e2.curProvider) + 1) % e2.providers.length];
                  o2.retryNext && i2 ? (r2.addCircuitTimer(e2, i2), 2 === i2 && e2.getMixStoreToken(2, function(t5) {
                    e2.mixStoreToken = t5, C();
                  })) : r2.onError(t4);
                } else
                  r2.onError(t4);
              }, onerror: function(t4) {
                var n4;
                if (e2.mixEnable && 1 === e2.curProvider) {
                  var o2, i2 = e2.nosPolicy.uploadConfig.retryPolicy, a2 = e2.providers[(s(o2 = e2.providers).call(o2, e2.curProvider) + 1) % e2.providers.length];
                  if (i2.retryNext && a2)
                    r2.addCircuitTimer(e2, a2), 2 === a2 && e2.getMixStoreToken(2, function(t5) {
                      e2.mixStoreToken = t5, C();
                    });
                  else
                    try {
                      n4 = t4.result ? JSON.parse(t4.result) : t4, r2.onError(n4);
                    } catch (n5) {
                      e2.uploaddone(new p(t4.message, t4.code), r2.options);
                    }
                } else
                  try {
                    n4 = t4.result ? JSON.parse(t4.result) : t4, r2.onError(n4);
                  } catch (n5) {
                    e2.uploaddone(new p(t4.message, t4.code), r2.options);
                  }
                e2.errorHook(t4, { provider: "nos" });
              } };
              b || (n3.mode = "iframe"), n3.putFileAtEnd = true, r2.sn = d(e2.url, n3);
            }
          }
          if (e2.mixEnable && 2 === e2.curProvider) {
            var w = r2.options.s3Policy.cdnSchema;
            w = w.replace("{cdnDomain}", r2.options.s3Policy.dlcdn), r2.reporterHook.emit("reporter/uploadUpdate", { remote_addr: w, operation_type: h.kResourceUploadWayAWSPlugin }), C();
          } else
            e2.mixEnable && 1 === e2.curProvider ? (r2.reporterHook.emit("reporter/uploadUpdate", { remote_addr: e2.url, operation_type: h.kResourceUploadWayNOSPlugin }), I()) : (r2.reporterHook.emit("reporter/uploadUpdate", { remote_addr: e2.url, operation_type: h.kResourceUploadWayNOS }), I());
        }
        S.prototype.addCircuitTimer = function(e2, t2) {
          var n2 = this;
          if (e2.curProvider = t2, e2.s3Policy && e2.nosPolicy) {
            var r2 = e2[1 === e2.curProvider ? "nosPolicy" : "s3Policy"].uploadConfig.retryPolicy.circuit;
            if (!r2 || 0 === r2)
              return;
            n2.circuitTimer && clearTimeout(n2.circuitTimer), n2.circuitTimer = c(function() {
              e2.curProvider = e2.providers[0], n2.circuitTimer = void 0;
            }, 1e3 * r2);
          }
        }, S.prototype.onError = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t2 = this, n2 = t2.options, o2 = e2.Error || e2 || {}, s2 = o2.Code, i2 = o2.code, a2 = o2.Message, c2 = o2.message, l3 = r(o2, u), m2 = s2 || i2 || "unknown", d2 = a2 || c2 || "未知错误";
          n2.uploaddone(new p(m2 + "(" + d2 + ")", m2, l3));
        }, S.prototype.abort = function() {
          v(this.sn);
        }, e.exports = S;
      }, function(e, t, n) {
        e.exports = n(280);
      }, function(e, t, n) {
        var r = n(611);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(189), o = n(140), s = n(190);
        e.exports = function(e2, t2) {
          if ("function" != typeof t2 && null !== t2)
            throw new TypeError("Super expression must either be null or a function");
          e2.prototype = r(t2 && t2.prototype, { constructor: { value: e2, writable: true, configurable: true } }), o(e2, "prototype", { writable: false }), t2 && s(e2, t2);
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(22).default, o = n(625);
        e.exports = function(e2, t2) {
          if (t2 && ("object" === r(t2) || "function" == typeof t2))
            return t2;
          if (void 0 !== t2)
            throw new TypeError("Derived constructors may only return object or undefined");
          return o(e2);
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(626);
      }, function(e, t, n) {
        var r = n(629);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(7), o = n(0), s = { fromDataURL: function(e2) {
          var t2, n2, s2 = o.getGlobal();
          n2 = r(t2 = e2.split(",")[0]).call(t2, "base64") >= 0 ? s2.atob(e2.split(",")[1]) : s2.decodeURIComponent(e2.split(",")[1]);
          for (var i = e2.split(",")[0].split(":")[1].split(";")[0], a = new Uint8Array(n2.length), c = 0; c < n2.length; c++)
            a[c] = n2.charCodeAt(c);
          return new s2.Blob([a], { type: i });
        } };
        e.exports = s;
      }, function(e, t, n) {
        var r = n(4), o = n(9), s = n(10), i = n(0), a = { stripmeta: 0, blur: 2, quality: 3, crop: 4, rotate: 5, thumbnail: 7, interlace: 9 }, c = { 0: "stripmeta", 1: "type", 2: "blur", 3: "quality", 4: "crop", 5: "rotate", 6: "pixel", 7: "thumbnail", 8: "watermark", 9: "interlace", 10: "tmp" };
        function u(e2) {
          i.verifyOptions(e2, "type", "image::ImageOp"), i.verifyParamValid("type", e2.type, u.validTypes, "image::ImageOp"), i.merge(this, e2), this.type = a[e2.type];
        }
        u.validTypes = r(a), u.reverse = function(e2) {
          var t2 = i.copy(e2);
          return t2.type = c[t2.type], t2;
        }, u.reverseImageOps = function(e2) {
          return o(e2).call(e2, function(e3) {
            return s(u).call(u, e3);
          });
        }, e.exports = u;
      }, function(e, t, n) {
        var r = n(2), o = n(4), s = { 1: "ROOM_CLOSE", 2: "ROOM_JOIN", 3: "INVITE", 4: "CANCEL_INVITE", 5: "REJECT", 6: "ACCEPT", 7: "LEAVE", 8: "CONTROL" }, i = { 1: "accid", 2: "uid", 3: "createTime", 4: "expireTime", 5: "web_uid" }, a = { 10404: "ROOM_NOT_EXISTS", 10405: "ROOM_HAS_EXISTS", 10406: "ROOM_MEMBER_NOT_EXISTS", 10407: "ROOM_MEMBER_HAS_EXISTS", 10408: "INVITE_NOT_EXISTS", 10409: "INVITE_HAS_REJECT", 10410: "INVITE_HAS_ACCEPT", 10201: "PEER_NIM_OFFLINE", 10202: "PEER_PUSH_OFFLINE", 10419: "ROOM_MEMBER_EXCEED", 10420: "ROOM_MEMBER_HAS_EXISTS_OTHER_CLIENT", 10417: "UID_CONFLICT" };
        e.exports = { parseAvSignalType: function(e2) {
          return s[e2] || e2;
        }, parseAvSignalMember: function(e2) {
          var t2, n2 = {};
          return r(t2 = o(e2)).call(t2, function(t3) {
            n2[i[t3]] = e2[t3];
          }), n2;
        }, parseAvSignalError: function(e2) {
          return e2.message = a[e2.code] || e2.message || e2, e2;
        } };
      }, function(e, t, n) {
        e.exports = n(655);
      }, function(module, exports, __webpack_require__) {
        (function(global, module) {
          var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
          function getGlobal() {
            return "undefined" != typeof window ? window : "undefined" != typeof self ? self : void 0 !== global ? global : {};
          }
          var root = getGlobal(), io = module.exports;
          void 0 === root.location && (root.location = null), root.io ? module && (module.exports = io = root.io) : root.io = io, function() {
            !function(e, t) {
              var n = e;
              n.version = "0.9.11", n.protocol = 1, n.transports = [], n.j = [], n.sockets = {}, n.connect = function(e2, r) {
                var o, s, i = n.util.parseUri(e2);
                t && t.location && (i.protocol = i.protocol || t.location.protocol.slice(0, -1), i.host = i.host || (t.document ? t.document.domain : t.location.hostname), i.port = i.port || t.location.port), o = n.util.uniqueUri(i);
                var a = { host: i.ipv6uri ? "[" + i.host + "]" : i.host, secure: "https" === i.protocol, port: i.port || ("https" === i.protocol ? 443 : 80), query: i.query || "" };
                return n.util.merge(a, r), !a["force new connection"] && n.sockets[o] || (s = new n.Socket(a)), !a["force new connection"] && s && (n.sockets[o] = s), (s = s || n.sockets[o]).of(i.path.length > 1 ? i.path : "");
              };
            }(module.exports, root), function(e, t) {
              var n = e.util = {}, r = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/, o = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];
              n.parseUri = function(e2) {
                var t2 = e2, n2 = e2.indexOf("["), s2 = e2.indexOf("]");
                -1 != n2 && -1 != s2 && (e2 = e2.substring(0, n2) + e2.substring(n2, s2).replace(/:/g, ";") + e2.substring(s2, e2.length));
                for (var i = r.exec(e2 || ""), a = {}, c = 14; c--; )
                  a[o[c]] = i[c] || "";
                return -1 != n2 && -1 != s2 && (a.source = t2, a.host = a.host.substring(1, a.host.length - 1).replace(/;/g, ":"), a.authority = a.authority.replace("[", "").replace("]", "").replace(/;/g, ":"), a.ipv6uri = true), a;
              }, n.uniqueUri = function(e2) {
                var n2 = e2.protocol, r2 = e2.host, o2 = e2.port;
                return "document" in t && t.document ? (r2 = r2 || document.domain, o2 = o2 || ("https" == n2 && "https:" !== document.location.protocol ? 443 : document.location.port)) : (r2 = r2 || "localhost", o2 || "https" != n2 || (o2 = 443)), (n2 || "http") + "://" + r2 + ":" + (o2 || 80);
              }, n.query = function(e2, t2) {
                var r2 = n.chunkQuery(e2 || ""), o2 = [];
                for (var s2 in n.merge(r2, n.chunkQuery(t2 || "")), r2)
                  r2.hasOwnProperty(s2) && o2.push(s2 + "=" + r2[s2]);
                return o2.length ? "?" + o2.join("&") : "";
              }, n.chunkQuery = function(e2) {
                for (var t2, n2 = {}, r2 = e2.split("&"), o2 = 0, s2 = r2.length; o2 < s2; ++o2)
                  (t2 = r2[o2].split("="))[0] && (n2[t2[0]] = t2[1]);
                return n2;
              };
              var s = false;
              n.load = function(e2) {
                if ("undefined" != typeof document && document && "complete" === document.readyState || s)
                  return e2();
                n.on(t, "load", e2, false);
              }, n.on = function(e2, t2, n2, r2) {
                e2.attachEvent ? e2.attachEvent("on" + t2, n2) : e2.addEventListener && e2.addEventListener(t2, n2, r2);
              }, n.request = function(e2) {
                if (e2 && "undefined" != typeof XDomainRequest && !n.ua.hasCORS)
                  return new XDomainRequest();
                if ("undefined" != typeof XMLHttpRequest && (!e2 || n.ua.hasCORS))
                  return new XMLHttpRequest();
                if (!e2)
                  try {
                    return new root[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP");
                  } catch (e3) {
                  }
                return null;
              }, void 0 !== root && n.load(function() {
                s = true;
              }), n.defer = function(e2) {
                if (!n.ua.webkit || "undefined" != typeof importScripts)
                  return e2();
                n.load(function() {
                  setTimeout(e2, 100);
                });
              }, n.merge = function(e2, t2, r2, o2) {
                var s2, i = o2 || [], a = void 0 === r2 ? 2 : r2;
                for (s2 in t2)
                  t2.hasOwnProperty(s2) && n.indexOf(i, s2) < 0 && ("object" == typeof e2[s2] && a ? n.merge(e2[s2], t2[s2], a - 1, i) : (e2[s2] = t2[s2], i.push(t2[s2])));
                return e2;
              }, n.mixin = function(e2, t2) {
                n.merge(e2.prototype, t2.prototype);
              }, n.inherit = function(e2, t2) {
                function n2() {
                }
                n2.prototype = t2.prototype, e2.prototype = new n2();
              }, n.isArray = Array.isArray || function(e2) {
                return "[object Array]" === Object.prototype.toString.call(e2);
              }, n.intersect = function(e2, t2) {
                for (var r2 = [], o2 = e2.length > t2.length ? e2 : t2, s2 = e2.length > t2.length ? t2 : e2, i = 0, a = s2.length; i < a; i++)
                  ~n.indexOf(o2, s2[i]) && r2.push(s2[i]);
                return r2;
              }, n.indexOf = function(e2, t2, n2) {
                var r2 = e2.length;
                for (n2 = n2 < 0 ? n2 + r2 < 0 ? 0 : n2 + r2 : n2 || 0; n2 < r2 && e2[n2] !== t2; n2++)
                  ;
                return r2 <= n2 ? -1 : n2;
              }, n.toArray = function(e2) {
                for (var t2 = [], n2 = 0, r2 = e2.length; n2 < r2; n2++)
                  t2.push(e2[n2]);
                return t2;
              }, n.ua = {}, n.ua.hasCORS = "undefined" != typeof XMLHttpRequest && function() {
                try {
                  var e2 = new XMLHttpRequest();
                } catch (e3) {
                  return false;
                }
                return null != e2.withCredentials;
              }(), n.ua.webkit = "undefined" != typeof navigator && /webkit/i.test(navigator.userAgent), n.ua.iDevice = "undefined" != typeof navigator && /iPad|iPhone|iPod/i.test(navigator.userAgent);
            }(void 0 !== io ? io : module.exports, root), function(e, t) {
              function n() {
              }
              e.EventEmitter = n, n.prototype.on = function(e2, n2) {
                return this.$events || (this.$events = {}), this.$events[e2] ? t.util.isArray(this.$events[e2]) ? this.$events[e2].push(n2) : this.$events[e2] = [this.$events[e2], n2] : this.$events[e2] = n2, this;
              }, n.prototype.addListener = n.prototype.on, n.prototype.once = function(e2, t2) {
                var n2 = this;
                function r() {
                  n2.removeListener(e2, r), t2.apply(this, arguments);
                }
                return r.listener = t2, this.on(e2, r), this;
              }, n.prototype.removeListener = function(e2, n2) {
                if (this.$events && this.$events[e2]) {
                  var r = this.$events[e2];
                  if (t.util.isArray(r)) {
                    for (var o = -1, s = 0, i = r.length; s < i; s++)
                      if (r[s] === n2 || r[s].listener && r[s].listener === n2) {
                        o = s;
                        break;
                      }
                    if (o < 0)
                      return this;
                    r.splice(o, 1), r.length || delete this.$events[e2];
                  } else
                    (r === n2 || r.listener && r.listener === n2) && delete this.$events[e2];
                }
                return this;
              }, n.prototype.removeAllListeners = function(e2) {
                return void 0 === e2 ? (this.$events = {}, this) : (this.$events && this.$events[e2] && (this.$events[e2] = null), this);
              }, n.prototype.removeAllListenersX = function(e2) {
                if (void 0 === e2)
                  return this.$events = {}, this;
                for (let t2 in this.$events)
                  t2 !== e2 && (this.$events[t2] = null);
                return this;
              }, n.prototype.listeners = function(e2) {
                return this.$events || (this.$events = {}), this.$events[e2] || (this.$events[e2] = []), t.util.isArray(this.$events[e2]) || (this.$events[e2] = [this.$events[e2]]), this.$events[e2];
              }, n.prototype.emit = function(e2) {
                if (!this.$events)
                  return false;
                var n2 = this.$events[e2];
                if (!n2)
                  return false;
                var r = Array.prototype.slice.call(arguments, 1);
                if ("function" == typeof n2)
                  n2.apply(this, r);
                else {
                  if (!t.util.isArray(n2))
                    return false;
                  for (var o = n2.slice(), s = 0, i = o.length; s < i; s++)
                    o[s].apply(this, r);
                }
                return true;
              };
            }(void 0 !== io ? io : module.exports, void 0 !== io ? io : module.parent.exports), function(exports, nativeJSON) {
              "use strict";
              if (nativeJSON && nativeJSON.parse)
                return exports.JSON = { parse: nativeJSON.parse, stringify: nativeJSON.stringify };
              var JSON = exports.JSON = {};
              function f(e) {
                return e < 10 ? "0" + e : e;
              }
              function date(e, t) {
                return isFinite(e.valueOf()) ? e.getUTCFullYear() + "-" + f(e.getUTCMonth() + 1) + "-" + f(e.getUTCDate()) + "T" + f(e.getUTCHours()) + ":" + f(e.getUTCMinutes()) + ":" + f(e.getUTCSeconds()) + "Z" : null;
              }
              var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, gap, indent, meta = { "\b": "\\b", "	": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\" }, rep;
              function quote(e) {
                return escapable.lastIndex = 0, escapable.test(e) ? '"' + e.replace(escapable, function(e2) {
                  var t = meta[e2];
                  return "string" == typeof t ? t : "\\u" + ("0000" + e2.charCodeAt(0).toString(16)).slice(-4);
                }) + '"' : '"' + e + '"';
              }
              function str(e, t) {
                var n, r, o, s, i, a = gap, c = t[e];
                switch (c instanceof Date && (c = date(e)), "function" == typeof rep && (c = rep.call(t, e, c)), typeof c) {
                  case "string":
                    return quote(c);
                  case "number":
                    return isFinite(c) ? String(c) : "null";
                  case "boolean":
                  case "null":
                    return String(c);
                  case "object":
                    if (!c)
                      return "null";
                    if (gap += indent, i = [], "[object Array]" === Object.prototype.toString.apply(c)) {
                      for (s = c.length, n = 0; n < s; n += 1)
                        i[n] = str(n, c) || "null";
                      return o = 0 === i.length ? "[]" : gap ? "[\n" + gap + i.join(",\n" + gap) + "\n" + a + "]" : "[" + i.join(",") + "]", gap = a, o;
                    }
                    if (rep && "object" == typeof rep)
                      for (s = rep.length, n = 0; n < s; n += 1)
                        "string" == typeof rep[n] && (o = str(r = rep[n], c)) && i.push(quote(r) + (gap ? ": " : ":") + o);
                    else
                      for (r in c)
                        Object.prototype.hasOwnProperty.call(c, r) && (o = str(r, c)) && i.push(quote(r) + (gap ? ": " : ":") + o);
                    return o = 0 === i.length ? "{}" : gap ? "{\n" + gap + i.join(",\n" + gap) + "\n" + a + "}" : "{" + i.join(",") + "}", gap = a, o;
                }
              }
              JSON.stringify = function(e, t, n) {
                var r;
                if (gap = "", indent = "", "number" == typeof n)
                  for (r = 0; r < n; r += 1)
                    indent += " ";
                else
                  "string" == typeof n && (indent = n);
                if (rep = t, t && "function" != typeof t && ("object" != typeof t || "number" != typeof t.length))
                  throw new Error("socket.io:: replacer cannot JSON.stringify");
                return str("", { "": e });
              }, JSON.parse = function(text, reviver) {
                var j;
                function walk(e, t) {
                  var n, r, o = e[t];
                  if (o && "object" == typeof o)
                    for (n in o)
                      Object.prototype.hasOwnProperty.call(o, n) && (void 0 !== (r = walk(o, n)) ? o[n] = r : delete o[n]);
                  return reviver.call(e, t, o);
                }
                if (text = String(text), cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function(e) {
                  return "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4);
                })), /^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, "")))
                  return j = eval("(" + text + ")"), "function" == typeof reviver ? walk({ "": j }, "") : j;
                throw new SyntaxError("socket.io:: reviver cannot JSON.parse");
              };
            }(void 0 !== io ? io : module.exports, "undefined" != typeof JSON ? JSON : void 0), function(e, t) {
              var n = e.parser = {}, r = n.packets = ["disconnect", "connect", "heartbeat", "message", "json", "event", "ack", "error", "noop"], o = n.reasons = ["transport not supported", "client not handshaken", "unauthorized"], s = n.advice = ["reconnect"], i = t.JSON, a = t.util.indexOf;
              n.encodePacket = function(e2) {
                var t2 = a(r, e2.type), n2 = e2.id || "", c2 = e2.endpoint || "", u = e2.ack, l2 = null;
                switch (e2.type) {
                  case "error":
                    var m = e2.reason ? a(o, e2.reason) : "", p = e2.advice ? a(s, e2.advice) : "";
                    "" === m && "" === p || (l2 = m + ("" !== p ? "+" + p : ""));
                    break;
                  case "message":
                    "" !== e2.data && (l2 = e2.data);
                    break;
                  case "event":
                    var d = { name: e2.name };
                    e2.args && e2.args.length && (d.args = e2.args), l2 = i.stringify(d);
                    break;
                  case "json":
                    l2 = i.stringify(e2.data);
                    break;
                  case "connect":
                    e2.qs && (l2 = e2.qs);
                    break;
                  case "ack":
                    l2 = e2.ackId + (e2.args && e2.args.length ? "+" + i.stringify(e2.args) : "");
                }
                var f2 = [t2, n2 + ("data" == u ? "+" : ""), c2];
                return null != l2 && f2.push(l2), f2.join(":");
              }, n.encodePayload = function(e2) {
                var t2 = "";
                if (1 == e2.length)
                  return e2[0];
                for (var n2 = 0, r2 = e2.length; n2 < r2; n2++) {
                  t2 += "�" + e2[n2].length + "�" + e2[n2];
                }
                return t2;
              };
              var c = /([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;
              n.decodePacket = function(e2) {
                if (!(a2 = e2.match(c)))
                  return {};
                var t2 = a2[2] || "", n2 = (e2 = a2[5] || "", { type: r[a2[1]], endpoint: a2[4] || "" });
                switch (t2 && (n2.id = t2, a2[3] ? n2.ack = "data" : n2.ack = true), n2.type) {
                  case "error":
                    var a2 = e2.split("+");
                    n2.reason = o[a2[0]] || "", n2.advice = s[a2[1]] || "";
                    break;
                  case "message":
                    n2.data = e2 || "";
                    break;
                  case "event":
                    try {
                      var u = i.parse(e2);
                      n2.name = u.name, n2.args = u.args;
                    } catch (e3) {
                    }
                    n2.args = n2.args || [];
                    break;
                  case "json":
                    try {
                      n2.data = i.parse(e2);
                    } catch (e3) {
                    }
                    break;
                  case "connect":
                    n2.qs = e2 || "";
                    break;
                  case "ack":
                    if ((a2 = e2.match(/^([0-9]+)(\+)?(.*)/)) && (n2.ackId = a2[1], n2.args = [], a2[3]))
                      try {
                        n2.args = a2[3] ? i.parse(a2[3]) : [];
                      } catch (e3) {
                      }
                }
                return n2;
              }, n.decodePayload = function(e2) {
                var t2 = function(e3, t3) {
                  for (var n2 = 0, r3 = e3; r3 < t3.length; r3++) {
                    if ("�" == t3.charAt(r3))
                      return n2;
                    n2++;
                  }
                  return n2;
                };
                if ("�" == e2.charAt(0)) {
                  for (var r2 = [], o2 = 1, s2 = ""; o2 < e2.length; o2++)
                    if ("�" == e2.charAt(o2)) {
                      var i2 = e2.substr(o2 + 1).substr(0, s2);
                      if ("�" != e2.charAt(o2 + 1 + Number(s2)) && o2 + 1 + Number(s2) != e2.length) {
                        var a2 = Number(s2);
                        l = t2(o2 + a2 + 1, e2), i2 = e2.substr(o2 + 1).substr(0, a2 + l), o2 += l;
                      }
                      r2.push(n.decodePacket(i2)), o2 += Number(s2) + 1, s2 = "";
                    } else
                      s2 += e2.charAt(o2);
                  return r2;
                }
                return [n.decodePacket(e2)];
              };
            }(void 0 !== io ? io : module.exports, void 0 !== io ? io : module.parent.exports), function(e, t) {
              function n(e2, t2) {
                this.socket = e2, this.sessid = t2;
              }
              e.Transport = n, t.util.mixin(n, t.EventEmitter), n.prototype.heartbeats = function() {
                return true;
              }, n.prototype.onData = function(e2) {
                if (this !== this.socket.transport)
                  return this;
                if (this.clearCloseTimeout(), (this.socket.connected || this.socket.connecting || this.socket.reconnecting) && this.setCloseTimeout(), "" !== e2) {
                  var n2 = t.parser.decodePayload(e2);
                  if (n2 && n2.length)
                    for (var r = 0, o = n2.length; r < o; r++)
                      this.onPacket(n2[r]);
                }
                return this;
              }, n.prototype.onPacket = function(e2) {
                return this.socket.setHeartbeatTimeout(), "heartbeat" == e2.type ? this.onHeartbeat() : ("connect" == e2.type && "" == e2.endpoint && this.onConnect(), "error" == e2.type && "reconnect" == e2.advice && (this.isOpen = false), this.socket.onPacket(e2), this);
              }, n.prototype.setCloseTimeout = function() {
                if (!this.closeTimeout) {
                  var e2 = this;
                  this.closeTimeout = setTimeout(function() {
                    e2.socket && e2.socket.publish("info", "socket disconnected by setCloseTimeout"), e2.onDisconnect();
                  }, this.socket.closeTimeout);
                }
              }, n.prototype.onDisconnect = function() {
                return this.isOpen && this.close(), this.clearTimeouts(), this.socket ? (this.socket.transport === this ? this.socket.onDisconnect() : this.socket.setBuffer(false), this) : this;
              }, n.prototype.onConnect = function() {
                return this.socket.onConnect(), this;
              }, n.prototype.clearCloseTimeout = function() {
                this.closeTimeout && (clearTimeout(this.closeTimeout), this.closeTimeout = null);
              }, n.prototype.clearTimeouts = function() {
                this.clearCloseTimeout(), this.reopenTimeout && clearTimeout(this.reopenTimeout);
              }, n.prototype.packet = function(e2) {
                this.send(t.parser.encodePacket(e2));
              }, n.prototype.onHeartbeat = function(e2) {
                this.packet({ type: "heartbeat" });
              }, n.prototype.onOpen = function() {
                this.isOpen = true, this.clearCloseTimeout(), this.socket.onOpen();
              }, n.prototype.onClose = function() {
                this.socket.publish("info", "transport onClose"), this.isOpen = false, this.socket.transport === this ? this.socket.onClose() : this.socket.setBuffer(false), this.onDisconnect(), this.onDisconnectDone instanceof Function && this.onDisconnectDone(null), this.onConnectionOver instanceof Function && this.onConnectionOver(null);
              }, n.prototype.onDisconnectDone = function() {
              }, n.prototype.onConnectionOver = function() {
              }, n.prototype.prepareUrl = function() {
                var e2 = this.socket.options;
                return this.scheme() + "://" + e2.host + ":" + e2.port + "/" + e2.resource + "/" + t.protocol + "/" + this.name + "/" + this.sessid;
              }, n.prototype.ready = function(e2, t2) {
                t2.call(this);
              };
            }(void 0 !== io ? io : module.exports, void 0 !== io ? io : module.parent.exports), function(e, t, n) {
              function r(e2) {
                if (this.options = { port: 80, secure: false, document: "document" in n && document, resource: "socket.io", transports: e2.transports || t.transports, "connect timeout": 1e4, "try multiple transports": true, reconnect: true, "reconnection delay": 500, "reconnection limit": 1 / 0, "reopen delay": 3e3, "max reconnection attempts": 10, "sync disconnect on unload": false, "auto connect": true, "flash policy port": 10843, needToXHR: true, manualFlush: false }, t.util.merge(this.options, e2), this.connected = false, this.open = false, this.connecting = false, this.reconnecting = false, this.namespaces = {}, this.buffer = [], this.doBuffer = false, this.options["sync disconnect on unload"] && (!this.isXDomain() || t.util.ua.hasCORS)) {
                  var r2 = this;
                  t.util.on(n, "beforeunload", function() {
                    r2.disconnectSync();
                  }, false);
                }
                this.options["auto connect"] && this.connect();
              }
              function o() {
              }
              e.Socket = r, t.util.mixin(r, t.EventEmitter), r.prototype.of = function(e2) {
                return this.namespaces[e2] || (this.namespaces[e2] = new t.SocketNamespace(this, e2), "" !== e2 && this.namespaces[e2].packet({ type: "connect" })), this.namespaces[e2];
              }, r.prototype.publish = function() {
                var e2;
                for (var t2 in this.emit.apply(this, arguments), this.namespaces)
                  this.namespaces.hasOwnProperty(t2) && (e2 = this.of(t2)).$emit.apply(e2, arguments);
              }, r.prototype.guid = function() {
                var e2 = root.crypto || root.msCrypto;
                if (e2) {
                  var t2 = new Uint8Array(16);
                  e2.getRandomValues(t2), t2[6] &= 15, t2[6] |= 64, t2[8] &= 63, t2[8] |= 128;
                  for (var n2 = "", r2 = 0; r2 < t2.length; r2++) {
                    var o2 = t2[r2].toString(16);
                    1 === o2.length && (o2 = "0" + o2), n2 += o2;
                  }
                  return n2.substring(0, 8) + "-" + n2.substring(8, 12) + "-" + n2.substring(12, 16) + "-" + n2.substring(16, 20) + "-" + n2.substring(20);
                }
              }, r.prototype.handshake = function(e2) {
                var n2 = this, r2 = this.options;
                if (!this.options.needToXHR && 1 === this.options.transports.length && "websocket" === this.options.transports[0]) {
                  var s = this.guid();
                  if (s)
                    return void setTimeout(function() {
                      n2.publish("info", "xhr, skip and get:" + s), e2.apply(null, [s, "90", "60", "websocket"]);
                    }, 0);
                }
                function i(t2) {
                  t2 instanceof Error ? (n2.connecting = false, n2.publish("info", "xhr, status:200, but got error:", t2), n2.onError("xhr, status:200, but got error:" + t2.message, t2)) : e2.apply(null, t2.split(":"));
                }
                var a = ["http" + (r2.secure ? "s" : "") + ":/", r2.host + ":" + r2.port, r2.resource, t.protocol, t.util.query(this.options.query, "t=" + +/* @__PURE__ */ new Date())].join("/");
                if (this.isXDomain() && !t.util.ua.hasCORS && "undefined" != typeof document && document) {
                  var c = document.getElementsByTagName("script")[0], u = document.createElement("script");
                  u.src = a + "&jsonp=" + t.j.length, u.onreadystatechange = function() {
                    "loaded" == this.readyState && u.parentNode && (u.parentNode.removeChild(u), n2.connecting = false, n2.publish("info", "xhr, jsonp:Server down or port not open"), !n2.reconnecting && n2.onError("Server down or port not open", new Error("xhr, jsonp:server down or port not open")), n2.publish("handshake_failed"));
                  }, c.parentNode.insertBefore(u, c), t.j.push(function(e3) {
                    i(e3), u.parentNode.removeChild(u);
                  });
                } else {
                  var l2 = t.util.request();
                  l2.open("GET", a, true), l2.timeout = 8e3, this.isXDomain() && (l2.withCredentials = true), l2.onreadystatechange = function() {
                    n2.publish("info", "xhr, readyState:" + l2.readyState + " status:" + l2.status), 4 == l2.readyState && (n2.publish("info", "xhr, responseText:" + l2.responseText), l2.onreadystatechange = o, 200 == l2.status ? i(l2.responseText) : 403 == l2.status ? (n2.connecting = false, n2.onError(l2.responseText, new Error("xhr, status:403" + l2.responseText)), n2.publish("handshake_failed")) : (n2.connecting = false, !n2.reconnecting && n2.onError(l2.responseText, new Error("xhr, status:" + l2.status + " " + l2.responseText)), n2.publish("handshake_failed")));
                  }, l2.ontimeout = function(e3) {
                    n2.publish("info", "xhr, timeout"), n2.connecting = false, !n2.reconnecting && n2.onError(l2.responseText, new Error("xhr, timeout")), n2.publish("handshake_failed");
                  }, l2.send(null);
                }
              }, r.prototype.connect = function(e2) {
                if (this.connecting)
                  return this;
                var n2 = this;
                return n2.connecting = true, this.handshake(function(r2, o2, s, i) {
                  n2.publish("info", "SocketIO handshake parameter: sid: " + r2 + ", transports: " + i + ", close: " + s + ", heartbeat: " + o2), n2.sessionid = r2, n2.closeTimeout = 1e3 * s, n2.heartbeatTimeout = 1e3 * o2, n2.transports || (n2.transports = n2.origTransports = i ? t.util.intersect(i.split(","), n2.options.transports) : n2.options.transports), n2.setHeartbeatTimeout(), n2.once("connect", function() {
                    n2.publish("info", "tcp, clear connect timeout due to recv connect event"), clearTimeout(n2.connectTimeoutTimer), n2.connectTimeoutTimer = null, e2 && "function" == typeof e2 && e2();
                  }), n2.doConnect();
                }), this;
              }, r.prototype.doConnect = function() {
                var e2 = this;
                if (e2.transport && e2.transport.clearTimeouts(), e2.transport = e2.getTransport(e2.transports), !e2.transport)
                  return e2.publish("connect_failed");
                e2.transport.ready(e2, function() {
                  e2.connecting = true, e2.publish("info", "tcp, connecting, transport ready in " + e2.transport.name), e2.publish("connecting", e2.transport.name), e2.transport.open(), e2.options["connect timeout"] && (e2.connectTimeoutTimer && clearTimeout(e2.connectTimeoutTimer), e2.publish("info", "set new connect timeout"), e2.connectTimeoutTimer = setTimeout(function() {
                    e2.publish("info", "trigger connect timeout due to setTimeout"), e2.transport.close(), e2.tryNextTransport();
                  }, e2.options["connect timeout"]));
                });
              }, r.prototype.getTransport = function(e2) {
                const n2 = this;
                for (var r2, o2 = e2 || this.transports, s = 0; r2 = o2[s]; s++) {
                  if (n2.publish("info", "check transport: " + r2), t.Transport[r2] && t.Transport[r2].check(this) && (!this.isXDomain() || t.Transport[r2].xdomainCheck(this)))
                    return n2.publish("info", "use transport: " + r2), new t.Transport[r2](this, this.sessionid);
                }
                return null;
              }, r.prototype.tryNextTransport = function() {
                if (!this.connected && (this.connecting = false, this.options["try multiple transports"])) {
                  for (var e2 = this.transports; e2.length > 0 && e2.splice(0, 1)[0] != this.transport.name; )
                    ;
                  e2.length ? this.doConnect() : this.publish("connect_failed");
                }
              }, r.prototype.setHeartbeatTimeout = function() {
                if (clearTimeout(this.heartbeatTimeoutTimer), !this.transport || this.transport.heartbeats()) {
                  var e2 = this;
                  this.heartbeatTimeoutTimer = setTimeout(function() {
                    e2.transport && (e2.publish("info", "transport closed by setHeartbeatTimeout"), e2.transport.onClose());
                  }, this.heartbeatTimeout);
                }
              }, r.prototype.packet = function(e2) {
                return this.connected && !this.doBuffer ? this.transport.packet(e2) : this.buffer.push(e2), this;
              }, r.prototype.setBuffer = function(e2) {
                this.doBuffer = e2, !e2 && this.connected && this.buffer.length && (this.options.manualFlush || this.flushBuffer());
              }, r.prototype.flushBuffer = function() {
                this.transport.payload(this.buffer), this.buffer = [];
              }, r.prototype.disconnect = function() {
                return (this.connected || this.connecting) && (this.open && this.of("").packet({ type: "disconnect" }), this.publish("info", "socket disconnected by IM SDK"), this.onDisconnect("booted")), this;
              }, r.prototype.disconnectSync = function() {
                var e2 = t.util.request(), n2 = ["http" + (this.options.secure ? "s" : "") + ":/", this.options.host + ":" + this.options.port, this.options.resource, t.protocol, "", this.sessionid].join("/") + "/?disconnect=1";
                e2.open("GET", n2, false), e2.send(null), this.publish("info", "socket disconnected by disconnectSync before page unload"), this.onDisconnect("booted");
              }, r.prototype.isXDomain = function() {
                var e2 = n && n.location || {}, t2 = e2.port || ("https:" == e2.protocol ? 443 : 80);
                return this.options.host !== e2.hostname || this.options.port != t2;
              }, r.prototype.onConnect = function() {
                this.connected || (this.connected = true, this.connecting = false, this.doBuffer || this.setBuffer(false), this.emit("connect"));
              }, r.prototype.onOpen = function() {
                this.publish("info", "tcp, websocket onOpen"), this.open = true;
              }, r.prototype.onClose = function() {
                this.publish("info", "tcp, websocket onClose"), this.open = false, clearTimeout(this.heartbeatTimeoutTimer);
              }, r.prototype.onPacket = function(e2) {
                this.of(e2.endpoint).onPacket(e2);
              }, r.prototype.onError = function(e2, t2) {
                e2 && e2.advice && "reconnect" === e2.advice && (this.connected || this.connecting) && (this.disconnect(), this.options.reconnect && this.reconnect()), this.publish("error", e2 && e2.reason ? e2.reason : e2, t2);
              }, r.prototype.onDisconnect = function(e2) {
                var t2 = this.connected, n2 = this.connecting;
                this.publish("info", e2 ? "tcp, onDisconnect reason:" + e2 : "tcp, onDisconnect"), this.connected = false, this.connecting = false, this.open = false, (t2 || n2) && this.transport && (this.transport.close(), this.transport.clearTimeouts(), t2 && (this.publish("disconnect", e2), "booted" != e2 && this.options.reconnect && !this.reconnecting && this.reconnect()), n2 && (this.connectTimeoutTimer && (this.publish("info", "clear connect timeout due to onDisconnect"), clearTimeout(this.connectTimeoutTimer)), this.tryNextTransport()));
              }, r.prototype.reconnect = function() {
                this.reconnecting = true, this.reconnectionAttempts = 0, this.reconnectionDelay = this.options["reconnection delay"];
                var e2 = this, t2 = this.options["max reconnection attempts"], n2 = this.options["try multiple transports"], r2 = this.options["reconnection limit"];
                function o2() {
                  if (e2.connected) {
                    for (var t3 in e2.namespaces)
                      e2.namespaces.hasOwnProperty(t3) && "" !== t3 && e2.namespaces[t3].packet({ type: "connect" });
                    e2.publish("reconnect", e2.transport.name, e2.reconnectionAttempts);
                  }
                  clearTimeout(e2.reconnectionTimer), e2.removeListener("connect_failed", s), e2.removeListener("connect", s), e2.reconnecting = false, delete e2.reconnectionAttempts, delete e2.reconnectionDelay, delete e2.reconnectionTimer, delete e2.redoTransports, e2.options["try multiple transports"] = n2;
                }
                function s() {
                  if (e2.reconnecting)
                    return e2.connected ? o2() : e2.connecting && e2.reconnecting ? e2.reconnectionTimer = setTimeout(s, 1e3) : void (e2.reconnectionAttempts++ >= t2 ? e2.redoTransports ? (e2.publish("reconnect_failed"), o2()) : (e2.on("connect_failed", s), e2.options["try multiple transports"] = true, e2.transports = e2.origTransports, e2.transport = e2.getTransport(), e2.redoTransports = true, e2.connect()) : (e2.reconnectionDelay < r2 && (e2.reconnectionDelay *= 2), e2.connect(), e2.publish("reconnecting", e2.reconnectionDelay, e2.reconnectionAttempts), e2.reconnectionTimer = setTimeout(s, e2.reconnectionDelay)));
                }
                this.options["try multiple transports"] = false, this.reconnectionTimer = setTimeout(s, this.reconnectionDelay), this.on("connect", s);
              };
            }(void 0 !== io ? io : module.exports, void 0 !== io ? io : module.parent.exports, root), function(e, t) {
              function n(e2, t2) {
                this.socket = e2, this.name = t2 || "", this.flags = {}, this.json = new r(this, "json"), this.ackPackets = 0, this.acks = {};
              }
              function r(e2, t2) {
                this.namespace = e2, this.name = t2;
              }
              e.SocketNamespace = n, t.util.mixin(n, t.EventEmitter), n.prototype.$emit = t.EventEmitter.prototype.emit, n.prototype.of = function() {
                return this.socket.of.apply(this.socket, arguments);
              }, n.prototype.packet = function(e2) {
                return e2.endpoint = this.name, this.socket.packet(e2), this.flags = {}, this;
              }, n.prototype.send = function(e2, t2) {
                var n2 = { type: this.flags.json ? "json" : "message", data: e2 };
                return "function" == typeof t2 && (n2.id = ++this.ackPackets, n2.ack = true, this.acks[n2.id] = t2), this.packet(n2);
              }, n.prototype.emit = function(e2) {
                var t2 = Array.prototype.slice.call(arguments, 1), n2 = t2[t2.length - 1], r2 = { type: "event", name: e2 };
                return "function" == typeof n2 && (r2.id = ++this.ackPackets, r2.ack = "data", this.acks[r2.id] = n2, t2 = t2.slice(0, t2.length - 1)), r2.args = t2, this.packet(r2);
              }, n.prototype.disconnect = function() {
                return "" === this.name ? this.socket.disconnect() : (this.packet({ type: "disconnect" }), this.$emit("disconnect")), this;
              }, n.prototype.onPacket = function(e2) {
                var n2 = this;
                function r2() {
                  n2.packet({ type: "ack", args: t.util.toArray(arguments), ackId: e2.id });
                }
                switch (e2.type) {
                  case "connect":
                    this.$emit("connect");
                    break;
                  case "disconnect":
                    "" === this.name ? (this.socket.publish("info", "socket disconnected by SocketNameSpace.onPacket"), this.socket.onDisconnect(e2.reason || "booted")) : this.$emit("disconnect", e2.reason);
                    break;
                  case "message":
                  case "json":
                    var o = ["message", e2.data];
                    "data" == e2.ack ? o.push(r2) : e2.ack && this.packet({ type: "ack", ackId: e2.id }), this.$emit.apply(this, o);
                    break;
                  case "event":
                    o = [e2.name].concat(e2.args);
                    "data" == e2.ack && o.push(r2), this.$emit.apply(this, o);
                    break;
                  case "ack":
                    this.acks[e2.ackId] && (this.acks[e2.ackId].apply(this, e2.args), delete this.acks[e2.ackId]);
                    break;
                  case "error":
                    this.socket.publish("info", "packet, type:error", e2), e2.advice ? this.socket.onError(e2, new Error("packet, type:error and advice is " + e2.advice)) : "unauthorized" === e2.reason ? this.$emit("connect_failed", e2.reason) : this.$emit("error", e2.reason, new Error("packet, type:error and reason is " + e2.reason));
                }
              }, r.prototype.send = function() {
                this.namespace.flags[this.name] = true, this.namespace.send.apply(this.namespace, arguments);
              }, r.prototype.emit = function() {
                this.namespace.flags[this.name] = true, this.namespace.emit.apply(this.namespace, arguments);
              };
            }(void 0 !== io ? io : module.exports, void 0 !== io ? io : module.parent.exports), function(e, t, n) {
              function r(e2) {
                t.Transport.apply(this, arguments);
              }
              e.websocket = r, t.util.inherit(r, t.Transport), r.prototype.name = "websocket", r.prototype.open = function() {
                var e2, r2 = t.util.query(this.socket.options.query), o = this;
                return e2 || (e2 = n.MozWebSocket || n.WebSocket), this.websocket = new e2(this.prepareUrl() + r2), this.websocket.onopen = function() {
                  o.onOpen(), o.socket.setBuffer(false);
                }, this.websocket.onmessage = function(e3) {
                  o.onData(e3.data);
                }, this.websocket.onclose = function(e3) {
                  o.socket.setBuffer(true), o.socket.publish("websocketOnclose", e3), o.onClose();
                }, this.websocket.onerror = function(e3) {
                  var t2 = "";
                  e3 && e3.message ? t2 = e3.message : e3.target && (t2 = e3.target.readyState ? "websocket, readyState:" + e3.target.readyState : "websocket event"), o.onError(t2, e3);
                }, this;
              }, t.util.ua.iDevice ? r.prototype.send = function(e2) {
                var t2 = this;
                return setTimeout(function() {
                  t2.websocket.send(e2);
                }, 0), this;
              } : r.prototype.send = function(e2) {
                return this.websocket.send(e2), this;
              }, r.prototype.payload = function(e2) {
                for (var t2 = 0, n2 = e2.length; t2 < n2; t2++)
                  this.packet(e2[t2]);
                return this;
              }, r.prototype.close = function() {
                return this.websocket.close(), this;
              }, r.prototype.onError = function(e2, t2) {
                this.socket.publish("info", "tcp, onError", e2, t2), this.socket.onError(e2, t2);
              }, r.prototype.scheme = function() {
                return this.socket.options.secure ? "wss" : "ws";
              }, r.check = function() {
                return "WebSocket" in n && !("__addTask" in WebSocket) || "MozWebSocket" in n;
              }, r.xdomainCheck = function() {
                return true;
              }, t.transports.push("websocket");
            }(void 0 !== io ? io.Transport : module.exports, void 0 !== io ? io : module.parent.exports, root), function(e, t, n) {
              function r(e2) {
                e2 && (t.Transport.apply(this, arguments), this.sendBuffer = []);
              }
              function o() {
              }
              e.XHR = r, t.util.inherit(r, t.Transport), r.prototype.open = function() {
                return this.socket.setBuffer(false), this.onOpen(), this.get(), this.setCloseTimeout(), this;
              }, r.prototype.payload = function(e2) {
                for (var n2 = [], r2 = 0, o2 = e2.length; r2 < o2; r2++)
                  n2.push(t.parser.encodePacket(e2[r2]));
                this.send(t.parser.encodePayload(n2));
              }, r.prototype.send = function(e2) {
                return this.post(e2), this;
              }, r.prototype.post = function(e2) {
                var t2 = this;
                this.socket.setBuffer(true), this.sendXHR = this.request("POST"), n.XDomainRequest && this.sendXHR instanceof XDomainRequest ? this.sendXHR.onload = this.sendXHR.onerror = function() {
                  this.onload = o, t2.socket.setBuffer(false);
                } : this.sendXHR.onreadystatechange = function() {
                  4 == this.readyState && (this.onreadystatechange = o, t2.posting = false, 200 == this.status ? t2.socket.setBuffer(false) : t2.onClose());
                }, this.sendXHR.send(e2);
              }, r.prototype.close = function() {
                return this.onClose(), this;
              }, r.prototype.request = function(e2) {
                var n2 = t.util.request(this.socket.isXDomain()), r2 = t.util.query(this.socket.options.query, "t=" + +/* @__PURE__ */ new Date());
                if (n2.open(e2 || "GET", this.prepareUrl() + r2, true), "POST" == e2)
                  try {
                    n2.setRequestHeader ? n2.setRequestHeader("Content-type", "text/plain;charset=UTF-8") : n2.contentType = "text/plain";
                  } catch (e3) {
                  }
                return n2;
              }, r.prototype.scheme = function() {
                return this.socket.options.secure ? "https" : "http";
              }, r.check = function(e2, r2) {
                try {
                  var o2 = t.util.request(r2), s = n.XDomainRequest && o2 instanceof XDomainRequest, i = e2 && e2.options && e2.options.secure ? "https:" : "http:", a = n.location && i != n.location.protocol;
                  if (o2 && (!s || !a))
                    return true;
                } catch (e3) {
                }
                return false;
              }, r.xdomainCheck = function(e2) {
                return r.check(e2, true);
              };
            }(void 0 !== io ? io.Transport : module.exports, void 0 !== io ? io : module.parent.exports, root), function(e, t, n) {
              function r() {
                t.Transport.XHR.apply(this, arguments);
              }
              function o() {
              }
              e["xhr-polling"] = r, t.util.inherit(r, t.Transport.XHR), t.util.merge(r, t.Transport.XHR), r.prototype.name = "xhr-polling", r.prototype.heartbeats = function() {
                return false;
              }, r.prototype.open = function() {
                return t.Transport.XHR.prototype.open.call(this), false;
              }, r.prototype.get = function() {
                if (this.isOpen) {
                  var e2 = this;
                  this.xhr = this.request(), n.XDomainRequest && this.xhr instanceof XDomainRequest ? (this.xhr.onload = function() {
                    this.onload = o, this.onerror = o, e2.retryCounter = 1, e2.onData(this.responseText), e2.get();
                  }, this.xhr.onerror = function() {
                    e2.retryCounter++, !e2.retryCounter || e2.retryCounter > 3 ? e2.onClose() : e2.get();
                  }) : this.xhr.onreadystatechange = function() {
                    4 == this.readyState && (this.onreadystatechange = o, 200 == this.status ? (e2.onData(this.responseText), e2.get()) : e2.onClose());
                  }, this.xhr.send(null);
                }
              }, r.prototype.onClose = function() {
                if (t.Transport.XHR.prototype.onClose.call(this), this.xhr) {
                  this.xhr.onreadystatechange = this.xhr.onload = this.xhr.onerror = o;
                  try {
                    this.xhr.abort();
                  } catch (e2) {
                  }
                  this.xhr = null;
                }
              }, r.prototype.ready = function(e2, n2) {
                var r2 = this;
                t.util.defer(function() {
                  n2.call(r2);
                });
              }, t.transports.push("xhr-polling");
            }(void 0 !== io ? io.Transport : module.exports, void 0 !== io ? io : module.parent.exports, root), __WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() {
              return io;
            }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), void 0 === __WEBPACK_AMD_DEFINE_RESULT__ || (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
          }();
        }).call(this, __webpack_require__(73), __webpack_require__(147)(module));
      }, function(e, t) {
        e.exports = function(e2) {
          var t2 = -1, n = Array(e2.size);
          return e2.forEach(function(e3) {
            n[++t2] = e3;
          }), n;
        };
      }, function(e, t, n) {
        var r, o = n(26), s = n(45), i = n(11), a = n(64), c = n(690), u = n(697), l2 = n(196), m = l2.getLibEnv, p = l2.getHostEnv, d = l2.getHostEnvVer, f2 = { initReporter: function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t2 = { app_key: e2.appKey, platform: "Web", dev_id: s.deviceId, sdk_ver: i.info.version, env: "online", os_name: a.os ? a.os.family : "", os_ver: a.os ? a.os.version : "", lib_env: m(), host_env: p(), host_env_ver: d(), manufactor: a.name, model: d() };
          i.isBrowser || (e2.isDataReportEnable = false);
          var n2 = new c({ isDataReportEnable: e2.isDataReportEnable, reportConfigUrl: e2.reportConfigUrl, reportUrl: e2.reportUrl, common: t2, request: u, logger: e2.logger, autoStart: i.isBrowser });
          return n2;
        } };
        f2.sendBeacon = navigator && navigator.sendBeacon && o(r = navigator.sendBeacon).call(r, navigator) || function(e2, t2) {
          var n2 = new XMLHttpRequest();
          n2.open("POST", e2, true), n2.send(t2);
        }, e.exports = f2;
      }, function(e, t, n) {
        e.exports = n(691);
      }, function(e, t, n) {
        var r = n(1), o = n(14);
        r({ global: true, forced: o.globalThis !== o }, { globalThis: o });
      }, function(e, t, n) {
        var r = n(1), o = n(12), s = n(114), i = n(28), a = n(30), c = n(39).f, u = n(134), l2 = n(168), m = n(708), p = n(130), d = n(710), f2 = false, g = p("meta"), h = 0, y = function(e2) {
          c(e2, g, { value: { objectID: "O" + h++, weakData: {} } });
        }, v = e.exports = { enable: function() {
          v.enable = function() {
          }, f2 = true;
          var e2 = u.f, t2 = o([].splice), n2 = {};
          n2[g] = 1, e2(n2).length && (u.f = function(n3) {
            for (var r2 = e2(n3), o2 = 0, s2 = r2.length; o2 < s2; o2++)
              if (r2[o2] === g) {
                t2(r2, o2, 1);
                break;
              }
            return r2;
          }, r({ target: "Object", stat: true, forced: true }, { getOwnPropertyNames: l2.f }));
        }, fastKey: function(e2, t2) {
          if (!i(e2))
            return "symbol" == typeof e2 ? e2 : ("string" == typeof e2 ? "S" : "P") + e2;
          if (!a(e2, g)) {
            if (!m(e2))
              return "F";
            if (!t2)
              return "E";
            y(e2);
          }
          return e2[g].objectID;
        }, getWeakData: function(e2, t2) {
          if (!a(e2, g)) {
            if (!m(e2))
              return true;
            if (!t2)
              return false;
            y(e2);
          }
          return e2[g].weakData;
        }, onFreeze: function(e2) {
          return d && f2 && m(e2) && !a(e2, g) && y(e2), e2;
        } };
        s[g] = true;
      }, function(e, t, n) {
        "use strict";
        var r = n(20), o = n(31), s = n(17), i = n(36), a = TypeError;
        e.exports = function(e2, t2) {
          var n2, c = i(this), u = o(c.get), l2 = o(c.has), m = o(c.set), p = arguments.length > 2 ? arguments[2] : void 0;
          if (!s(t2) && !s(p))
            throw a("At least one callback required");
          return r(l2, c, e2) ? (n2 = r(u, c, e2), s(t2) && (n2 = t2(n2), r(m, c, e2, n2))) : s(p) && (n2 = p(), r(m, c, e2, n2)), n2;
        };
      }, function(e, t, n) {
        e.exports = n(740);
      }, function(e, t, n) {
        var r = n(4);
        n(45);
        function o() {
        }
        o.typeMap = { text: 0, image: 1, audio: 2, video: 3, geo: 4, notification: 5, file: 6, tip: 10, robot: 11, g2: 12, custom: 100 };
        var s = o.typeReverseMap = { 0: "text", 1: "image", 2: "audio", 3: "video", 4: "geo", 5: "notification", 6: "file", 10: "tip", 11: "robot", 12: "g2", 100: "custom" };
        o.validTypes = r(o.typeMap), o.setFlow = function(e2, t2) {
          e2.flow = e2.from === t2 ? e2.to === t2 ? "in" : "out" : "in", "robot" === e2.type && e2.content && e2.content.msgOut && (e2.flow = "in");
        }, o.getType = function(e2) {
          var t2 = e2.type;
          return s[t2] || t2;
        }, e.exports = o;
      }, function(e, t, n) {
        "use strict";
        e.exports = function(e2, t2, n2, r) {
          var o = self || window;
          try {
            try {
              var s;
              try {
                s = new o.Blob([e2]);
              } catch (t3) {
                (s = new (o.BlobBuilder || o.WebKitBlobBuilder || o.MozBlobBuilder || o.MSBlobBuilder)()).append(e2), s = s.getBlob();
              }
              var i = o.URL || o.webkitURL, a = i.createObjectURL(s), c = new o[t2](a, n2);
              return i.revokeObjectURL(a), c;
            } catch (r2) {
              return new o[t2]("data:application/javascript,".concat(encodeURIComponent(e2)), n2);
            }
          } catch (e3) {
            if (!r)
              throw Error("Inline worker is not supported");
            return new o[t2](r, n2);
          }
        };
      }, function(e, t, n) {
        n(11).isBrowser = true;
      }, function(e, t, n) {
        var r = n(372);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(471);
        e.exports = r;
      }, function(e, t) {
        var n = /^(?:0|[1-9]\d*)$/;
        e.exports = function(e2, t2) {
          var r = typeof e2;
          return !!(t2 = null == t2 ? 9007199254740991 : t2) && ("number" == r || "symbol" != r && n.test(e2)) && e2 > -1 && e2 % 1 == 0 && e2 < t2;
        };
      }, function(e, t, n) {
        e.exports = n(559);
      }, function(e, t, n) {
        (function(r) {
          var o, s = n(22), i = n(3), a = n(126), c = n(15), u = n(32), l2 = n(2), m = n(43), p = n(6), d = n(4), f2 = n(16);
          !function(g, h) {
            "use strict";
            var y, v = (g = void 0 !== g ? g : "undefined" != typeof self ? self : void 0 !== r ? r : {}).IDBKeyRange || g.webkitIDBKeyRange, b = "readonly", T = "readwrite", S = Object.prototype.hasOwnProperty, M = function() {
              if (!y && !(y = g.indexedDB || g.webkitIndexedDB || g.mozIndexedDB || g.oIndexedDB || g.msIndexedDB || (null === g.indexedDB && g.shimIndexedDB ? g.shimIndexedDB : void 0)))
                throw "IndexedDB required";
              return y;
            }, k = false, x = navigator && !navigator.userAgentData && /Safari\//.test(navigator.userAgent) && !/Chrom(e|ium)\//.test(navigator.userAgent), C = function(e2) {
              return e2;
            }, I = function(e2) {
              var t2;
              return c(t2 = Object.prototype.toString.call(e2)).call(t2, 8, -1).toLowerCase();
            }, w = function(e2) {
              return "function" == typeof e2;
            }, _ = function(e2) {
              return "number" === I(e2);
            }, P = function(e2) {
              return "array" === I(e2);
            }, A = function(e2) {
              return void 0 === e2;
            }, N = function(e2, t2) {
              var n2 = this, r2 = false;
              this.name = t2, this.getIndexedDB = function() {
                return e2;
              }, this.add = function(t3) {
                if (r2)
                  throw "Database has been closed";
                for (var o3 = [], s3 = 0, a2 = 0; a2 < arguments.length - 1; a2++)
                  if (u(arguments[a2 + 1]))
                    for (var c2 = 0; c2 < arguments[a2 + 1].length; c2++)
                      o3[s3] = arguments[a2 + 1][c2], s3++;
                  else
                    o3[s3] = arguments[a2 + 1], s3++;
                var p2 = e2.transaction(t3, T), d2 = p2.objectStore(t3);
                return new i(function(e3, t4) {
                  l2(o3).call(o3, function(e4) {
                    var t5;
                    if (e4.item && e4.key) {
                      var n3 = e4.key;
                      e4 = e4.item, t5 = d2.add(e4, n3);
                    } else
                      t5 = d2.add(e4);
                    t5.onsuccess = function(t6) {
                      var n4 = t6.target, r3 = n4.source.keyPath;
                      null === r3 && (r3 = "__id__"), m(e4, r3, { value: n4.result, enumerable: true });
                    };
                  }), p2.oncomplete = function() {
                    e3(o3, n2);
                  }, p2.onerror = function(e4) {
                    e4.preventDefault(), t4(e4);
                  }, p2.onabort = function(e4) {
                    t4(e4);
                  };
                });
              }, this.updateAndDelete = function(t3, n3, o3) {
                if (r2)
                  throw "Database has been closed";
                var s3 = e2.transaction(t3, T), a2 = s3.objectStore(t3), c2 = a2.keyPath;
                return new i(function(e3, t4) {
                  l2(n3).call(n3, function(e4) {
                    if (e4.item && e4.key) {
                      var t5 = e4.key;
                      e4 = e4.item, a2.put(e4, t5);
                    } else
                      a2.put(e4);
                  }), l2(o3).call(o3, function(e4) {
                    a2.delete(e4[c2]);
                  }), s3.oncomplete = function() {
                    e3([n3, o3]);
                  }, s3.onerror = function(e4) {
                    t4(e4);
                  };
                });
              }, this.update = function(t3) {
                if (r2)
                  throw "Database has been closed";
                for (var o3, s3 = [], a2 = 1; a2 < arguments.length; a2++)
                  u(o3 = arguments[a2]) ? s3 = p(s3).call(s3, o3) : s3.push(o3);
                var c2 = e2.transaction(t3, T), m2 = c2.objectStore(t3);
                m2.keyPath;
                return new i(function(e3, t4) {
                  l2(s3).call(s3, function(e4) {
                    var t5;
                    if (e4.item && e4.key) {
                      var n3 = e4.key;
                      e4 = e4.item, t5 = m2.put(e4, n3);
                    } else
                      t5 = m2.put(e4);
                    t5.onsuccess = function(e5) {
                    }, t5.onerror = function(e5) {
                    };
                  }), c2.oncomplete = function() {
                    e3(s3, n2);
                  }, c2.onerror = function(e4) {
                    t4(e4);
                  }, c2.onabort = function(e4) {
                    t4(e4);
                  };
                });
              }, this.remove = function(t3, n3, o3, s3, a2, c2, m2) {
                if (r2)
                  throw "Database has been closed";
                var p2 = e2.transaction(t3, T), d2 = p2.objectStore(t3);
                return new i(function(e3, t4) {
                  function r3(e4) {
                    return null == e4;
                  }
                  var i2;
                  (r3(s3) && (s3 = -1 / 0), r3(a2) && (a2 = 1 / 0), null === n3 || u(n3) || (n3 = [n3]), r3(o3)) ? null !== n3 ? l2(n3).call(n3, function(e4) {
                    d2.delete(e4);
                  }) : d2.delete(range = v.bound(s3, a2, c2, m2)) : (i2 = null !== n3 ? v.only(n3[0]) : v.bound(s3, a2, c2, m2), d2.index(o3).openCursor(i2).onsuccess = function(e4) {
                    var t5 = e4.target.result;
                    t5 && (t5.delete(), t5.continue());
                  });
                  p2.oncomplete = function() {
                    e3();
                  }, p2.onerror = function(e4) {
                    t4(e4);
                  }, p2.onabort = function(e4) {
                    t4(e4);
                  };
                });
              }, this.clear = function(t3) {
                if (r2)
                  throw "Database has been closed";
                var n3 = e2.transaction(t3, T);
                n3.objectStore(t3).clear();
                return new i(function(e3, t4) {
                  n3.oncomplete = function() {
                    e3();
                  }, n3.onerror = function(e4) {
                    t4(e4);
                  };
                });
              }, this.close = function() {
                r2 || (e2.close(), r2 = true, delete R[t2]);
              }, this.get = function(t3, n3) {
                if (r2)
                  throw "Database has been closed";
                var o3 = e2.transaction(t3), s3 = o3.objectStore(t3).get(n3);
                return new i(function(e3, t4) {
                  s3.onsuccess = function(t5) {
                    e3(t5.target.result);
                  }, o3.onerror = function(e4) {
                    t4(e4);
                  };
                });
              }, this.query = function(t3, n3) {
                if (r2)
                  throw "Database has been closed";
                return new O(t3, e2, n3);
              }, this.count = function(t3, n3) {
                if (r2)
                  throw "Database has been closed";
                e2.transaction(t3).objectStore(t3);
              };
              for (var o2 = 0, s2 = e2.objectStoreNames.length; o2 < s2; o2++)
                !function(e3) {
                  for (var t3 in n2[e3] = {}, n2)
                    S.call(n2, t3) && "close" !== t3 && (n2[e3][t3] = function(t4) {
                      return function() {
                        var r3, o3 = p(r3 = [e3]).call(r3, c([]).call(arguments, 0));
                        return n2[t4].apply(n2, o3);
                      };
                    }(t3));
                }(e2.objectStoreNames[o2]);
            }, O = function(e2, t2, n2) {
              var r2, o2 = this, a2 = false, u2 = false, m2 = function(r3, o3, c2, m3, p3, f3, g2) {
                return new i(function(i2, h2) {
                  var y2 = a2 || u2 ? T : b, S2 = t2.transaction(e2, y2), M2 = S2.objectStore(e2), k2 = n2 ? M2.index(n2) : M2, x2 = r3 ? v[r3].apply(null, o3) : null, C2 = [], I2 = [x2], _2 = 0;
                  p3 = p3 || null, f3 = f3 || [], "count" !== c2 && I2.push(m3 || "next");
                  var P2 = !!a2 && d(a2);
                  k2[c2].apply(k2, I2).onsuccess = function(e3) {
                    var t3 = e3.target.result;
                    if (s(t3) === s(0))
                      C2 = t3;
                    else if (t3)
                      if (null !== p3 && p3[0] > _2)
                        _2 = p3[0], t3.advance(p3[0]);
                      else if (null !== p3 && _2 >= p3[0] + p3[1])
                        ;
                      else {
                        var n3 = true, r4 = "value" in t3 ? t3.value : t3.key;
                        l2(f3).call(f3, function(e4) {
                          e4 && e4.length && (2 === e4.length ? n3 = n3 && r4[e4[0]] === e4[1] : w(e4[0]) && (n3 = n3 && e4[0].apply(void 0, [r4])));
                        }), n3 && (_2++, C2.push(g2(r4)), u2 ? t3.delete() : a2 && (r4 = function(e4) {
                          for (var t4 = 0; t4 < P2.length; t4++) {
                            var n4 = P2[t4], r5 = a2[n4];
                            r5 instanceof Function && (r5 = r5(e4)), e4[n4] = r5;
                          }
                          return e4;
                        }(r4), t3.update(r4))), t3.continue();
                      }
                  }, S2.oncomplete = function() {
                    i2(C2);
                  }, S2.onerror = function(e3) {
                    h2(e3);
                  }, S2.onabort = function(e3) {
                    h2(e3);
                  };
                });
              }, p2 = function(e3, t3) {
                var n3 = "next", r3 = "openCursor", o3 = [], s2 = null, i2 = C, l3 = false, p3 = function() {
                  return m2(e3, t3, r3, l3 ? n3 + "unique" : n3, s2, o3, i2);
                }, d2 = function() {
                  return n3 = null, r3 = "count", { execute: p3 };
                }, f3 = function e4() {
                  return 1 == (s2 = P(arguments[0]) ? arguments[0] : c(Array.prototype).call(arguments, 0, 2)).length && s2.unshift(0), _(s2[1]) || (s2 = null), { execute: p3, count: d2, keys: g2, filter: h2, asc: y2, desc: v2, distinct: b2, modify: T2, limit: e4, map: S2, remove: M2 };
                }, g2 = function e4(t4) {
                  return (t4 = !!A(t4) || !!t4) && (r3 = "openKeyCursor"), { execute: p3, keys: e4, filter: h2, asc: y2, desc: v2, distinct: b2, modify: T2, limit: f3, map: S2, remove: M2 };
                }, h2 = function e4() {
                  return o3.push(c(Array.prototype).call(arguments, 0, 2)), { execute: p3, count: d2, keys: g2, filter: e4, asc: y2, desc: v2, distinct: b2, modify: T2, limit: f3, map: S2, remove: M2 };
                }, y2 = function e4(t4) {
                  return t4 = !!A(t4) || !!t4, n3 = t4 ? "next" : "prev", { execute: p3, count: d2, keys: g2, filter: h2, asc: e4, desc: v2, distinct: b2, modify: T2, limit: f3, map: S2, remove: M2 };
                }, v2 = function e4(t4) {
                  return t4 = !!A(t4) || !!t4, n3 = t4 ? "prev" : "next", { execute: p3, count: d2, keys: g2, filter: h2, asc: y2, desc: e4, distinct: b2, modify: T2, limit: f3, map: S2, remove: M2 };
                }, b2 = function e4(t4) {
                  return t4 = !!A(t4) || !!t4, l3 = t4, { execute: p3, count: d2, keys: g2, filter: h2, asc: y2, desc: v2, distinct: e4, modify: T2, limit: f3, map: S2, remove: M2 };
                }, T2 = function e4(t4) {
                  return a2 = t4, { execute: p3, count: d2, keys: g2, filter: h2, asc: y2, desc: v2, distinct: b2, modify: e4, limit: f3, map: S2, remove: M2 };
                }, S2 = function e4(t4) {
                  return w(t4) && (i2 = t4), { execute: p3, count: d2, keys: g2, filter: h2, asc: y2, desc: v2, distinct: b2, modify: T2, limit: f3, map: e4, remove: M2 };
                }, M2 = function e4(t4) {
                  return t4 = !!A(t4) || !!t4, u2 = t4, { execute: p3, count: d2, keys: g2, filter: h2, asc: y2, desc: v2, distinct: b2, modify: T2, limit: f3, map: S2, remove: e4 };
                };
                return { execute: p3, count: d2, keys: g2, filter: h2, asc: y2, desc: v2, distinct: b2, modify: T2, limit: f3, map: S2, remove: M2 };
              };
              l2(r2 = "only bound upperBound lowerBound".split(" ")).call(r2, function(e3) {
                o2[e3] = function() {
                  return new p2(e3, arguments);
                };
              }), this.filter = function() {
                var e3 = new p2(null, null);
                return f2(e3).apply(e3, arguments);
              }, this.all = function() {
                var e3;
                return f2(e3 = this).call(e3);
              };
            }, E = function(e2, t2, n2, r2) {
              var o2 = e2.target.result, s2 = new N(o2, t2);
              return R[t2] = o2, i.resolve(s2);
            }, R = {}, j2 = { version: "0.10.2", open: function(e2) {
              var t2;
              return new i(function(n2, r2) {
                var o2;
                R[e2.server] ? E({ target: { result: R[e2.server] } }, e2.server, e2.version, e2.schema).then(n2, r2) : (k ? i.resolve() : x && M().databases ? new i(function(e3) {
                  var t3 = function() {
                    return M().databases().finally(e3);
                  };
                  o2 = a(t3, 100), t3();
                }).finally(function() {
                  k = true, clearInterval(o2);
                }) : (k = true, i.resolve())).then(function() {
                  try {
                    t2 = M().open(e2.server, e2.version);
                  } catch (e3) {
                    r2(e3);
                  }
                  t2.onsuccess = function(t3) {
                    E(t3, e2.server, e2.version, e2.schema).then(n2, r2);
                  }, t2.onupgradeneeded = function(t3) {
                    !function(e3, t4, n3) {
                      for (var r3 in "function" == typeof t4 && (t4 = t4()), t4) {
                        var o3, s2 = t4[r3];
                        for (var i2 in o3 = !S.call(t4, r3) || n3.objectStoreNames.contains(r3) ? e3.currentTarget.transaction.objectStore(r3) : n3.createObjectStore(r3, s2.key), s2.indexes) {
                          var a2 = s2.indexes[i2];
                          try {
                            o3.index(i2);
                          } catch (e4) {
                            o3.createIndex(i2, a2.key || i2, d(a2).length ? a2 : { unique: false });
                          }
                        }
                      }
                    }(t3, e2.schema, t3.target.result);
                  }, t2.onerror = function(e3) {
                    r2(e3);
                  };
                });
              });
            }, remove: function(e2) {
              return new i(function(t2, n2) {
                if (!e2)
                  return t2();
                var r2, o2;
                s(e2) === N && (e2 = e2.name), "string" == typeof e2 && (r2 = R[e2]), r2 && "function" == typeof r2.close && r2.close();
                try {
                  o2 = M().deleteDatabase(e2);
                } catch (e3) {
                  n2(e3);
                }
                o2.onsuccess = function(n3) {
                  delete R[e2], t2(e2);
                }, o2.onerror = function(e3) {
                  n2(e3);
                }, o2.onblocked = function(e3) {
                  n2(e3);
                };
              });
            } };
            void 0 !== e.exports ? e.exports = j2 : void 0 === (o = (function() {
              return j2;
            }).call(t, n, t, e)) || (e.exports = o);
          }(void 0);
        }).call(this, n(73));
      }, function(e, t, n) {
        var r = n(590);
        e.exports = r;
      }, function(e, t, n) {
        e.exports = n(643);
      }, function(e, t) {
        var n = { set: function(e2, t2, r) {
          n[e2] = t2, r && (r.support = t2);
        } };
        e.exports = n;
      }, function(e, t, n) {
        var r = n(4), o = n(2), s = n(26), i = n(0), a = i.notundef, c = i.fillPropertyWithDefault, u = r, l2 = {}, m = {}, p = {}, d = [], f2 = { normal: 0, advanced: 1 }, g = { manager: 0, all: 1 };
        l2.inviteMode = l2.updateCustomMode = l2.updateTeamMode = g;
        var h = { 0: "normal", 1: "advanced" }, y = l2.joinMode = { noVerify: 0, needVerify: 1, rejectAll: 2 };
        m.joinMode = { 0: "noVerify", 1: "needVerify", 2: "rejectAll" }, p.joinMode = u(y), d.push("join");
        var v = l2.beInviteMode = { needVerify: 0, noVerify: 1 };
        function b(e2) {
          var t2;
          i.verifyOptions(e2, "action", "superTeam::SuperTeam"), i.verifyOptions(e2, "teamId", "superTeam::SuperTeam"), a(e2.teamId) && (this.teamId = e2.teamId), a(e2.type) && (this.type = f2[e2.type]), a(e2.avatar) && (this.avatar = "" + e2.avatar), a(e2.name) && (this.name = "" + e2.name), a(e2.intro) && (this.intro = "" + e2.intro), a(e2.announcement) && (this.announcement = "" + e2.announcement), a(e2.custom) && (this.custom = "" + e2.custom), a(e2.inviteMode) && (this.inviteMode = g[e2.inviteMode]), a(e2.updateCustomMode) && (this.updateCustomMode = g[e2.updateCustomMode]), a(e2.updateTeamMode) && (this.updateTeamMode = g[e2.updateTeamMode]), o(d).call(d, s(t2 = this.setMode).call(t2, this, e2));
        }
        function T(e2, t2) {
          a(e2[t2 += "Mode"]) && (e2[t2] = m[t2][e2[t2]]);
        }
        m.beInviteMode = { 0: "needVerify", 1: "noVerify" }, d.push("beInvite"), m.inviteMode = m.updateCustomMode = m.updateTeamMode = { 0: "manager", 1: "all" }, d.push("invite"), d.push("updateCustom"), d.push("updateTeam"), p.inviteMode = p.updateCustomMode = p.updateTeamMode = u(g), p.beInviteMode = u(v), b.prototype.setMode = function(e2, t2) {
          a(e2[t2 += "Mode"]) && (i.verifyParamValid(t2, e2[t2], p[t2], "Superteam::Team"), this[t2] = l2[t2][e2[t2]]);
        }, b.reverse = function(e2, t2) {
          var n2 = i.copy(e2);
          if (a(n2.teamId) && (n2.teamId = "" + n2.teamId), a(n2.type) && (n2.type = h[n2.type]), a(n2.level) && (n2.level = +n2.level), a(n2.valid) && (n2.valid = 1 == +n2.valid), a(n2.memberNum) && (n2.memberNum = +n2.memberNum), a(n2.memberUpdateTime) && (n2.memberUpdateTime = +n2.memberUpdateTime), a(n2.createTime) && (n2.createTime = +n2.createTime), a(n2.updateTime) && (n2.updateTime = +n2.updateTime), a(n2.validToCurrentUser) && (n2.validToCurrentUser = "1" === n2.validToCurrentUser), a(n2.mute) && (n2.mute = "1" === n2.mute), a(n2.muteType))
            switch (n2.muteType) {
              case "0":
                n2.mute = false, n2.muteType = "none";
                break;
              case "1":
                n2.mute = true, n2.muteType = "normal";
                break;
              case "3":
                n2.mute = true, n2.muteType = "all";
            }
          else
            a(n2.mute) && (1 === n2.mute ? (n2.mute = true, n2.muteType = "normal") : (n2.mute = false, n2.muteType = "none"));
          return o(d).call(d, s(T).call(T, null, n2)), delete n2.bits, t2 || b.fillProperties(n2), n2;
        }, b.fillProperties = function(e2) {
          return c(e2, "avatar", "");
        }, e.exports = b;
      }, function(e, t, n) {
        e.exports = n(666);
      }, function(e, t, n) {
        var r = n(0).notundef;
        function o(e2) {
          r(e2.shouldPushNotificationWhenPCOnline) && (this.open = e2.shouldPushNotificationWhenPCOnline ? 2 : 1);
        }
        o.getDefaultConfig = function() {
          return { shouldPushNotificationWhenPCOnline: true };
        }, o.reverse = function(e2) {
          return { shouldPushNotificationWhenPCOnline: 1 != +e2.open };
        }, e.exports = o;
      }, function(e, t, n) {
        var r = n(64), o = n(760), s = n(289), i = n(256), a = n(200), c = n(0), u = n(307), l2 = n(285), m = n(186), p = n(765), d = n(766);
        e.exports = function(e2) {
          c.merge(e2, { platform: r, xhr: o, io: s, naturalSort: i, deepAccess: a, util: c, support: u, blob: l2, ajax: m, LoggerPlugin: p, usePlugin: d });
        };
      }, function(e, t, n) {
        var r = n(9), o = n(10), s = n(4), i = n(108).genPrivateUrl, a = n(0), c = a.notundef, u = { "-2": "unset", "-1": "restricted", 0: "common", 1: "owner", 2: "manager", 3: "guest", 4: "anonymous" };
        function l2(e2) {
          c(e2.nick) && (this.nick = "" + e2.nick), c(e2.avatar) && (this.avatar = "" + e2.avatar), c(e2.custom) && (this.custom = "" + e2.custom);
        }
        l2.reverse = function(e2) {
          var t2 = a.copy(e2);
          return c(t2.chatroomId) && (t2.chatroomId = "" + t2.chatroomId), c(t2.avatar) && (t2.avatar = i(t2.avatar)), c(t2.type) && (t2.type = u[t2.type]), c(t2.level) && (t2.level = +t2.level), c(t2.online) && (t2.online = 1 == +t2.online), c(t2.enterTime) && (t2.enterTime = +t2.enterTime), c(t2.guest) && (t2.guest = 1 == +t2.guest), c(t2.blacked) && (t2.blacked = 1 == +t2.blacked), c(t2.gaged) && (t2.gaged = 1 == +t2.gaged), c(t2.valid) && (t2.valid = 1 == +t2.valid), c(t2.updateTime) && (t2.updateTime = +t2.updateTime), c(t2.tempMuted) ? t2.tempMuted = 1 == +t2.tempMuted : t2.tempMuted = false, c(t2.tempMuteDuration) ? t2.tempMuteDuration = +t2.tempMuteDuration : t2.tempMuteDuration = 0, t2.online || delete t2.enterTime, t2.guest && (t2.type = "guest", delete t2.valid), "common" !== t2.type && delete t2.level, delete t2.guest, t2;
        }, l2.reverseMembers = function(e2) {
          return r(e2).call(e2, function(e3) {
            return o(l2).call(l2, e3);
          });
        }, l2.validTypes = s(u), l2.typeReverseMap = u, e.exports = l2;
      }, function(e, t, n) {
        var r, o, s, i, a, c, u, l2, m, p, d, f2, g, h, y, v, b, T, S;
        e.exports = (r = n(94), n(769), void (r.lib.Cipher || (o = r, s = o.lib, i = s.Base, a = s.WordArray, c = s.BufferedBlockAlgorithm, u = o.enc, u.Utf8, l2 = u.Base64, m = o.algo.EvpKDF, p = s.Cipher = c.extend({ cfg: i.extend(), createEncryptor: function(e2, t2) {
          return this.create(this._ENC_XFORM_MODE, e2, t2);
        }, createDecryptor: function(e2, t2) {
          return this.create(this._DEC_XFORM_MODE, e2, t2);
        }, init: function(e2, t2, n2) {
          this.cfg = this.cfg.extend(n2), this._xformMode = e2, this._key = t2, this.reset();
        }, reset: function() {
          c.reset.call(this), this._doReset();
        }, process: function(e2) {
          return this._append(e2), this._process();
        }, finalize: function(e2) {
          return e2 && this._append(e2), this._doFinalize();
        }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function() {
          function e2(e3) {
            return "string" == typeof e3 ? S : b;
          }
          return function(t2) {
            return { encrypt: function(n2, r2, o2) {
              return e2(r2).encrypt(t2, n2, r2, o2);
            }, decrypt: function(n2, r2, o2) {
              return e2(r2).decrypt(t2, n2, r2, o2);
            } };
          };
        }() }), s.StreamCipher = p.extend({ _doFinalize: function() {
          return this._process(true);
        }, blockSize: 1 }), d = o.mode = {}, f2 = s.BlockCipherMode = i.extend({ createEncryptor: function(e2, t2) {
          return this.Encryptor.create(e2, t2);
        }, createDecryptor: function(e2, t2) {
          return this.Decryptor.create(e2, t2);
        }, init: function(e2, t2) {
          this._cipher = e2, this._iv = t2;
        } }), g = d.CBC = function() {
          var e2 = f2.extend();
          function t2(e3, t3, n2) {
            var r2, o2 = this._iv;
            o2 ? (r2 = o2, this._iv = void 0) : r2 = this._prevBlock;
            for (var s2 = 0; s2 < n2; s2++)
              e3[t3 + s2] ^= r2[s2];
          }
          return e2.Encryptor = e2.extend({ processBlock: function(e3, n2) {
            var r2 = this._cipher, o2 = r2.blockSize;
            t2.call(this, e3, n2, o2), r2.encryptBlock(e3, n2), this._prevBlock = e3.slice(n2, n2 + o2);
          } }), e2.Decryptor = e2.extend({ processBlock: function(e3, n2) {
            var r2 = this._cipher, o2 = r2.blockSize, s2 = e3.slice(n2, n2 + o2);
            r2.decryptBlock(e3, n2), t2.call(this, e3, n2, o2), this._prevBlock = s2;
          } }), e2;
        }(), h = (o.pad = {}).Pkcs7 = { pad: function(e2, t2) {
          for (var n2 = 4 * t2, r2 = n2 - e2.sigBytes % n2, o2 = r2 << 24 | r2 << 16 | r2 << 8 | r2, s2 = [], i2 = 0; i2 < r2; i2 += 4)
            s2.push(o2);
          var c2 = a.create(s2, r2);
          e2.concat(c2);
        }, unpad: function(e2) {
          var t2 = 255 & e2.words[e2.sigBytes - 1 >>> 2];
          e2.sigBytes -= t2;
        } }, s.BlockCipher = p.extend({ cfg: p.cfg.extend({ mode: g, padding: h }), reset: function() {
          var e2;
          p.reset.call(this);
          var t2 = this.cfg, n2 = t2.iv, r2 = t2.mode;
          this._xformMode == this._ENC_XFORM_MODE ? e2 = r2.createEncryptor : (e2 = r2.createDecryptor, this._minBufferSize = 1), this._mode && this._mode.__creator == e2 ? this._mode.init(this, n2 && n2.words) : (this._mode = e2.call(r2, this, n2 && n2.words), this._mode.__creator = e2);
        }, _doProcessBlock: function(e2, t2) {
          this._mode.processBlock(e2, t2);
        }, _doFinalize: function() {
          var e2, t2 = this.cfg.padding;
          return this._xformMode == this._ENC_XFORM_MODE ? (t2.pad(this._data, this.blockSize), e2 = this._process(true)) : (e2 = this._process(true), t2.unpad(e2)), e2;
        }, blockSize: 4 }), y = s.CipherParams = i.extend({ init: function(e2) {
          this.mixIn(e2);
        }, toString: function(e2) {
          return (e2 || this.formatter).stringify(this);
        } }), v = (o.format = {}).OpenSSL = { stringify: function(e2) {
          var t2 = e2.ciphertext, n2 = e2.salt;
          return (n2 ? a.create([1398893684, 1701076831]).concat(n2).concat(t2) : t2).toString(l2);
        }, parse: function(e2) {
          var t2, n2 = l2.parse(e2), r2 = n2.words;
          return 1398893684 == r2[0] && 1701076831 == r2[1] && (t2 = a.create(r2.slice(2, 4)), r2.splice(0, 4), n2.sigBytes -= 16), y.create({ ciphertext: n2, salt: t2 });
        } }, b = s.SerializableCipher = i.extend({ cfg: i.extend({ format: v }), encrypt: function(e2, t2, n2, r2) {
          r2 = this.cfg.extend(r2);
          var o2 = e2.createEncryptor(n2, r2), s2 = o2.finalize(t2), i2 = o2.cfg;
          return y.create({ ciphertext: s2, key: n2, iv: i2.iv, algorithm: e2, mode: i2.mode, padding: i2.padding, blockSize: e2.blockSize, formatter: r2.format });
        }, decrypt: function(e2, t2, n2, r2) {
          return r2 = this.cfg.extend(r2), t2 = this._parse(t2, r2.format), e2.createDecryptor(n2, r2).finalize(t2.ciphertext);
        }, _parse: function(e2, t2) {
          return "string" == typeof e2 ? t2.parse(e2, this) : e2;
        } }), T = (o.kdf = {}).OpenSSL = { execute: function(e2, t2, n2, r2) {
          r2 || (r2 = a.random(8));
          var o2 = m.create({ keySize: t2 + n2 }).compute(e2, r2), s2 = a.create(o2.words.slice(t2), 4 * n2);
          return o2.sigBytes = 4 * t2, y.create({ key: o2, iv: s2, salt: r2 });
        } }, S = s.PasswordBasedCipher = b.extend({ cfg: b.cfg.extend({ kdf: T }), encrypt: function(e2, t2, n2, r2) {
          var o2 = (r2 = this.cfg.extend(r2)).kdf.execute(n2, e2.keySize, e2.ivSize);
          r2.iv = o2.iv;
          var s2 = b.encrypt.call(this, e2, t2, o2.key, r2);
          return s2.mixIn(o2), s2;
        }, decrypt: function(e2, t2, n2, r2) {
          r2 = this.cfg.extend(r2), t2 = this._parse(t2, r2.format);
          var o2 = r2.kdf.execute(n2, e2.keySize, e2.ivSize, t2.salt);
          return r2.iv = o2.iv, b.decrypt.call(this, e2, t2, o2.key, r2);
        } }))));
      }, function(e, t, n) {
        e.exports = n(284);
      }, function(e, t, n) {
        var r = n(19), o = n(316), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.indexOf;
          return e2 === s || r(s, e2) && t2 === s.indexOf ? o : t2;
        };
      }, function(e, t, n) {
        n(317);
        var r = n(29);
        e.exports = r("Array").indexOf;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(159), s = n(163).indexOf, i = n(82), a = o([].indexOf), c = !!a && 1 / a([1], 1, -0) < 0, u = i("indexOf");
        r({ target: "Array", proto: true, forced: c || !u }, { indexOf: function(e2) {
          var t2 = arguments.length > 1 ? arguments[1] : void 0;
          return c ? a(this, e2, t2) || 0 : s(this, e2, t2);
        } });
      }, function(e, t, n) {
        var r = n(20), o = n(28), s = n(129), i = n(160), a = n(319), c = n(21), u = TypeError, l2 = c("toPrimitive");
        e.exports = function(e2, t2) {
          if (!o(e2) || s(e2))
            return e2;
          var n2, c2 = i(e2, l2);
          if (c2) {
            if (void 0 === t2 && (t2 = "default"), n2 = r(c2, e2, t2), !o(n2) || s(n2))
              return n2;
            throw u("Can't convert object to primitive value");
          }
          return void 0 === t2 && (t2 = "number"), a(e2, t2);
        };
      }, function(e, t, n) {
        var r = n(20), o = n(17), s = n(28), i = TypeError;
        e.exports = function(e2, t2) {
          var n2, a;
          if ("string" === t2 && o(n2 = e2.toString) && !s(a = r(n2, e2)))
            return a;
          if (o(n2 = e2.valueOf) && !s(a = r(n2, e2)))
            return a;
          if ("string" !== t2 && o(n2 = e2.toString) && !s(a = r(n2, e2)))
            return a;
          throw i("Can't convert object to primitive value");
        };
      }, function(e, t, n) {
        var r = n(14), o = Object.defineProperty;
        e.exports = function(e2, t2) {
          try {
            o(r, e2, { value: t2, configurable: true, writable: true });
          } catch (n2) {
            r[e2] = t2;
          }
          return t2;
        };
      }, function(e, t) {
        var n = Math.ceil, r = Math.floor;
        e.exports = Math.trunc || function(e2) {
          var t2 = +e2;
          return (t2 > 0 ? r : n)(t2);
        };
      }, function(e, t, n) {
        var r = n(112), o = Math.min;
        e.exports = function(e2) {
          return e2 > 0 ? o(r(e2), 9007199254740991) : 0;
        };
      }, function(e, t, n) {
        var r = n(324);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(325), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.concat;
          return e2 === s || r(s, e2) && t2 === s.concat ? o : t2;
        };
      }, function(e, t, n) {
        n(213);
        var r = n(29);
        e.exports = r("Array").concat;
      }, function(e, t, n) {
        var r = n(83), o = n(132), s = n(28), i = n(21)("species"), a = Array;
        e.exports = function(e2) {
          var t2;
          return r(e2) && (t2 = e2.constructor, (o(t2) && (t2 === a || r(t2.prototype)) || s(t2) && null === (t2 = t2[i])) && (t2 = void 0)), void 0 === t2 ? a : t2;
        };
      }, function(e, t, n) {
        n(328);
        var r = n(13).Object;
        e.exports = function(e2, t2) {
          return r.create(e2, t2);
        };
      }, function(e, t, n) {
        n(1)({ target: "Object", stat: true, sham: !n(27) }, { create: n(84) });
      }, function(e, t, n) {
        e.exports = n(330);
      }, function(e, t, n) {
        var r = n(331);
        n(358), n(359), n(360), n(361), n(362), n(363), n(364), e.exports = r;
      }, function(e, t, n) {
        var r = n(219);
        n(357), e.exports = r;
      }, function(e, t, n) {
        n(213), n(100), n(220), n(339), n(340), n(341), n(342), n(225), n(343), n(344), n(345), n(346), n(347), n(348), n(226), n(349), n(350), n(351), n(352), n(353);
        var r = n(13);
        e.exports = r.Symbol;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(14), s = n(20), i = n(12), a = n(49), c = n(27), u = n(97), l2 = n(5), m = n(30), p = n(19), d = n(36), f2 = n(44), g = n(128), h = n(50), y = n(80), v = n(84), b = n(120), T = n(134), S = n(168), M = n(135), k = n(95), x = n(39), C = n(166), I = n(150), w = n(68), _ = n(111), P = n(133), A = n(114), N = n(130), O = n(21), E = n(136), R = n(23), j2 = n(222), F = n(85), D = n(101), U = n(74).forEach, L = P("hidden"), B = D.set, q = D.getterFor("Symbol"), H = Object.prototype, z = o.Symbol, W = z && z.prototype, V = o.TypeError, G = o.QObject, Q = k.f, J = x.f, K = S.f, $ = I.f, X = i([].push), Y = _("symbols"), Z = _("op-symbols"), ee = _("wks"), te = !G || !G.prototype || !G.prototype.findChild, ne = c && l2(function() {
          return 7 != v(J({}, "a", { get: function() {
            return J(this, "a", { value: 7 }).a;
          } })).a;
        }) ? function(e2, t2, n2) {
          var r2 = Q(H, t2);
          r2 && delete H[t2], J(e2, t2, n2), r2 && e2 !== H && J(H, t2, r2);
        } : J, re = function(e2, t2) {
          var n2 = Y[e2] = v(W);
          return B(n2, { type: "Symbol", tag: e2, description: t2 }), c || (n2.description = t2), n2;
        }, oe = function(e2, t2, n2) {
          e2 === H && oe(Z, t2, n2), d(e2);
          var r2 = g(t2);
          return d(n2), m(Y, r2) ? (n2.enumerable ? (m(e2, L) && e2[L][r2] && (e2[L][r2] = false), n2 = v(n2, { enumerable: y(0, false) })) : (m(e2, L) || J(e2, L, y(1, {})), e2[L][r2] = true), ne(e2, r2, n2)) : J(e2, r2, n2);
        }, se = function(e2, t2) {
          d(e2);
          var n2 = f2(t2), r2 = b(n2).concat(ue(n2));
          return U(r2, function(t3) {
            c && !s(ie, n2, t3) || oe(e2, t3, n2[t3]);
          }), e2;
        }, ie = function(e2) {
          var t2 = g(e2), n2 = s($, this, t2);
          return !(this === H && m(Y, t2) && !m(Z, t2)) && (!(n2 || !m(this, t2) || !m(Y, t2) || m(this, L) && this[L][t2]) || n2);
        }, ae = function(e2, t2) {
          var n2 = f2(e2), r2 = g(t2);
          if (n2 !== H || !m(Y, r2) || m(Z, r2)) {
            var o2 = Q(n2, r2);
            return !o2 || !m(Y, r2) || m(n2, L) && n2[L][r2] || (o2.enumerable = true), o2;
          }
        }, ce = function(e2) {
          var t2 = K(f2(e2)), n2 = [];
          return U(t2, function(e3) {
            m(Y, e3) || m(A, e3) || X(n2, e3);
          }), n2;
        }, ue = function(e2) {
          var t2 = e2 === H, n2 = K(t2 ? Z : f2(e2)), r2 = [];
          return U(n2, function(e3) {
            !m(Y, e3) || t2 && !m(H, e3) || X(r2, Y[e3]);
          }), r2;
        };
        u || (w(W = (z = function() {
          if (p(W, this))
            throw V("Symbol is not a constructor");
          var e2 = arguments.length && void 0 !== arguments[0] ? h(arguments[0]) : void 0, t2 = N(e2), n2 = function(e3) {
            this === H && s(n2, Z, e3), m(this, L) && m(this[L], t2) && (this[L][t2] = false), ne(this, t2, y(1, e3));
          };
          return c && te && ne(H, t2, { configurable: true, set: n2 }), re(t2, e2);
        }).prototype, "toString", function() {
          return q(this).tag;
        }), w(z, "withoutSetter", function(e2) {
          return re(N(e2), e2);
        }), I.f = ie, x.f = oe, C.f = se, k.f = ae, T.f = S.f = ce, M.f = ue, E.f = function(e2) {
          return re(O(e2), e2);
        }, c && (J(W, "description", { configurable: true, get: function() {
          return q(this).description;
        } }), a || w(H, "propertyIsEnumerable", ie, { unsafe: true }))), r({ global: true, constructor: true, wrap: true, forced: !u, sham: !u }, { Symbol: z }), U(b(ee), function(e2) {
          R(e2);
        }), r({ target: "Symbol", stat: true, forced: !u }, { useSetter: function() {
          te = true;
        }, useSimple: function() {
          te = false;
        } }), r({ target: "Object", stat: true, forced: !u, sham: !c }, { create: function(e2, t2) {
          return void 0 === t2 ? v(e2) : se(v(e2), t2);
        }, defineProperty: oe, defineProperties: se, getOwnPropertyDescriptor: ae }), r({ target: "Object", stat: true, forced: !u }, { getOwnPropertyNames: ce }), j2(), F(z, "Symbol"), A[L] = true;
      }, function(e, t, n) {
        "use strict";
        var r = n(165), o = n(67);
        e.exports = r ? {}.toString : function() {
          return "[object " + o(this) + "]";
        };
      }, function(e, t, n) {
        var r = n(14), o = n(17), s = r.WeakMap;
        e.exports = o(s) && /native code/.test(String(s));
      }, function(e, t, n) {
        var r = n(1), o = n(33), s = n(30), i = n(50), a = n(111), c = n(223), u = a("string-to-symbol-registry"), l2 = a("symbol-to-string-registry");
        r({ target: "Symbol", stat: true, forced: !c }, { for: function(e2) {
          var t2 = i(e2);
          if (s(u, t2))
            return u[t2];
          var n2 = o("Symbol")(t2);
          return u[t2] = n2, l2[n2] = t2, n2;
        } });
      }, function(e, t, n) {
        var r = n(1), o = n(30), s = n(129), i = n(81), a = n(111), c = n(223), u = a("symbol-to-string-registry");
        r({ target: "Symbol", stat: true, forced: !c }, { keyFor: function(e2) {
          if (!s(e2))
            throw TypeError(i(e2) + " is not a symbol");
          if (o(u, e2))
            return u[e2];
        } });
      }, function(e, t, n) {
        var r = n(1), o = n(97), s = n(5), i = n(135), a = n(42);
        r({ target: "Object", stat: true, forced: !o || s(function() {
          i.f(1);
        }) }, { getOwnPropertySymbols: function(e2) {
          var t2 = i.f;
          return t2 ? t2(a(e2)) : [];
        } });
      }, function(e, t, n) {
        n(23)("asyncIterator");
      }, function(e, t) {
      }, function(e, t, n) {
        n(23)("hasInstance");
      }, function(e, t, n) {
        n(23)("isConcatSpreadable");
      }, function(e, t, n) {
        n(23)("match");
      }, function(e, t, n) {
        n(23)("matchAll");
      }, function(e, t, n) {
        n(23)("replace");
      }, function(e, t, n) {
        n(23)("search");
      }, function(e, t, n) {
        n(23)("species");
      }, function(e, t, n) {
        n(23)("split");
      }, function(e, t, n) {
        var r = n(33), o = n(23), s = n(85);
        o("toStringTag"), s(r("Symbol"), "Symbol");
      }, function(e, t, n) {
        n(23)("unscopables");
      }, function(e, t, n) {
        var r = n(14);
        n(85)(r.JSON, "JSON", true);
      }, function(e, t) {
      }, function(e, t) {
      }, function(e, t, n) {
        "use strict";
        var r = n(228).IteratorPrototype, o = n(84), s = n(80), i = n(85), a = n(103), c = function() {
          return this;
        };
        e.exports = function(e2, t2, n2, u) {
          var l2 = t2 + " Iterator";
          return e2.prototype = o(r, { next: s(+!u, n2) }), i(e2, l2, false, true), a[l2] = c, e2;
        };
      }, function(e, t, n) {
        var r = n(17), o = String, s = TypeError;
        e.exports = function(e2) {
          if ("object" == typeof e2 || r(e2))
            return e2;
          throw s("Can't set " + o(e2) + " as a prototype");
        };
      }, function(e, t) {
        e.exports = { CSSRuleList: 0, CSSStyleDeclaration: 0, CSSValueList: 0, ClientRectList: 0, DOMRectList: 0, DOMStringList: 0, DOMTokenList: 1, DataTransferItemList: 0, FileList: 0, HTMLAllCollection: 0, HTMLCollection: 0, HTMLFormElement: 0, HTMLSelectElement: 0, MediaList: 0, MimeTypeArray: 0, NamedNodeMap: 0, NodeList: 1, PaintRequestList: 0, Plugin: 0, PluginArray: 0, SVGLengthList: 0, SVGNumberList: 0, SVGPathSegList: 0, SVGPointList: 0, SVGStringList: 0, SVGTransformList: 0, SourceBufferList: 0, StyleSheetList: 0, TextTrackCueList: 0, TextTrackList: 0, TouchList: 0 };
      }, function(e, t, n) {
        n(23)("dispose");
      }, function(e, t, n) {
        n(23)("asyncDispose");
      }, function(e, t, n) {
        n(23)("matcher");
      }, function(e, t, n) {
        n(23)("metadataKey");
      }, function(e, t, n) {
        n(23)("observable");
      }, function(e, t, n) {
        n(23)("metadata");
      }, function(e, t, n) {
        n(23)("patternMatch");
      }, function(e, t, n) {
        n(23)("replaceAll");
      }, function(e, t, n) {
        e.exports = n(366);
      }, function(e, t, n) {
        e.exports = n(367);
      }, function(e, t, n) {
        var r = n(368);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(369);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(370);
        n(69), e.exports = r;
      }, function(e, t, n) {
        n(86), n(100), n(115), n(225);
        var r = n(136);
        e.exports = r.f("iterator");
      }, function(e, t, n) {
        var r = n(12), o = n(112), s = n(50), i = n(110), a = r("".charAt), c = r("".charCodeAt), u = r("".slice), l2 = function(e2) {
          return function(t2, n2) {
            var r2, l3, m = s(i(t2)), p = o(n2), d = m.length;
            return p < 0 || p >= d ? e2 ? "" : void 0 : (r2 = c(m, p)) < 55296 || r2 > 56319 || p + 1 === d || (l3 = c(m, p + 1)) < 56320 || l3 > 57343 ? e2 ? a(m, p) : r2 : e2 ? u(m, p, p + 2) : l3 - 56320 + (r2 - 55296 << 10) + 65536;
          };
        };
        e.exports = { codeAt: l2(false), charAt: l2(true) };
      }, function(e, t, n) {
        n(373);
        var r = n(13);
        e.exports = r.Array.isArray;
      }, function(e, t, n) {
        n(1)({ target: "Array", stat: true }, { isArray: n(83) });
      }, function(e, t, n) {
        var r = n(375);
        e.exports = r;
      }, function(e, t, n) {
        n(376);
        var r = n(29);
        e.exports = r("Array").forEach;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(377);
        r({ target: "Array", proto: true, forced: [].forEach != o }, { forEach: o });
      }, function(e, t, n) {
        "use strict";
        var r = n(74).forEach, o = n(82)("forEach");
        e.exports = o ? [].forEach : function(e2) {
          return r(this, e2, arguments.length > 1 ? arguments[1] : void 0);
        };
      }, function(e, t, n) {
        e.exports = n(379);
      }, function(e, t, n) {
        var r = n(380);
        e.exports = r;
      }, function(e, t, n) {
        n(381);
        var r = n(13).Object;
        e.exports = function(e2) {
          return r.getOwnPropertyNames(e2);
        };
      }, function(e, t, n) {
        var r = n(1), o = n(5), s = n(168).f;
        r({ target: "Object", stat: true, forced: o(function() {
          return !Object.getOwnPropertyNames(1);
        }) }, { getOwnPropertyNames: s });
      }, function(e, t, n) {
        n(383);
        var r = n(13);
        e.exports = r.Object.keys;
      }, function(e, t, n) {
        var r = n(1), o = n(42), s = n(120);
        r({ target: "Object", stat: true, forced: n(5)(function() {
          s(1);
        }) }, { keys: function(e2) {
          return s(o(e2));
        } });
      }, function(e, t, n) {
        var r = n(385);
        e.exports = r;
      }, function(e, t, n) {
        n(224);
        var r = n(13), o = n(79);
        r.JSON || (r.JSON = { stringify: JSON.stringify }), e.exports = function(e2, t2, n2) {
          return o(r.JSON.stringify, null, arguments);
        };
      }, function(e, t, n) {
        n(233), n(86), n(100), n(393), n(247), n(248), n(406), n(115);
        var r = n(13);
        e.exports = r.Promise;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(19), s = n(137), i = n(138), a = n(388), c = n(84), u = n(61), l2 = n(80), m = n(389), p = n(390), d = n(47), f2 = n(391), g = n(21), h = n(392), y = g("toStringTag"), v = Error, b = [].push, T = function(e2, t2) {
          var n2, r2 = arguments.length > 2 ? arguments[2] : void 0, a2 = o(S, this);
          i ? n2 = i(v(), a2 ? s(this) : S) : (n2 = a2 ? this : c(S), u(n2, y, "Error")), void 0 !== t2 && u(n2, "message", f2(t2)), h && u(n2, "stack", m(n2.stack, 1)), p(n2, r2);
          var l3 = [];
          return d(e2, b, { that: l3 }), u(n2, "errors", l3), n2;
        };
        i ? i(T, v) : a(T, v, { name: true });
        var S = T.prototype = c(v.prototype, { constructor: l2(1, T), message: l2(1, ""), name: l2(1, "AggregateError") });
        r({ global: true, constructor: true, arity: 2 }, { AggregateError: T });
      }, function(e, t, n) {
        var r = n(30), o = n(234), s = n(95), i = n(39);
        e.exports = function(e2, t2, n2) {
          for (var a = o(t2), c = i.f, u = s.f, l2 = 0; l2 < a.length; l2++) {
            var m = a[l2];
            r(e2, m) || n2 && r(n2, m) || c(e2, m, u(t2, m));
          }
        };
      }, function(e, t, n) {
        var r = n(12), o = Error, s = r("".replace), i = String(o("zxcasd").stack), a = /\n\s*at [^:]*:[^\n]*/, c = a.test(i);
        e.exports = function(e2, t2) {
          if (c && "string" == typeof e2 && !o.prepareStackTrace)
            for (; t2--; )
              e2 = s(e2, a, "");
          return e2;
        };
      }, function(e, t, n) {
        var r = n(28), o = n(61);
        e.exports = function(e2, t2) {
          r(t2) && "cause" in t2 && o(e2, "cause", t2.cause);
        };
      }, function(e, t, n) {
        var r = n(50);
        e.exports = function(e2, t2) {
          return void 0 === e2 ? arguments.length < 2 ? "" : t2 : r(e2);
        };
      }, function(e, t, n) {
        var r = n(5), o = n(80);
        e.exports = !r(function() {
          var e2 = Error("a");
          return !("stack" in e2) || (Object.defineProperty(e2, "stack", o(1, 7)), 7 !== e2.stack);
        });
      }, function(e, t, n) {
        n(394), n(401), n(402), n(403), n(404), n(405);
      }, function(e, t, n) {
        "use strict";
        var r, o, s, i = n(1), a = n(49), c = n(116), u = n(14), l2 = n(20), m = n(68), p = n(138), d = n(85), f2 = n(238), g = n(31), h = n(17), y = n(28), v = n(171), b = n(239), T = n(240).set, S = n(395), M = n(398), k = n(104), x = n(399), C = n(101), I = n(105), w = n(117), _ = n(70), P = w.CONSTRUCTOR, A = w.REJECTION_EVENT, N = w.SUBCLASSING, O = C.getterFor("Promise"), E = C.set, R = I && I.prototype, j2 = I, F = R, D = u.TypeError, U = u.document, L = u.process, B = _.f, q = B, H = !!(U && U.createEvent && u.dispatchEvent), z = function(e2) {
          var t2;
          return !(!y(e2) || !h(t2 = e2.then)) && t2;
        }, W = function(e2, t2) {
          var n2, r2, o2, s2 = t2.value, i2 = 1 == t2.state, a2 = i2 ? e2.ok : e2.fail, c2 = e2.resolve, u2 = e2.reject, m2 = e2.domain;
          try {
            a2 ? (i2 || (2 === t2.rejection && K(t2), t2.rejection = 1), true === a2 ? n2 = s2 : (m2 && m2.enter(), n2 = a2(s2), m2 && (m2.exit(), o2 = true)), n2 === e2.promise ? u2(D("Promise-chain cycle")) : (r2 = z(n2)) ? l2(r2, n2, c2, u2) : c2(n2)) : u2(s2);
          } catch (e3) {
            m2 && !o2 && m2.exit(), u2(e3);
          }
        }, V = function(e2, t2) {
          e2.notified || (e2.notified = true, S(function() {
            for (var n2, r2 = e2.reactions; n2 = r2.get(); )
              W(n2, e2);
            e2.notified = false, t2 && !e2.rejection && Q(e2);
          }));
        }, G = function(e2, t2, n2) {
          var r2, o2;
          H ? ((r2 = U.createEvent("Event")).promise = t2, r2.reason = n2, r2.initEvent(e2, false, true), u.dispatchEvent(r2)) : r2 = { promise: t2, reason: n2 }, !A && (o2 = u["on" + e2]) ? o2(r2) : "unhandledrejection" === e2 && M("Unhandled promise rejection", n2);
        }, Q = function(e2) {
          l2(T, u, function() {
            var t2, n2 = e2.facade, r2 = e2.value;
            if (J(e2) && (t2 = k(function() {
              c ? L.emit("unhandledRejection", r2, n2) : G("unhandledrejection", n2, r2);
            }), e2.rejection = c || J(e2) ? 2 : 1, t2.error))
              throw t2.value;
          });
        }, J = function(e2) {
          return 1 !== e2.rejection && !e2.parent;
        }, K = function(e2) {
          l2(T, u, function() {
            var t2 = e2.facade;
            c ? L.emit("rejectionHandled", t2) : G("rejectionhandled", t2, e2.value);
          });
        }, $ = function(e2, t2, n2) {
          return function(r2) {
            e2(t2, r2, n2);
          };
        }, X = function(e2, t2, n2) {
          e2.done || (e2.done = true, n2 && (e2 = n2), e2.value = t2, e2.state = 2, V(e2, true));
        }, Y = function(e2, t2, n2) {
          if (!e2.done) {
            e2.done = true, n2 && (e2 = n2);
            try {
              if (e2.facade === t2)
                throw D("Promise can't be resolved itself");
              var r2 = z(t2);
              r2 ? S(function() {
                var n3 = { done: false };
                try {
                  l2(r2, t2, $(Y, n3, e2), $(X, n3, e2));
                } catch (t3) {
                  X(n3, t3, e2);
                }
              }) : (e2.value = t2, e2.state = 1, V(e2, false));
            } catch (t3) {
              X({ done: false }, t3, e2);
            }
          }
        };
        if (P && (F = (j2 = function(e2) {
          v(this, F), g(e2), l2(r, this);
          var t2 = O(this);
          try {
            e2($(Y, t2), $(X, t2));
          } catch (e3) {
            X(t2, e3);
          }
        }).prototype, (r = function(e2) {
          E(this, { type: "Promise", done: false, notified: false, parent: false, reactions: new x(), rejection: false, state: 0, value: void 0 });
        }).prototype = m(F, "then", function(e2, t2) {
          var n2 = O(this), r2 = B(b(this, j2));
          return n2.parent = true, r2.ok = !h(e2) || e2, r2.fail = h(t2) && t2, r2.domain = c ? L.domain : void 0, 0 == n2.state ? n2.reactions.add(r2) : S(function() {
            W(r2, n2);
          }), r2.promise;
        }), o = function() {
          var e2 = new r(), t2 = O(e2);
          this.promise = e2, this.resolve = $(Y, t2), this.reject = $(X, t2);
        }, _.f = B = function(e2) {
          return e2 === j2 || void 0 === e2 ? new o(e2) : q(e2);
        }, !a && h(I) && R !== Object.prototype)) {
          s = R.then, N || m(R, "then", function(e2, t2) {
            var n2 = this;
            return new j2(function(e3, t3) {
              l2(s, n2, e3, t3);
            }).then(e2, t2);
          }, { unsafe: true });
          try {
            delete R.constructor;
          } catch (e2) {
          }
          p && p(R, F);
        }
        i({ global: true, constructor: true, wrap: true, forced: P }, { Promise: j2 }), d(j2, "Promise", false, true), f2("Promise");
      }, function(e, t, n) {
        var r, o, s, i, a, c, u, l2, m = n(14), p = n(34), d = n(95).f, f2 = n(240).set, g = n(242), h = n(396), y = n(397), v = n(116), b = m.MutationObserver || m.WebKitMutationObserver, T = m.document, S = m.process, M = m.Promise, k = d(m, "queueMicrotask"), x = k && k.value;
        x || (r = function() {
          var e2, t2;
          for (v && (e2 = S.domain) && e2.exit(); o; ) {
            t2 = o.fn, o = o.next;
            try {
              t2();
            } catch (e3) {
              throw o ? i() : s = void 0, e3;
            }
          }
          s = void 0, e2 && e2.enter();
        }, g || v || y || !b || !T ? !h && M && M.resolve ? ((u = M.resolve(void 0)).constructor = M, l2 = p(u.then, u), i = function() {
          l2(r);
        }) : v ? i = function() {
          S.nextTick(r);
        } : (f2 = p(f2, m), i = function() {
          f2(r);
        }) : (a = true, c = T.createTextNode(""), new b(r).observe(c, { characterData: true }), i = function() {
          c.data = a = !a;
        })), e.exports = x || function(e2) {
          var t2 = { fn: e2, next: void 0 };
          s && (s.next = t2), o || (o = t2, i()), s = t2;
        };
      }, function(e, t, n) {
        var r = n(66), o = n(14);
        e.exports = /ipad|iphone|ipod/i.test(r) && void 0 !== o.Pebble;
      }, function(e, t, n) {
        var r = n(66);
        e.exports = /web0s(?!.*chrome)/i.test(r);
      }, function(e, t, n) {
        var r = n(14);
        e.exports = function(e2, t2) {
          var n2 = r.console;
          n2 && n2.error && (1 == arguments.length ? n2.error(e2) : n2.error(e2, t2));
        };
      }, function(e, t) {
        var n = function() {
          this.head = null, this.tail = null;
        };
        n.prototype = { add: function(e2) {
          var t2 = { item: e2, next: null };
          this.head ? this.tail.next = t2 : this.head = t2, this.tail = t2;
        }, get: function() {
          var e2 = this.head;
          if (e2)
            return this.head = e2.next, this.tail === e2 && (this.tail = null), e2.item;
        } }, e.exports = n;
      }, function(e, t, n) {
        var r = n(243), o = n(116);
        e.exports = !r && !o && "object" == typeof window && "object" == typeof document;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(20), s = n(31), i = n(70), a = n(104), c = n(47);
        r({ target: "Promise", stat: true, forced: n(244) }, { all: function(e2) {
          var t2 = this, n2 = i.f(t2), r2 = n2.resolve, u = n2.reject, l2 = a(function() {
            var n3 = s(t2.resolve), i2 = [], a2 = 0, l3 = 1;
            c(e2, function(e3) {
              var s2 = a2++, c2 = false;
              l3++, o(n3, t2, e3).then(function(e4) {
                c2 || (c2 = true, i2[s2] = e4, --l3 || r2(i2));
              }, u);
            }), --l3 || r2(i2);
          });
          return l2.error && u(l2.value), n2.promise;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(49), s = n(117).CONSTRUCTOR, i = n(105), a = n(33), c = n(17), u = n(68), l2 = i && i.prototype;
        if (r({ target: "Promise", proto: true, forced: s, real: true }, { catch: function(e2) {
          return this.then(void 0, e2);
        } }), !o && c(i)) {
          var m = a("Promise").prototype.catch;
          l2.catch !== m && u(l2, "catch", m, { unsafe: true });
        }
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(20), s = n(31), i = n(70), a = n(104), c = n(47);
        r({ target: "Promise", stat: true, forced: n(244) }, { race: function(e2) {
          var t2 = this, n2 = i.f(t2), r2 = n2.reject, u = a(function() {
            var i2 = s(t2.resolve);
            c(e2, function(e3) {
              o(i2, t2, e3).then(n2.resolve, r2);
            });
          });
          return u.error && r2(u.value), n2.promise;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(20), s = n(70);
        r({ target: "Promise", stat: true, forced: n(117).CONSTRUCTOR }, { reject: function(e2) {
          var t2 = s.f(this);
          return o(t2.reject, void 0, e2), t2.promise;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(33), s = n(49), i = n(105), a = n(117).CONSTRUCTOR, c = n(246), u = o("Promise"), l2 = s && !a;
        r({ target: "Promise", stat: true, forced: s || a }, { resolve: function(e2) {
          return c(l2 && this === u ? i : this, e2);
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(49), s = n(105), i = n(5), a = n(33), c = n(17), u = n(239), l2 = n(246), m = n(68), p = s && s.prototype;
        if (r({ target: "Promise", proto: true, real: true, forced: !!s && i(function() {
          p.finally.call({ then: function() {
          } }, function() {
          });
        }) }, { finally: function(e2) {
          var t2 = u(this, a("Promise")), n2 = c(e2);
          return this.then(n2 ? function(n3) {
            return l2(t2, e2()).then(function() {
              return n3;
            });
          } : e2, n2 ? function(n3) {
            return l2(t2, e2()).then(function() {
              throw n3;
            });
          } : e2);
        } }), !o && c(s)) {
          var d = a("Promise").prototype.finally;
          p.finally !== d && m(p, "finally", d, { unsafe: true });
        }
      }, function(e, t, n) {
        e.exports = n(408);
      }, function(e, t, n) {
        var r = n(409);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(249);
        e.exports = r;
      }, function(e, t, n) {
        n(411);
        var r = n(13).Object, o = e.exports = function(e2, t2, n2) {
          return r.defineProperty(e2, t2, n2);
        };
        r.defineProperty.sham && (o.sham = true);
      }, function(e, t, n) {
        var r = n(1), o = n(27), s = n(39).f;
        r({ target: "Object", stat: true, forced: Object.defineProperty !== s, sham: !o }, { defineProperty: s });
      }, function(e, t, n) {
        var r = n(413), o = n(22).default;
        e.exports = function(e2, t2) {
          if ("object" !== o(e2) || null === e2)
            return e2;
          var n2 = e2[r];
          if (void 0 !== n2) {
            var s = n2.call(e2, t2 || "default");
            if ("object" !== o(s))
              return s;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return ("string" === t2 ? String : Number)(e2);
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(414);
      }, function(e, t, n) {
        e.exports = n(415);
      }, function(e, t, n) {
        var r = n(416);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(417);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(418);
        e.exports = r;
      }, function(e, t, n) {
        n(419), n(226);
        var r = n(136);
        e.exports = r.f("toPrimitive");
      }, function(e, t) {
      }, function(e, t, n) {
        var r = n(19), o = n(421), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.slice;
          return e2 === s || r(s, e2) && t2 === s.slice ? o : t2;
        };
      }, function(e, t, n) {
        n(422);
        var r = n(29);
        e.exports = r("Array").slice;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(83), s = n(132), i = n(28), a = n(131), c = n(46), u = n(44), l2 = n(99), m = n(21), p = n(113), d = n(102), f2 = p("slice"), g = m("species"), h = Array, y = Math.max;
        r({ target: "Array", proto: true, forced: !f2 }, { slice: function(e2, t2) {
          var n2, r2, m2, p2 = u(this), f3 = c(p2), v = a(e2, f3), b = a(void 0 === t2 ? f3 : t2, f3);
          if (o(p2) && (n2 = p2.constructor, (s(n2) && (n2 === h || o(n2.prototype)) || i(n2) && null === (n2 = n2[g])) && (n2 = void 0), n2 === h || void 0 === n2))
            return d(p2, v, b);
          for (r2 = new (void 0 === n2 ? h : n2)(y(b - v, 0)), m2 = 0; v < b; v++, m2++)
            v in p2 && l2(r2, m2, p2[v]);
          return r2.length = m2, r2;
        } });
      }, function(e, t, n) {
        var r = n(424);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(425), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.some;
          return e2 === s || r(s, e2) && t2 === s.some ? o : t2;
        };
      }, function(e, t, n) {
        n(426);
        var r = n(29);
        e.exports = r("Array").some;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(74).some;
        r({ target: "Array", proto: true, forced: !n(82)("some") }, { some: function(e2) {
          return o(this, e2, arguments.length > 1 ? arguments[1] : void 0);
        } });
      }, function(e, t, n) {
        var r = n(428);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(429), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.splice;
          return e2 === s || r(s, e2) && t2 === s.splice ? o : t2;
        };
      }, function(e, t, n) {
        n(430);
        var r = n(29);
        e.exports = r("Array").splice;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(42), s = n(131), i = n(112), a = n(46), c = n(431), u = n(214), l2 = n(164), m = n(99), p = n(252), d = n(113)("splice"), f2 = Math.max, g = Math.min;
        r({ target: "Array", proto: true, forced: !d }, { splice: function(e2, t2) {
          var n2, r2, d2, h, y, v, b = o(this), T = a(b), S = s(e2, T), M = arguments.length;
          for (0 === M ? n2 = r2 = 0 : 1 === M ? (n2 = 0, r2 = T - S) : (n2 = M - 2, r2 = g(f2(i(t2), 0), T - S)), u(T + n2 - r2), d2 = l2(b, r2), h = 0; h < r2; h++)
            (y = S + h) in b && m(d2, h, b[y]);
          if (d2.length = r2, n2 < r2) {
            for (h = S; h < T - r2; h++)
              v = h + n2, (y = h + r2) in b ? b[v] = b[y] : p(b, v);
            for (h = T; h > T - r2 + n2; h--)
              p(b, h - 1);
          } else if (n2 > r2)
            for (h = T - r2; h > S; h--)
              v = h + n2 - 1, (y = h + r2 - 1) in b ? b[v] = b[y] : p(b, v);
          for (h = 0; h < n2; h++)
            b[h + S] = arguments[h + 2];
          return c(b, T - r2 + n2), d2;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(27), o = n(83), s = TypeError, i = Object.getOwnPropertyDescriptor, a = r && !function() {
          if (void 0 !== this)
            return true;
          try {
            Object.defineProperty([], "length", { writable: false }).length = 1;
          } catch (e2) {
            return e2 instanceof TypeError;
          }
        }();
        e.exports = a ? function(e2, t2) {
          if (o(e2) && !i(e2, "length").writable)
            throw s("Cannot set read only .length");
          return e2.length = t2;
        } : function(e2, t2) {
          return e2.length = t2;
        };
      }, function(e, t, n) {
        var r = n(433);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(434), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.sort;
          return e2 === s || r(s, e2) && t2 === s.sort ? o : t2;
        };
      }, function(e, t, n) {
        n(435);
        var r = n(29);
        e.exports = r("Array").sort;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(12), s = n(31), i = n(42), a = n(46), c = n(252), u = n(50), l2 = n(5), m = n(436), p = n(82), d = n(437), f2 = n(438), g = n(98), h = n(439), y = [], v = o(y.sort), b = o(y.push), T = l2(function() {
          y.sort(void 0);
        }), S = l2(function() {
          y.sort(null);
        }), M = p("sort"), k = !l2(function() {
          if (g)
            return g < 70;
          if (!(d && d > 3)) {
            if (f2)
              return true;
            if (h)
              return h < 603;
            var e2, t2, n2, r2, o2 = "";
            for (e2 = 65; e2 < 76; e2++) {
              switch (t2 = String.fromCharCode(e2), e2) {
                case 66:
                case 69:
                case 70:
                case 72:
                  n2 = 3;
                  break;
                case 68:
                case 71:
                  n2 = 4;
                  break;
                default:
                  n2 = 2;
              }
              for (r2 = 0; r2 < 47; r2++)
                y.push({ k: t2 + r2, v: n2 });
            }
            for (y.sort(function(e3, t3) {
              return t3.v - e3.v;
            }), r2 = 0; r2 < y.length; r2++)
              t2 = y[r2].k.charAt(0), o2.charAt(o2.length - 1) !== t2 && (o2 += t2);
            return "DGBEFHACIJK" !== o2;
          }
        });
        r({ target: "Array", proto: true, forced: T || !S || !M || !k }, { sort: function(e2) {
          void 0 !== e2 && s(e2);
          var t2 = i(this);
          if (k)
            return void 0 === e2 ? v(t2) : v(t2, e2);
          var n2, r2, o2 = [], l3 = a(t2);
          for (r2 = 0; r2 < l3; r2++)
            r2 in t2 && b(o2, t2[r2]);
          for (m(o2, function(e3) {
            return function(t3, n3) {
              return void 0 === n3 ? -1 : void 0 === t3 ? 1 : void 0 !== e3 ? +e3(t3, n3) || 0 : u(t3) > u(n3) ? 1 : -1;
            };
          }(e2)), n2 = a(o2), r2 = 0; r2 < n2; )
            t2[r2] = o2[r2++];
          for (; r2 < l3; )
            c(t2, r2++);
          return t2;
        } });
      }, function(e, t, n) {
        var r = n(221), o = Math.floor, s = function(e2, t2) {
          var n2 = e2.length, c = o(n2 / 2);
          return n2 < 8 ? i(e2, t2) : a(e2, s(r(e2, 0, c), t2), s(r(e2, c), t2), t2);
        }, i = function(e2, t2) {
          for (var n2, r2, o2 = e2.length, s2 = 1; s2 < o2; ) {
            for (r2 = s2, n2 = e2[s2]; r2 && t2(e2[r2 - 1], n2) > 0; )
              e2[r2] = e2[--r2];
            r2 !== s2++ && (e2[r2] = n2);
          }
          return e2;
        }, a = function(e2, t2, n2, r2) {
          for (var o2 = t2.length, s2 = n2.length, i2 = 0, a2 = 0; i2 < o2 || a2 < s2; )
            e2[i2 + a2] = i2 < o2 && a2 < s2 ? r2(t2[i2], n2[a2]) <= 0 ? t2[i2++] : n2[a2++] : i2 < o2 ? t2[i2++] : n2[a2++];
          return e2;
        };
        e.exports = s;
      }, function(e, t, n) {
        var r = n(66).match(/firefox\/(\d+)/i);
        e.exports = !!r && +r[1];
      }, function(e, t, n) {
        var r = n(66);
        e.exports = /MSIE|Trident/.test(r);
      }, function(e, t, n) {
        var r = n(66).match(/AppleWebKit\/(\d+)\./);
        e.exports = !!r && +r[1];
      }, function(e, t, n) {
        var r = n(441);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(442), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.map;
          return e2 === s || r(s, e2) && t2 === s.map ? o : t2;
        };
      }, function(e, t, n) {
        n(443);
        var r = n(29);
        e.exports = r("Array").map;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(74).map;
        r({ target: "Array", proto: true, forced: !n(113)("map") }, { map: function(e2) {
          return o(this, e2, arguments.length > 1 ? arguments[1] : void 0);
        } });
      }, function(e, t, n) {
        var r = n(445);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(446), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.reduce;
          return e2 === s || r(s, e2) && t2 === s.reduce ? o : t2;
        };
      }, function(e, t, n) {
        n(447);
        var r = n(29);
        e.exports = r("Array").reduce;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(448).left, s = n(82), i = n(98), a = n(116);
        r({ target: "Array", proto: true, forced: !s("reduce") || !a && i > 79 && i < 83 }, { reduce: function(e2) {
          var t2 = arguments.length;
          return o(this, e2, t2, t2 > 1 ? arguments[1] : void 0);
        } });
      }, function(e, t, n) {
        var r = n(31), o = n(42), s = n(127), i = n(46), a = TypeError, c = function(e2) {
          return function(t2, n2, c2, u) {
            r(n2);
            var l2 = o(t2), m = s(l2), p = i(l2), d = e2 ? p - 1 : 0, f2 = e2 ? -1 : 1;
            if (c2 < 2)
              for (; ; ) {
                if (d in m) {
                  u = m[d], d += f2;
                  break;
                }
                if (d += f2, e2 ? d < 0 : p <= d)
                  throw a("Reduce of empty array with no initial value");
              }
            for (; e2 ? d >= 0 : p > d; d += f2)
              d in m && (u = n2(u, m[d], d, l2));
            return u;
          };
        };
        e.exports = { left: c(false), right: c(true) };
      }, function(e, t, n) {
        var r = n(450);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(451), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.lastIndexOf;
          return e2 === s || r(s, e2) && t2 === s.lastIndexOf ? o : t2;
        };
      }, function(e, t, n) {
        n(452);
        var r = n(29);
        e.exports = r("Array").lastIndexOf;
      }, function(e, t, n) {
        var r = n(1), o = n(453);
        r({ target: "Array", proto: true, forced: o !== [].lastIndexOf }, { lastIndexOf: o });
      }, function(e, t, n) {
        "use strict";
        var r = n(79), o = n(44), s = n(112), i = n(46), a = n(82), c = Math.min, u = [].lastIndexOf, l2 = !!u && 1 / [1].lastIndexOf(1, -0) < 0, m = a("lastIndexOf"), p = l2 || !m;
        e.exports = p ? function(e2) {
          if (l2)
            return r(u, this, arguments) || 0;
          var t2 = o(this), n2 = i(t2), a2 = n2 - 1;
          for (arguments.length > 1 && (a2 = c(a2, s(arguments[1]))), a2 < 0 && (a2 = n2 + a2); a2 >= 0; a2--)
            if (a2 in t2 && t2[a2] === e2)
              return a2 || 0;
          return -1;
        } : u;
      }, function(e, t, n) {
        n(253);
        var r = n(13);
        e.exports = r.setTimeout;
      }, function(e, t, n) {
        var r = n(1), o = n(14), s = n(254)(o.setInterval, true);
        r({ global: true, bind: true, forced: o.setInterval !== s }, { setInterval: s });
      }, function(e, t) {
        e.exports = "function" == typeof Bun && Bun && "string" == typeof Bun.version;
      }, function(e, t, n) {
        var r = n(1), o = n(14), s = n(254)(o.setTimeout, true);
        r({ global: true, bind: true, forced: o.setTimeout !== s }, { setTimeout: s });
      }, function(e, t, n) {
        var r = n(459);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(460), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.filter;
          return e2 === s || r(s, e2) && t2 === s.filter ? o : t2;
        };
      }, function(e, t, n) {
        n(461);
        var r = n(29);
        e.exports = r("Array").filter;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(74).filter;
        r({ target: "Array", proto: true, forced: !n(113)("filter") }, { filter: function(e2) {
          return o(this, e2, arguments.length > 1 ? arguments[1] : void 0);
        } });
      }, function(e, t, n) {
        e.exports = n(463);
      }, function(e, t, n) {
        n(69);
        var r = n(67), o = n(30), s = n(19), i = n(464), a = Array.prototype, c = { DOMTokenList: true, NodeList: true };
        e.exports = function(e2) {
          var t2 = e2.values;
          return e2 === a || s(a, e2) && t2 === a.values || o(c, r(e2)) ? i : t2;
        };
      }, function(e, t, n) {
        var r = n(465);
        e.exports = r;
      }, function(e, t, n) {
        n(86), n(100);
        var r = n(29);
        e.exports = r("Array").values;
      }, function(e, t, n) {
        e.exports = n(467);
      }, function(e, t, n) {
        var r = n(468);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(469), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.every;
          return e2 === s || r(s, e2) && t2 === s.every ? o : t2;
        };
      }, function(e, t, n) {
        n(470);
        var r = n(29);
        e.exports = r("Array").every;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(74).every;
        r({ target: "Array", proto: true, forced: !n(82)("every") }, { every: function(e2) {
          return o(this, e2, arguments.length > 1 ? arguments[1] : void 0);
        } });
      }, function(e, t, n) {
        n(115), n(472);
        var r = n(13);
        e.exports = r.Array.from;
      }, function(e, t, n) {
        var r = n(1), o = n(473);
        r({ target: "Array", stat: true, forced: !n(245)(function(e2) {
          Array.from(e2);
        }) }, { from: o });
      }, function(e, t, n) {
        "use strict";
        var r = n(34), o = n(20), s = n(42), i = n(474), a = n(235), c = n(132), u = n(46), l2 = n(99), m = n(236), p = n(139), d = Array;
        e.exports = function(e2) {
          var t2 = s(e2), n2 = c(this), f2 = arguments.length, g = f2 > 1 ? arguments[1] : void 0, h = void 0 !== g;
          h && (g = r(g, f2 > 2 ? arguments[2] : void 0));
          var y, v, b, T, S, M, k = p(t2), x = 0;
          if (!k || this === d && a(k))
            for (y = u(t2), v = n2 ? new this(y) : d(y); y > x; x++)
              M = h ? g(t2[x], x) : t2[x], l2(v, x, M);
          else
            for (S = (T = m(t2, k)).next, v = n2 ? new this() : []; !(b = o(S, T)).done; x++)
              M = h ? i(T, g, [b.value, x], true) : b.value, l2(v, x, M);
          return v.length = x, v;
        };
      }, function(e, t, n) {
        var r = n(36), o = n(237);
        e.exports = function(e2, t2, n2, s) {
          try {
            return s ? t2(r(n2)[0], n2[1]) : t2(n2);
          } catch (t3) {
            o(e2, "throw", t3);
          }
        };
      }, function(e, t, n) {
        e.exports = n(476);
      }, function(e, t, n) {
        var r = n(477);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(478);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(479);
        n(69), e.exports = r;
      }, function(e, t, n) {
        n(86), n(115);
        var r = n(139);
        e.exports = r;
      }, function(e, t, n) {
        n(220);
        var r = n(13);
        e.exports = r.Object.getOwnPropertySymbols;
      }, function(e, t, n) {
        var r = n(482);
        e.exports = r;
      }, function(e, t, n) {
        n(483);
        var r = n(13).Object, o = e.exports = function(e2, t2) {
          return r.getOwnPropertyDescriptor(e2, t2);
        };
        r.getOwnPropertyDescriptor.sham && (o.sham = true);
      }, function(e, t, n) {
        var r = n(1), o = n(5), s = n(44), i = n(95).f, a = n(27), c = o(function() {
          i(1);
        });
        r({ target: "Object", stat: true, forced: !a || c, sham: !a }, { getOwnPropertyDescriptor: function(e2, t2) {
          return i(s(e2), t2);
        } });
      }, function(e, t, n) {
        var r = n(485);
        e.exports = r;
      }, function(e, t, n) {
        n(486);
        var r = n(13);
        e.exports = r.Object.getOwnPropertyDescriptors;
      }, function(e, t, n) {
        var r = n(1), o = n(27), s = n(234), i = n(44), a = n(95), c = n(99);
        r({ target: "Object", stat: true, sham: !o }, { getOwnPropertyDescriptors: function(e2) {
          for (var t2, n2, r2 = i(e2), o2 = a.f, u = s(r2), l2 = {}, m = 0; u.length > m; )
            void 0 !== (n2 = o2(r2, t2 = u[m++])) && c(l2, t2, n2);
          return l2;
        } });
      }, function(e, t, n) {
        var r = n(488);
        e.exports = r;
      }, function(e, t, n) {
        n(489);
        var r = n(13).Object, o = e.exports = function(e2, t2) {
          return r.defineProperties(e2, t2);
        };
        r.defineProperties.sham && (o.sham = true);
      }, function(e, t, n) {
        var r = n(1), o = n(27), s = n(166).f;
        r({ target: "Object", stat: true, forced: Object.defineProperties !== s, sham: !o }, { defineProperties: s });
      }, function(e, t, n) {
        var r = n(11);
        "undefined" != typeof window && (window.console || r.isWeixinApp || (window.console = { log: function() {
        }, info: function() {
        }, warn: function() {
        }, error: function() {
        } }));
      }, function(e, t, n) {
        var r = n(492), o = n(521), s = n(261), i = n(523), a = n(532), c = n(535), u = n(536), l2 = n(537), m = n(539), p = n(540), d = n(541), f2 = n(183), g = n(545), h = n(546), y = n(552), v = n(177), b = n(264), T = n(554), S = n(91), M = n(556), k = n(176), x = n(181), C = {};
        C["[object Arguments]"] = C["[object Array]"] = C["[object ArrayBuffer]"] = C["[object DataView]"] = C["[object Boolean]"] = C["[object Date]"] = C["[object Float32Array]"] = C["[object Float64Array]"] = C["[object Int8Array]"] = C["[object Int16Array]"] = C["[object Int32Array]"] = C["[object Map]"] = C["[object Number]"] = C["[object Object]"] = C["[object RegExp]"] = C["[object Set]"] = C["[object String]"] = C["[object Symbol]"] = C["[object Uint8Array]"] = C["[object Uint8ClampedArray]"] = C["[object Uint16Array]"] = C["[object Uint32Array]"] = true, C["[object Error]"] = C["[object Function]"] = C["[object WeakMap]"] = false, e.exports = function e2(t2, n2, I, w, _, P) {
          var A, N = 1 & n2, O = 2 & n2, E = 4 & n2;
          if (I && (A = _ ? I(t2, w, _, P) : I(t2)), void 0 !== A)
            return A;
          if (!S(t2))
            return t2;
          var R = v(t2);
          if (R) {
            if (A = g(t2), !N)
              return u(t2, A);
          } else {
            var j2 = f2(t2), F = "[object Function]" == j2 || "[object GeneratorFunction]" == j2;
            if (b(t2))
              return c(t2, N);
            if ("[object Object]" == j2 || "[object Arguments]" == j2 || F && !_) {
              if (A = O || F ? {} : y(t2), !N)
                return O ? m(t2, a(A, t2)) : l2(t2, i(A, t2));
            } else {
              if (!C[j2])
                return _ ? t2 : {};
              A = h(t2, j2, N);
            }
          }
          P || (P = new r());
          var D = P.get(t2);
          if (D)
            return D;
          P.set(t2, A), M(t2) ? t2.forEach(function(r2) {
            A.add(e2(r2, n2, I, r2, t2, P));
          }) : T(t2) && t2.forEach(function(r2, o2) {
            A.set(o2, e2(r2, n2, I, o2, t2, P));
          });
          var U = R ? void 0 : (E ? O ? d : p : O ? x : k)(t2);
          return o(U || t2, function(r2, o2) {
            U && (r2 = t2[o2 = r2]), s(A, o2, e2(r2, n2, I, o2, t2, P));
          }), A;
        };
      }, function(e, t, n) {
        var r = n(142), o = n(498), s = n(499), i = n(500), a = n(501), c = n(502);
        function u(e2) {
          var t2 = this.__data__ = new r(e2);
          this.size = t2.size;
        }
        u.prototype.clear = o, u.prototype.delete = s, u.prototype.get = i, u.prototype.has = a, u.prototype.set = c, e.exports = u;
      }, function(e, t) {
        e.exports = function() {
          this.__data__ = [], this.size = 0;
        };
      }, function(e, t, n) {
        var r = n(143), o = Array.prototype.splice;
        e.exports = function(e2) {
          var t2 = this.__data__, n2 = r(t2, e2);
          return !(n2 < 0) && (n2 == t2.length - 1 ? t2.pop() : o.call(t2, n2, 1), --this.size, true);
        };
      }, function(e, t, n) {
        var r = n(143);
        e.exports = function(e2) {
          var t2 = this.__data__, n2 = r(t2, e2);
          return n2 < 0 ? void 0 : t2[n2][1];
        };
      }, function(e, t, n) {
        var r = n(143);
        e.exports = function(e2) {
          return r(this.__data__, e2) > -1;
        };
      }, function(e, t, n) {
        var r = n(143);
        e.exports = function(e2, t2) {
          var n2 = this.__data__, o = r(n2, e2);
          return o < 0 ? (++this.size, n2.push([e2, t2])) : n2[o][1] = t2, this;
        };
      }, function(e, t, n) {
        var r = n(142);
        e.exports = function() {
          this.__data__ = new r(), this.size = 0;
        };
      }, function(e, t) {
        e.exports = function(e2) {
          var t2 = this.__data__, n = t2.delete(e2);
          return this.size = t2.size, n;
        };
      }, function(e, t) {
        e.exports = function(e2) {
          return this.__data__.get(e2);
        };
      }, function(e, t) {
        e.exports = function(e2) {
          return this.__data__.has(e2);
        };
      }, function(e, t, n) {
        var r = n(142), o = n(174), s = n(260);
        e.exports = function(e2, t2) {
          var n2 = this.__data__;
          if (n2 instanceof r) {
            var i = n2.__data__;
            if (!o || i.length < 199)
              return i.push([e2, t2]), this.size = ++n2.size, this;
            n2 = this.__data__ = new s(i);
          }
          return n2.set(e2, t2), this.size = n2.size, this;
        };
      }, function(e, t, n) {
        var r = n(257), o = n(506), s = n(91), i = n(259), a = /^\[object .+?Constructor\]$/, c = Function.prototype, u = Object.prototype, l2 = c.toString, m = u.hasOwnProperty, p = RegExp("^" + l2.call(m).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
        e.exports = function(e2) {
          return !(!s(e2) || o(e2)) && (r(e2) ? p : a).test(i(e2));
        };
      }, function(e, t, n) {
        var r = n(175), o = Object.prototype, s = o.hasOwnProperty, i = o.toString, a = r ? r.toStringTag : void 0;
        e.exports = function(e2) {
          var t2 = s.call(e2, a), n2 = e2[a];
          try {
            e2[a] = void 0;
            var r2 = true;
          } catch (e3) {
          }
          var o2 = i.call(e2);
          return r2 && (t2 ? e2[a] = n2 : delete e2[a]), o2;
        };
      }, function(e, t) {
        var n = Object.prototype.toString;
        e.exports = function(e2) {
          return n.call(e2);
        };
      }, function(e, t, n) {
        var r, o = n(507), s = (r = /[^.]+$/.exec(o && o.keys && o.keys.IE_PROTO || "")) ? "Symbol(src)_1." + r : "";
        e.exports = function(e2) {
          return !!s && s in e2;
        };
      }, function(e, t, n) {
        var r = n(56)["__core-js_shared__"];
        e.exports = r;
      }, function(e, t) {
        e.exports = function(e2, t2) {
          return null == e2 ? void 0 : e2[t2];
        };
      }, function(e, t, n) {
        var r = n(510), o = n(142), s = n(174);
        e.exports = function() {
          this.size = 0, this.__data__ = { hash: new r(), map: new (s || o)(), string: new r() };
        };
      }, function(e, t, n) {
        var r = n(511), o = n(512), s = n(513), i = n(514), a = n(515);
        function c(e2) {
          var t2 = -1, n2 = null == e2 ? 0 : e2.length;
          for (this.clear(); ++t2 < n2; ) {
            var r2 = e2[t2];
            this.set(r2[0], r2[1]);
          }
        }
        c.prototype.clear = r, c.prototype.delete = o, c.prototype.get = s, c.prototype.has = i, c.prototype.set = a, e.exports = c;
      }, function(e, t, n) {
        var r = n(144);
        e.exports = function() {
          this.__data__ = r ? r(null) : {}, this.size = 0;
        };
      }, function(e, t) {
        e.exports = function(e2) {
          var t2 = this.has(e2) && delete this.__data__[e2];
          return this.size -= t2 ? 1 : 0, t2;
        };
      }, function(e, t, n) {
        var r = n(144), o = Object.prototype.hasOwnProperty;
        e.exports = function(e2) {
          var t2 = this.__data__;
          if (r) {
            var n2 = t2[e2];
            return "__lodash_hash_undefined__" === n2 ? void 0 : n2;
          }
          return o.call(t2, e2) ? t2[e2] : void 0;
        };
      }, function(e, t, n) {
        var r = n(144), o = Object.prototype.hasOwnProperty;
        e.exports = function(e2) {
          var t2 = this.__data__;
          return r ? void 0 !== t2[e2] : o.call(t2, e2);
        };
      }, function(e, t, n) {
        var r = n(144);
        e.exports = function(e2, t2) {
          var n2 = this.__data__;
          return this.size += this.has(e2) ? 0 : 1, n2[e2] = r && void 0 === t2 ? "__lodash_hash_undefined__" : t2, this;
        };
      }, function(e, t, n) {
        var r = n(145);
        e.exports = function(e2) {
          var t2 = r(this, e2).delete(e2);
          return this.size -= t2 ? 1 : 0, t2;
        };
      }, function(e, t) {
        e.exports = function(e2) {
          var t2 = typeof e2;
          return "string" == t2 || "number" == t2 || "symbol" == t2 || "boolean" == t2 ? "__proto__" !== e2 : null === e2;
        };
      }, function(e, t, n) {
        var r = n(145);
        e.exports = function(e2) {
          return r(this, e2).get(e2);
        };
      }, function(e, t, n) {
        var r = n(145);
        e.exports = function(e2) {
          return r(this, e2).has(e2);
        };
      }, function(e, t, n) {
        var r = n(145);
        e.exports = function(e2, t2) {
          var n2 = r(this, e2), o = n2.size;
          return n2.set(e2, t2), this.size += n2.size == o ? 0 : 1, this;
        };
      }, function(e, t) {
        e.exports = function(e2, t2) {
          for (var n = -1, r = null == e2 ? 0 : e2.length; ++n < r && false !== t2(e2[n], n, e2); )
            ;
          return e2;
        };
      }, function(e, t, n) {
        var r = n(87), o = function() {
          try {
            var e2 = r(Object, "defineProperty");
            return e2({}, "", {}), e2;
          } catch (e3) {
          }
        }();
        e.exports = o;
      }, function(e, t, n) {
        var r = n(146), o = n(176);
        e.exports = function(e2, t2) {
          return e2 && r(t2, o(t2), e2);
        };
      }, function(e, t) {
        e.exports = function(e2, t2) {
          for (var n = -1, r = Array(e2); ++n < e2; )
            r[n] = t2(n);
          return r;
        };
      }, function(e, t, n) {
        var r = n(526), o = n(106), s = Object.prototype, i = s.hasOwnProperty, a = s.propertyIsEnumerable, c = r(function() {
          return arguments;
        }()) ? r : function(e2) {
          return o(e2) && i.call(e2, "callee") && !a.call(e2, "callee");
        };
        e.exports = c;
      }, function(e, t, n) {
        var r = n(124), o = n(106);
        e.exports = function(e2) {
          return o(e2) && "[object Arguments]" == r(e2);
        };
      }, function(e, t) {
        e.exports = function() {
          return false;
        };
      }, function(e, t, n) {
        var r = n(529), o = n(178), s = n(179), i = s && s.isTypedArray, a = i ? o(i) : r;
        e.exports = a;
      }, function(e, t, n) {
        var r = n(124), o = n(265), s = n(106), i = {};
        i["[object Float32Array]"] = i["[object Float64Array]"] = i["[object Int8Array]"] = i["[object Int16Array]"] = i["[object Int32Array]"] = i["[object Uint8Array]"] = i["[object Uint8ClampedArray]"] = i["[object Uint16Array]"] = i["[object Uint32Array]"] = true, i["[object Arguments]"] = i["[object Array]"] = i["[object ArrayBuffer]"] = i["[object Boolean]"] = i["[object DataView]"] = i["[object Date]"] = i["[object Error]"] = i["[object Function]"] = i["[object Map]"] = i["[object Number]"] = i["[object Object]"] = i["[object RegExp]"] = i["[object Set]"] = i["[object String]"] = i["[object WeakMap]"] = false, e.exports = function(e2) {
          return s(e2) && o(e2.length) && !!i[r(e2)];
        };
      }, function(e, t, n) {
        var r = n(180), o = n(531), s = Object.prototype.hasOwnProperty;
        e.exports = function(e2) {
          if (!r(e2))
            return o(e2);
          var t2 = [];
          for (var n2 in Object(e2))
            s.call(e2, n2) && "constructor" != n2 && t2.push(n2);
          return t2;
        };
      }, function(e, t, n) {
        var r = n(266)(Object.keys, Object);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(146), o = n(181);
        e.exports = function(e2, t2) {
          return e2 && r(t2, o(t2), e2);
        };
      }, function(e, t, n) {
        var r = n(91), o = n(180), s = n(534), i = Object.prototype.hasOwnProperty;
        e.exports = function(e2) {
          if (!r(e2))
            return s(e2);
          var t2 = o(e2), n2 = [];
          for (var a in e2)
            ("constructor" != a || !t2 && i.call(e2, a)) && n2.push(a);
          return n2;
        };
      }, function(e, t) {
        e.exports = function(e2) {
          var t2 = [];
          if (null != e2)
            for (var n in Object(e2))
              t2.push(n);
          return t2;
        };
      }, function(e, t, n) {
        (function(e2) {
          var r = n(56), o = t && !t.nodeType && t, s = o && "object" == typeof e2 && e2 && !e2.nodeType && e2, i = s && s.exports === o ? r.Buffer : void 0, a = i ? i.allocUnsafe : void 0;
          e2.exports = function(e3, t2) {
            if (t2)
              return e3.slice();
            var n2 = e3.length, r2 = a ? a(n2) : new e3.constructor(n2);
            return e3.copy(r2), r2;
          };
        }).call(this, n(147)(e));
      }, function(e, t) {
        e.exports = function(e2, t2) {
          var n = -1, r = e2.length;
          for (t2 || (t2 = Array(r)); ++n < r; )
            t2[n] = e2[n];
          return t2;
        };
      }, function(e, t, n) {
        var r = n(146), o = n(182);
        e.exports = function(e2, t2) {
          return r(e2, o(e2), t2);
        };
      }, function(e, t) {
        e.exports = function(e2, t2) {
          for (var n = -1, r = null == e2 ? 0 : e2.length, o = 0, s = []; ++n < r; ) {
            var i = e2[n];
            t2(i, n, e2) && (s[o++] = i);
          }
          return s;
        };
      }, function(e, t, n) {
        var r = n(146), o = n(268);
        e.exports = function(e2, t2) {
          return r(e2, o(e2), t2);
        };
      }, function(e, t, n) {
        var r = n(271), o = n(182), s = n(176);
        e.exports = function(e2) {
          return r(e2, s, o);
        };
      }, function(e, t, n) {
        var r = n(271), o = n(268), s = n(181);
        e.exports = function(e2) {
          return r(e2, s, o);
        };
      }, function(e, t, n) {
        var r = n(87)(n(56), "DataView");
        e.exports = r;
      }, function(e, t, n) {
        var r = n(87)(n(56), "Promise");
        e.exports = r;
      }, function(e, t, n) {
        var r = n(87)(n(56), "WeakMap");
        e.exports = r;
      }, function(e, t) {
        var n = Object.prototype.hasOwnProperty;
        e.exports = function(e2) {
          var t2 = e2.length, r = new e2.constructor(t2);
          return t2 && "string" == typeof e2[0] && n.call(e2, "index") && (r.index = e2.index, r.input = e2.input), r;
        };
      }, function(e, t, n) {
        var r = n(184), o = n(548), s = n(549), i = n(550), a = n(551);
        e.exports = function(e2, t2, n2) {
          var c = e2.constructor;
          switch (t2) {
            case "[object ArrayBuffer]":
              return r(e2);
            case "[object Boolean]":
            case "[object Date]":
              return new c(+e2);
            case "[object DataView]":
              return o(e2, n2);
            case "[object Float32Array]":
            case "[object Float64Array]":
            case "[object Int8Array]":
            case "[object Int16Array]":
            case "[object Int32Array]":
            case "[object Uint8Array]":
            case "[object Uint8ClampedArray]":
            case "[object Uint16Array]":
            case "[object Uint32Array]":
              return a(e2, n2);
            case "[object Map]":
              return new c();
            case "[object Number]":
            case "[object String]":
              return new c(e2);
            case "[object RegExp]":
              return s(e2);
            case "[object Set]":
              return new c();
            case "[object Symbol]":
              return i(e2);
          }
        };
      }, function(e, t, n) {
        var r = n(56).Uint8Array;
        e.exports = r;
      }, function(e, t, n) {
        var r = n(184);
        e.exports = function(e2, t2) {
          var n2 = t2 ? r(e2.buffer) : e2.buffer;
          return new e2.constructor(n2, e2.byteOffset, e2.byteLength);
        };
      }, function(e, t) {
        var n = /\w*$/;
        e.exports = function(e2) {
          var t2 = new e2.constructor(e2.source, n.exec(e2));
          return t2.lastIndex = e2.lastIndex, t2;
        };
      }, function(e, t, n) {
        var r = n(175), o = r ? r.prototype : void 0, s = o ? o.valueOf : void 0;
        e.exports = function(e2) {
          return s ? Object(s.call(e2)) : {};
        };
      }, function(e, t, n) {
        var r = n(184);
        e.exports = function(e2, t2) {
          var n2 = t2 ? r(e2.buffer) : e2.buffer;
          return new e2.constructor(n2, e2.byteOffset, e2.length);
        };
      }, function(e, t, n) {
        var r = n(553), o = n(270), s = n(180);
        e.exports = function(e2) {
          return "function" != typeof e2.constructor || s(e2) ? {} : r(o(e2));
        };
      }, function(e, t, n) {
        var r = n(91), o = Object.create, s = function() {
          function e2() {
          }
          return function(t2) {
            if (!r(t2))
              return {};
            if (o)
              return o(t2);
            e2.prototype = t2;
            var n2 = new e2();
            return e2.prototype = void 0, n2;
          };
        }();
        e.exports = s;
      }, function(e, t, n) {
        var r = n(555), o = n(178), s = n(179), i = s && s.isMap, a = i ? o(i) : r;
        e.exports = a;
      }, function(e, t, n) {
        var r = n(183), o = n(106);
        e.exports = function(e2) {
          return o(e2) && "[object Map]" == r(e2);
        };
      }, function(e, t, n) {
        var r = n(557), o = n(178), s = n(179), i = s && s.isSet, a = i ? o(i) : r;
        e.exports = a;
      }, function(e, t, n) {
        var r = n(183), o = n(106);
        e.exports = function(e2) {
          return o(e2) && "[object Set]" == r(e2);
        };
      }, function(e, t, n) {
        var r = n(2), o = n(4), s = n(7), i = n(71), a = n(8), c = n(15), u = n(6), l2 = n(3), m = n(64), p = n(0), d = n(11), f2 = n(45), g = {};
        function h() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          !e2.logLevel && e2.debug && (e2.logLevel = "debug"), p.merge(this, { options: e2, debugEnable: false, api: "log", style: "color:blue;", logLevel: e2.logLevel && e2.logLevel.toLowerCase() || "off", debug: p.emptyFunc, log: p.emptyFunc, info: p.emptyFunc, warn: p.emptyFunc, error: p.emptyFunc }), this.prefix = e2.prefix || "", this.localEnable = g.enable && e2.dbLog && e2.account, this.setDebug(e2.debug), this.localEnable && (this._local = new g(e2.account, e2.expire), this._local.logError = this.error);
        }
        g = n(567);
        var y = h.prototype, v = ["Chrome", "Safari", "Firefox"], b = { debug: 1e3, log: 2e3, info: 3e3, warn: 4e3, error: 5e3, off: 6e3 };
        function T(e2) {
          var t2, n2 = [];
          return r(t2 = o(b)).call(t2, function(t3) {
            b[t3] >= b[e2] && n2.push(t3);
          }), n2;
        }
        y.setDebug = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], t2 = this;
          if (t2.debugEnable = e2 || "debug" === t2.logLevel, e2.style && (t2.style = e2.style), p.exist(console)) {
            if ("off" !== t2.logLevel) {
              var n2 = console, o2 = T(t2.logLevel);
              r(o2).call(o2, function(e3) {
                t2[e3] = function() {
                  var n3 = t2.formatArgsAndSave(arguments, e3);
                  -1 !== s(v).call(v, m.name) && p.isString(n3[0]) && (n3[0] = "%c" + n3[0], i(n3).call(n3, 1, 0, t2.style)), t2._log(e3, n3);
                };
              }), t2.options.logFunc ? t2._log = function() {
              } : t2._log = function(e3, r2) {
                if ("debug" === e3 && (e3 = "log"), n2[e3])
                  try {
                    n2[e3].apply ? t2.chrome(e3, r2) : t2.ie(e3, r2);
                  } catch (e4) {
                  }
              }, t2.chrome = function(e3, r2) {
                -1 !== s(v).call(v, m.name) ? n2[e3].apply(n2, r2) : t2.ie(e3, r2);
              }, t2.ie = function(e3, t3) {
                r(t3).call(t3, function(t4) {
                  n2[e3](a(t4, null, 4));
                });
              };
            } else if (d.isRN || this.localEnable || this.options.logFunc) {
              var c2 = !d.isRN && !this.localEnable;
              t2.log = function() {
                t2.formatArgsAndSave(arguments, "log", c2);
              }, t2.info = function() {
                t2.formatArgsAndSave(arguments, "info", c2);
              }, t2.warn = function() {
                t2.formatArgsAndSave(arguments, "warn", c2);
              }, t2.error = function() {
                t2.formatArgsAndSave(arguments, "error", c2);
              }, t2.debug = function() {
                t2.formatArgsAndSave(arguments, "log", c2);
              };
            }
          }
        }, y.destroy = function() {
          this.localEnable = false, this.log = function() {
          }, this.info = function() {
          }, this.warn = function() {
          }, this.error = function() {
          }, this.debug = function() {
          }, this._local && this._local.destroy();
        }, y.formatArgsAndSave = function(e2, t2, n2) {
          var o2, s2;
          e2 = c([]).call(e2, 0);
          var l3 = /* @__PURE__ */ new Date(), m2 = S(l3.getMonth() + 1) + "-" + S(l3.getDate()) + " " + S(l3.getHours()) + ":" + S(l3.getMinutes()) + ":" + S(l3.getSeconds()) + ":" + S(l3.getMilliseconds(), 3), d2 = u(o2 = u(s2 = "[NIM ".concat(t2.toUpperCase(), " ")).call(s2, m2, " ")).call(o2, this.prefix.toUpperCase(), "]  "), f3 = "";
          p.isString(e2[0]) ? e2[0] = d2 + e2[0] : i(e2).call(e2, 0, 0, d2), r(e2).call(e2, function(t3, n3) {
            p.isArray(t3) || p.isObject(t3) ? (e2[n3] = p.simpleClone(t3), f3 += a(e2[n3]) + " ") : f3 += t3 + " ";
          });
          var g2 = this.options.logFunc;
          return g2 && p.isFunction(g2[t2]) && g2[t2].apply(g2, e2), !n2 && this.writeLocalLog(f3, t2, +l3), e2;
        }, y.writeLocalLog = function(e2, t2, n2) {
          return d.isRN ? this.writeLocalLogRN(e2, t2, n2) : d.isBrowser ? this.writeLocalLogBrowser(e2, t2, n2) : void 0;
        };
        var S = function(e2, t2) {
          t2 = t2 || 2;
          for (var n2 = "" + e2; n2.length < t2; )
            n2 = "0" + n2;
          return n2;
        };
        y.writeLocalLogBrowser = function(e2, t2, n2) {
          this._local && this._local.saveLog({ log: e2, level: t2, time: n2 });
        }, y.writeLocalLogRN = function(e2, t2) {
          if (f2.rnfs && f2.rnfs.writeFile && f2.rnfs.appendFile && f2.rnfs.DocumentDirectoryPath && /error|warn|info/.test(t2)) {
            var n2, r2 = f2.rnfs, o2 = r2.size / 2 - 256;
            e2 += "\r\n", r2.nimPromise = r2.nimPromise.then(function() {
              return n2 = s2(r2.nimIndex), r2.exists(n2);
            }).then(function(t3) {
              return t3 ? r2.appendFile(n2, e2) : r2.writeFile(n2, e2);
            }).then(function() {
              return r2.stat(n2);
            }).then(function(e3) {
              if (e3.size > o2)
                return r2.nimIndex++, r2.nimIndex > 1 && (r2.nimIndex = r2.nimIndex % 2), r2.unlink(s2(r2.nimIndex)).catch(function() {
                  return l2.resolve();
                });
            }).catch(function() {
            });
          }
          function s2(e3) {
            return f2.rnfs.DocumentDirectoryPath + "/nimlog_" + e3 + ".log";
          }
        }, e.exports = h;
      }, function(e, t, n) {
        var r = n(560);
        e.exports = r;
      }, function(e, t, n) {
        n(561);
        var r = n(13);
        e.exports = r.parseFloat;
      }, function(e, t, n) {
        var r = n(1), o = n(562);
        r({ global: true, forced: parseFloat != o }, { parseFloat: o });
      }, function(e, t, n) {
        var r = n(14), o = n(5), s = n(12), i = n(50), a = n(185).trim, c = n(148), u = s("".charAt), l2 = r.parseFloat, m = r.Symbol, p = m && m.iterator, d = 1 / l2(c + "-0") != -1 / 0 || p && !o(function() {
          l2(Object(p));
        });
        e.exports = d ? function(e2) {
          var t2 = a(i(e2)), n2 = l2(t2);
          return 0 === n2 && "-" == u(t2, 0) ? -0 : n2;
        } : l2;
      }, function(e, t, n) {
        var r = n(564);
        e.exports = r;
      }, function(e, t, n) {
        n(565);
        var r = n(13);
        e.exports = r.parseInt;
      }, function(e, t, n) {
        var r = n(1), o = n(566);
        r({ global: true, forced: parseInt != o }, { parseInt: o });
      }, function(e, t, n) {
        var r = n(14), o = n(5), s = n(12), i = n(50), a = n(185).trim, c = n(148), u = r.parseInt, l2 = r.Symbol, m = l2 && l2.iterator, p = /^[+-]?0x/i, d = s(p.exec), f2 = 8 !== u(c + "08") || 22 !== u(c + "0x16") || m && !o(function() {
          u(Object(m));
        });
        e.exports = f2 ? function(e2, t2) {
          var n2 = a(i(e2));
          return u(n2, t2 >>> 0 || (d(p, n2) ? 16 : 10));
        } : u;
      }, function(e, t, n) {
        var r = n(15), o = n(24), s = n(3), i = n(568), a = n(569), c = n(0).getGlobal(), u = n(64).name, l2 = "function" == typeof i, m = c.indexedDB && !/^(IE)$/.test(u);
        function p(e2, t2) {
          this.logWorker = null, this.db = null, this.logQueue = [], this.callbackList = [], this.preTime = null, this.lastTime = +/* @__PURE__ */ new Date(), this.saveLogTimer = void 0, this.initLogLocal({ name: e2, expire: t2 });
        }
        var d = p.prototype;
        p.enable = true, d.saveLog = function(e2) {
          var t2 = this;
          try {
            if (!p.enable)
              return;
            var n2, s2 = this.logQueue.length, i2 = this.logQueue[s2 - 1];
            if (e2.time === this.preTime && i2)
              return void (i2.log += "\r\n" + e2.log);
            this.logQueue.length > 50 || e2.time - this.lastTime > 3e3 && this.logQueue.length > 0 ? (this.doSaveLog(r(n2 = this.logQueue).call(n2, 0)), this.lastTime = i2.time, this.logQueue = [], clearTimeout(this.saveLogTimer)) : (clearTimeout(this.saveLogTimer), this.saveLogTimer = o(function() {
              var e3;
              t2.logQueue.length > 0 && (i2 = t2.logQueue[t2.logQueue.length - 1], t2.doSaveLog(r(e3 = t2.logQueue).call(e3, 0)), t2.lastTime = i2.time, t2.logQueue = []);
            }, 3e3 - (e2.time - this.lastTime))), this.logQueue.push(e2), this.preTime = e2.time;
          } catch (e3) {
            console.error("saveLog Error", e3);
          }
        }, d.destroy = function() {
          if (this.logQueue.length > 0) {
            var e2, t2 = this.logQueue[this.logQueue.length - 1];
            this.doSaveLog(r(e2 = this.logQueue).call(e2, 0)), this.lastTime = t2.time, this.logQueue = [];
          }
          clearTimeout(this.saveLogTimer);
        }, d.doSaveLog = function() {
        }, d.initLogLocal = function() {
        }, d.fetchLog = function() {
        }, d.deleteLogs = function() {
        }, d.logError = function() {
        }, m ? l2 ? (d.doSaveLog = function(e2) {
          this.logWorker.postMessage(e2);
        }, d.initLogLocal = function(e2) {
          var t2 = this;
          this.logWorker = new i({}), this.logWorker.onmessage = function(e3) {
            var n2 = e3.data || {};
            switch (n2.type) {
              case "fetchDone":
                t2.fetchLogDone(n2.code, n2.msg);
                break;
              case "error":
                t2.logError(n2.msg);
            }
          }, this.logWorker.postMessage({ type: "init", msg: e2 });
        }, d.fetchLog = function() {
          var e2 = this;
          return new s(function(t2, n2) {
            0 === e2.callbackList.length && e2.logWorker.postMessage({ type: "fetch" }), e2.callbackList.push(t2), e2.callbackList.push(n2);
          });
        }, d.fetchLogDone = function(e2, t2) {
          for (var n2 = 200 === e2 ? 0 : 1, r2 = 0; r2 < this.callbackList.length / 2; r2++)
            this.callbackList[2 * r2 + n2](t2);
          this.callbackList = [];
        }, d.deleteLogs = function(e2) {
          return this.logWorker.postMessage({ type: "delete", msg: e2 }), s.resolve();
        }) : (d.doSaveLog = function(e2) {
          var t2 = this;
          this.db.putLog(e2).catch(function(e3) {
            t2.logError({ msg: "putLog error", error: e3 });
          });
        }, d.initLogLocal = function(e2) {
          var t2 = this;
          this.db = new a(e2), this.db.init().catch(function(e3) {
            t2.logError({ msg: "dbLog init error", error: e3 });
          });
        }, d.fetchLog = function() {
          return this.db.getAllLogs();
        }, d.deleteLogs = function(e2) {
          return this.db.deleteLogs(e2);
        }) : p.enable = false, e.exports = p;
      }, function(e, t, n) {
        "use strict";
        n.r(t), n.d(t, "default", function() {
          return s;
        });
        var r = n(298), o = n.n(r);
        function s() {
          return o()(`/*!
 * 
 * VERSION: 8.9.124
 * Git Hash: 4f8cb8077466d54ee9de28bb4302c1b7ec7436a3
 * 
 * Create At: 2024/2/27 下午7:05:27
 * 
 * Target: NIM_Web_log.worker
 */!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=109)}([function(t,n,r){"use strict";var e=r(1),o=r(41),i=r(78),c=r(2),u=r(43).f,a=r(84),f=r(13),s=r(34),p=r(19),l=r(8),v=function(t){var n=function(r,e,i){if(this instanceof n){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,e)}return new t(r,e,i)}return o(t,this,arguments)};return n.prototype=t.prototype,n};t.exports=function(t,n){var r,o,d,y,h,m,g,x,b,w=t.target,S=t.global,j=t.stat,O=t.proto,P=S?e:j?e[w]:(e[w]||{}).prototype,T=S?f:f[w]||p(f,w,{})[w],A=T.prototype;for(y in n)o=!(r=a(S?y:w+(j?".":"#")+y,t.forced))&&P&&l(P,y),m=T[y],o&&(g=t.dontCallGetSet?(b=u(P,y))&&b.value:P[y]),h=o&&g?g:n[y],o&&typeof m==typeof h||(x=t.bind&&o?s(h,e):t.wrap&&o?v(h):O&&c(h)?i(h):h,(t.sham||h&&h.sham||m&&m.sham)&&p(x,"sham",!0),p(T,y,x),O&&(l(f,d=w+"Prototype")||p(f,d,{}),p(f[d],y,h),t.real&&A&&(r||!A[y])&&p(A,y,h)))}},function(t,n,r){(function(n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n&&n)||function(){return this}()||Function("return this")()}).call(this,r(77))},function(t,n,r){var e=r(79),o=e.all;t.exports=e.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},function(t,n,r){var e=r(13),o=r(8),i=r(75),c=r(16).f;t.exports=function(t){var n=e.Symbol||(e.Symbol={});o(n,t)||c(n,t,{value:i.f(t)})}},function(t,n,r){var e=r(1),o=r(33),i=r(8),c=r(60),u=r(24),a=r(82),f=o("wks"),s=e.Symbol,p=s&&s.for,l=a?s:s&&s.withoutSetter||c;t.exports=function(t){if(!i(f,t)||!u&&"string"!=typeof f[t]){var n="Symbol."+t;u&&i(s,t)?f[t]=s[t]:f[t]=a&&p?p(n):l(n)}return f[t]}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.call,c=e&&o.bind.bind(i,i);t.exports=e?c:function(t){return function(){return i.apply(t,arguments)}}},function(t,n,r){var e=r(42),o=Function.prototype.call;t.exports=e?o.bind(o):function(){return o.apply(o,arguments)}},function(t,n,r){var e=r(6),o=r(25),i=e({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,n){return i(o(t),n)}},function(t,n,r){var e=r(13),o=r(1),i=r(2),c=function(t){return i(t)?t:void 0};t.exports=function(t,n){return arguments.length<2?c(e[t])||c(o[t]):e[t]&&e[t][n]||o[t]&&o[t][n]}},function(t,n,r){var e=r(2),o=r(79),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:e(t)||t===i}:function(t){return"object"==typeof t?null!==t:e(t)}},function(t,n,r){var e=r(5);t.exports=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,n,r){var e=r(10),o=String,i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not an object")}},function(t,n){t.exports={}},function(t,n,r){var e=r(6);t.exports=e({}.isPrototypeOf)},function(t,n){t.exports=!0},function(t,n,r){var e=r(11),o=r(83),i=r(85),c=r(12),u=r(45),a=TypeError,f=Object.defineProperty,s=Object.getOwnPropertyDescriptor;n.f=e?i?function(t,n,r){if(c(t),n=u(n),c(r),"function"==typeof t&&"prototype"===n&&"value"in r&&"writable"in r&&!r.writable){var e=s(t,n);e&&e.writable&&(t[n]=r.value,r={configurable:"configurable"in r?r.configurable:e.configurable,enumerable:"enumerable"in r?r.enumerable:e.enumerable,writable:!1})}return f(t,n,r)}:f:function(t,n,r){if(c(t),n=u(n),c(r),o)try{return f(t,n,r)}catch(t){}if("get"in r||"set"in r)throw a("Accessors not supported");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(2),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a function")}},function(t,n,r){var e=r(81),o=r(57);t.exports=function(t){return e(o(t))}},function(t,n,r){var e=r(11),o=r(16),i=r(20);t.exports=e?function(t,n,r){return o.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var e=r(19);t.exports=function(t,n,r,o){return o&&o.enumerable?t[n]=r:e(t,n,r),t}},function(t,n,r){"use strict";var e=r(17),o=TypeError,i=function(t){var n,r;this.promise=new t((function(t,e){if(void 0!==n||void 0!==r)throw o("Bad Promise constructor");n=t,r=e})),this.resolve=e(n),this.reject=e(r)};t.exports.f=function(t){return new i(t)}},function(t,n,r){var e=r(6),o=e({}.toString),i=e("".slice);t.exports=function(t){return i(o(t),8,-1)}},function(t,n,r){var e=r(47),o=r(5);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&e&&e<41}))},function(t,n,r){var e=r(57),o=Object;t.exports=function(t){return o(e(t))}},function(t,n,r){var e=r(124);t.exports=function(t){return e(t.length)}},function(t,n){t.exports={}},function(t,n,r){var e=r(70),o=r(2),i=r(23),c=r(4)("toStringTag"),u=Object,a="Arguments"==i(function(){return arguments}());t.exports=e?i:function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=u(t),c))?r:a?i(n):"Object"==(e=i(n))&&o(n.callee)?"Arguments":e}},function(t,n,r){var e=r(70),o=r(16).f,i=r(19),c=r(8),u=r(136),a=r(4)("toStringTag");t.exports=function(t,n,r,f){if(t){var s=r?t:t.prototype;c(s,a)||o(s,a,{configurable:!0,value:n}),f&&!e&&i(s,"toString",u)}}},function(t,n,r){var e=r(1);t.exports=e.Promise},function(t,n,r){var e=r(9);t.exports=e("navigator","userAgent")||""},function(t,n){var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},function(t,n,r){var e=r(15),o=r(59);(t.exports=function(t,n){return o[t]||(o[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.27.1",mode:e?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,n,r){var e=r(78),o=r(17),i=r(42),c=e(e.bind);t.exports=function(t,n){return o(t),void 0===n?t:i?c(t,n):function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(34),o=r(7),i=r(12),c=r(32),u=r(127),a=r(26),f=r(14),s=r(128),p=r(89),l=r(129),v=TypeError,d=function(t,n){this.stopped=t,this.result=n},y=d.prototype;t.exports=function(t,n,r){var h,m,g,x,b,w,S,j=r&&r.that,O=!(!r||!r.AS_ENTRIES),P=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),A=!(!r||!r.INTERRUPTED),E=e(n,j),k=function(t){return h&&l(h,"normal",t),new d(!0,t)},I=function(t){return O?(i(t),A?E(t[0],t[1],k):E(t[0],t[1])):A?E(t,k):E(t)};if(P)h=t.iterator;else if(T)h=t;else{if(!(m=p(t)))throw v(c(t)+" is not iterable");if(u(m)){for(g=0,x=a(t);x>g;g++)if((b=I(t[g]))&&f(y,b))return b;return new d(!1)}h=s(t,m)}for(w=P?t.next:h.next;!(S=o(w,h)).done;){try{b=I(S.value)}catch(t){l(h,"throw",t)}if("object"==typeof b&&b&&f(y,b))return b}return new d(!1)}},function(t,n,r){var e=r(28),o=String;t.exports=function(t){if("Symbol"===e(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},function(t,n){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,n,r){var e=r(1),o=r(30),i=r(2),c=r(84),u=r(94),a=r(4),f=r(147),s=r(98),p=r(15),l=r(47),v=o&&o.prototype,d=a("species"),y=!1,h=i(e.PromiseRejectionEvent),m=c("Promise",(function(){var t=u(o),n=t!==String(o);if(!n&&66===l)return!0;if(p&&(!v.catch||!v.finally))return!0;if(!l||l<51||!/native code/.test(t)){var r=new o((function(t){t(1)})),e=function(t){t((function(){}),(function(){}))};if((r.constructor={})[d]=e,!(y=r.then((function(){}))instanceof e))return!0}return!n&&(f||s)&&!h}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:h,SUBCLASSING:y}},function(t,n,r){var e=r(23);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(13);t.exports=function(t){return e[t+"Prototype"]}},function(t,n,r){var e=r(42),o=Function.prototype,i=o.apply,c=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(e?c.bind(i):function(){return c.apply(i,arguments)})},function(t,n,r){var e=r(5);t.exports=!e((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},function(t,n,r){var e=r(11),o=r(7),i=r(80),c=r(20),u=r(18),a=r(45),f=r(8),s=r(83),p=Object.getOwnPropertyDescriptor;n.f=e?p:function(t,n){if(t=u(t),n=a(n),s)try{return p(t,n)}catch(t){}if(f(t,n))return c(!o(i.f,t,n),t[n])}},function(t,n){t.exports=function(t){return null==t}},function(t,n,r){var e=r(115),o=r(46);t.exports=function(t){var n=e(t,"string");return o(n)?n:n+""}},function(t,n,r){var e=r(9),o=r(2),i=r(14),c=r(82),u=Object;t.exports=c?function(t){return"symbol"==typeof t}:function(t){var n=e("Symbol");return o(n)&&i(n.prototype,u(t))}},function(t,n,r){var e,o,i=r(1),c=r(31),u=i.process,a=i.Deno,f=u&&u.versions||a&&a.version,s=f&&f.v8;s&&(o=(e=s.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1])),!o&&c&&(!(e=c.match(/Edge\\/(\\d+)/))||e[1]>=74)&&(e=c.match(/Chrome\\/(\\d+)/))&&(o=+e[1]),t.exports=o},function(t,n,r){var e=r(33),o=r(60),i=e("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,n){t.exports={}},function(t,n,r){var e,o=r(12),i=r(87),c=r(67),u=r(49),a=r(88),f=r(61),s=r(48),p=s("IE_PROTO"),l=function(){},v=function(t){return"<script>"+t+"<\\/script>"},d=function(t){t.write(v("")),t.close();var n=t.parentWindow.Object;return t=null,n},y=function(){try{e=new ActiveXObject("htmlfile")}catch(t){}var t,n;y="undefined"!=typeof document?document.domain&&e?d(e):((n=f("iframe")).style.display="none",a.appendChild(n),n.src=String("javascript:"),(t=n.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):d(e);for(var r=c.length;r--;)delete y.prototype[c[r]];return y()};u[p]=!0,t.exports=Object.create||function(t,n){var r;return null!==t?(l.prototype=o(t),r=new l,l.prototype=null,r[p]=t):r=y(),void 0===n?r:i.f(r,n)}},function(t,n,r){var e,o,i,c=r(133),u=r(1),a=r(10),f=r(19),s=r(8),p=r(59),l=r(48),v=r(49),d=u.TypeError,y=u.WeakMap;if(c||p.state){var h=p.state||(p.state=new y);h.get=h.get,h.has=h.has,h.set=h.set,e=function(t,n){if(h.has(t))throw d("Object already initialized");return n.facade=t,h.set(t,n),n},o=function(t){return h.get(t)||{}},i=function(t){return h.has(t)}}else{var m=l("state");v[m]=!0,e=function(t,n){if(s(t,m))throw d("Object already initialized");return n.facade=t,f(t,m,n),n},o=function(t){return s(t,m)?t[m]:{}},i=function(t){return s(t,m)}}t.exports={set:e,get:o,has:i,enforce:function(t){return i(t)?o(t):e(t,{})},getterFor:function(t){return function(n){var r;if(!a(n)||(r=o(n)).type!==t)throw d("Incompatible receiver, "+t+" required");return r}}}},function(t,n,r){var e=r(23),o=r(1);t.exports="process"==e(o.process)},function(t,n,r){var e=r(6);t.exports=e([].slice)},function(t,n,r){r(71);var e=r(158),o=r(1),i=r(28),c=r(19),u=r(27),a=r(4)("toStringTag");for(var f in e){var s=o[f],p=s&&s.prototype;p&&i(p)!==a&&c(p,a,f),u[f]=u.Array}},function(t,n,r){var e=r(5),o=r(4),i=r(47),c=o("species");t.exports=function(t){return i>=51||!e((function(){var n=[];return(n.constructor={})[c]=function(){return{foo:1}},1!==n[t](Boolean).foo}))}},function(t,n,r){var e=r(34),o=r(6),i=r(81),c=r(25),u=r(26),a=r(103),f=o([].push),s=function(t){var n=1==t,r=2==t,o=3==t,s=4==t,p=6==t,l=7==t,v=5==t||p;return function(d,y,h,m){for(var g,x,b=c(d),w=i(b),S=e(y,h),j=u(w),O=0,P=m||a,T=n?P(d,j):r||l?P(d,0):void 0;j>O;O++)if((v||O in w)&&(x=S(g=w[O],O,b),t))if(n)T[O]=x;else if(x)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:f(T,g)}else switch(t){case 4:return!1;case 7:f(T,g)}return p?-1:o||s?s:T}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)}},function(t,n,r){var e=r(44),o=TypeError;t.exports=function(t){if(e(t))throw o("Can't call method on "+t);return t}},function(t,n,r){var e=r(17),o=r(44);t.exports=function(t,n){var r=t[n];return o(r)?void 0:e(r)}},function(t,n,r){var e=r(1),o=r(117),i=e["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,n,r){var e=r(6),o=0,i=Math.random(),c=e(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+c(++o+i,36)}},function(t,n,r){var e=r(1),o=r(10),i=e.document,c=o(i)&&o(i.createElement);t.exports=function(t){return c?i.createElement(t):{}}},function(t,n,r){var e=r(8),o=r(2),i=r(25),c=r(48),u=r(118),a=c("IE_PROTO"),f=Object,s=f.prototype;t.exports=u?f.getPrototypeOf:function(t){var n=i(t);if(e(n,a))return n[a];var r=n.constructor;return o(r)&&n instanceof r?r.prototype:n instanceof f?s:null}},function(t,n,r){var e=r(6),o=r(12),i=r(119);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,r={};try{(t=e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),n=r instanceof Array}catch(t){}return function(r,e){return o(r),i(e),n?t(r,e):r.__proto__=e,r}}():void 0)},function(t,n,r){var e=r(86),o=r(67).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,o)}},function(t,n,r){var e=r(66),o=Math.max,i=Math.min;t.exports=function(t,n){var r=e(t);return r<0?o(r+n,0):i(r,n)}},function(t,n,r){var e=r(123);t.exports=function(t){var n=+t;return n!=n||0===n?0:e(n)}},function(t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(86),o=r(67);t.exports=Object.keys||function(t){return e(t,o)}},function(t,n,r){var e={};e[r(4)("toStringTag")]="z",t.exports="[object z]"===String(e)},function(t,n,r){"use strict";var e=r(18),o=r(132),i=r(27),c=r(51),u=r(16).f,a=r(90),f=r(92),s=r(15),p=r(11),l=c.set,v=c.getterFor("Array Iterator");t.exports=a(Array,"Array",(function(t,n){l(this,{type:"Array Iterator",target:e(t),index:0,kind:n})}),(function(){var t=v(this),n=t.target,r=t.kind,e=t.index++;return!n||e>=n.length?(t.target=void 0,f(void 0,!0)):f("keys"==r?e:"values"==r?n[e]:[e,n[e]],!1)}),"values");var d=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!s&&p&&"values"!==d.name)try{u(d,"name",{value:"values"})}catch(t){}},function(t,n){},function(t,n,r){var e=r(6),o=r(5),i=r(2),c=r(28),u=r(9),a=r(94),f=function(){},s=[],p=u("Reflect","construct"),l=/^\\s*(?:class|function)\\b/,v=e(l.exec),d=!l.exec(f),y=function(t){if(!i(t))return!1;try{return p(f,s,t),!0}catch(t){return!1}},h=function(t){if(!i(t))return!1;switch(c(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!v(l,a(t))}catch(t){return!0}};h.sham=!0,t.exports=!p||o((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?h:y},function(t,n,r){"use strict";var e=r(45),o=r(16),i=r(20);t.exports=function(t,n,r){var c=e(n);c in t?o.f(t,c,i(0,r)):t[c]=r}},function(t,n,r){var e=r(4);n.f=e},function(t,n,r){t.exports=r(111)},function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,n,r){var e=r(23),o=r(6);t.exports=function(t){if("Function"===e(t))return o(t)}},function(t,n){var r="object"==typeof document&&document.all,e=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:e}},function(t,n,r){"use strict";var e={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!e.call({1:2},1);n.f=i?function(t){var n=o(this,t);return!!n&&n.enumerable}:e},function(t,n,r){var e=r(6),o=r(5),i=r(23),c=Object,u=e("".split);t.exports=o((function(){return!c("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?u(t,""):c(t)}:c},function(t,n,r){var e=r(24);t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,n,r){var e=r(11),o=r(5),i=r(61);t.exports=!e&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,n,r){var e=r(5),o=r(2),i=/#|\\.prototype\\./,c=function(t,n){var r=a[u(t)];return r==s||r!=f&&(o(n)?e(n):!!n)},u=c.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=c.data={},f=c.NATIVE="N",s=c.POLYFILL="P";t.exports=c},function(t,n,r){var e=r(11),o=r(5);t.exports=e&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(t,n,r){var e=r(6),o=r(8),i=r(18),c=r(122).indexOf,u=r(49),a=e([].push);t.exports=function(t,n){var r,e=i(t),f=0,s=[];for(r in e)!o(u,r)&&o(e,r)&&a(s,r);for(;n.length>f;)o(e,r=n[f++])&&(~c(s,r)||a(s,r));return s}},function(t,n,r){var e=r(11),o=r(85),i=r(16),c=r(12),u=r(18),a=r(69);n.f=e&&!o?Object.defineProperties:function(t,n){c(t);for(var r,e=u(n),o=a(n),f=o.length,s=0;f>s;)i.f(t,r=o[s++],e[r]);return t}},function(t,n,r){var e=r(9);t.exports=e("document","documentElement")},function(t,n,r){var e=r(28),o=r(58),i=r(44),c=r(27),u=r(4)("iterator");t.exports=function(t){if(!i(t))return o(t,u)||o(t,"@@iterator")||c[e(t)]}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(15),c=r(134),u=r(2),a=r(135),f=r(62),s=r(63),p=r(29),l=r(19),v=r(21),d=r(4),y=r(27),h=r(91),m=c.PROPER,g=c.CONFIGURABLE,x=h.IteratorPrototype,b=h.BUGGY_SAFARI_ITERATORS,w=d("iterator"),S=function(){return this};t.exports=function(t,n,r,c,d,h,j){a(r,n,c);var O,P,T,A=function(t){if(t===d&&L)return L;if(!b&&t in I)return I[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},E=n+" Iterator",k=!1,I=t.prototype,D=I[w]||I["@@iterator"]||d&&I[d],L=!b&&D||A(d),_="Array"==n&&I.entries||D;if(_&&(O=f(_.call(new t)))!==Object.prototype&&O.next&&(i||f(O)===x||(s?s(O,x):u(O[w])||v(O,w,S)),p(O,E,!0,!0),i&&(y[E]=S)),m&&"values"==d&&D&&"values"!==D.name&&(!i&&g?l(I,"name","values"):(k=!0,L=function(){return o(D,this)})),d)if(P={values:A("values"),keys:h?L:A("keys"),entries:A("entries")},j)for(T in P)(b||k||!(T in I))&&v(I,T,P[T]);else e({target:n,proto:!0,forced:b||k},P);return i&&!j||I[w]===L||v(I,w,L,{name:d}),y[n]=L,P}},function(t,n,r){"use strict";var e,o,i,c=r(5),u=r(2),a=r(10),f=r(50),s=r(62),p=r(21),l=r(4),v=r(15),d=l("iterator"),y=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(e=o):y=!0),!a(e)||c((function(){var t={};return e[d].call(t)!==t}))?e={}:v&&(e=f(e)),u(e[d])||p(e,d,(function(){return this})),t.exports={IteratorPrototype:e,BUGGY_SAFARI_ITERATORS:y}},function(t,n){t.exports=function(t,n){return{value:t,done:n}}},function(t,n,r){var e=r(12),o=r(141),i=r(44),c=r(4)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||i(r=e(u)[c])?n:o(r)}},function(t,n,r){var e=r(6),o=r(2),i=r(59),c=e(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return c(t)}),t.exports=i.inspectSource},function(t,n,r){var e,o,i,c,u=r(1),a=r(41),f=r(34),s=r(2),p=r(8),l=r(5),v=r(88),d=r(53),y=r(61),h=r(96),m=r(97),g=r(52),x=u.setImmediate,b=u.clearImmediate,w=u.process,S=u.Dispatch,j=u.Function,O=u.MessageChannel,P=u.String,T=0,A={};try{e=u.location}catch(t){}var E=function(t){if(p(A,t)){var n=A[t];delete A[t],n()}},k=function(t){return function(){E(t)}},I=function(t){E(t.data)},D=function(t){u.postMessage(P(t),e.protocol+"//"+e.host)};x&&b||(x=function(t){h(arguments.length,1);var n=s(t)?t:j(t),r=d(arguments,1);return A[++T]=function(){a(n,void 0,r)},o(T),T},b=function(t){delete A[t]},g?o=function(t){w.nextTick(k(t))}:S&&S.now?o=function(t){S.now(k(t))}:O&&!m?(c=(i=new O).port2,i.port1.onmessage=I,o=f(c.postMessage,c)):u.addEventListener&&s(u.postMessage)&&!u.importScripts&&e&&"file:"!==e.protocol&&!l(D)?(o=D,u.addEventListener("message",I,!1)):o="onreadystatechange"in y("script")?function(t){v.appendChild(y("script")).onreadystatechange=function(){v.removeChild(this),E(t)}}:function(t){setTimeout(k(t),0)}),t.exports={set:x,clear:b}},function(t,n){var r=TypeError;t.exports=function(t,n){if(t<n)throw r("Not enough arguments");return t}},function(t,n,r){var e=r(31);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(e)},function(t,n){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},function(t,n,r){var e=r(30),o=r(149),i=r(38).CONSTRUCTOR;t.exports=i||!o((function(t){e.all(t).then(void 0,(function(){}))}))},function(t,n,r){var e=r(12),o=r(10),i=r(22);t.exports=function(t,n){if(e(t),o(n)&&n.constructor===t)return n;var r=i.f(t);return(0,r.resolve)(n),r.promise}},function(t,n,r){"use strict";var e=r(157).charAt,o=r(36),i=r(51),c=r(90),u=r(92),a=i.set,f=i.getterFor("String Iterator");c(String,"String",(function(t){a(this,{type:"String Iterator",string:o(t),index:0})}),(function(){var t,n=f(this),r=n.string,o=n.index;return o>=r.length?u(void 0,!0):(t=e(r,o),n.index+=t.length,u(t,!1))}))},function(t,n,r){t.exports=r(159)},function(t,n,r){var e=r(168);t.exports=function(t,n){return new(e(t))(0===n?0:n)}},function(t,n,r){"use strict";var e=r(0),o=r(5),i=r(39),c=r(10),u=r(25),a=r(26),f=r(177),s=r(74),p=r(103),l=r(55),v=r(4),d=r(47),y=v("isConcatSpreadable"),h=d>=51||!o((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),m=l("concat"),g=function(t){if(!c(t))return!1;var n=t[y];return void 0!==n?!!n:i(t)};e({target:"Array",proto:!0,arity:1,forced:!h||!m},{concat:function(t){var n,r,e,o,i,c=u(this),l=p(c,0),v=0;for(n=-1,e=arguments.length;n<e;n++)if(g(i=-1===n?c:arguments[n]))for(o=a(i),f(v+o),r=0;r<o;r++,v++)r in i&&s(l,v,i[r]);else f(v+1),s(l,v++,i);return l.length=v,l}})},function(t,n,r){var e=r(7),o=r(9),i=r(4),c=r(21);t.exports=function(){var t=o("Symbol"),n=t&&t.prototype,r=n&&n.valueOf,u=i("toPrimitive");n&&!n[u]&&c(n,u,(function(t){return e(r,this)}),{arity:1})}},function(t,n,r){var e=r(24);t.exports=e&&!!Symbol.for&&!!Symbol.keyFor},function(t,n,r){r(3)("iterator")},function(t,n,r){"use strict";var e,o=r(1),i=r(41),c=r(2),u=r(220),a=r(31),f=r(53),s=r(96),p=o.Function,l=/MSIE .\\./.test(a)||u&&((e=o.Bun.version.split(".")).length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2]));t.exports=function(t,n){var r=n?2:1;return l?function(e,o){var u=s(arguments.length,1)>r,a=c(e)?e:p(e),l=u?f(arguments,r):[],v=u?function(){i(a,this,l)}:a;return n?t(v,o):t(v)}:t}},function(t,n,r){var e=r(110),o=null;function i(t){return t&&"string"!=typeof t?t.message?t.message:t.target&&t.target.error?t.target.error.message:"unknown error":t}self.onmessage=function(t){switch(t.data.type){case"init":r=t.data.msg,(o=new e(r)).init().catch((function(t){postMessage({type:"error",msg:{msg:"dbLog init error",error:i(t)}})}));break;case"fetch":o.getAllLogs().then((function(t){postMessage({type:"fetchDone",code:200,msg:t})})).catch((function(t){postMessage({type:"fetchDone",code:500,msg:i(t)})}));break;case"delete":o.deleteLogs(n).catch((function(t){postMessage({type:"deleteLogs",code:500,msg:i(t)})}));break;default:!function(t){if(!o)return;o.putLog(t).then((function(){postMessage(200)})).catch((function(t){postMessage({type:"error",msg:{msg:"putLog error",error:i(t)}})}))}(t.data)}var n,r}},function(t,n,r){var e=r(76),o=r(102),i=r(163),c=r(169),u={log:{key:{keyPath:"time"},indexes:{level:{unique:!1},time:{unique:!0}}}};function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.server=null,this.expire=t.expire||72,this.name=t.name}var f=a.prototype;f.init=function(){var t=this;if(!this.server)return c.open({server:"nim-log-"+this.name,version:1,schema:u}).then((function(n){t.server=n}))},f.putLog=function(t){var n=this;if(!this.server)return e.reject("no db server");var r=o(t).call(t,-1)[0].time-36e5*this.expire;return this.deleteLogs(r).then((function(){return n.server.add("log",t)}))},f.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then((function(t){var n={},r=o(t).call(t,-1)[0];return n.logs=i(t).call(t,(function(t){return t.log})).join("\\r\\n"),n.time=r&&r.time,n})):e.reject("no db server")},f.deleteLogs=function(t){return this.server?this.server.remove("log",null,"time",0,t):e.reject("no db server")},t.exports=a},function(t,n,r){var e=r(112);r(54),t.exports=e},function(t,n,r){r(113),r(71),r(72),r(137),r(154),r(155),r(156),r(101);var e=r(13);t.exports=e.Promise},function(t,n,r){r(114)},function(t,n,r){"use strict";var e=r(0),o=r(14),i=r(62),c=r(63),u=r(120),a=r(50),f=r(19),s=r(20),p=r(125),l=r(126),v=r(35),d=r(130),y=r(4),h=r(131),m=y("toStringTag"),g=Error,x=[].push,b=function(t,n){var r,e=arguments.length>2?arguments[2]:void 0,u=o(w,this);c?r=c(g(),u?i(this):w):(r=u?this:a(w),f(r,m,"Error")),void 0!==n&&f(r,"message",d(n)),h&&f(r,"stack",p(r.stack,1)),l(r,e);var s=[];return v(t,x,{that:s}),f(r,"errors",s),r};c?c(b,g):u(b,g,{name:!0});var w=b.prototype=a(g.prototype,{constructor:s(1,b),message:s(1,""),name:s(1,"AggregateError")});e({global:!0,constructor:!0,arity:2},{AggregateError:b})},function(t,n,r){var e=r(7),o=r(10),i=r(46),c=r(58),u=r(116),a=r(4),f=TypeError,s=a("toPrimitive");t.exports=function(t,n){if(!o(t)||i(t))return t;var r,a=c(t,s);if(a){if(void 0===n&&(n="default"),r=e(a,t,n),!o(r)||i(r))return r;throw f("Can't convert object to primitive value")}return void 0===n&&(n="number"),u(t,n)}},function(t,n,r){var e=r(7),o=r(2),i=r(10),c=TypeError;t.exports=function(t,n){var r,u;if("string"===n&&o(r=t.toString)&&!i(u=e(r,t)))return u;if(o(r=t.valueOf)&&!i(u=e(r,t)))return u;if("string"!==n&&o(r=t.toString)&&!i(u=e(r,t)))return u;throw c("Can't convert object to primitive value")}},function(t,n,r){var e=r(1),o=Object.defineProperty;t.exports=function(t,n){try{o(e,t,{value:n,configurable:!0,writable:!0})}catch(r){e[t]=n}return n}},function(t,n,r){var e=r(5);t.exports=!e((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,n,r){var e=r(2),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||e(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},function(t,n,r){var e=r(8),o=r(121),i=r(43),c=r(16);t.exports=function(t,n,r){for(var u=o(n),a=c.f,f=i.f,s=0;s<u.length;s++){var p=u[s];e(t,p)||r&&e(r,p)||a(t,p,f(n,p))}}},function(t,n,r){var e=r(9),o=r(6),i=r(64),c=r(68),u=r(12),a=o([].concat);t.exports=e("Reflect","ownKeys")||function(t){var n=i.f(u(t)),r=c.f;return r?a(n,r(t)):n}},function(t,n,r){var e=r(18),o=r(65),i=r(26),c=function(t){return function(n,r,c){var u,a=e(n),f=i(a),s=o(c,f);if(t&&r!=r){for(;f>s;)if((u=a[s++])!=u)return!0}else for(;f>s;s++)if((t||s in a)&&a[s]===r)return t||s||0;return!t&&-1}};t.exports={includes:c(!0),indexOf:c(!1)}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?e:r)(n)}},function(t,n,r){var e=r(66),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},function(t,n,r){var e=r(6),o=Error,i=e("".replace),c=String(o("zxcasd").stack),u=/\\n\\s*at [^:]*:[^\\n]*/,a=u.test(c);t.exports=function(t,n){if(a&&"string"==typeof t&&!o.prepareStackTrace)for(;n--;)t=i(t,u,"");return t}},function(t,n,r){var e=r(10),o=r(19);t.exports=function(t,n){e(n)&&"cause"in n&&o(t,"cause",n.cause)}},function(t,n,r){var e=r(4),o=r(27),i=e("iterator"),c=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||c[i]===t)}},function(t,n,r){var e=r(7),o=r(17),i=r(12),c=r(32),u=r(89),a=TypeError;t.exports=function(t,n){var r=arguments.length<2?u(t):n;if(o(r))return i(e(r,t));throw a(c(t)+" is not iterable")}},function(t,n,r){var e=r(7),o=r(12),i=r(58);t.exports=function(t,n,r){var c,u;o(t);try{if(!(c=i(t,"return"))){if("throw"===n)throw r;return r}c=e(c,t)}catch(t){u=!0,c=t}if("throw"===n)throw r;if(u)throw c;return o(c),r}},function(t,n,r){var e=r(36);t.exports=function(t,n){return void 0===t?arguments.length<2?"":n:e(t)}},function(t,n,r){var e=r(5),o=r(20);t.exports=!e((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(1),o=r(2),i=e.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},function(t,n,r){var e=r(11),o=r(8),i=Function.prototype,c=e&&Object.getOwnPropertyDescriptor,u=o(i,"name"),a=u&&"something"===function(){}.name,f=u&&(!e||e&&c(i,"name").configurable);t.exports={EXISTS:u,PROPER:a,CONFIGURABLE:f}},function(t,n,r){"use strict";var e=r(91).IteratorPrototype,o=r(50),i=r(20),c=r(29),u=r(27),a=function(){return this};t.exports=function(t,n,r,f){var s=n+" Iterator";return t.prototype=o(e,{next:i(+!f,r)}),c(t,s,!1,!0),u[s]=a,t}},function(t,n,r){"use strict";var e=r(70),o=r(28);t.exports=e?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,n,r){r(138),r(148),r(150),r(151),r(152),r(153)},function(t,n,r){"use strict";var e,o,i,c=r(0),u=r(15),a=r(52),f=r(1),s=r(7),p=r(21),l=r(63),v=r(29),d=r(139),y=r(17),h=r(2),m=r(10),g=r(140),x=r(93),b=r(95).set,w=r(142),S=r(145),j=r(37),O=r(146),P=r(51),T=r(30),A=r(38),E=r(22),k=A.CONSTRUCTOR,I=A.REJECTION_EVENT,D=A.SUBCLASSING,L=P.getterFor("Promise"),_=P.set,C=T&&T.prototype,M=T,R=C,N=f.TypeError,F=f.document,B=f.process,G=E.f,U=G,z=!!(F&&F.createEvent&&f.dispatchEvent),q=function(t){var n;return!(!m(t)||!h(n=t.then))&&n},V=function(t,n){var r,e,o,i=n.value,c=1==n.state,u=c?t.ok:t.fail,a=t.resolve,f=t.reject,p=t.domain;try{u?(c||(2===n.rejection&&Y(n),n.rejection=1),!0===u?r=i:(p&&p.enter(),r=u(i),p&&(p.exit(),o=!0)),r===t.promise?f(N("Promise-chain cycle")):(e=q(r))?s(e,r,a,f):a(r)):f(i)}catch(t){p&&!o&&p.exit(),f(t)}},H=function(t,n){t.notified||(t.notified=!0,w((function(){for(var r,e=t.reactions;r=e.get();)V(r,t);t.notified=!1,n&&!t.rejection&&K(t)})))},J=function(t,n,r){var e,o;z?((e=F.createEvent("Event")).promise=n,e.reason=r,e.initEvent(t,!1,!0),f.dispatchEvent(e)):e={promise:n,reason:r},!I&&(o=f["on"+t])?o(e):"unhandledrejection"===t&&S("Unhandled promise rejection",r)},K=function(t){s(b,f,(function(){var n,r=t.facade,e=t.value;if(W(t)&&(n=j((function(){a?B.emit("unhandledRejection",e,r):J("unhandledrejection",r,e)})),t.rejection=a||W(t)?2:1,n.error))throw n.value}))},W=function(t){return 1!==t.rejection&&!t.parent},Y=function(t){s(b,f,(function(){var n=t.facade;a?B.emit("rejectionHandled",n):J("rejectionhandled",n,t.value)}))},X=function(t,n,r){return function(e){t(n,e,r)}},$=function(t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,H(t,!0))},Q=function(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw N("Promise can't be resolved itself");var e=q(n);e?w((function(){var r={done:!1};try{s(e,n,X(Q,r,t),X($,r,t))}catch(n){$(r,n,t)}})):(t.value=n,t.state=1,H(t,!1))}catch(n){$({done:!1},n,t)}}};if(k&&(R=(M=function(t){g(this,R),y(t),s(e,this);var n=L(this);try{t(X(Q,n),X($,n))}catch(t){$(n,t)}}).prototype,(e=function(t){_(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=p(R,"then",(function(t,n){var r=L(this),e=G(x(this,M));return r.parent=!0,e.ok=!h(t)||t,e.fail=h(n)&&n,e.domain=a?B.domain:void 0,0==r.state?r.reactions.add(e):w((function(){V(e,r)})),e.promise})),o=function(){var t=new e,n=L(t);this.promise=t,this.resolve=X(Q,n),this.reject=X($,n)},E.f=G=function(t){return t===M||void 0===t?new o(t):U(t)},!u&&h(T)&&C!==Object.prototype)){i=C.then,D||p(C,"then",(function(t,n){var r=this;return new M((function(t,n){s(i,r,t,n)})).then(t,n)}),{unsafe:!0});try{delete C.constructor}catch(t){}l&&l(C,R)}c({global:!0,constructor:!0,wrap:!0,forced:k},{Promise:M}),v(M,"Promise",!1,!0),d("Promise")},function(t,n,r){"use strict";var e=r(9),o=r(16),i=r(4),c=r(11),u=i("species");t.exports=function(t){var n=e(t),r=o.f;c&&n&&!n[u]&&r(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(14),o=TypeError;t.exports=function(t,n){if(e(n,t))return t;throw o("Incorrect invocation")}},function(t,n,r){var e=r(73),o=r(32),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a constructor")}},function(t,n,r){var e,o,i,c,u,a,f,s,p=r(1),l=r(34),v=r(43).f,d=r(95).set,y=r(97),h=r(143),m=r(144),g=r(52),x=p.MutationObserver||p.WebKitMutationObserver,b=p.document,w=p.process,S=p.Promise,j=v(p,"queueMicrotask"),O=j&&j.value;O||(e=function(){var t,n;for(g&&(t=w.domain)&&t.exit();o;){n=o.fn,o=o.next;try{n()}catch(t){throw o?c():i=void 0,t}}i=void 0,t&&t.enter()},y||g||m||!x||!b?!h&&S&&S.resolve?((f=S.resolve(void 0)).constructor=S,s=l(f.then,f),c=function(){s(e)}):g?c=function(){w.nextTick(e)}:(d=l(d,p),c=function(){d(e)}):(u=!0,a=b.createTextNode(""),new x(e).observe(a,{characterData:!0}),c=function(){a.data=u=!u})),t.exports=O||function(t){var n={fn:t,next:void 0};i&&(i.next=n),o||(o=n,c()),i=n}},function(t,n,r){var e=r(31),o=r(1);t.exports=/ipad|iphone|ipod/i.test(e)&&void 0!==o.Pebble},function(t,n,r){var e=r(31);t.exports=/web0s(?!.*chrome)/i.test(e)},function(t,n,r){var e=r(1);t.exports=function(t,n){var r=e.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,n))}},function(t,n){var r=function(){this.head=null,this.tail=null};r.prototype={add:function(t){var n={item:t,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=r},function(t,n,r){var e=r(98),o=r(52);t.exports=!e&&!o&&"object"==typeof window&&"object"==typeof document},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{all:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,s=1;a(t,(function(t){var i=u++,a=!1;s++,o(r,n,t).then((function(t){a||(a=!0,c[i]=t,--s||e(c))}),f)})),--s||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){var e=r(4)("iterator"),o=!1;try{var i=0,c={next:function(){return{done:!!i++}},return:function(){o=!0}};c[e]=function(){return this},Array.from(c,(function(){throw 2}))}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var r=!1;try{var i={};i[e]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(38).CONSTRUCTOR,c=r(30),u=r(9),a=r(2),f=r(21),s=c&&c.prototype;if(e({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&a(c)){var p=u("Promise").prototype.catch;s.catch!==p&&f(s,"catch",p,{unsafe:!0})}},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0,forced:r(99)},{race:function(t){var n=this,r=c.f(n),e=r.reject,f=u((function(){var c=i(n.resolve);a(t,(function(t){o(c,n,t).then(r.resolve,e)}))}));return f.error&&e(f.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(22);e({target:"Promise",stat:!0,forced:r(38).CONSTRUCTOR},{reject:function(t){var n=i.f(this);return o(n.reject,void 0,t),n.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(9),i=r(15),c=r(30),u=r(38).CONSTRUCTOR,a=r(100),f=o("Promise"),s=i&&!u;e({target:"Promise",stat:!0,forced:i||u},{resolve:function(t){return a(s&&this===f?c:this,t)}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(22),u=r(37),a=r(35);e({target:"Promise",stat:!0},{allSettled:function(t){var n=this,r=c.f(n),e=r.resolve,f=r.reject,s=u((function(){var r=i(n.resolve),c=[],u=0,f=1;a(t,(function(t){var i=u++,a=!1;f++,o(r,n,t).then((function(t){a||(a=!0,c[i]={status:"fulfilled",value:t},--f||e(c))}),(function(t){a||(a=!0,c[i]={status:"rejected",reason:t},--f||e(c))}))})),--f||e(c)}));return s.error&&f(s.value),r.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(7),i=r(17),c=r(9),u=r(22),a=r(37),f=r(35);e({target:"Promise",stat:!0},{any:function(t){var n=this,r=c("AggregateError"),e=u.f(n),s=e.resolve,p=e.reject,l=a((function(){var e=i(n.resolve),c=[],u=0,a=1,l=!1;f(t,(function(t){var i=u++,f=!1;a++,o(e,n,t).then((function(t){f||l||(l=!0,s(t))}),(function(t){f||l||(f=!0,c[i]=t,--a||p(new r(c,"No one promise resolved")))}))})),--a||p(new r(c,"No one promise resolved"))}));return l.error&&p(l.value),e.promise}})},function(t,n,r){"use strict";var e=r(0),o=r(15),i=r(30),c=r(5),u=r(9),a=r(2),f=r(93),s=r(100),p=r(21),l=i&&i.prototype;if(e({target:"Promise",proto:!0,real:!0,forced:!!i&&c((function(){l.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var n=f(this,u("Promise")),r=a(t);return this.then(r?function(r){return s(n,t()).then((function(){return r}))}:t,r?function(r){return s(n,t()).then((function(){throw r}))}:t)}}),!o&&a(i)){var v=u("Promise").prototype.finally;l.finally!==v&&p(l,"finally",v,{unsafe:!0})}},function(t,n,r){var e=r(6),o=r(66),i=r(36),c=r(57),u=e("".charAt),a=e("".charCodeAt),f=e("".slice),s=function(t){return function(n,r){var e,s,p=i(c(n)),l=o(r),v=p.length;return l<0||l>=v?t?"":void 0:(e=a(p,l))<55296||e>56319||l+1===v||(s=a(p,l+1))<56320||s>57343?t?u(p,l):e:t?f(p,l,l+2):s-56320+(e-55296<<10)+65536}};t.exports={codeAt:s(!1),charAt:s(!0)}},function(t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,n,r){var e=r(160);t.exports=e},function(t,n,r){var e=r(14),o=r(161),i=Array.prototype;t.exports=function(t){var n=t.slice;return t===i||e(i,t)&&n===i.slice?o:n}},function(t,n,r){r(162);var e=r(40);t.exports=e("Array").slice},function(t,n,r){"use strict";var e=r(0),o=r(39),i=r(73),c=r(10),u=r(65),a=r(26),f=r(18),s=r(74),p=r(4),l=r(55),v=r(53),d=l("slice"),y=p("species"),h=Array,m=Math.max;e({target:"Array",proto:!0,forced:!d},{slice:function(t,n){var r,e,p,l=f(this),d=a(l),g=u(t,d),x=u(void 0===n?d:n,d);if(o(l)&&(r=l.constructor,(i(r)&&(r===h||o(r.prototype))||c(r)&&null===(r=r[y]))&&(r=void 0),r===h||void 0===r))return v(l,g,x);for(e=new(void 0===r?h:r)(m(x-g,0)),p=0;g<x;g++,p++)g in l&&s(e,p,l[g]);return e.length=p,e}})},function(t,n,r){t.exports=r(164)},function(t,n,r){var e=r(165);t.exports=e},function(t,n,r){var e=r(14),o=r(166),i=Array.prototype;t.exports=function(t){var n=t.map;return t===i||e(i,t)&&n===i.map?o:n}},function(t,n,r){r(167);var e=r(40);t.exports=e("Array").map},function(t,n,r){"use strict";var e=r(0),o=r(56).map;e({target:"Array",proto:!0,forced:!r(55)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){var e=r(39),o=r(73),i=r(10),c=r(4)("species"),u=Array;t.exports=function(t){var n;return e(t)&&(n=t.constructor,(o(n)&&(n===u||e(n.prototype))||i(n)&&null===(n=n[c]))&&(n=void 0)),void 0===n?u:n}},function(t,n,r){(function(e){var o,i=r(170),c=r(76),u=r(216),a=r(102),f=r(222),s=r(226),p=r(233),l=r(237),v=r(241),d=r(245);!function(y,h){"use strict";var m,g=(y=void 0!==y?y:"undefined"!=typeof self?self:void 0!==e?e:{}).IDBKeyRange||y.webkitIDBKeyRange,x="readonly",b="readwrite",w=Object.prototype.hasOwnProperty,S=function(){if(!m&&!(m=y.indexedDB||y.webkitIndexedDB||y.mozIndexedDB||y.oIndexedDB||y.msIndexedDB||(null===y.indexedDB&&y.shimIndexedDB?y.shimIndexedDB:void 0)))throw"IndexedDB required";return m},j=!1,O=navigator&&!navigator.userAgentData&&/Safari\\//.test(navigator.userAgent)&&!/Chrom(e|ium)\\//.test(navigator.userAgent),P=function(t){return t},T=function(t){var n;return a(n=Object.prototype.toString.call(t)).call(n,8,-1).toLowerCase()},A=function(t){return"function"==typeof t},E=function(t){return"number"===T(t)},k=function(t){return"array"===T(t)},I=function(t){return void 0===t},D=function(t,n){var r=this,e=!1;this.name=n,this.getIndexedDB=function(){return t},this.add=function(n){if(e)throw"Database has been closed";for(var o=[],i=0,u=0;u<arguments.length-1;u++)if(f(arguments[u+1]))for(var a=0;a<arguments[u+1].length;a++)o[i]=arguments[u+1][a],i++;else o[i]=arguments[u+1],i++;var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){s(o).call(o,(function(t){var n;if(t.item&&t.key){var r=t.key;t=t.item,n=v.add(t,r)}else n=v.add(t);n.onsuccess=function(n){var r=n.target,e=r.source.keyPath;null===e&&(e="__id__"),p(t,e,{value:r.result,enumerable:!0})}})),l.oncomplete=function(){t(o,r)},l.onerror=function(t){t.preventDefault(),n(t)},l.onabort=function(t){n(t)}}))},this.updateAndDelete=function(n,r,o){if(e)throw"Database has been closed";var i=t.transaction(n,b),u=i.objectStore(n),a=u.keyPath;return new c((function(t,n){s(r).call(r,(function(t){if(t.item&&t.key){var n=t.key;t=t.item,u.put(t,n)}else u.put(t)})),s(o).call(o,(function(t){u.delete(t[a])})),i.oncomplete=function(){t([r,o])},i.onerror=function(t){n(t)}}))},this.update=function(n){if(e)throw"Database has been closed";for(var o,i=[],u=1;u<arguments.length;u++)f(o=arguments[u])?i=l(i).call(i,o):i.push(o);var a=t.transaction(n,b),p=a.objectStore(n);p.keyPath;return new c((function(t,n){s(i).call(i,(function(t){var n;if(t.item&&t.key){var r=t.key;t=t.item,n=p.put(t,r)}else n=p.put(t);n.onsuccess=function(t){},n.onerror=function(t){}})),a.oncomplete=function(){t(i,r)},a.onerror=function(t){n(t)},a.onabort=function(t){n(t)}}))},this.remove=function(n,r,o,i,u,a,p){if(e)throw"Database has been closed";var l=t.transaction(n,b),v=l.objectStore(n);return new c((function(t,n){function e(t){return null==t}var c;(e(i)&&(i=-1/0),e(u)&&(u=1/0),null===r||f(r)||(r=[r]),e(o))?null!==r?s(r).call(r,(function(t){v.delete(t)})):v.delete(range=g.bound(i,u,a,p)):(c=null!==r?g.only(r[0]):g.bound(i,u,a,p),v.index(o).openCursor(c).onsuccess=function(t){var n=t.target.result;n&&(n.delete(),n.continue())});l.oncomplete=function(){t()},l.onerror=function(t){n(t)},l.onabort=function(t){n(t)}}))},this.clear=function(n){if(e)throw"Database has been closed";var r=t.transaction(n,b);r.objectStore(n).clear();return new c((function(t,n){r.oncomplete=function(){t()},r.onerror=function(t){n(t)}}))},this.close=function(){e||(t.close(),e=!0,delete C[n])},this.get=function(n,r){if(e)throw"Database has been closed";var o=t.transaction(n),i=o.objectStore(n).get(r);return new c((function(t,n){i.onsuccess=function(n){t(n.target.result)},o.onerror=function(t){n(t)}}))},this.query=function(n,r){if(e)throw"Database has been closed";return new L(n,t,r)},this.count=function(n,r){if(e)throw"Database has been closed";t.transaction(n).objectStore(n)};for(var o=0,i=t.objectStoreNames.length;o<i;o++)!function(t){for(var n in r[t]={},r)w.call(r,n)&&"close"!==n&&(r[t][n]=function(n){return function(){var e,o=l(e=[t]).call(e,a([]).call(arguments,0));return r[n].apply(r,o)}}(n))}(t.objectStoreNames[o])},L=function(t,n,r){var e,o=this,u=!1,f=!1,p=function(e,o,a,p,l,d,y){return new c((function(c,h){var m=u||f?b:x,w=n.transaction(t,m),S=w.objectStore(t),j=r?S.index(r):S,O=e?g[e].apply(null,o):null,P=[],T=[O],E=0;l=l||null,d=d||[],"count"!==a&&T.push(p||"next");var k=!!u&&v(u);j[a].apply(j,T).onsuccess=function(t){var n=t.target.result;if(i(n)===i(0))P=n;else if(n)if(null!==l&&l[0]>E)E=l[0],n.advance(l[0]);else if(null!==l&&E>=l[0]+l[1]);else{var r=!0,e="value"in n?n.value:n.key;s(d).call(d,(function(t){t&&t.length&&(2===t.length?r=r&&e[t[0]]===t[1]:A(t[0])&&(r=r&&t[0].apply(void 0,[e])))})),r&&(E++,P.push(y(e)),f?n.delete():u&&(e=function(t){for(var n=0;n<k.length;n++){var r=k[n],e=u[r];e instanceof Function&&(e=e(t)),t[r]=e}return t}(e),n.update(e))),n.continue()}},w.oncomplete=function(){c(P)},w.onerror=function(t){h(t)},w.onabort=function(t){h(t)}}))},l=function(t,n){var r="next",e="openCursor",o=[],i=null,c=P,s=!1,l=function(){return p(t,n,e,s?r+"unique":r,i,o,c)},v=function(){return r=null,e="count",{execute:l}},d=function t(){return 1==(i=k(arguments[0])?arguments[0]:a(Array.prototype).call(arguments,0,2)).length&&i.unshift(0),E(i[1])||(i=null),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:t,map:w,remove:S}},y=function t(n){return(n=!!I(n)||!!n)&&(e="openKeyCursor"),{execute:l,keys:t,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},h=function t(){return o.push(a(Array.prototype).call(arguments,0,2)),{execute:l,count:v,keys:y,filter:t,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},m=function t(n){return n=!!I(n)||!!n,r=n?"next":"prev",{execute:l,count:v,keys:y,filter:h,asc:t,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}},g=function t(n){return n=!!I(n)||!!n,r=n?"prev":"next",{execute:l,count:v,keys:y,filter:h,asc:m,desc:t,distinct:x,modify:b,limit:d,map:w,remove:S}},x=function t(n){return n=!!I(n)||!!n,s=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:t,modify:b,limit:d,map:w,remove:S}},b=function t(n){return u=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:t,limit:d,map:w,remove:S}},w=function t(n){return A(n)&&(c=n),{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:t,remove:S}},S=function t(n){return n=!!I(n)||!!n,f=n,{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:t}};return{execute:l,count:v,keys:y,filter:h,asc:m,desc:g,distinct:x,modify:b,limit:d,map:w,remove:S}};s(e="only bound upperBound lowerBound".split(" ")).call(e,(function(t){o[t]=function(){return new l(t,arguments)}})),this.filter=function(){var t=new l(null,null);return d(t).apply(t,arguments)},this.all=function(){var t;return d(t=this).call(t)}},_=function(t,n,r,e){var o=t.target.result,i=new D(o,n);return C[n]=o,c.resolve(i)},C={},M={version:"0.10.2",open:function(t){var n;return new c((function(r,e){var o;C[t.server]?_({target:{result:C[t.server]}},t.server,t.version,t.schema).then(r,e):(j?c.resolve():O&&S().databases?new c((function(t){var n=function(){return S().databases().finally(t)};o=u(n,100),n()})).finally((function(){j=!0,clearInterval(o)})):(j=!0,c.resolve())).then((function(){try{n=S().open(t.server,t.version)}catch(t){e(t)}n.onsuccess=function(n){_(n,t.server,t.version,t.schema).then(r,e)},n.onupgradeneeded=function(n){!function(t,n,r){for(var e in"function"==typeof n&&(n=n()),n){var o,i=n[e];for(var c in o=!w.call(n,e)||r.objectStoreNames.contains(e)?t.currentTarget.transaction.objectStore(e):r.createObjectStore(e,i.key),i.indexes){var u=i.indexes[c];try{o.index(c)}catch(t){o.createIndex(c,u.key||c,v(u).length?u:{unique:!1})}}}}(n,t.schema,n.target.result)},n.onerror=function(t){e(t)}}))}))},remove:function(t){return new c((function(n,r){if(!t)return n();var e,o;i(t)===D&&(t=t.name),"string"==typeof t&&(e=C[t]),e&&"function"==typeof e.close&&e.close();try{o=S().deleteDatabase(t)}catch(t){r(t)}o.onsuccess=function(r){delete C[t],n(t)},o.onerror=function(t){r(t)},o.onblocked=function(t){r(t)}}))}};void 0!==t.exports?t.exports=M:void 0===(o=function(){return M}.call(n,r,n,t))||(t.exports=o)}(void 0)}).call(this,r(77))},function(t,n,r){var e=r(171),o=r(210);function i(n){return t.exports=i="function"==typeof e&&"symbol"==typeof o?function(t){return typeof t}:function(t){return t&&"function"==typeof e&&t.constructor===e&&t!==e.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,i(n)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,r){t.exports=r(172)},function(t,n,r){t.exports=r(173)},function(t,n,r){var e=r(174);r(203),r(204),r(205),r(206),r(207),r(208),r(209),t.exports=e},function(t,n,r){var e=r(175);r(202),t.exports=e},function(t,n,r){var e=r(176);r(54),t.exports=e},function(t,n,r){r(104),r(72),r(178),r(186),r(187),r(188),r(189),r(107),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201);var e=r(13);t.exports=e.Symbol},function(t,n){var r=TypeError;t.exports=function(t){if(t>9007199254740991)throw r("Maximum allowed index exceeded");return t}},function(t,n,r){r(179),r(182),r(183),r(184),r(185)},function(t,n,r){"use strict";var e=r(0),o=r(1),i=r(7),c=r(6),u=r(15),a=r(11),f=r(24),s=r(5),p=r(8),l=r(14),v=r(12),d=r(18),y=r(45),h=r(36),m=r(20),g=r(50),x=r(69),b=r(64),w=r(180),S=r(68),j=r(43),O=r(16),P=r(87),T=r(80),A=r(21),E=r(33),k=r(48),I=r(49),D=r(60),L=r(4),_=r(75),C=r(3),M=r(105),R=r(29),N=r(51),F=r(56).forEach,B=k("hidden"),G=N.set,U=N.getterFor("Symbol"),z=Object.prototype,q=o.Symbol,V=q&&q.prototype,H=o.TypeError,J=o.QObject,K=j.f,W=O.f,Y=w.f,X=T.f,$=c([].push),Q=E("symbols"),Z=E("op-symbols"),tt=E("wks"),nt=!J||!J.prototype||!J.prototype.findChild,rt=a&&s((function(){return 7!=g(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,n,r){var e=K(z,n);e&&delete z[n],W(t,n,r),e&&t!==z&&W(z,n,e)}:W,et=function(t,n){var r=Q[t]=g(V);return G(r,{type:"Symbol",tag:t,description:n}),a||(r.description=n),r},ot=function(t,n,r){t===z&&ot(Z,n,r),v(t);var e=y(n);return v(r),p(Q,e)?(r.enumerable?(p(t,B)&&t[B][e]&&(t[B][e]=!1),r=g(r,{enumerable:m(0,!1)})):(p(t,B)||W(t,B,m(1,{})),t[B][e]=!0),rt(t,e,r)):W(t,e,r)},it=function(t,n){v(t);var r=d(n),e=x(r).concat(ft(r));return F(e,(function(n){a&&!i(ct,r,n)||ot(t,n,r[n])})),t},ct=function(t){var n=y(t),r=i(X,this,n);return!(this===z&&p(Q,n)&&!p(Z,n))&&(!(r||!p(this,n)||!p(Q,n)||p(this,B)&&this[B][n])||r)},ut=function(t,n){var r=d(t),e=y(n);if(r!==z||!p(Q,e)||p(Z,e)){var o=K(r,e);return!o||!p(Q,e)||p(r,B)&&r[B][e]||(o.enumerable=!0),o}},at=function(t){var n=Y(d(t)),r=[];return F(n,(function(t){p(Q,t)||p(I,t)||$(r,t)})),r},ft=function(t){var n=t===z,r=Y(n?Z:d(t)),e=[];return F(r,(function(t){!p(Q,t)||n&&!p(z,t)||$(e,Q[t])})),e};f||(A(V=(q=function(){if(l(V,this))throw H("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?h(arguments[0]):void 0,n=D(t),r=function(t){this===z&&i(r,Z,t),p(this,B)&&p(this[B],n)&&(this[B][n]=!1),rt(this,n,m(1,t))};return a&&nt&&rt(z,n,{configurable:!0,set:r}),et(n,t)}).prototype,"toString",(function(){return U(this).tag})),A(q,"withoutSetter",(function(t){return et(D(t),t)})),T.f=ct,O.f=ot,P.f=it,j.f=ut,b.f=w.f=at,S.f=ft,_.f=function(t){return et(L(t),t)},a&&(W(V,"description",{configurable:!0,get:function(){return U(this).description}}),u||A(z,"propertyIsEnumerable",ct,{unsafe:!0}))),e({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:q}),F(x(tt),(function(t){C(t)})),e({target:"Symbol",stat:!0,forced:!f},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),e({target:"Object",stat:!0,forced:!f,sham:!a},{create:function(t,n){return void 0===n?g(t):it(g(t),n)},defineProperty:ot,defineProperties:it,getOwnPropertyDescriptor:ut}),e({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:at}),M(),R(q,"Symbol"),I[B]=!0},function(t,n,r){var e=r(23),o=r(18),i=r(64).f,c=r(181),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"Window"==e(t)?function(t){try{return i(t)}catch(t){return c(u)}}(t):i(o(t))}},function(t,n,r){var e=r(65),o=r(26),i=r(74),c=Array,u=Math.max;t.exports=function(t,n,r){for(var a=o(t),f=e(n,a),s=e(void 0===r?a:r,a),p=c(u(s-f,0)),l=0;f<s;f++,l++)i(p,l,t[f]);return p.length=l,p}},function(t,n,r){var e=r(0),o=r(9),i=r(8),c=r(36),u=r(33),a=r(106),f=u("string-to-symbol-registry"),s=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{for:function(t){var n=c(t);if(i(f,n))return f[n];var r=o("Symbol")(n);return f[n]=r,s[r]=n,r}})},function(t,n,r){var e=r(0),o=r(8),i=r(46),c=r(32),u=r(33),a=r(106),f=u("symbol-to-string-registry");e({target:"Symbol",stat:!0,forced:!a},{keyFor:function(t){if(!i(t))throw TypeError(c(t)+" is not a symbol");if(o(f,t))return f[t]}})},function(t,n,r){var e=r(0),o=r(9),i=r(41),c=r(7),u=r(6),a=r(5),f=r(39),s=r(2),p=r(10),l=r(46),v=r(53),d=r(24),y=o("JSON","stringify"),h=u(/./.exec),m=u("".charAt),g=u("".charCodeAt),x=u("".replace),b=u(1..toString),w=/[\\uD800-\\uDFFF]/g,S=/^[\\uD800-\\uDBFF]$/,j=/^[\\uDC00-\\uDFFF]$/,O=!d||a((function(){var t=o("Symbol")();return"[null]"!=y([t])||"{}"!=y({a:t})||"{}"!=y(Object(t))})),P=a((function(){return'"\\\\udf06\\\\ud834"'!==y("\\udf06\\ud834")||'"\\\\udead"'!==y("\\udead")})),T=function(t,n){var r=v(arguments),e=n;if((p(n)||void 0!==t)&&!l(t))return f(n)||(n=function(t,n){if(s(e)&&(n=c(e,this,t,n)),!l(n))return n}),r[1]=n,i(y,null,r)},A=function(t,n,r){var e=m(r,n-1),o=m(r,n+1);return h(S,t)&&!h(j,o)||h(j,t)&&!h(S,e)?"\\\\u"+b(g(t,0),16):t};y&&e({target:"JSON",stat:!0,arity:3,forced:O||P},{stringify:function(t,n,r){var e=v(arguments),o=i(O?T:y,null,e);return P&&"string"==typeof o?x(o,w,A):o}})},function(t,n,r){var e=r(0),o=r(24),i=r(5),c=r(68),u=r(25);e({target:"Object",stat:!0,forced:!o||i((function(){c.f(1)}))},{getOwnPropertySymbols:function(t){var n=c.f;return n?n(u(t)):[]}})},function(t,n,r){r(3)("asyncIterator")},function(t,n){},function(t,n,r){r(3)("hasInstance")},function(t,n,r){r(3)("isConcatSpreadable")},function(t,n,r){r(3)("match")},function(t,n,r){r(3)("matchAll")},function(t,n,r){r(3)("replace")},function(t,n,r){r(3)("search")},function(t,n,r){r(3)("species")},function(t,n,r){r(3)("split")},function(t,n,r){var e=r(3),o=r(105);e("toPrimitive"),o()},function(t,n,r){var e=r(9),o=r(3),i=r(29);o("toStringTag"),i(e("Symbol"),"Symbol")},function(t,n,r){r(3)("unscopables")},function(t,n,r){var e=r(1);r(29)(e.JSON,"JSON",!0)},function(t,n){},function(t,n){},function(t,n,r){r(3)("dispose")},function(t,n,r){r(3)("asyncDispose")},function(t,n,r){r(3)("matcher")},function(t,n,r){r(3)("metadataKey")},function(t,n,r){r(3)("observable")},function(t,n,r){r(3)("metadata")},function(t,n,r){r(3)("patternMatch")},function(t,n,r){r(3)("replaceAll")},function(t,n,r){t.exports=r(211)},function(t,n,r){t.exports=r(212)},function(t,n,r){var e=r(213);t.exports=e},function(t,n,r){var e=r(214);t.exports=e},function(t,n,r){var e=r(215);r(54),t.exports=e},function(t,n,r){r(71),r(72),r(101),r(107);var e=r(75);t.exports=e.f("iterator")},function(t,n,r){t.exports=r(217)},function(t,n,r){r(218);var e=r(13);t.exports=e.setInterval},function(t,n,r){r(219),r(221)},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setInterval,!0);e({global:!0,bind:!0,forced:o.setInterval!==i},{setInterval:i})},function(t,n){t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},function(t,n,r){var e=r(0),o=r(1),i=r(108)(o.setTimeout,!0);e({global:!0,bind:!0,forced:o.setTimeout!==i},{setTimeout:i})},function(t,n,r){t.exports=r(223)},function(t,n,r){var e=r(224);t.exports=e},function(t,n,r){r(225);var e=r(13);t.exports=e.Array.isArray},function(t,n,r){r(0)({target:"Array",stat:!0},{isArray:r(39)})},function(t,n,r){t.exports=r(227)},function(t,n,r){r(54);var e=r(28),o=r(8),i=r(14),c=r(228),u=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var n=t.forEach;return t===u||i(u,t)&&n===u.forEach||o(a,e(t))?c:n}},function(t,n,r){var e=r(229);t.exports=e},function(t,n,r){r(230);var e=r(40);t.exports=e("Array").forEach},function(t,n,r){"use strict";var e=r(0),o=r(231);e({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(t,n,r){"use strict";var e=r(56).forEach,o=r(232)("forEach");t.exports=o?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,n,r){"use strict";var e=r(5);t.exports=function(t,n){var r=[][t];return!!r&&e((function(){r.call(null,n||function(){return 1},1)}))}},function(t,n,r){t.exports=r(234)},function(t,n,r){var e=r(235);t.exports=e},function(t,n,r){r(236);var e=r(13).Object,o=t.exports=function(t,n,r){return e.defineProperty(t,n,r)};e.defineProperty.sham&&(o.sham=!0)},function(t,n,r){var e=r(0),o=r(11),i=r(16).f;e({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},function(t,n,r){t.exports=r(238)},function(t,n,r){var e=r(239);t.exports=e},function(t,n,r){var e=r(14),o=r(240),i=Array.prototype;t.exports=function(t){var n=t.concat;return t===i||e(i,t)&&n===i.concat?o:n}},function(t,n,r){r(104);var e=r(40);t.exports=e("Array").concat},function(t,n,r){t.exports=r(242)},function(t,n,r){var e=r(243);t.exports=e},function(t,n,r){r(244);var e=r(13);t.exports=e.Object.keys},function(t,n,r){var e=r(0),o=r(25),i=r(69);e({target:"Object",stat:!0,forced:r(5)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},function(t,n,r){t.exports=r(246)},function(t,n,r){var e=r(247);t.exports=e},function(t,n,r){var e=r(14),o=r(248),i=Array.prototype;t.exports=function(t){var n=t.filter;return t===i||e(i,t)&&n===i.filter?o:n}},function(t,n,r){r(249);var e=r(40);t.exports=e("Array").filter},function(t,n,r){"use strict";var e=r(0),o=r(56).filter;e({target:"Array",proto:!0,forced:!r(55)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}]);`, "Worker", void 0, void 0);
        }
      }, function(e, t, n) {
        var r = n(3), o = n(15), s = n(9), i = n(304), a = { log: { key: { keyPath: "time" }, indexes: { level: { unique: false }, time: { unique: true } } } };
        function c() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          this.server = null, this.expire = e2.expire || 72, this.name = e2.name;
        }
        var u = c.prototype;
        u.init = function() {
          var e2 = this;
          if (!this.server)
            return i.open({ server: "nim-log-" + this.name, version: 1, schema: a }).then(function(t2) {
              e2.server = t2;
            });
        }, u.putLog = function(e2) {
          var t2 = this;
          if (!this.server)
            return r.reject("no db server");
          var n2 = o(e2).call(e2, -1)[0].time - 36e5 * this.expire;
          return this.deleteLogs(n2).then(function() {
            return t2.server.add("log", e2);
          });
        }, u.getAllLogs = function() {
          return this.server ? this.server.query("log", "time").all().execute().then(function(e2) {
            var t2 = {}, n2 = o(e2).call(e2, -1)[0];
            return t2.logs = s(e2).call(e2, function(e3) {
              return e3.log;
            }).join("\r\n"), t2.time = n2 && n2.time, t2;
          }) : r.reject("no db server");
        }, u.deleteLogs = function(e2) {
          return this.server ? this.server.remove("log", null, "time", 0, e2) : r.reject("no db server");
        }, e.exports = c;
      }, function(e, t, n) {
        n(253);
        var r = n(13);
        e.exports = r.setInterval;
      }, function(e, t, n) {
        var r = n(19), o = n(572), s = Function.prototype;
        e.exports = function(e2) {
          var t2 = e2.bind;
          return e2 === s || r(s, e2) && t2 === s.bind ? o : t2;
        };
      }, function(e, t, n) {
        n(573);
        var r = n(29);
        e.exports = r("Function").bind;
      }, function(e, t, n) {
        var r = n(1), o = n(274);
        r({ target: "Function", proto: true, forced: Function.bind !== o }, { bind: o });
      }, function(e, t, n) {
        var r = n(18), o = n(26), s = n(2), i = n(24), a = n(4), c = n(62), u = n(187);
        function l2(e2) {
          e2.onuploading && this.on("uploading", e2.onuploading), u.call(this, e2);
        }
        var m = u.prototype, p = l2.prototype = r(m);
        p.doSend = function() {
          var e2, t2, n2, r2 = this.options, u2 = r2.headers, l3 = this.xhr = new XMLHttpRequest();
          if ("multipart/form-data" === u2["Content-Type"]) {
            var m2, p2;
            delete u2["Content-Type"], l3.upload.onprogress = o(m2 = this.onProgress).call(m2, this), l3.upload.onload = o(p2 = this.onProgress).call(p2, this);
            var d, f2 = r2.data;
            if (r2.data = new window.FormData(), f2)
              s(d = c.getKeys(f2, r2.putFileAtEnd)).call(d, function(e3) {
                var t3 = f2[e3];
                t3.tagName && "INPUT" === t3.tagName.toUpperCase() ? "file" === t3.type && s([]).call(t3.files, function(e4) {
                  r2.data.append(c.dataset(t3, "name") || t3.name || e4.name || "file-" + c.uniqueID(), e4);
                }) : r2.data.append(e3, t3);
              });
          } else if (u2["x-nos-token"]) {
            var g, h;
            l3.upload.onprogress = o(g = this.onProgress).call(g, this), l3.upload.onload = o(h = this.onProgress).call(h, this);
          }
          (l3.onreadystatechange = o(e2 = this.onStateChange).call(e2, this), 0 !== r2.timeout) && (this.timer = i(o(n2 = this.onTimeout).call(n2, this), r2.timeout));
          l3.open(r2.method, r2.url, !r2.sync), s(t2 = a(u2)).call(t2, function(e3) {
            l3.setRequestHeader(e3, u2[e3]);
          }), r2.cookie && "withCredentials" in l3 && (l3.withCredentials = true), l3.send(r2.data), this.afterSend();
        }, p.onProgress = function(e2) {
          e2.lengthComputable && e2.loaded <= e2.total && this.emit("uploading", e2);
        }, p.onStateChange = function() {
          var e2, t2 = this.xhr;
          4 === t2.readyState && (e2 = { status: t2.status, result: t2.responseText || "" }, this.onLoad(e2));
        }, p.getResponseHeader = function(e2) {
          var t2 = this.xhr;
          return t2 ? t2.getResponseHeader(e2) : "";
        }, p.destroy = function() {
          clearTimeout(this.timer);
          try {
            this.xhr.onreadystatechange = c.f, this.xhr.abort();
          } catch (e2) {
          }
          m.destroy.call(this);
        }, e.exports = l2;
      }, function(e, t, n) {
        var r;
        !function(t2) {
          "use strict";
          function o() {
          }
          var s = o.prototype, i = t2.EventEmitter;
          function a(e2, t3) {
            for (var n2 = e2.length; n2--; )
              if (e2[n2].listener === t3)
                return n2;
            return -1;
          }
          function c(e2) {
            return function() {
              return this[e2].apply(this, arguments);
            };
          }
          s.getListeners = function(e2) {
            var t3, n2, r2 = this._getEvents();
            if (e2 instanceof RegExp)
              for (n2 in t3 = {}, r2)
                r2.hasOwnProperty(n2) && e2.test(n2) && (t3[n2] = r2[n2]);
            else
              t3 = r2[e2] || (r2[e2] = []);
            return t3;
          }, s.flattenListeners = function(e2) {
            var t3, n2 = [];
            for (t3 = 0; t3 < e2.length; t3 += 1)
              n2.push(e2[t3].listener);
            return n2;
          }, s.getListenersAsObject = function(e2) {
            var t3, n2 = this.getListeners(e2);
            return n2 instanceof Array && ((t3 = {})[e2] = n2), t3 || n2;
          }, s.addListener = function(e2, t3) {
            if (!function e3(t4) {
              return "function" == typeof t4 || t4 instanceof RegExp || !(!t4 || "object" != typeof t4) && e3(t4.listener);
            }(t3))
              throw new TypeError("listener must be a function");
            var n2, r2 = this.getListenersAsObject(e2), o2 = "object" == typeof t3;
            for (n2 in r2)
              r2.hasOwnProperty(n2) && -1 === a(r2[n2], t3) && r2[n2].push(o2 ? t3 : { listener: t3, once: false });
            return this;
          }, s.on = c("addListener"), s.addOnceListener = function(e2, t3) {
            return this.addListener(e2, { listener: t3, once: true });
          }, s.once = c("addOnceListener"), s.defineEvent = function(e2) {
            return this.getListeners(e2), this;
          }, s.defineEvents = function(e2) {
            for (var t3 = 0; t3 < e2.length; t3 += 1)
              this.defineEvent(e2[t3]);
            return this;
          }, s.removeListener = function(e2, t3) {
            var n2, r2, o2 = this.getListenersAsObject(e2);
            for (r2 in o2)
              o2.hasOwnProperty(r2) && -1 !== (n2 = a(o2[r2], t3)) && o2[r2].splice(n2, 1);
            return this;
          }, s.off = c("removeListener"), s.addListeners = function(e2, t3) {
            return this.manipulateListeners(false, e2, t3);
          }, s.removeListeners = function(e2, t3) {
            return this.manipulateListeners(true, e2, t3);
          }, s.manipulateListeners = function(e2, t3, n2) {
            var r2, o2, s2 = e2 ? this.removeListener : this.addListener, i2 = e2 ? this.removeListeners : this.addListeners;
            if ("object" != typeof t3 || t3 instanceof RegExp)
              for (r2 = n2.length; r2--; )
                s2.call(this, t3, n2[r2]);
            else
              for (r2 in t3)
                t3.hasOwnProperty(r2) && (o2 = t3[r2]) && ("function" == typeof o2 ? s2.call(this, r2, o2) : i2.call(this, r2, o2));
            return this;
          }, s.removeEvent = function(e2) {
            var t3, n2 = typeof e2, r2 = this._getEvents();
            if ("string" === n2)
              delete r2[e2];
            else if (e2 instanceof RegExp)
              for (t3 in r2)
                r2.hasOwnProperty(t3) && e2.test(t3) && delete r2[t3];
            else
              delete this._events;
            return this;
          }, s.removeAllListeners = c("removeEvent"), s.emitEvent = function(e2, t3) {
            var n2, r2, o2, s2, i2 = this.getListenersAsObject(e2);
            for (s2 in i2)
              if (i2.hasOwnProperty(s2))
                for (n2 = i2[s2].slice(0), o2 = 0; o2 < n2.length; o2++)
                  true === (r2 = n2[o2]).once && this.removeListener(e2, r2.listener), r2.listener.apply(this, t3 || []) === this._getOnceReturnValue() && this.removeListener(e2, r2.listener);
            return this;
          }, s.trigger = c("emitEvent"), s.emit = function(e2) {
            var t3 = Array.prototype.slice.call(arguments, 1);
            return this.emitEvent(e2, t3);
          }, s.setOnceReturnValue = function(e2) {
            return this._onceReturnValue = e2, this;
          }, s._getOnceReturnValue = function() {
            return !this.hasOwnProperty("_onceReturnValue") || this._onceReturnValue;
          }, s._getEvents = function() {
            return this._events || (this._events = {});
          }, o.noConflict = function() {
            return t2.EventEmitter = i, o;
          }, void 0 === (r = (function() {
            return o;
          }).call(t2, n, t2, e)) || (e.exports = r);
        }("undefined" != typeof window ? window : this || {});
      }, function(e, t, n) {
        var r = n(18), o = n(7), s = n(2), i = n(26), a = n(90), c = n(62), u = n(187), l2 = n(275), m = "NEJ-UPLOAD-RESULT:", p = {};
        function d(e2) {
          this.init(), u.call(this, e2);
        }
        var f2 = u.prototype, g = d.prototype = r(f2);
        g.init = function() {
          var e2 = false;
          function t2(e3) {
            var t3 = e3.data;
            if (0 === o(t3).call(t3, m)) {
              var n2 = (t3 = JSON.parse(t3.replace(m, ""))).key, r2 = p[n2];
              r2 && (delete p[n2], t3.result = decodeURIComponent(t3.result || ""), r2.onLoad(t3.result));
            }
          }
          return function() {
            !function() {
              if (!e2) {
                e2 = true;
                var n2 = c.getGlobal();
                n2.postMessage ? c.on(n2, "message", t2) : (l2.addMsgListener(t2), l2.startTimer());
              }
            }();
          };
        }(), g.doSend = function() {
          var e2 = this, t2 = e2.options, n2 = e2.key = "zoro-ajax-upload-iframe-" + c.uniqueID();
          p[n2] = e2;
          var r2 = e2.form = c.html2node('<form style="display:none;"></form>');
          "undefined" == typeof document || document.body.appendChild(r2), r2.target = n2, r2.method = "POST", r2.enctype = "multipart/form-data", r2.encoding = "multipart/form-data";
          var o2 = t2.url, a2 = c.genUrlSep(o2);
          r2.action = o2 + a2 + "_proxy_=form";
          var u2, l3 = t2.data, m2 = [], d2 = [];
          l3 && s(u2 = c.getKeys(l3, t2.putFileAtEnd)).call(u2, function(e3) {
            var t3 = l3[e3];
            if (t3.tagName && "INPUT" === t3.tagName.toUpperCase()) {
              if ("file" === t3.type) {
                var n3 = t3, o3 = n3.cloneNode(true);
                n3.parentNode.insertBefore(o3, n3);
                var s2 = c.dataset(n3, "name");
                s2 && (n3.name = s2), r2.appendChild(n3), c.isFunction(n3.setAttribute) && (n3.setAttribute("form", ""), n3.removeAttribute("form")), m2.push(t3), d2.push(o3);
              }
            } else {
              var i2 = c.html2node('<input type="hidden"/>');
              i2.name = e3, i2.value = t3, r2.appendChild(i2);
            }
          });
          function f3() {
            s(m2).call(m2, function(e3, t3) {
              var n3 = d2[t3];
              n3.parentNode && (e3.name = n3.name, c.isFunction(e3.setAttribute) && e3.setAttribute("form", n3.getAttribute("form")), n3.parentNode.replaceChild(e3, n3));
            });
          }
          var g2 = e2.iframe = c.createIframe({ name: n2, onload: function() {
            var t3;
            e2.aborted ? f3() : (c.on(g2, "load", i(t3 = e2.checkResult).call(t3, e2)), r2.submit(), f3(), e2.afterSend());
          } });
        }, g.checkResult = function() {
          var e2, t2;
          try {
            var n2, r2;
            if (e2 = this.iframe.contentWindow.document.body, t2 = a(n2 = e2.innerText || e2.textContent || "").call(n2), o(t2).call(t2, m) >= 0 || o(r2 = e2.innerHTML).call(r2, m) >= 0)
              return;
          } catch (e3) {
            return;
          }
          this.onLoad(t2);
        }, g.onLoad = function(e2) {
          f2.onLoad.call(this, { status: 200, result: e2 }), c.remove(this.form), c.remove(this.iframe), f2.destroy.call(this);
        }, g.destroy = function() {
          c.remove(this.iframe), c.remove(this.form);
        }, g.abort = function() {
          this.aborted = true, delete p[this.key], f2.abort.call(this);
        }, e.exports = d;
      }, function(e, t, n) {
        var r = n(578);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(579), s = String.prototype;
        e.exports = function(e2) {
          var t2 = e2.trim;
          return "string" == typeof e2 || e2 === s || r(s, e2) && t2 === s.trim ? o : t2;
        };
      }, function(e, t, n) {
        n(580);
        var r = n(29);
        e.exports = r("String").trim;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(185).trim;
        r({ target: "String", proto: true, forced: n(581)("trim") }, { trim: function() {
          return o(this);
        } });
      }, function(e, t, n) {
        var r = n(227).PROPER, o = n(5), s = n(148);
        e.exports = function(e2) {
          return o(function() {
            return !!s[e2]() || "​᠎" !== "​᠎"[e2]() || r && s[e2].name !== e2;
          });
        };
      }, function(e, t, n) {
        var r = n(18), o = n(7), s = n(26), i = n(2), a = n(62), c = n(275), u = n(187), l2 = {};
        function m(e2) {
          this.init(), u.call(this, e2);
        }
        var p = u.prototype, d = m.prototype = r(p);
        d.init = function() {
          var e2 = "NEJ-AJAX-DATA:", t2 = false;
          function n2(t3) {
            var n3 = t3.data;
            if (0 === o(n3).call(n3, e2)) {
              var r2 = (n3 = JSON.parse(n3.replace(e2, ""))).key, s2 = l2[r2];
              s2 && (delete l2[r2], n3.result = decodeURIComponent(n3.result || ""), s2.onLoad(n3));
            }
          }
          return function() {
            !function() {
              if (!t2) {
                t2 = true;
                var e3 = a.getGlobal();
                e3.postMessage ? a.on(e3, "message", n2) : c.addMsgListener(n2);
              }
            }();
          };
        }(), d.doSend = function() {
          var e2 = this.options, t2 = a.url2origin(e2.url), n2 = e2.proxyUrl || t2 + "/res/nej_proxy_frame.html", r2 = l2[n2];
          if (a.isArray(r2)) {
            var o2;
            r2.push(s(o2 = this.doSend).call(o2, this, e2));
          } else {
            var u2;
            if (!r2)
              return l2[n2] = [s(u2 = this.doSend).call(u2, this, e2)], void a.createIframe({ src: n2, onload: function(e3) {
                var t3 = l2[n2];
                l2[n2] = a.target(e3).contentWindow, i(t3).call(t3, function(e4) {
                  try {
                    e4();
                  } catch (e5) {
                  }
                });
              } });
            if (!this.aborted) {
              var m2 = this.key = a.uniqueID();
              l2[m2] = this;
              var p2 = a.fetch({ method: "GET", url: "", data: null, headers: {}, timeout: 0 }, e2);
              p2.key = m2, c.postMessage(r2, { data: p2 }), this.afterSend();
            }
          }
        }, d.abort = function() {
          this.aborted = true, delete l2[this.key], p.abort.call(this);
        }, e.exports = m;
      }, function(e, t, n) {
        var r, o, s = n(8), i = n(62), a = n(118), c = (r = /json/i, o = /post/i, function(e2, t2) {
          var n2 = (t2 = t2 || {}).data = t2.data || {}, c2 = t2.headers = t2.headers || {}, u = i.checkWithDefault(c2, "Accept", "application/json"), l2 = i.checkWithDefault(c2, "Content-Type", "application/json");
          return r.test(u) && (t2.type = "json"), o.test(t2.method) && r.test(l2) && (t2.data = s(n2)), a(e2, t2);
        });
        e.exports = c;
      }, function(e, t, n) {
        var r = n(4), o = n(16), s = n(7), i = n(2), a = n(6), c = n(15), u = n(24);
        e.exports = { wrapSafeCallback: function(e2, t2) {
          if (e2.__wrapSafeCallback__)
            return e2;
          e2.__wrapSafeCallback__ = true;
          var n2 = r(e2);
          return n2 = o(n2).call(n2, function(t3) {
            return 0 === s(t3).call(t3, "on") && "[object Function]" === Object.prototype.toString.call(e2[t3]);
          }), i(n2).call(n2, function(n3) {
            var r2 = e2[n3];
            e2[n3] = function() {
              var e3 = this;
              try {
                var o2;
                return r2.call.apply(r2, a(o2 = [this]).call(o2, c(Array.prototype).call(arguments)));
              } catch (r3) {
                var s2;
                this.logger.error(a(s2 = "wrapSafeCallback. CallbackName: ".concat(n3, ". Error: ")).call(s2, r3)), u(function() {
                  var t3;
                  throw e3.logger.error(a(t3 = "wrapSafeCallback. throw error in setTimeout. CallbackName: ".concat(n3, ". Error: ")).call(t3, r3)), r3;
                }, 0), t2.logger && t2.logger.error("userOption:".concat(n3, " function error"), r3);
              }
            };
          }), e2;
        } };
      }, function(e, t, n) {
        var r = n(586);
        e.exports = r;
      }, function(e, t, n) {
        n(587);
        var r = n(13);
        e.exports = r.Date.now;
      }, function(e, t, n) {
        var r = n(1), o = n(12), s = Date, i = o(s.prototype.getTime);
        r({ target: "Date", stat: true }, { now: function() {
          return i(new s());
        } });
      }, function(e, t, n) {
        var r = n(77).fn, o = n(0), s = n(25).reportAPI;
        r.isConnected = function() {
          return s({ instance: this, className: "ApiBaseFn", funcName: "isConnected", hasCallback: false }), !!this.protocol && this.protocol.isConnected();
        }, r.connect = function() {
          s({ instance: this, className: "ApiBaseFn", funcName: "connect", hasCallback: false }), this.protocol.processId = o.guid(), this.protocol.connect();
        }, r.detectHeartbeat = function() {
          this.protocol.detectHeartbeat();
        }, r.disconnect = function() {
        };
      }, function(e, t, n) {
        var r = n(22), o = n(8), s = n(26), i = n(9), a = n(37), c = n(15), u = n(141), l2 = n(90), m = n(7), p = n(48), d = n(24), f2 = n(10), g = n(32), h = n(2), y = n(6), v = n(4), b = n(52), T = n(16), S = n(53), M = n(54), k = n(55), x = n(43), C = n(51), I = n(125), w = ["loc_x", "loc_y", "loc_z"];
        function _(e2, t2) {
          var n2 = v(e2);
          if (b) {
            var r2 = b(e2);
            t2 && (r2 = T(r2).call(r2, function(t3) {
              return S(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        function P(e2) {
          for (var t2 = 1; t2 < arguments.length; t2++) {
            var n2, r2, o2 = null != arguments[t2] ? arguments[t2] : {};
            t2 % 2 ? h(n2 = _(Object(o2), true)).call(n2, function(t3) {
              C(e2, t3, o2[t3]);
            }) : M ? k(e2, M(o2)) : h(r2 = _(Object(o2))).call(r2, function(t3) {
              x(e2, t3, S(o2, t3));
            });
          }
          return e2;
        }
        var A = n(77).fn, N = n(0), O = n(608), E = n(41), R = n(11), j2 = n(277), F = n(278), D = n(285), U = n(107).EMExceptionState, L = n(25).reportAPI;
        A.sendText = function(e2) {
          (e2 = e2 || {}).done = L({ instance: this, className: "ApiBaseFn", funcName: "sendText", async: true, done: e2.done });
          var t2 = e2, n2 = t2.loc_x, r2 = t2.loc_y, o2 = t2.loc_z, s2 = I(t2, w);
          return void 0 === n2 || void 0 === r2 || void 0 === o2 ? e2 = P({}, s2) : ("number" != typeof e2.loc_x && (e2.loc_x = 0), "number" != typeof e2.loc_y && (e2.loc_y = 0), "number" != typeof e2.loc_z && (e2.loc_z = 0)), this.processCallback(e2), e2.msg = new this.message.TextMessage(e2), this.sendMsg(e2);
        }, A.previewFile = function(e2, t2) {
          var n2;
          (e2 = e2 || {}).done = L({ instance: this, className: "ApiBaseFn", funcName: "previewFile", done: e2.done });
          var r2 = this, a2 = r2.protocol.appGrayConfig;
          if (a2 && a2.grayConfig && a2.grayConfig.mixStoreEnable && (e2.mixEnable = true), N.verifyOptions(e2, "done", "msg::previewFile"), e2.type || (e2.type = "file"), N.verifyParamPresentJustOne(e2, "dataURL blob fileInput filePath wxFilePath fileObject", "msg::previewFile"), N.exist(e2.maxSize) && N.verifyParamType("maxSize", e2.maxSize, "number", "api::previewFile"), N.exist(e2.commonUpload) && N.verifyParamType("commonUpload", e2.commonUpload, "boolean", "api::previewFile"), e2.nosSurvivalTime ? (N.verifyParamType("nosSurvivalTime", e2.nosSurvivalTime, "number", "api::Base.getInstance"), N.verifyParamMin("nosSurvivalTime", e2.nosSurvivalTime, 86400, "api::Base.getInstance")) : e2.nosSurvivalTime = this.nosSurvivalTime, e2.filePath = e2.filePath || e2.wxFilePath, delete e2.wxFilePath, e2.dataURL)
            e2.blob = D.fromDataURL(e2.dataURL);
          else if (e2.blob)
            ;
          else if (e2.fileInput) {
            if (e2.fileInput = N.verifyFileInput(e2.fileInput, "msg::previewFile"), e2.fileInput.files) {
              if (!e2.fileInput.files.length)
                return void e2.done(E.newNoFileError("请选择" + e2.type + "文件", { callFunc: "msg::previewFile", fileInput: e2.fileInput }), e2);
              e2.fileSize = e2.fileInput.files[0].size;
            }
            e2.fileInputName = N.getFileName(e2.fileInput);
          }
          this.processCallback(e2);
          var c2 = o(j2.genResponseBody(e2.type) || {}).replace(/"/gi, '\\"'), u2 = null, l3 = e2.transcode ? "getNosTokenTrans" : "getNosToken";
          if (e2.transcode) {
            N.verifyOptions(e2, "fileInput", "msg::previewFile");
            var m2 = N.getFileInfo(e2.fileInput);
            u2 = { transToken: { name: m2.name, type: m2.transcodeType, transType: "png" === e2.transcode ? 11 : 10, size: m2.size, body: c2 } };
          } else
            u2 = c2;
          this[l3]({ responseBody: u2, nosToken: { nosScene: e2.nosScene || this.nosScene, nosSurvivalTime: e2.nosSurvivalTime }, callback: s(n2 = function(n3, o2) {
            if (n3)
              e2.done(n3);
            else if (e2.transcode ? (e2.nosToken = o2.nosToken, e2.docId = o2.docId) : e2.nosToken = o2, e2.logger = r2.logger, e2.mixEnable) {
              var a3, c3;
              if (!this.protocol.mixStorePolicy)
                try {
                  this.protocol.mixStorePolicy = JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[this.options.appKey];
                } catch (e3) {
                  r2.logger.error("error:", "get last mixStorePolicy failed", e3);
                }
              if (!this.protocol.mixStorePolicy)
                return void r2.logger.error("error:", "get mixStorePolicy failed");
              e2.providers = i(a3 = this.protocol.mixStorePolicy.providers || []).call(a3, function(e3) {
                return Number(e3);
              }), e2.curProvider = e2.providers[0] ? Number(e2.providers[0]) : 1, e2.nosPolicy = this.protocol.mixStorePolicy.nosPolicy, e2.s3Policy = this.protocol.mixStorePolicy.s3Policy, r2.getMixStoreToken({ curProvider: e2.curProvider, responseBody: u2, callback: s(c3 = function(n4, o3) {
                n4 ? e2.done(n4) : (e2.mixStoreToken = o3, e2.getMixStoreToken = function(t3, n5) {
                  r2.getMixStoreToken({ curProvider: t3, responseBody: u2, callback: function(t4, r3) {
                    t4 ? e2.done(t4) : n5(r3);
                  } });
                }, 1 === e2.curProvider && (e2.nosToken = o3), r2._doPreviewFile(e2, t2));
              }).call(c3, r2) });
            } else
              this._doPreviewFile(e2, t2);
          }).call(n2, this) });
        }, A._doPreviewFile = function(e2, t2) {
          var n2 = this;
          e2 = N.merge(e2, n2.options.providers);
          var o2 = R.genUploadUrl(e2.nosToken.bucket);
          e2.mixEnable && 1 === e2.curProvider && (o2 = R.genUploadUrl(e2.mixStoreToken.bucket));
          var s2, l3 = R.chunkUploadUrl;
          n2.logger.info("_doPreviewFile: start upload"), e2.commonUpload || !l3 || R.isWeixinApp || R.isNodejs || R.isRN ? (e2.commonUpload = true, s2 = o2) : (s2 = l3, e2.nosLbsUrls = R.nosLbsUrls, n2.options.edgeList ? e2.edgeList = n2.options.edgeList : e2.updateNosEdgeList = function(e3) {
            n2.options.edgeList = e3;
          }), n2.protocol.reporterHook.emit("reporter/uploadStart");
          var m2 = this.assembleUploadParams(e2.nosToken);
          e2.mixEnable && 1 === e2.curProvider && (m2 = this.assembleUploadParams(e2.mixStoreToken));
          function p2(r2, o3, s3, i2) {
            if (r2) {
              var l4 = N.get(r2, "msg.message") || N.get(r2, "message") || "Unknown error message", p3 = N.get(r2, "msg.code") || N.get(r2, "code") || "Unknown error code";
              n2.logger.warn("_doPreviewFile: upload done, failed ", p3, l4), n2.protocol.reporterHook.emit("reporter/uploadEnd", "RequestAbortedError" === r2.code || "abort" === r2.code ? U.kCanceled : U.kFailed);
              var d3 = a({}, i2 || t2, { status: "fail" }), f4 = P(P({}, e2.callback.options), {}, { msg: d3 });
              return e2.uploaddone && e2.uploaddone(r2, f4, d3), void e2.done(r2, e2.callback.options);
            }
            if (n2.logger.info("_doPreviewFile: upload done, success"), n2.protocol.reporterHook.emit("reporter/uploadEnd", U.kSucceed), e2.uploaddone && e2.uploaddone(null, N.copy(o3), i2 || t2), o3 = j2.parseResponse(o3, n2.options.exifOrientation), s3 || o3.isS3 || (o3.url = R.genDownloadUrl(e2.nosToken, m2.Object, R.serverNosConfig.cdnDomain), e2.nosToken.shortUrl && (o3._url_safe = e2.nosToken.shortUrl)), N.exist(e2.fileInputName))
              o3.name = e2.fileInputName;
            else if (e2.blob) {
              var g2 = e2.blob.name;
              if (o3.name = g2 || "blob-" + o3.md5, !g2) {
                var h2 = e2.blob.type;
                o3.ext = c(h2).call(h2, u(h2).call(h2, "/") + 1);
              }
            } else
              e2.filePath ? o3.name = e2.filePath : e2.fileObject && (o3.name = e2.fileObject.fileName);
            if (!o3.ext) {
              var y2, v2, b2 = u(y2 = o3.name).call(y2, ".");
              if (-1 === b2)
                o3.ext = "unknown";
              else
                o3.ext = c(v2 = o3.name).call(v2, b2 + 1);
            }
            o3.size = o3.size || 0, o3.isS3 && o3._url_safe ? n2.getNosOriginUrl({ safeShortUrl: o3._url_safe, done: function(t3, r3) {
              t3 ? n2.logger.error("error:", "getNosOriginUrl failed", t3) : (o3.url = r3, e2.done(null, N.copy(o3)));
            } }) : e2.done(null, N.copy(o3));
          }
          if (R.isWeixinApp)
            N.verifyOptions(e2, "filePath", "msg::_doPreviewFile"), n2.fileQuickTransfer(e2, p2, function() {
              var r2 = wx.uploadFile({ url: s2, filePath: e2.filePath, name: "file", formData: m2, fail: function(e3) {
                p2({ code: "FAILED", msg: e3 }), n2.logger.error("error:", "api::msg:upload file failed", e3);
              }, success: function(e3) {
                if (200 === e3.statusCode)
                  try {
                    p2(null, JSON.parse(e3.data));
                  } catch (t3) {
                    n2.logger.error("error:", "parse wx upload file res error", t3), p2({ code: "PARSE_WX_UPLOAD_FILE_RES_ERROR", str: e3.data, msg: e3.errMsg });
                  }
                else
                  p2({ code: e3.statusCode, msg: e3.errMsg });
              } });
              "function" == typeof e2.uploadprogress && r2 && (e2.beginupload(r2, t2), n2.logger.info("_doPreviewFile::mini uploadprogress"), r2.onProgressUpdate(function(n3) {
                e2.uploadprogress({ total: n3.totalBytesExpectedToSend, loaded: n3.totalBytesSent, percentage: n3.progress, percentageText: n3.progress + "%" }, t2);
              }));
            });
          else if (R.isNodejs) {
            var d2 = { url: s2, name: "file", formData: m2, success: function(e3) {
              if (200 === e3.statusCode)
                try {
                  p2(null, JSON.parse(e3.data));
                } catch (t3) {
                  n2.protocol.logger.error("error:", "parse nodejs upload file res error", t3), p2({ code: "PARSE_NODEJS_UPLOAD_FILE_RES_ERROR", str: e3.data, msg: e3.errMsg });
                }
              else
                p2({ code: e3.statusCode, msg: e3.errMsg });
            }, fail: function(e3) {
              p2({ code: "FAILED", msg: e3 }), n2.protocol.logger.error("error:", "api::msg:upload file failed", e3);
            } };
            if (e2.filePath)
              d2.filePath = e2.filePath;
            else {
              if ("object" !== r(e2.fileObject))
                throw new E("Nodejs上传fileObject参数类型应如 {fileName:..,fileData:..} ");
              d2.fileData = e2.fileObject.fileData;
            }
            n2.fileQuickTransfer(e2, p2, function() {
              F.uploadFile(d2);
            });
          } else if (R.isRN) {
            var f3 = { url: s2, name: "file", formData: m2, filePath: e2.filePath, success: function(e3) {
              if (e3.ok && 200 === e3.status)
                try {
                  var t3 = i(e3.headers) && i(e3.headers).etag;
                  e3.md5 = t3 ? "string" == typeof t3 ? t3 : t3[0] : "UNKNOWN", p2(null, e3);
                } catch (t4) {
                  n2.protocol.logger.error("error:", "parse React Native upload file res error", t4), p2({ code: "PARSE_React_Native_UPLOAD_FILE_RES_ERROR", res: e3 });
                }
              else
                p2({ code: e3.status, msg: e3.statusText });
            }, fail: function(e3) {
              p2({ code: "FAILED", msg: e3 }), n2.protocol.logger.error("error:", "api::msg:upload file failed", e3);
            } };
            n2.fileQuickTransfer(e2, p2, function() {
              F.uploadFile(f3);
            });
          } else
            e2.url = s2, e2.params = m2, e2.fileName = "file", n2.fileQuickTransfer(e2, p2, function() {
              return n2.protocol.adaptersUploadFile(a({}, e2, { uploaddone: p2 }), t2);
            });
        }, A.fileQuickTransfer = function(e2, t2, n2) {
          var r2, o2 = this;
          e2 = e2 || {}, t2 instanceof Function || (t2 = function() {
          }), n2 instanceof Function || (n2 = function() {
          });
          var s2 = e2.fastPass;
          if (s2)
            try {
              s2 = JSON.parse(s2), e2.fastPass = s2;
            } catch (e3) {
              o2.protocol.logger.error("快传参数解析失败");
            }
          var i2 = e2.fileInputName || e2.name || e2.blob && e2.blob.name || "", a2 = e2.fileSize || e2.size || e2.blob && e2.blob.size || 0, m2 = s2 ? l2(r2 = (s2.md5 || e2.digest || "") + "").call(r2) : "", p2 = e2.type || e2.blob && e2.blob.type;
          if (m2 && a2 >= R.threshold) {
            var d2 = true, f3 = { name: i2, md5: m2, ext: c(i2).call(i2, u(i2).call(i2, ".") + 1), type: p2 };
            switch (p2) {
              case "image":
                s2 && s2.w && s2.h ? (f3.w = s2.w, f3.h = s2.h) : (d2 = false, o2.protocol.logger.error("快传 image 文件缺少参数 w 或 h"));
                break;
              case "video":
                s2 && s2.w && s2.h && s2.dur ? (f3.w = s2.w, f3.h = s2.h, f3.dur = s2.dur) : (d2 = false, o2.protocol.logger.error("快传 video 文件缺少参数 w 或 h 或 dur"));
                break;
              case "audio":
                s2 && s2.dur ? f3.dur = s2.dur : (d2 = false, o2.protocol.logger.error("快传 audio 文件缺少参数 dur"));
            }
            if (!d2)
              return void n2();
            var g2 = { fileQuickTransfer: { md5: m2 } };
            return a2 && (g2.fileQuickTransfer.size = a2), this.protocol.sendCmd("fileQuickTransfer", g2, function(e3, r3, s3) {
              !e3 && s3 && s3.fileQuickTransfer && s3.fileQuickTransfer.url || (o2.protocol.logger.error("misc::fileQuickTransfer: not found", e3, r3), n2()), s3 && s3.fileQuickTransfer && s3.fileQuickTransfer.threshold && (R.threshold = s3.fileQuickTransfer.threshold || 0), s3 && s3.fileQuickTransfer && s3.fileQuickTransfer.url && (f3.size = a2 || s3.fileQuickTransfer.size, f3.url = s3.fileQuickTransfer.url, s3.fileQuickTransfer._url_safe && (f3._url_safe = s3.fileQuickTransfer._url_safe), t2(e3, f3, true));
            });
          }
          n2();
        }, A.sendFile = function(e2) {
          (e2 = e2 || {}).done = L({ instance: this, className: "ApiBaseFn", funcName: "sendFile", done: e2.done });
          if (e2.type || (e2.type = "file"), e2 = N.merge(e2, this.options.providers), N.verifyParamPresentJustOne(e2, "dataURL blob fileInput file filePath wxFilePath fileObject", "msg::sendFile"), N.exist(e2.maxSize) && N.verifyParamType("maxSize", e2.maxSize, "number", "api::previewFile"), N.exist(e2.commonUpload) && N.verifyParamType("commonUpload", e2.commonUpload, "boolean", "api::previewFile"), this.processCallback(e2), e2.filePath = e2.filePath || e2.wxFilePath, delete e2.wxFilePath, e2.dataURL)
            return this._previewAndSendFile(e2);
          if (e2.blob)
            return this._previewAndSendFile(e2);
          if (e2.fileInput)
            return e2.fileInput = N.verifyFileInput(e2.fileInput, "msg::sendFile"), e2.fileInput.files && !e2.fileInput.files.length ? void e2.done(E.newNoFileError("请选择" + e2.type + "文件", { callFunc: "msg::sendFile", fileInput: e2.fileInput }), e2.callback.options) : this._previewAndSendFile(e2);
          if (e2.filePath || e2.fileObject)
            return this._previewAndSendFile(e2);
          if (e2.file) {
            var t2, n2 = e2.file._url_safe;
            return n2 && (t2 = e2.file.url, e2.file.url = n2, delete e2.file._url_safe), e2.msg = new this.message.FileMessage(e2), this.sendMsg(e2, t2);
          }
        }, A._previewAndSendFile = function(e2) {
          var t2 = this;
          N.verifyCallback(e2, "uploaddone beforesend", "msg::_previewAndSendFile");
          var n2 = P({}, e2), r2 = new t2.message.Message(n2);
          r2.type = e2.type;
          var o2 = t2.formatReturnMsg(r2), s2 = t2.protocol.reporterHook.getSafeClock(), i2 = { apiCallingTime: t2.protocol.reporterHook.getNTPTime(s2), attachUploadDuration: 0 }, c2 = e2.done;
          return e2.done = function(n3, u2) {
            if (e2.done = c2, n3) {
              var l3 = a({}, o2, { status: "fail" }), m2 = P(P({}, e2.callback.options), {}, { msg: l3 });
              e2.done(n3, m2);
            } else {
              if (i2.attachUploadDuration = t2.protocol.reporterHook.getSafeClock() - s2, /chatroom/.test(e2.scene))
                return;
              var p2, d2 = u2._url_safe;
              d2 && !u2.isS3 && (p2 = u2.url, u2.url = d2, delete u2._url_safe), e2.file = u2, e2.msg = new t2.message.FileMessage(e2, r2.idClient), e2.beforesend(t2.sendMsg(e2, p2, i2));
            }
          }, t2.previewFile(e2, o2), o2;
        }, A.assembleUploadParams = function(e2) {
          return e2 ? { Object: decodeURIComponent(e2.objectName), "x-nos-token": e2.token, "x-nos-entity-type": "json" } : null;
        }, A.deleteFile = function(e2) {
          L({ instance: this, className: "ApiBaseFn", funcName: "deleteFile", hasCallback: false }), N.verifyParamPresentJustOne(e2, "docId", "msg::deleteFile"), this.removeFile({ docId: e2.docId, callback: function(t2, n2) {
            t2 ? e2.error && e2.error(t2, n2) : e2.success && e2.success(n2);
          } });
        }, A.getFile = function(e2) {
          L({ instance: this, className: "ApiBaseFn", funcName: "getFile", hasCallback: false }), N.verifyParamPresentJustOne(e2, "docId", "msg::getFile"), this.fetchFile({ docId: e2.docId, callback: function(t2, n2) {
            t2 ? e2.error && e2.error(t2, n2) : e2.success && e2.success(n2.info);
          } });
        }, A.getFileList = function(e2) {
          L({ instance: this, className: "ApiBaseFn", funcName: "getFileList", hasCallback: false });
          var t2 = e2.fromDocId, n2 = void 0 === t2 ? "" : t2, r2 = e2.limit, o2 = void 0 === r2 ? 10 : r2, s2 = { limit: o2 };
          n2 && (s2.fromDocId = n2), this.fetchFileList({ fileListParam: s2, callback: function(t3, n3) {
            t3 ? (o2 > 30 && (t3.message = t3.message + "::文档条数超过限制:30"), e2.error && e2.error(t3, n3)) : e2.success && e2.success(n3);
          } });
        }, A.sendGeo = function(e2) {
          (e2 = e2 || {}).done = L({ instance: this, className: "ApiBaseFn", funcName: "sendGeo", done: e2.done });
          return this.processCallback(e2), e2.msg = new this.message.GeoMessage(e2), this.sendMsg(e2);
        }, A.sendTipMsg = function(e2) {
          (e2 = e2 || {}).done = L({ instance: this, className: "ApiBaseFn", funcName: "sendTipMsg", done: e2.done });
          return this.processCallback(e2), e2.msg = new this.message.TipMessage(e2), this.sendMsg(e2);
        }, A.sendCustomMsg = function(e2) {
          (e2 = e2 || {}).done = L({ instance: this, className: "ApiBaseFn", funcName: "sendCustomMsg", done: e2.done });
          return this.processCallback(e2), e2.msg = new this.message.CustomMessage(e2), this.sendMsg(e2);
        }, A.sendRobotMsg = function(e2) {
          (e2 = e2 || {}).done = L({ instance: this, className: "ApiBaseFn", funcName: "sendRobotMsg", done: e2.done }), this.logger.warn("this api will be abandon");
          return this.processCallback(e2), e2.msg = new this.message.RobotMessage(e2), this.sendMsg(e2);
        }, A.sendMsg = function(e2, t2, n2) {
          var r2 = this, s2 = r2.protocol, i2 = e2.msg, a2 = {};
          n2 = n2 || { apiCallingTime: s2.reporterHook.getNTPTime(), attachUploadDuration: 0 };
          var c2, u2 = !!e2.isLocal;
          if (this.logger.warn("sendMsg::start: " + i2.idClient), u2 && (e2.time && (i2.time = e2.time), e2.idClient && (i2.idClient = e2.idClient), e2.localFrom && (c2 = e2.localFrom + "")), e2.resend && ("out" !== e2.flow || "fail" !== e2.status))
            return N.onError("只能重发发送失败的消息");
          e2.callback.options.idClient = i2.idClient, r2.beforeSendMsg(e2, a2);
          var l3 = e2.rtnMsg = r2.formatReturnMsg(i2, c2);
          if (t2 && !r2.options.keepNosSafeUrl && l3.file && (l3.file._url_safe = l3.file.url, l3.file.url = t2, "audio" === l3.type && (l3.file.mp3Url = t2 + (~m(t2).call(t2, "?") ? "&" : "?") + "audioTrans&type=mp3")), l3.hasOwnProperty("chatroomId") && !l3.chatroomId)
            return N.onError("聊天室未连接");
          if (u2 && (l3.status = "success", l3.isLocal = true), s2.storeSendMsg && (a2.promise = s2.storeSendMsg(l3)), e2.cbaop = function(e3, t3) {
            if (e3)
              return 7101 === e3.code && (l3.isInBlackList = true, l3.idServer = t3.idServer, l3.time = t3.time), "server" !== e3.from ? (l3.status = "fail", s2.updateSendMsgError && s2.updateSendMsgError(l3), l3) : void 0;
          }, !u2) {
            t2 && !r2.options.keepNosSafeUrl && e2.callback && (e2.callback.originUrl = t2), e2.toAccids && e2.toAccids.length && (i2.toAccids = o(e2.toAccids)), a2.msg = i2, n2.sendTime = s2.reporterHook.getNTPTime(), s2.reporterHook.hasOriginTimetick() && (a2.msg.__clientExt = o({ statistics: n2 }));
            var f3 = i2;
            r2.sendCmd(e2.cmd, a2, function() {
              if (R.isBrowser) {
                var t3 = arguments[0], o2 = arguments[1] || {}, i3 = "chatroom" === r2.subType, a3 = 0 === f3.scene, c3 = s2.reporterHook.getNTPTime(), u3 = { msgId: o2.idServer, clientId: f3.idClient, msgTime: o2.time || 0, fromAccid: r2.account, toAccid: a3 ? f3.to : "", type: i3 ? 4 : f3.scene, roomId: i3 ? r2.options.chatroomId : "", tid: i3 || a3 ? "" : f3.to, result: t3 ? t3.code : 200, failReason: t3 ? t3.message : "", rt: p(c3 - n2.apiCallingTime), apiCallingTime: n2.apiCallingTime, sendTime: n2.sendTime, attachUploadDuration: n2.attachUploadDuration, apiCallbackTime: c3 };
                r2.reporter && r2.reporter.report("msgSend", u3);
              }
              e2.callback && e2.callback.apply(r2, arguments);
              var l4 = arguments[0], m2 = arguments[1];
              !l4 && m2 && m2.from === m2.to && r2.protocol.markMsgRead(m2);
            });
          }
          return r2.afterSendMsg(e2), u2 && d(function() {
            l3 = N.simpleClone(l3), e2.done(null, l3);
          }, 0), N.copy(l3);
        }, A.beforeSendMsg = function() {
        }, A.afterSendMsg = function() {
        }, A.formatReturnMsg = function(e2, t2) {
          var n2;
          return e2 = N.copy(e2), this.protocol.completeMsg(e2), e2.status = "sending", t2 && (e2.from = t2), e2 = f2(n2 = this.message).call(n2, e2), e2 = this.protocol.amendMsg(e2);
        }, A.resendMsg = function(e2) {
          (e2 = e2 || {}).done = L({ instance: this, className: "ApiBaseFn", funcName: "resendMsg", done: e2.done });
          return N.verifyOptions(e2, "msg", "msg::resendMsg"), this.trimMsgFlag(e2), e2.resend = true, this._sendMsgByType(e2);
        }, A.forwardMsg = function(e2) {
          (e2 = e2 || {}).done = L({ instance: this, className: "ApiBaseFn", funcName: "forwardMsg", done: e2.done });
          return N.verifyOptions(e2, "msg", "msg::forwardMsg"), this.trimMsgFlag(e2), this.beforeForwardMsg(e2), e2.forward = true, e2.msg.idClient = N.guid(), this._sendMsgByType(e2);
        }, A.trimMsgFlag = function(e2) {
          e2 && e2.msg && (e2.msg = N.copy(e2.msg), delete e2.msg.resend, delete e2.msg.forward);
        }, A.beforeForwardMsg = function() {
        }, A._sendMsgByType = function(e2) {
          switch (N.verifyOptions(e2, "msg", "msg::_sendMsgByType"), N.verifyParamValid("msg.type", e2.msg.type, this.message.validTypes, "msg::_sendMsgByType"), N.merge(e2, e2.msg), e2.type) {
            case "text":
              return this.sendText(e2);
            case "image":
            case "audio":
            case "video":
            case "file":
              return this.sendFile(e2);
            case "geo":
              return this.sendGeo(e2);
            case "custom":
              return this.sendCustomMsg(e2);
            case "tip":
              return this.sendTipMsg(e2);
            default:
              throw new E("不能发送类型为 " + e2.type + " 的消息");
          }
        }, A.parseRobotTemplate = function(e2) {
          if (this.logger.warn("this api will be abandon"), /<template[^>/]+\/>/.test(e2))
            return { raw: e2, json: [{ type: "text", name: "", text: "" }] };
          if (!/<template[^>/]+>/.test(e2))
            return { raw: e2, json: [{ type: "text", name: "", text: e2 }] };
          var t2 = new O({ escapeMode: false });
          e2 = e2.replace(/<template [^>]+>/, "<template>");
          var n2 = t2.xml2js(e2);
          n2 = n2.template.LinearLayout, g(n2) || (n2 = [n2]);
          var r2 = [];
          return n2 = h(n2).call(n2, function(e3) {
            e3.image && (r2 = y(r2).call(r2, s2(e3))), e3.text && (r2 = y(r2).call(r2, o2(e3))), e3.link && (r2 = y(r2).call(r2, function(e4) {
              if (e4.link) {
                var t3 = e4.link;
                g(t3) || (t3 = [t3]), t3 = i(t3).call(t3, function(e5) {
                  return e5.image && (e5.image = s2(e5)), e5.text && (e5.text = o2(e5)), "url" === e5._type ? (e5.type = "url", e5.style = e5._style || "", e5.target = e5._target, delete e5._target, delete e5._style) : "block" === e5._type && (e5.type = "block", e5.style = e5._style || "", e5.params = e5._params || "", e5.target = e5._target, delete e5._params, delete e5._target, delete e5._style), delete e5._type, e5;
                }), e4.link = t3;
              }
              return e4.link;
            }(e3)));
          }), { raw: e2, json: r2 };
          function o2(e3) {
            var t3;
            return g(e3.text) || (e3.text = [e3.text]), e3.text = i(t3 = e3.text).call(t3, function(e4) {
              return { type: "text", name: e4._name, text: e4.__text };
            }), e3.text;
          }
          function s2(e3) {
            var t3;
            return g(e3.image) || (e3.image = [e3.image]), e3.image = i(t3 = e3.image).call(t3, function(e4) {
              return { type: "image", name: e4._name, url: e4._url };
            }), e3.image;
          }
        };
      }, function(e, t, n) {
        n(591);
        var r = n(13);
        e.exports = r.Object.assign;
      }, function(e, t, n) {
        var r = n(1), o = n(592);
        r({ target: "Object", stat: true, arity: 2, forced: Object.assign !== o }, { assign: o });
      }, function(e, t, n) {
        "use strict";
        var r = n(27), o = n(12), s = n(20), i = n(5), a = n(120), c = n(135), u = n(150), l2 = n(42), m = n(127), p = Object.assign, d = Object.defineProperty, f2 = o([].concat);
        e.exports = !p || i(function() {
          if (r && 1 !== p({ b: 1 }, p(d({}, "a", { enumerable: true, get: function() {
            d(this, "b", { value: 3, enumerable: false });
          } }), { b: 2 })).b)
            return true;
          var e2 = {}, t2 = {}, n2 = Symbol();
          return e2[n2] = 7, "abcdefghijklmnopqrst".split("").forEach(function(e3) {
            t2[e3] = e3;
          }), 7 != p({}, e2)[n2] || "abcdefghijklmnopqrst" != a(p({}, t2)).join("");
        }) ? function(e2, t2) {
          for (var n2 = l2(e2), o2 = arguments.length, i2 = 1, p2 = c.f, d2 = u.f; o2 > i2; )
            for (var g, h = m(arguments[i2++]), y = p2 ? f2(a(h), p2(h)) : a(h), v = y.length, b = 0; v > b; )
              g = y[b++], r && !s(d2, h, g) || (n2[g] = h[g]);
          return n2;
        } : p;
      }, function(e, t, n) {
        var r = n(19), o = n(594), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.reverse;
          return e2 === s || r(s, e2) && t2 === s.reverse ? o : t2;
        };
      }, function(e, t, n) {
        n(595);
        var r = n(29);
        e.exports = r("Array").reverse;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(12), s = n(83), i = o([].reverse), a = [1, 2];
        r({ target: "Array", proto: true, forced: String(a) === String(a.reverse()) }, { reverse: function() {
          return s(this) && (this.length = this.length), i(this);
        } });
      }, function(e, t, n) {
        e.exports = n(597);
      }, function(e, t, n) {
        e.exports = n(598);
      }, function(e, t, n) {
        var r = n(599);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(255);
        e.exports = r;
      }, function(e, t, n) {
        e.exports = n(601);
      }, function(e, t, n) {
        var r = n(602);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(207);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(604), o = n(188);
        e.exports = function(e2, t2) {
          if (null == e2)
            return {};
          var n2, s, i = {}, a = r(e2);
          for (s = 0; s < a.length; s++)
            n2 = a[s], o(t2).call(t2, n2) >= 0 || (i[n2] = e2[n2]);
          return i;
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(605);
      }, function(e, t, n) {
        e.exports = n(606);
      }, function(e, t, n) {
        var r = n(607);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(231);
        e.exports = r;
      }, function(e, t, n) {
        var r, o, s;
        !function(n2, i) {
          "use strict";
          o = [], void 0 === (s = "function" == typeof (r = function(e2) {
            return function(t2) {
              (t2 = t2 || {}).arrayAccessForm = t2.arrayAccessForm || "none", t2.emptyNodeForm = t2.emptyNodeForm || "text", t2.jsAttributeFilter = t2.jsAttributeFilter, t2.jsAttributeConverter = t2.jsAttributeConverter, t2.attributeConverters = t2.attributeConverters || [], t2.datetimeAccessFormPaths = t2.datetimeAccessFormPaths || [], t2.arrayAccessFormPaths = t2.arrayAccessFormPaths || [], t2.xmldomOptions = t2.xmldomOptions || {}, void 0 === t2.enableToStringFunc && (t2.enableToStringFunc = true), void 0 === t2.skipEmptyTextNodesForObj && (t2.skipEmptyTextNodesForObj = true), void 0 === t2.stripWhitespaces && (t2.stripWhitespaces = true), void 0 === t2.useDoubleQuotes && (t2.useDoubleQuotes = true), void 0 === t2.ignoreRoot && (t2.ignoreRoot = false), void 0 === t2.escapeMode && (t2.escapeMode = true), void 0 === t2.attributePrefix && (t2.attributePrefix = "_"), void 0 === t2.selfClosingElements && (t2.selfClosingElements = true), void 0 === t2.keepCData && (t2.keepCData = false), void 0 === t2.keepText && (t2.keepText = false), void 0 === t2.jsDateUTC && (t2.jsDateUTC = false), function() {
                function e3(e4) {
                  var t3 = String(e4);
                  return 1 === t3.length && (t3 = "0" + t3), t3;
                }
                "function" != typeof String.prototype.trim && (String.prototype.trim = function() {
                  return this.replace(/^\s+|^\n+|(\s|\n)+$/g, "");
                }), "function" != typeof Date.prototype.toISOString && (Date.prototype.toISOString = function() {
                  return this.getUTCFullYear() + "-" + e3(this.getUTCMonth() + 1) + "-" + e3(this.getUTCDate()) + "T" + e3(this.getUTCHours()) + ":" + e3(this.getUTCMinutes()) + ":" + e3(this.getUTCSeconds()) + "." + String((this.getUTCMilliseconds() / 1e3).toFixed(3)).slice(2, 5) + "Z";
                });
              }();
              var n3 = 1, r2 = 3, o2 = 4, s2 = 8, i2 = 9;
              function a(e3) {
                var t3 = e3.localName;
                return null == t3 && (t3 = e3.baseName), null != t3 && "" !== t3 || (t3 = e3.nodeName), t3;
              }
              function c(e3) {
                return "string" == typeof e3 ? e3.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;") : e3;
              }
              function u(e3, n4, r3) {
                switch (t2.arrayAccessForm) {
                  case "property":
                    e3[n4] instanceof Array ? e3[n4 + "_asArray"] = e3[n4] : e3[n4 + "_asArray"] = [e3[n4]];
                }
                if (!(e3[n4] instanceof Array) && t2.arrayAccessFormPaths.length > 0) {
                  for (var o3 = false, s3 = 0; s3 < t2.arrayAccessFormPaths.length; s3++) {
                    var i3 = t2.arrayAccessFormPaths[s3];
                    if ("string" == typeof i3) {
                      if (i3 === r3) {
                        o3 = true;
                        break;
                      }
                    } else if (i3 instanceof RegExp) {
                      if (i3.test(r3)) {
                        o3 = true;
                        break;
                      }
                    } else if ("function" == typeof i3 && i3(n4, r3)) {
                      o3 = true;
                      break;
                    }
                  }
                  o3 && (e3[n4] = [e3[n4]]);
                }
              }
              function l2(e3) {
                var t3 = e3.split(/[-T:+Z]/g), n4 = new Date(t3[0], t3[1] - 1, t3[2]), r3 = t3[5].split(".");
                if (n4.setHours(t3[3], t3[4], r3[0]), r3.length > 1 && n4.setMilliseconds(r3[1]), t3[6] && t3[7]) {
                  var o3 = 60 * t3[6] + Number(t3[7]);
                  o3 = 0 + ("-" === (/\d\d-\d\d:\d\d$/.test(e3) ? "-" : "+") ? -1 * o3 : o3), n4.setMinutes(n4.getMinutes() - o3 - n4.getTimezoneOffset());
                } else
                  -1 !== e3.indexOf("Z", e3.length - 1) && (n4 = new Date(Date.UTC(n4.getFullYear(), n4.getMonth(), n4.getDate(), n4.getHours(), n4.getMinutes(), n4.getSeconds(), n4.getMilliseconds())));
                return n4;
              }
              function m(e3, n4) {
                for (var r3 = { __cnt: 0 }, o3 = e3.childNodes, i3 = 0; i3 < o3.length; i3++) {
                  var c2 = o3.item(i3), m2 = a(c2);
                  c2.nodeType !== s2 && (r3.__cnt++, null == r3[m2] ? (r3[m2] = p(c2, n4 + "." + m2), u(r3, m2, n4 + "." + m2)) : (r3[m2] instanceof Array || (r3[m2] = [r3[m2]], u(r3, m2, n4 + "." + m2)), r3[m2][r3[m2].length] = p(c2, n4 + "." + m2)));
                }
                for (var d2 = 0; d2 < e3.attributes.length; d2++) {
                  var f3 = e3.attributes.item(d2);
                  r3.__cnt++;
                  for (var g2 = f3.value, h2 = 0; h2 < t2.attributeConverters.length; h2++) {
                    var y2 = t2.attributeConverters[h2];
                    y2.test.call(null, f3.name, f3.value) && (g2 = y2.convert.call(null, f3.name, f3.value));
                  }
                  r3[t2.attributePrefix + f3.name] = g2;
                }
                var v2 = e3.prefix;
                return v2 && (r3.__cnt++, r3.__prefix = v2), r3["#text"] && (r3.__text = r3["#text"], r3.__text instanceof Array && (r3.__text = r3.__text.join("\n")), t2.escapeMode && (r3.__text = r3.__text.replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&quot;/g, '"').replace(/&#x27;/g, "'").replace(/&amp;/g, "&")), t2.stripWhitespaces && (r3.__text = r3.__text.trim()), delete r3["#text"], "property" === t2.arrayAccessForm && delete r3["#text_asArray"], r3.__text = function(e4, n5, r4) {
                  if (t2.datetimeAccessFormPaths.length > 0)
                    for (var o4 = r4.split(".#")[0], s3 = 0; s3 < t2.datetimeAccessFormPaths.length; s3++) {
                      var i4 = t2.datetimeAccessFormPaths[s3];
                      if ("string" == typeof i4) {
                        if (i4 === o4)
                          return l2(e4);
                      } else if (i4 instanceof RegExp) {
                        if (i4.test(o4))
                          return l2(e4);
                      } else if ("function" == typeof i4 && i4(o4))
                        return l2(e4);
                    }
                  return e4;
                }(r3.__text, 0, n4 + ".#text")), r3.hasOwnProperty("#cdata-section") && (r3.__cdata = r3["#cdata-section"], delete r3["#cdata-section"], "property" === t2.arrayAccessForm && delete r3["#cdata-section_asArray"]), 1 === r3.__cnt && r3.__text && !t2.keepText ? r3 = r3.__text : 0 === r3.__cnt && "text" === t2.emptyNodeForm ? r3 = "" : r3.__cnt > 1 && void 0 !== r3.__text && t2.skipEmptyTextNodesForObj && (t2.stripWhitespaces && "" === r3.__text || "" === r3.__text.trim()) && delete r3.__text, delete r3.__cnt, t2.keepCData || r3.hasOwnProperty("__text") || !r3.hasOwnProperty("__cdata") || 1 !== Object.keys(r3).length ? (t2.enableToStringFunc && (r3.__text || r3.__cdata) && (r3.toString = function() {
                  return (this.__text ? this.__text : "") + (this.__cdata ? this.__cdata : "");
                }), r3) : r3.__cdata ? r3.__cdata : "";
              }
              function p(e3, s3) {
                return e3.nodeType === i2 ? function(e4) {
                  for (var r3 = {}, o3 = e4.childNodes, s4 = 0; s4 < o3.length; s4++) {
                    var i3 = o3.item(s4);
                    if (i3.nodeType === n3) {
                      var c2 = a(i3);
                      t2.ignoreRoot ? r3 = p(i3, c2) : r3[c2] = p(i3, c2);
                    }
                  }
                  return r3;
                }(e3) : e3.nodeType === n3 ? m(e3, s3) : e3.nodeType === r2 || e3.nodeType === o2 ? e3.nodeValue : null;
              }
              function d(e3, n4, r3, o3) {
                var s3 = "<" + (e3 && e3.__prefix ? e3.__prefix + ":" : "") + n4;
                if (r3)
                  for (var i3 = 0; i3 < r3.length; i3++) {
                    var a2 = r3[i3], u2 = e3[a2];
                    t2.escapeMode && (u2 = c(u2)), s3 += " " + a2.substr(t2.attributePrefix.length) + "=", t2.useDoubleQuotes ? s3 += '"' + u2 + '"' : s3 += "'" + u2 + "'";
                  }
                return s3 += o3 ? " />" : ">";
              }
              function f2(e3, t3) {
                return "</" + (e3 && e3.__prefix ? e3.__prefix + ":" : "") + t3 + ">";
              }
              function g(e3, n4) {
                return "property" === t2.arrayAccessForm && (r3 = n4.toString(), o3 = "_asArray", -1 !== r3.indexOf(o3, r3.length - o3.length)) || 0 === n4.toString().indexOf(t2.attributePrefix) || 0 === n4.toString().indexOf("__") || e3[n4] instanceof Function;
                var r3, o3;
              }
              function h(e3) {
                var t3 = 0;
                if (e3 instanceof Object)
                  for (var n4 in e3)
                    g(e3, n4) || t3++;
                return t3;
              }
              function y(e3) {
                var n4 = [];
                if (e3 instanceof Object)
                  for (var r3 in e3)
                    -1 === r3.toString().indexOf("__") && 0 === r3.toString().indexOf(t2.attributePrefix) && n4.push(r3);
                return n4;
              }
              function v(e3) {
                var n4 = "";
                return e3 instanceof Object ? n4 += function(e4) {
                  var n5 = "";
                  return e4.__cdata && (n5 += "<![CDATA[" + e4.__cdata + "]]>"), (e4.__text || "number" == typeof e4.__text || "boolean" == typeof e4.__text) && (t2.escapeMode ? n5 += c(e4.__text) : n5 += e4.__text), n5;
                }(e3) : null !== e3 && (t2.escapeMode ? n4 += c(e3) : n4 += e3), n4;
              }
              function b(e3, n4, r3) {
                var o3 = "";
                if (t2.jsAttributeFilter && t2.jsAttributeFilter.call(null, n4, e3))
                  return o3;
                if (t2.jsAttributeConverter && (e3 = t2.jsAttributeConverter.call(null, n4, e3)), null != e3 && "" !== e3 || !t2.selfClosingElements)
                  if ("object" == typeof e3)
                    if ("[object Array]" === Object.prototype.toString.call(e3))
                      o3 += function(e4, t3, n5) {
                        var r4 = "";
                        if (0 === e4.length)
                          r4 += d(e4, t3, n5, true);
                        else
                          for (var o4 = 0; o4 < e4.length; o4++)
                            r4 += b(e4[o4], t3, y(e4[o4]));
                        return r4;
                      }(e3, n4, r3);
                    else if (e3 instanceof Date)
                      o3 += d(e3, n4, r3, false), o3 += t2.jsDateUTC ? e3.toUTCString() : e3.toISOString(), o3 += f2(e3, n4);
                    else {
                      h(e3) > 0 || "number" == typeof e3.__text || "boolean" == typeof e3.__text || e3.__text || e3.__cdata ? (o3 += d(e3, n4, r3, false), o3 += T(e3), o3 += f2(e3, n4)) : t2.selfClosingElements ? o3 += d(e3, n4, r3, true) : (o3 += d(e3, n4, r3, false), o3 += f2(e3, n4));
                    }
                  else
                    o3 += d(e3, n4, r3, false), o3 += v(e3), o3 += f2(e3, n4);
                else
                  o3 += d(e3, n4, r3, true);
                return o3;
              }
              function T(e3) {
                var t3 = "";
                if (h(e3) > 0) {
                  for (var n4 in e3)
                    if (!g(e3, n4)) {
                      var r3 = e3[n4];
                      t3 += b(r3, n4, y(r3));
                    }
                }
                return t3 += v(e3);
              }
              function S(n4) {
                if (void 0 === n4)
                  return null;
                if ("string" != typeof n4)
                  return null;
                var r3 = null, o3 = null;
                if (e2)
                  o3 = (r3 = new e2(t2.xmldomOptions)).parseFromString(n4, "text/xml");
                else if (window && window.DOMParser) {
                  r3 = new window.DOMParser();
                  var s3 = null;
                  if (!(window.ActiveXObject || "ActiveXObject" in window) && document.all && !document.addEventListener)
                    try {
                      s3 = r3.parseFromString("INVALID", "text/xml").childNodes[0].namespaceURI;
                    } catch (e3) {
                      s3 = null;
                    }
                  try {
                    o3 = r3.parseFromString(n4, "text/xml"), null !== s3 && o3.getElementsByTagNameNS(s3, "parsererror").length > 0 && (o3 = null);
                  } catch (e3) {
                    o3 = null;
                  }
                } else
                  0 === n4.indexOf("<?") && (n4 = n4.substr(n4.indexOf("?>") + 2)), (o3 = new ActiveXObject("Microsoft.XMLDOM")).async = "false", o3.loadXML(n4);
                return o3;
              }
              this.asArray = function(e3) {
                return null == e3 ? [] : e3 instanceof Array ? e3 : [e3];
              }, this.toXmlDateTime = function(e3) {
                return e3 instanceof Date ? e3.toISOString() : "number" == typeof e3 ? new Date(e3).toISOString() : null;
              }, this.asDateTime = function(e3) {
                return "string" == typeof e3 ? l2(e3) : e3;
              }, this.xml2dom = function(e3) {
                return S(e3);
              }, this.dom2js = function(e3) {
                return p(e3, null);
              }, this.js2dom = function(e3) {
                return S(this.js2xml(e3));
              }, this.xml2js = function(e3) {
                var t3 = S(e3);
                return null != t3 ? this.dom2js(t3) : null;
              }, this.js2xml = function(e3) {
                return T(e3);
              }, this.getVersion = function() {
                return "3.4.4";
              };
            };
          }) ? r.apply(t, o) : r) || (e.exports = s);
        }();
      }, function(e, t, n) {
        var r = n(118);
        e.exports = function(e2, t2) {
          return t2.method = "POST", t2.headers = t2.headers || {}, t2.headers["Content-Type"] = "multipart/form-data", t2.timeout = 0, t2.type = t2.type || "json", r(e2, t2);
        };
      }, function(e, t, n) {
        var r = n(15), o = n(48), s = n(7), i = n(3), a = n(11), c = a.chunkSize, u = n(118), l2 = { mp4: "video/mp4", avi: "video/x-msvideo", wmv: "video/x-ms-wmv", mpeg: "video/mpeg", mov: "video/quicktime", aac: "audio/x-aac", wma: "audio/x-ms-wma", wav: "audio/x-wav", mp3: "audio/mp3" };
        e.exports = function e2(t2, n2, m, p) {
          var d = { file: t2.data[n2], fileSize: t2.data[n2].size, fileUploadedSize: 0, percentage: 0 }, f2 = t2.url;
          function g(e3) {
            var n3 = d.fileUploadedSize + e3.loaded, r2 = Math.floor(1e4 * n3 / d.fileSize) / 100;
            if (o(r2) >= 100 && (r2 = 100, g = function() {
            }), d.percentage !== r2) {
              d.percentage = r2;
              var s2 = { docId: t2.docId, total: d.fileSize, loaded: n3, percentage: r2, percentageText: r2 + "%" };
              t2.fileInput && (s2.fileInput = t2.fileInput), t2.blob && (s2.blob = t2.blob), t2.uploadprogress(s2);
            }
          }
          function h(e3) {
            try {
              e3 = JSON.parse(e3);
            } catch (e4) {
              return void m.onError(e4);
            }
            if (e3.errMsg || e3.errCode)
              m.onError(e3);
            else if (e3.offset < d.fileSize)
              delete T.onaftersend, d.fileUploadedSize = e3.offset, function(e4, t3, n4, o3) {
                var s2 = e4.offset, i2 = e4.offset + c;
                if ("undefined" != typeof FileReader) {
                  var a2, l3 = new FileReader();
                  l3.readAsArrayBuffer(r(a2 = o3.file).call(a2, s2, i2)), l3.addEventListener("load", function(n5) {
                    t3.data = n5.target.result, t3.query.offset = e4.offset, t3.query.complete = i2 >= o3.fileSize, t3.query.context = e4.context, t3.onuploading = g, t3.onload = h, t3.onerror = y, m.sn = u(f2, t3);
                  }), l3.addEventListener("error", function(e5) {
                    t3.onerror(e5.target.error);
                  });
                } else {
                  var p2;
                  t3.data = r(p2 = o3.file).call(p2, s2, i2), t3.query.offset = e4.offset, t3.query.complete = i2 >= o3.fileSize, t3.query.context = e4.context, t3.onuploading = g, t3.onload = h, t3.onerror = y, m.sn = u(f2, t3);
                }
              }(e3, T, 0, d);
            else {
              var n3 = a.genFileUrl(t2.nosToken);
              "image" === t2.type ? u(n3 + "?imageInfo", { onload: function(n4) {
                try {
                  n4 = JSON.parse(n4), t2.uploaddone(null, { docId: e3.docId, w: n4.Width, h: n4.Height, orientation: n4.Orientation || "", type: n4.Type, size: n4.Size || d.fileSize });
                } catch (e4) {
                  o2(e4);
                }
              }, onerror: function(r2) {
                if ("undefined" != typeof Image) {
                  var s2 = new Image();
                  s2.src = n3, s2.onload = function() {
                    t2.uploaddone(null, { docId: e3.docId, w: s2.width, h: s2.height, size: d.fileSize });
                  }, s2.onerror = function(e4) {
                    o2(e4);
                  };
                } else
                  o2(r2);
              } }) : "video" === t2.type || "audio" === t2.type ? u(n3 + "?vinfo", { onload: function(n4) {
                try {
                  (n4 = JSON.parse(n4)).GetVideoInfo && n4.GetVideoInfo.VideoInfo && (n4 = n4.GetVideoInfo.VideoInfo), t2.uploaddone(null, { docId: e3.docId, w: n4.Width, h: n4.Height, dur: n4.Duration, orientation: n4.Rotate, audioCodec: n4.AudioCodec, videoCodec: n4.VideoCodec, container: n4.Container, size: n4.Size || d.fileSize });
                } catch (e4) {
                  o2(e4);
                }
              }, onerror: o2 }) : t2.uploaddone(null, { docId: e3.docId, size: d.fileSize });
            }
            function o2(e4) {
              m.onError(e4);
            }
          }
          function y(r2) {
            t2.errorHook(r2, { url: f2, provider: "nos" });
            var o2 = r2 && r2.code;
            function s2() {
              try {
                if (r2.result)
                  var e3 = JSON.parse(r2.result);
                else
                  e3 = r2;
                m.onError(e3);
              } catch (e4) {
                m.onError(e4);
              }
            }
            0 === d.fileUploadedSize && "abort" !== o2 ? t2.edgeList ? p < t2.edgeList.length - 1 ? e2(t2, n2, m, p + 1) : s2() : t2.nosLbsUrls && t2.nosLbsUrls.length > 0 ? function(e3, t3, n3, r3, o3) {
              return new i(function(s3) {
                function i2() {
                  o3.adaptersRequest(n3[e3], { query: { version: "1.0", bucketname: t3 }, method: "GET", onerror: a2, onload: function(e4) {
                    try {
                      (e4 = JSON.parse(e4)) && e4.upload && e4.upload.length ? s3(e4.upload) : a2();
                    } catch (e5) {
                      a2();
                    }
                  } }, { exception_service: 3 });
                }
                function a2() {
                  r3.onLbsUrlFail(n3[e3]), e3 < n3.length - 1 ? (e3++, i2()) : s3([]);
                }
                i2();
              });
            }(0, t2.nosToken.bucket, t2.nosLbsUrls, m, t2).then(function(r3) {
              r3.length > 0 ? (t2.edgeList = r3, t2.updateNosEdgeList && t2.updateNosEdgeList(r3), e2(t2, n2, m, p + 1)) : s2();
            }) : (t2.edgeList = a.edgeList, e2(t2, n2, m, p + 1)) : s2();
          }
          "number" != typeof p && (p = -1), t2.edgeList && t2.edgeList.length && (p = p > 0 ? p : 0, f2 = t2.edgeList[p]), f2 += "/" + t2.nosToken.bucket + "/" + t2.nosToken.objectName;
          var v = t2.data.file && t2.data.file.type;
          if (!v || s(v).call(v, "/") < 0) {
            var b = (t2.fileInputName || "").split(".").pop();
            "image" === t2.type ? v = "image/" + ("jpg" === b ? "jpeg" : b) : "audio" !== t2.type && "video" !== t2.type || (v = l2[b]);
          }
          var T = { query: { offset: 0, complete: c >= d.fileSize, version: "1.0" }, headers: { "Content-Type": v || "application/octet-stream", "x-nos-token": t2.nosToken.token }, method: "POST", timeout: 0, onaftersend: function() {
            t2.beginupload(m);
          }, onuploading: g, onload: h, onerror: y };
          if ("undefined" != typeof FileReader) {
            var S, M = new FileReader();
            M.addEventListener("load", function(e3) {
              T.data = e3.target.result, m.sn = u(f2, T);
            }), M.addEventListener("error", function(e3) {
              T.onerror(e3.target.error);
            }), M.readAsArrayBuffer(r(S = d.file).call(S, 0, c));
          } else {
            var k;
            T.data = r(k = d.file).call(k, 0, c), m.sn = u(f2, T);
          }
        };
      }, function(e, t, n) {
        n(612);
        var r = n(13);
        e.exports = r.Reflect.construct;
      }, function(e, t, n) {
        var r = n(1), o = n(33), s = n(79), i = n(274), a = n(172), c = n(36), u = n(28), l2 = n(84), m = n(5), p = o("Reflect", "construct"), d = Object.prototype, f2 = [].push, g = m(function() {
          function e2() {
          }
          return !(p(function() {
          }, [], e2) instanceof e2);
        }), h = !m(function() {
          p(function() {
          });
        }), y = g || h;
        r({ target: "Reflect", stat: true, forced: y, sham: y }, { construct: function(e2, t2) {
          a(e2), c(t2);
          var n2 = arguments.length < 3 ? e2 : a(arguments[2]);
          if (h && !g)
            return p(e2, t2, n2);
          if (e2 == n2) {
            switch (t2.length) {
              case 0:
                return new e2();
              case 1:
                return new e2(t2[0]);
              case 2:
                return new e2(t2[0], t2[1]);
              case 3:
                return new e2(t2[0], t2[1], t2[2]);
              case 4:
                return new e2(t2[0], t2[1], t2[2], t2[3]);
            }
            var r2 = [null];
            return s(f2, r2, t2), new (s(i, e2, r2))();
          }
          var o2 = n2.prototype, m2 = l2(u(o2) ? o2 : d), y2 = s(e2, m2, t2);
          return u(y2) ? y2 : m2;
        } });
      }, function(e, t, n) {
        e.exports = n(614);
      }, function(e, t, n) {
        var r = n(615);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(216);
        e.exports = r;
      }, function(e, t, n) {
        e.exports = n(617);
      }, function(e, t, n) {
        var r = n(618);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(619);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(620);
        e.exports = r;
      }, function(e, t, n) {
        n(621);
        var r = n(13);
        e.exports = r.Object.setPrototypeOf;
      }, function(e, t, n) {
        n(1)({ target: "Object", stat: true }, { setPrototypeOf: n(138) });
      }, function(e, t, n) {
        e.exports = n(623);
      }, function(e, t, n) {
        var r = n(624);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(273);
        e.exports = r;
      }, function(e, t) {
        e.exports = function(e2) {
          if (void 0 === e2)
            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return e2;
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(627);
      }, function(e, t, n) {
        var r = n(628);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(284);
        e.exports = r;
      }, function(e, t, n) {
        n(630);
        var r = n(13);
        e.exports = r.Object.getPrototypeOf;
      }, function(e, t, n) {
        var r = n(1), o = n(5), s = n(42), i = n(137), a = n(229);
        r({ target: "Object", stat: true, forced: o(function() {
          i(1);
        }), sham: !a }, { getPrototypeOf: function(e2) {
          return i(s(e2));
        } });
      }, function(e, t, n) {
        var r, o = n(141), s = n(7), i = n(8), a = n(26), c = n(9), u = n(15), l2 = n(4), m = n(0), p = n(77).fn, d = n(286), f2 = n(277), g = n(41), h = n(25).reportAPI;
        p.transDoc = function(e2) {
          var t2;
          m.verifyOptions(e2, "fileInput done", "nos::transDoc");
          try {
            var n2 = e2.fileInput.files[0], r2 = ["ppt", "pdf", "pptx", "doc", "docx"], c2 = e2.fileInputName = n2.name, u2 = { ppt: 1, pptx: 2, pdf: 3, doc: 6, docx: 7 }, l3 = c2.substring(o(c2).call(c2, ".") + 1);
            if (s(r2).call(r2, l3) < 0)
              return void e2.done(g.newNoFileError("请上传正确格式的文件【ppt, pptx, pdf, doc, docx】", { callFunc: "nos: transDoc", fileInput: e2.fileInput }), e2);
          } catch (t3) {
            return void e2.done(g.newNoFileError("请上传正确的文件节点", { callFunc: "msg::previewFile", fileInput: e2.fileInput }), e2);
          }
          var p2 = i(f2.genResponseBody("file") || {}).replace(/"/gi, '\\"'), d2 = { transToken: { name: c2, type: u2[l3], transType: "png" === e2.transcode ? 11 : 10, size: n2.size, body: p2 } };
          this.getNosTokenTrans({ responseBody: d2, nosToken: { nosScene: e2.nosScene || this.nosScene, nosSurvivalTime: e2.nosSurvivalTime }, callback: a(t2 = function(t3, n3) {
            t3 ? e2.done(t3) : (e2.nosToken = n3.nosToken, e2.docId = n3.docId, this._doPreviewFile(e2));
          }).call(t2, this) });
        }, p.getSimpleNosToken = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          return e2.num = 1, m.verifyOptions(e2), this.cbAndSendCmd("getSimpleNosToken", e2);
        }, p.getNosToken = function(e2) {
          var t2 = e2.callback, n2 = e2.nosToken, r2 = e2.responseBody, o2 = { tag: n2.nosScene };
          n2.nosSurvivalTime && n2.nosSurvivalTime !== 1 / 0 && (o2.expireSec = n2.nosSurvivalTime), this.sendCmd("getNosToken", { responseBody: r2, nosToken: o2 }, t2);
        }, p.getNosTokenTrans = function(e2) {
          this.sendCmd("getNosTokenTrans", e2.responseBody, e2.callback);
        }, p.getMixStoreToken = function(e2) {
          this.sendCmd("getMixStoreToken", { mixTokenReq: { provider: e2.curProvider, tokenCount: e2.tokenCount || 1, tag: "im", returnBody: e2.responseBody } }, e2.callback);
        }, p.packFileDownloadName = function(e2) {
          h({ instance: this, className: "ApiBaseFn", funcName: "packFileDownloadName", hasCallback: false }), m.verifyOptions(e2, "url name", true, "", "nos::packFileDownloadName");
          var t2 = e2.url;
          return t2 + m.genUrlSep(t2) + "download=" + encodeURIComponent(e2.name);
        }, p.audioToMp3 = function(e2) {
          h({ instance: this, className: "ApiBaseFn", funcName: "audioToMp3", hasCallback: false }), m.verifyOptions(e2, "url", "nos::audioToMp3");
          var t2 = e2.url;
          return t2 + m.genUrlSep(t2) + "audioTrans&type=mp3";
        }, p.removeFile = function(e2) {
          this.sendCmd("removeFile", e2, e2.callback);
        }, p.fetchFile = function(e2) {
          this.sendCmd("fetchFile", e2, e2.callback);
        }, p.fetchFileList = function(e2) {
          this.sendCmd("fetchFileList", e2, e2.callback);
        }, p.stripImageMeta = function(e2) {
          return h({ instance: this, className: "ApiBaseFn", funcName: "stripImageMeta", hasCallback: false }), this.beforeProcessImage(e2, "stripmeta");
        }, p.qualityImage = function(e2) {
          return h({ instance: this, className: "ApiBaseFn", funcName: "qualityImage", hasCallback: false }), this.beforeProcessImage(e2, "quality");
        }, p.interlaceImage = function(e2) {
          return h({ instance: this, className: "ApiBaseFn", funcName: "interlaceImage", hasCallback: false }), this.beforeProcessImage(e2, "interlace");
        }, p.rotateImage = function(e2) {
          return h({ instance: this, className: "ApiBaseFn", funcName: "rotateImage", hasCallback: false }), this.beforeProcessImage(e2, "rotate");
        }, p.blurImage = function(e2) {
          return h({ instance: this, className: "ApiBaseFn", funcName: "blurImage", hasCallback: false }), this.beforeProcessImage(e2, "blur");
        }, p.cropImage = function(e2) {
          return h({ instance: this, className: "ApiBaseFn", funcName: "cropImage", hasCallback: false }), this.beforeProcessImage(e2, "crop");
        }, p.thumbnailImage = function(e2) {
          return h({ instance: this, className: "ApiBaseFn", funcName: "thumbnailImage", hasCallback: false }), this.beforeProcessImage(e2, "thumbnail");
        }, p.beforeProcessImage = function(e2, t2) {
          var n2 = m.copy(e2);
          return n2.type = t2, e2.ops = [n2], this.processImage(e2);
        }, p.processImage = function(e2) {
          var t2;
          e2.callback = h({ instance: this, className: "ApiBaseFn", funcName: "processImage", done: e2.callback });
          var n2 = this;
          m.verifyOptions(e2, "url ops", true, "", "nos::processImage"), m.verifyParamType("ops", e2.ops, "array", "nos::processImage");
          var r2 = c(t2 = e2.ops).call(t2, function(e3) {
            var t3, r3;
            return m.verifyOptions(e3, "type", true, "", "nos::processImage"), m.verifyParamValid("type", e3.type, d.validTypes, "nos::processImage"), n2["gen" + u(t3 = e3.type).call(t3, 0, 1).toUpperCase() + u(r3 = e3.type).call(r3, 1) + "Op"](e3);
          });
          n2.processCallback(e2), n2.sendCmd("processImage", { url: e2.url, imageOps: r2 }, e2.callback);
        }, p.genStripmetaOp = function(e2) {
          return new d({ type: e2.type, stripmeta: e2.strip ? 1 : 0 });
        }, p.genQualityOp = function(e2) {
          m.verifyOptions(e2, "quality", true, "", "nos::genQualityOp"), m.verifyParamType("quality", e2.quality, "number", "nos::genQualityOp"), m.verifyParamMin("quality", e2.quality, 0, "nos::genQualityOp"), m.verifyParamMax("quality", e2.quality, 100, "nos::genQualityOp");
          var t2 = Math.round(e2.quality);
          return new d({ type: e2.type, qualityQuality: t2 });
        }, p.genInterlaceOp = function(e2) {
          return new d({ type: e2.type });
        }, p.genRotateOp = function(e2) {
          for (m.verifyOptions(e2, "angle", true, "", "nos::genRotateOp"), m.verifyParamType("angle", e2.angle, "number", "nos::genRotateOp"); e2.angle < 0; )
            e2.angle = e2.angle + 360;
          e2.angle = e2.angle % 360;
          var t2 = Math.round(e2.angle);
          return new d({ type: e2.type, rotateAngle: t2 });
        }, p.genBlurOp = function(e2) {
          m.verifyOptions(e2, "radius sigma", "nos::genBlurOp"), m.verifyParamType("radius", e2.radius, "number", "nos::genBlurOp"), m.verifyParamMin("radius", e2.radius, 1, "nos::genBlurOp"), m.verifyParamMax("radius", e2.radius, 50, "nos::genBlurOp"), m.verifyParamType("sigma", e2.sigma, "number", "nos::genBlurOp"), m.verifyParamMin("sigma", e2.sigma, 0, "nos::genBlurOp");
          var t2 = Math.round(e2.radius), n2 = Math.round(e2.sigma);
          return new d({ type: e2.type, blurRadius: t2, blurSigma: n2 });
        }, p.genCropOp = function(e2) {
          m.verifyOptions(e2, "x y width height", "nos::genCropOp"), m.verifyParamType("x", e2.x, "number", "nos::genCropOp"), m.verifyParamMin("x", e2.x, 0, "nos::genCropOp"), m.verifyParamType("y", e2.y, "number", "nos::genCropOp"), m.verifyParamMin("y", e2.y, 0, "nos::genCropOp"), m.verifyParamType("width", e2.width, "number", "nos::genCropOp"), m.verifyParamMin("width", e2.width, 0, "nos::genCropOp"), m.verifyParamType("height", e2.height, "number", "nos::genCropOp"), m.verifyParamMin("height", e2.height, 0, "nos::genCropOp");
          var t2 = Math.round(e2.x), n2 = Math.round(e2.y), r2 = Math.round(e2.width), o2 = Math.round(e2.height);
          return new d({ type: e2.type, cropX: t2, cropY: n2, cropWidth: r2, cropHeight: o2 });
        }, p.genThumbnailOp = (r = { cover: "z", contain: "x", crop: "y" }, function(e2) {
          m.verifyOptions(e2, "mode", "nos::genThumbnailOp"), m.verifyParamValid("mode", e2.mode, l2(r), "nos::genThumbnailOp"), "contain" === e2.mode ? m.verifyParamAtLeastPresentOne(e2, "width height", "nos::genThumbnailOp") : m.verifyOptions(e2, "width height", "nos::genThumbnailOp"), m.undef(e2.width) && (e2.width = 0), m.undef(e2.height) && (e2.height = 0), m.verifyParamType("width", e2.width, "number", "nos::genThumbnailOp"), m.verifyParamMin("width", e2.width, 0, "nos::genThumbnailOp"), m.verifyParamType("height", e2.height, "number", "nos::genThumbnailOp"), m.verifyParamMin("height", e2.height, 0, "nos::genThumbnailOp");
          var t2 = Math.round(e2.width), n2 = Math.round(e2.height), o2 = new d({ type: e2.type, thumbnailMode: r[e2.mode], thumbnailWidth: t2, thumbnailHeight: n2 });
          if ("crop" === e2.mode && m.notundef(e2.axis)) {
            m.undef(e2.axis.x) && (e2.axis.x = 5), m.undef(e2.axis.y) && (e2.axis.y = 5), m.verifyParamMin("axis.x", e2.axis.x, 0, "nos::genThumbnailOp"), m.verifyParamMax("axis.x", e2.axis.x, 10, "nos::genThumbnailOp"), m.verifyParamMin("axis.y", e2.axis.y, 0, "nos::genThumbnailOp"), m.verifyParamMax("axis.y", e2.axis.y, 10, "nos::genThumbnailOp");
            var s2 = Math.round(e2.axis.x), i2 = Math.round(e2.axis.y);
            o2.thumbnailAxisX = s2, o2.thumbnailAxisY = i2;
          }
          return m.notundef(e2.enlarge) && (m.verifyParamType("enlarge", e2.enlarge, "boolean", "nos::genThumbnailOp"), e2.enlarge && (o2.thumbnailEnlarge = 1)), o2.thumbnailToStatic = this.options.thumbnailToStatic ? 1 : 0, o2;
        }), p.getNosOriginUrl = function(e2) {
          var t2;
          (e2 = e2 || {}).done = h({ instance: this, className: "ApiBaseFn", funcName: "getNosOriginUrl", done: e2.done });
          m.verifyOptions(e2, "safeShortUrl", true, "", "nos::getNosOriginUrl"), m.verifyParamType("safeShortUrl", e2.safeShortUrl, "string", "nos::getNosOriginUrl"), /^http(s)?:/.test(e2.safeShortUrl) && ~s(t2 = e2.safeShortUrl).call(t2, "im_url=1") ? (this.processCallback(e2), this.sendCmd("getNosOriginUrl", { nosFileUrlTag: { safeUrl: e2.safeShortUrl } }, e2.callback)) : e2.done(new g("参数 “safeShortUrl” 内容非文件安全短链", { callFunc: "nos: getNosOriginUrl" }), e2);
        };
      }, function(e, t, n) {
        var r, o = n(6), s = n(7), i = n(4), a = n(22), c = n(108), u = c.genUrlSep, l2 = c.url2object, m = c.object2url, p = n(0), d = n(77).fn, f2 = n(25).reportAPI;
        d.viewImageSync = function(e2) {
          f2({ instance: this, className: "ApiBaseFn", funcName: "viewImageSync", hasCallback: false });
          var t2 = this.options;
          p.verifyOptions(e2, "url", "nos::viewImageSync");
          var n2 = e2.url, r2 = l2(n2), i2 = r2.protocol, c2 = r2.hostname, u2 = r2.path, d2 = r2.query;
          if ("boolean" == typeof e2.strip && (d2.stripmeta = e2.strip ? 1 : 0), "number" == typeof e2.quality && (p.verifyParamMin("quality", e2.quality, 0, "nos::viewImageSync"), p.verifyParamMax("quality", e2.quality, 100, "nos::viewImageSync"), d2.quality = Math.round(e2.quality)), "boolean" == typeof e2.interlace && (d2.interlace = e2.interlace ? 1 : 0), "number" == typeof e2.rotate && (d2.rotate = Math.round(e2.rotate)), "object" === a(e2.thumbnail)) {
            var g = e2.thumbnail.mode || "crop", h = e2.thumbnail.width, y = e2.thumbnail.height;
            if (h >= 0 && y >= 0 && h < 4096 && y < 4096 && (h > 0 || y > 0)) {
              var v, b;
              switch (g) {
                case "crop":
                  g = "y";
                  break;
                case "contain":
                  g = "x";
                  break;
                case "cover":
                  g = "z";
                  break;
                default:
                  g = "x";
              }
              d2.thumbnail = o(v = o(b = "".concat(h)).call(b, g)).call(v, y);
            }
          }
          if (t2.downloadUrl) {
            var T = l2(e2.url), S = t2.downloadUrl, M = T.path, k = s(M).call(M, "/");
            if (-1 !== k) {
              var x = M.substring(0, k), C = M.substring(k + 1);
              S = S.replace("{bucket}", x).replace("{object}", C);
            }
            var I = l2(S);
            return m({ protocol: I.protocol, hostname: I.hostname, path: I.path, query: p.merge(I.query, d2) });
          }
          return m({ protocol: i2, hostname: c2, path: u2, query: d2 });
        }, d.viewImageStripMeta = function(e2) {
          f2({ instance: this, className: "ApiBaseFn", funcName: "viewImageStripMeta", hasCallback: false }), p.verifyOptions(e2, "url strip", "nos::viewImageStripMeta"), p.verifyParamType("strip", e2.strip, "boolean", "nos::viewImageStripMeta");
          var t2 = "stripmeta=" + (e2.strip ? 1 : 0), n2 = u(e2.url);
          return e2.url + n2 + t2;
        }, d.viewImageQuality = function(e2) {
          f2({ instance: this, className: "ApiBaseFn", funcName: "viewImageQuality", hasCallback: false }), p.verifyOptions(e2, "url quality", "nos::viewImageQuality"), p.verifyParamType("quality", e2.quality, "number", "nos::viewImageQuality"), p.verifyParamMin("quality", e2.quality, 0, "nos::viewImageQuality"), p.verifyParamMax("quality", e2.quality, 100, "nos::viewImageQuality");
          var t2 = "quality=" + Math.round(e2.quality), n2 = u(e2.url);
          return e2.url + n2 + t2;
        }, d.viewImageInterlace = function(e2) {
          f2({ instance: this, className: "ApiBaseFn", funcName: "viewImageInterlace", hasCallback: false }), p.verifyOptions(e2, "url", "nos::viewImageInterlace");
          var t2 = u(e2.url);
          return e2.url + t2 + "interlace=1";
        }, d.viewImageRotate = function(e2) {
          for (f2({ instance: this, className: "ApiBaseFn", funcName: "viewImageRotate", hasCallback: false }), p.verifyOptions(e2, "url angle", "nos::viewImageRotate"), p.verifyParamType("angle", e2.angle, "number", "nos::viewImageRotate"); e2.angle < 0; )
            e2.angle = e2.angle + 360;
          e2.angle = e2.angle % 360;
          var t2 = "rotate=" + Math.round(e2.angle), n2 = u(e2.url);
          return e2.url + n2 + t2;
        }, d.viewImageBlur = function(e2) {
          f2({ instance: this, className: "ApiBaseFn", funcName: "viewImageBlur", hasCallback: false }), p.verifyOptions(e2, "url radius sigma", "nos::viewImageBlur"), p.verifyParamType("radius", e2.radius, "number", "nos::viewImageBlur"), p.verifyParamMin("radius", e2.radius, 1, "nos::viewImageBlur"), p.verifyParamMax("radius", e2.radius, 50, "nos::viewImageBlur"), p.verifyParamType("sigma", e2.sigma, "number", "nos::viewImageBlur"), p.verifyParamMin("sigma", e2.sigma, 0, "nos::viewImageBlur");
          var t2 = "blur=" + Math.round(e2.radius) + "x" + Math.round(e2.sigma), n2 = u(e2.url);
          return e2.url + n2 + t2;
        }, d.viewImageCrop = function(e2) {
          f2({ instance: this, className: "ApiBaseFn", funcName: "viewImageCrop", hasCallback: false }), p.verifyOptions(e2, "url x y width height", "nos::viewImageCrop"), p.verifyParamType("x", e2.x, "number", "nos::viewImageCrop"), p.verifyParamMin("x", e2.x, 0, "nos::viewImageCrop"), p.verifyParamType("y", e2.y, "number", "nos::viewImageCrop"), p.verifyParamMin("y", e2.y, 0, "nos::viewImageCrop"), p.verifyParamType("width", e2.width, "number", "nos::viewImageCrop"), p.verifyParamMin("width", e2.width, 0, "nos::viewImageCrop"), p.verifyParamType("height", e2.height, "number", "nos::viewImageCrop"), p.verifyParamMin("height", e2.height, 0, "nos::viewImageCrop");
          var t2 = "crop=" + Math.round(e2.x) + "_" + Math.round(e2.y) + "_" + Math.round(e2.width) + "_" + Math.round(e2.height), n2 = u(e2.url);
          return e2.url + n2 + t2;
        }, d.viewImageThumbnail = (r = { cover: "z", contain: "x", crop: "y" }, function(e2) {
          p.verifyOptions(e2, "url mode", "nos::viewImageThumbnail"), p.verifyParamValid("mode", e2.mode, i(r), "nos::viewImageThumbnail"), "contain" === e2.mode ? p.verifyParamAtLeastPresentOne(e2, "width height", "nos::viewImageThumbnail") : p.verifyOptions(e2, "width height", "nos::viewImageThumbnail"), p.undef(e2.width) && (e2.width = 0), p.undef(e2.height) && (e2.height = 0), p.verifyParamType("width", e2.width, "number", "nos::viewImageThumbnail"), p.verifyParamMin("width", e2.width, 0, "nos::viewImageThumbnail"), p.verifyParamType("height", e2.height, "number", "nos::viewImageThumbnail"), p.verifyParamMin("height", e2.height, 0, "nos::viewImageThumbnail");
          var t2 = Math.round(e2.width), n2 = Math.round(e2.height), o2 = "thumbnail=" + t2 + r[e2.mode] + n2;
          "crop" === e2.mode && p.notundef(e2.axis) && (p.undef(e2.axis.x) && (e2.axis.x = 5), p.undef(e2.axis.y) && (e2.axis.y = 5), p.verifyParamMin("axis.x", e2.axis.x, 0, "nos::viewImageThumbnail"), p.verifyParamMax("axis.x", e2.axis.x, 10, "nos::viewImageThumbnail"), p.verifyParamMin("axis.y", e2.axis.y, 0, "nos::viewImageThumbnail"), p.verifyParamMax("axis.y", e2.axis.y, 10, "nos::viewImageThumbnail"), o2 = o2 + "&axis=" + Math.round(e2.axis.x) + "_" + Math.round(e2.axis.y)), p.notundef(e2.enlarge) && (p.verifyParamType("enlarge", e2.enlarge, "boolean", "nos::viewImageThumbnail"), e2.enlarge && (o2 += "&enlarge=1"));
          var s2 = u(e2.url);
          return e2.url + s2 + o2;
        });
      }, function(e, t, n) {
        var r = n(634);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(635), s = n(637), i = Array.prototype, a = String.prototype;
        e.exports = function(e2) {
          var t2 = e2.includes;
          return e2 === i || r(i, e2) && t2 === i.includes ? o : "string" == typeof e2 || e2 === a || r(a, e2) && t2 === a.includes ? s : t2;
        };
      }, function(e, t, n) {
        n(636);
        var r = n(29);
        e.exports = r("Array").includes;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(163).includes, s = n(5), i = n(199);
        r({ target: "Array", proto: true, forced: s(function() {
          return !Array(1).includes();
        }) }, { includes: function(e2) {
          return o(this, e2, arguments.length > 1 ? arguments[1] : void 0);
        } }), i("includes");
      }, function(e, t, n) {
        n(638);
        var r = n(29);
        e.exports = r("String").includes;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(12), s = n(639), i = n(110), a = n(50), c = n(641), u = o("".indexOf);
        r({ target: "String", proto: true, forced: !c("includes") }, { includes: function(e2) {
          return !!~u(a(i(this)), a(s(e2)), arguments.length > 1 ? arguments[1] : void 0);
        } });
      }, function(e, t, n) {
        var r = n(640), o = TypeError;
        e.exports = function(e2) {
          if (r(e2))
            throw o("The method doesn't accept regular expressions");
          return e2;
        };
      }, function(e, t, n) {
        var r = n(28), o = n(65), s = n(21)("match");
        e.exports = function(e2) {
          var t2;
          return r(e2) && (void 0 !== (t2 = e2[s]) ? !!t2 : "RegExp" == o(e2));
        };
      }, function(e, t, n) {
        var r = n(21)("match");
        e.exports = function(e2) {
          var t2 = /./;
          try {
            "/./"[e2](t2);
          } catch (n2) {
            try {
              return t2[r] = false, "/./"[e2](t2);
            } catch (e3) {
            }
          }
          return false;
        };
      }, function(e, t, n) {
        var r = n(22), o = n(8), s = n(7), i = n(306), a = n(0), c = n(77).fn, u = n(11), l2 = n(25).reportAPI;
        function m(e2, t2, n2, r2) {
          var o2 = false, i2 = "";
          if (1 === n2 ? s(e2).call(e2, t2) >= 0 && (o2 = true, i2 = t2) : 2 === n2 && (i2 = new RegExp(t2, "g")).test(e2) && (o2 = true), o2 && "" !== i2)
            switch (r2) {
              case 1:
                return e2.replace(i2, "**");
              case 2:
                return { code: 2 };
              case 3:
                return { code: 3 };
            }
          return e2;
        }
        function p(e2, t2) {
          for (var n2 = t2.match, o2 = t2.operate, s2 = e2, a2 = 0; a2 < i(t2).length; a2++) {
            var c2 = i(t2)[a2], u2 = c2.match || n2, l3 = c2.operate || o2;
            try {
              if (s2 = m(s2, c2.key, u2, l3), "object" === r(s2))
                return s2;
            } catch (e3) {
              this.logger.warn("misc::filterContent: js cannot parse this regexp ", e3);
            }
          }
          return s2;
        }
        c.uploadSdkLogUrl = function(e2) {
          return a.verifyOptions(e2, "url", "misc::uploadSdkLogUrl"), this.cbAndSendCmd("uploadSdkLogUrl", e2);
        }, c.getClientAntispamLexicon = function(e2) {
          var t2 = this;
          (e2 = e2 || {}).done = l2({ instance: this, className: "ApiBaseFn", funcName: "getClientAntispamLexicon", done: e2.done });
          var n2 = (e2 = e2 || {}).done;
          n2 instanceof Function || (n2 = function() {
          }), e2 = { clientAntispam: { version: 0 } };
          var r2 = this;
          if (u.hasLocalStorage && localStorage.getItem("antispamLexicon") && "{}" !== localStorage.getItem("antispamLexicon"))
            try {
              r2.antispamLexicon = JSON.parse(localStorage.getItem("antispamLexicon"));
            } catch (e3) {
              this.logger.error("JSON parse antispamLexicon error", e3);
            }
          r2.antispamLexicon && n2.call(this, null, { clientAntispam: r2.antispamLexicon }), this.protocol.sendCmd("getClientAntispam", e2, function(e3, s2, i2) {
            e3 ? (r2.protocol.logger.error("misc::getClientAntispamLexicon:", e3), n2.call(t2, e3, {})) : (u.hasLocalStorage && localStorage.setItem("antispamLexicon", o(i2.clientAntispam)), r2.antispamLexicon || n2.call(t2, null, i2), r2.antispamLexicon = i2.clientAntispam || {});
          });
        }, c.filterClientAntispam = function(e2) {
          l2({ instance: this, className: "ApiBaseFn", funcName: "filterClientAntispam", hasCallback: false });
          var t2 = e2.content;
          if (!t2)
            return { code: 404, errmsg: "待反垃圾文本content不存在" };
          var n2 = this.antispamLexicon && this.antispamLexicon.thesaurus;
          if (!n2)
            return { code: 404, errmsg: "没有反垃圾词库或者词库格式不合法" };
          try {
            n2 = JSON.parse(n2).thesaurus;
          } catch (e3) {
            return this.protocol.logger.error("misc::filterClientAntispam: parse thesaurus error"), { code: 500, errmsg: "反垃圾词库格式不合法" };
          }
          for (var o2 = t2, s2 = 0; s2 < n2.length; s2++)
            if (o2 = p.call(this, o2, n2[s2]), "object" === r(o2)) {
              if (2 === o2.code)
                return { code: 200, type: 2, errmsg: "建议拒绝发送", content: t2, result: "" };
              if (3 === o2.code)
                return { code: 200, type: 3, errmsg: "建议服务器处理反垃圾，发消息带上字段clientAntiSpam", content: t2, result: t2 };
            }
          return o2 === t2 ? { code: 200, type: 0, errmsg: "", content: t2, result: o2 } : { code: 200, type: 1, errmsg: "已对特殊字符做了过滤", content: t2, result: o2 };
        }, c.getServerTime = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "ApiBaseFn", funcName: "getServerTime", done: e2.done }), this.processCallback(e2), this.sendCmd("getServerTime", {}, e2.callback);
        }, c.getNosAccessToken = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "ApiBaseFn", funcName: "getNosAccessToken", done: e2.done }), a.verifyOptions(e2, "url", "misc::getNosAccessToken"), this.processCallback(e2);
          var t2 = { url: e2.url };
          e2.userAgent && (t2.userAgent = e2.userAgent), e2.ext && (t2.ext = e2.ext), this.sendCmd("getNosAccessToken", { nosAccessTokenTag: t2 }, function(t3, n2, r2) {
            var o2 = r2 && r2.nosAccessTokenTag && r2.nosAccessTokenTag.token, i2 = e2.url, a2 = o2 ? { token: o2, resUrl: -1 !== s(i2).call(i2, "?") ? i2 + "&token=" + o2 : i2 + "?token=" + o2 } : {};
            e2.done(t3, a2);
          });
        }, c.deleteNosAccessToken = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "ApiBaseFn", funcName: "deleteNosAccessToken", done: e2.done }), a.verifyOptions(e2, "token", "misc::deleteNosAccessToken"), this.processCallback(e2), this.sendCmd("deleteNosAccessToken", { nosAccessTokenTag: { token: e2.token } }, e2.callback);
        };
      }, function(e, t, n) {
        n(69);
        var r = n(67), o = n(30), s = n(19), i = n(644), a = Array.prototype, c = { DOMTokenList: true, NodeList: true };
        e.exports = function(e2) {
          var t2 = e2.keys;
          return e2 === a || s(a, e2) && t2 === a.keys || o(c, r(e2)) ? i : t2;
        };
      }, function(e, t, n) {
        var r = n(645);
        e.exports = r;
      }, function(e, t, n) {
        n(86), n(100);
        var r = n(29);
        e.exports = r("Array").keys;
      }, function(e, t, n) {
        var r = n(22), o = n(3), s = n(9), i = n(8), a = n(77).fn, c = n(0), u = n(193), l2 = n(287), m = n(25).reportAPI;
        a.signalingCreate = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t2 = e2.type, n2 = e2.channelName, r2 = e2.ext;
          return c.verifyOptions(e2, "type", "api::signalling"), this.sendCmdUsePromise("signalingCreate", { avSignalTag: { type: t2, channelName: n2, ext: r2 } }).then(function(e3) {
            var t3 = e3.avSignalTag;
            return o.resolve(t3);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        }, a.signalingDelay = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          return c.verifyOptions(e2, "channelId", "api::signalling"), this.sendCmdUsePromise("signalingDelay", { avSignalTag: e2 }).then(function(e3) {
            var t2 = e3.avSignalTag;
            return o.resolve(t2);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        }, a.signalingClose = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t2 = e2.offlineEnabled;
          return c.verifyOptions(e2, "channelId", "api::signalling"), this.sendCmdUsePromise("signalingClose", { avSignalTag: c.merge(e2, { isSave: true === t2 ? 1 : 0 }) }).then(function(e3) {
            var t3 = e3.avSignalTag;
            return t3.offlineEnabled = 1 === t3.isSave, delete t3.isSave, o.resolve(t3);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        }, a.signalingJoin = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t2 = e2.offlineEnabled;
          return c.verifyOptions(e2, "channelId", "api::signalling"), this.sendCmdUsePromise("signalingJoin", { avSignalTag: c.merge(e2, { isSave: true === t2 ? 1 : 0 }) }).then(function(e3) {
            var t3, n2 = e3.avSignalTag, r2 = n2.members;
            "string" == typeof n2.members && (r2 = s(t3 = JSON.parse(n2.members)).call(t3, function(e4) {
              return l2.parseAvSignalMember(e4);
            }));
            return n2.members = r2, o.resolve(n2);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        }, a.signalingLeave = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t2 = e2.offlineEnabled;
          return c.verifyOptions(e2, "channelId", "api::signalling"), this.sendCmdUsePromise("signalingLeave", { avSignalTag: c.merge(e2, { isSave: true === t2 ? 1 : 0 }) }).then(function(e3) {
            var t3 = e3.avSignalTag;
            return t3.offlineEnabled = 1 === t3.isSave, delete t3.isSave, o.resolve(t3);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        }, a.signalingGetChannelInfo = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t2 = e2.channelName;
          return c.verifyOptions(e2, "channelName", "api::signalling"), this.sendCmdUsePromise("signalingGetChannelInfo", { avSignalTag: { channelName: t2 } }).then(function(e3) {
            var t3, n2 = e3.avSignalTag, r2 = n2.members;
            "string" == typeof n2.members && (r2 = s(t3 = JSON.parse(n2.members)).call(t3, function(e4) {
              return l2.parseAvSignalMember(e4);
            }));
            return n2.members = r2, o.resolve(n2);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        }, a.signalingInvite = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t2 = e2.account, n2 = e2.offlineEnabled, s2 = e2.pushInfo, a2 = void 0 === s2 ? {} : s2;
          c.verifyOptions(e2, "channelId requestId account", "api::signalling"), "object" === r(a2.pushPayload) && (a2.pushPayload = i(a2.pushPayload));
          var u2 = c.merge(e2, a2, { to: t2, isSave: true === n2 ? 1 : 0, needPush: true === a2.needPush ? 1 : 0, needBadge: false === a2.needBadge ? 0 : 1 });
          return this.sendCmdUsePromise("signalingInvite", { avSignalTag: u2 }).then(function(e3) {
            var t3 = e3.avSignalTag;
            return t3.offlineEnabled = 1 === t3.isSave, t3.needBadge = 1 === t3.needBadge, t3.needPush = 1 === t3.needPush, delete t3.isSave, o.resolve(t3);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        }, a.signalingCancel = function(e2) {
          var t2 = e2.account, n2 = e2.offlineEnabled;
          return c.verifyOptions(e2, "channelId requestId account", "api::signalling"), this.sendCmdUsePromise("signalingCancel", { avSignalTag: c.merge(e2, { to: t2, isSave: true === n2 ? 1 : 0 }) }).then(function(e3) {
            var t3 = e3.avSignalTag;
            return t3.offlineEnabled = 1 === t3.isSave, delete t3.isSave, o.resolve(t3);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        }, a.signalingCreateAndJoin = function(e2) {
          var t2 = this, n2 = m({ instance: this, className: "ApiBaseFn", funcName: "signalingCreateAndJoin", hasCallback: true }), r2 = e2.channelName, s2 = e2.uid, i2 = void 0 === s2 ? 0 : s2, a2 = e2.offlineEnabled, u2 = void 0 === a2 || a2, l3 = e2.attachExt, p = void 0 === l3 ? "" : l3;
          return this.signalingCreate(e2).catch(function(e3) {
            return 10405 === e3.code ? (t2.logger.warn("api::avSignal:signalingCall room already exists:", e3), t2.signalingGetChannelInfo({ channelName: r2 })) : o.reject(e3);
          }).then(function(n3) {
            var r3 = { channelId: n3.channelId, offlineEnabled: u2, attachExt: p, nertcChannelName: e2.nertcChannelName, nertcTokenTtl: e2.nertcTokenTtl, nertcJoinRoomQueryParamMap: e2.nertcJoinRoomQueryParamMap };
            return i2 && c.merge(r3, { uid: i2 }), t2.signalingJoin(r3);
          }).then(function(e3) {
            return "function" == typeof n2 && n2(void 0), e3;
          }).catch(function(e3) {
            throw "function" == typeof n2 && n2(e3), e3;
          });
        }, a.signalingCall = function(e2) {
          var t2 = this, n2 = m({ instance: this, className: "ApiBaseFn", funcName: "signalingCall", hasCallback: true }), r2 = e2.account, o2 = e2.offlineEnabled, s2 = e2.requestId;
          c.verifyOptions(e2, "type requestId account", "api::signalling");
          var i2 = "";
          return this.signalingCreateAndJoin(e2).then(function(n3) {
            i2 = n3.channelId || i2, t2.logger.info("api::avSignal:signalingCall join:", i2);
            var a2 = { channelId: i2, account: r2, requestId: s2, offlineEnabled: o2, attachExt: e2.attachExt || "", pushInfo: e2.pushInfo || {}, nertcTokenTtl: n3.nertcTokenTtl, nertcToken: n3.nertcToken };
            return t2.signalingInvite(a2);
          }).then(function(e3) {
            return "function" == typeof n2 && n2(void 0), e3;
          }).catch(function(e3) {
            throw "function" == typeof n2 && n2(e3), e3;
          });
        }, a.signalingReject = function(e2) {
          var t2 = e2.account, n2 = e2.offlineEnabled;
          return c.verifyOptions(e2, "channelId requestId account", "api::signalling"), this.sendCmdUsePromise("signalingReject", { avSignalTag: c.merge(e2, { to: t2, isSave: true === n2 ? 1 : 0 }) }).then(function(e3) {
            var t3 = e3.avSignalTag;
            return t3.offlineEnabled = 1 === t3.isSave, delete t3.isSave, o.resolve(t3);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        }, a.signalingAccept = function(e2) {
          var t2 = this, n2 = e2.account, r2 = e2.offlineEnabled;
          return c.verifyOptions(e2, "channelId requestId account", "api::signalling"), this.sendCmdUsePromise("signalingAccept", { avSignalTag: c.merge(e2, { to: n2, isSave: true === r2 ? 1 : 0 }) }).then(function(e3) {
            var t3 = e3.avSignalTag;
            return t3.offlineEnabled = 1 === t3.isSave, delete t3.isSave, o.resolve(t3);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          }).then(function(n3) {
            if (e2.autoJoin) {
              var r3 = { channelId: e2.channelId, offlineEnabled: e2.offlineEnabled, attachExt: e2.joinAttachExt, uid: e2.uid, nertcChannelName: e2.nertcChannelName, nertcTokenTtl: e2.nertcTokenTtl, nertcJoinRoomQueryParamMap: e2.nertcJoinRoomQueryParamMap };
              return t2.signalingJoin(r3);
            }
            return n3;
          });
        }, a.signalingControl = function(e2) {
          var t2 = e2.account;
          return c.verifyOptions(e2, "channelId", "api::signalling"), this.sendCmdUsePromise("signalingControl", { avSignalTag: c.merge(e2, t2 ? { to: t2 } : {}) }).then(function(e3) {
            var t3 = e3.avSignalTag;
            return o.resolve(t3);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        }, a.signalingSync = function() {
          return this.sendCmdUsePromise("sync", { sync: { avSignal: 0 } }).then(function(e2) {
            var t2 = e2.avSignalTag;
            return o.resolve(t2);
          }).catch(function(e2) {
            return o.reject(l2.parseAvSignalError(e2));
          });
        }, a.signalingMarkMsgRead = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          m({ instance: this, className: "ApiBaseFn", funcName: "signalingMarkMsgRead", hasCallback: false }), c.verifyOptions(e2, "msgid", "api::signalling");
          var t2, n2 = u.idMap.avSignal;
          return t2 = "string" == typeof e2.msgid ? [e2.msgid] : e2.msgid, this.sendCmd("batchMarkRead", { sid: n2.id, cid: n2.signalingNotify, ids: t2 });
        }, a.signalingCallEx = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t2 = e2.account, n2 = e2.offlineEnabled, a2 = e2.pushInfo, u2 = void 0 === a2 ? {} : a2;
          "object" === r(u2.pushPayload) && (u2.pushPayload = i(u2.pushPayload)), c.verifyOptions(e2, "type", "api::signalling"), c.verifyOptions(e2, "account", "api::signalling");
          var m2 = c.merge(e2, u2, { to: t2, isSave: true === n2 ? 1 : 0, needPush: true === u2.needPush ? 1 : 0, needBadge: false === u2.needBadge ? 0 : 1 });
          return this.sendCmdUsePromise("signalingCallEx", { avSignalTag: m2 }).then(function(e3) {
            var t3, n3 = e3.avSignalTag, r2 = n3.members;
            "string" == typeof n3.members && (r2 = s(t3 = JSON.parse(n3.members)).call(t3, function(e4) {
              return l2.parseAvSignalMember(e4);
            }));
            return n3.members = r2, o.resolve(n3);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        }, a.signalingJoinAndAccept = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t2 = e2.channelId, n2 = e2.attachExt, r2 = e2.offlineEnabled, i2 = e2.uid, a2 = e2.account, u2 = e2.requestId, m2 = e2.nertcChannelName, p = e2.nertcTokenTtl, d = e2.nertcJoinRoomQueryParamMap;
          return c.verifyOptions(e2, "channelId", "api::signalling"), c.verifyOptions(e2, "account", "api::signalling"), c.verifyOptions(e2, "requestId", "api::signalling"), this.sendCmdUsePromise("signalingJoinAndAccept", { avSignalTag: { channelId: t2, attachExt: n2, isSave: true === r2 ? 1 : 0, uid: i2, to: a2, requestId: u2, nertcChannelName: m2, nertcTokenTtl: p, nertcJoinRoomQueryParamMap: d } }).then(function(e3) {
            var t3, n3 = e3.avSignalTag, r3 = n3.members;
            "string" == typeof n3.members && (r3 = s(t3 = JSON.parse(n3.members)).call(t3, function(e4) {
              return l2.parseAvSignalMember(e4);
            }));
            return n3.members = r3, o.resolve(n3);
          }).catch(function(e3) {
            return o.reject(l2.parseAvSignalError(e3));
          });
        };
      }, function(e, t, n) {
        var r = n(51), o = n(37), s = n(4), i = n(52), a = n(16), c = n(53), u = n(2), l2 = n(54), m = n(55), p = n(43), d = n(92), f2 = n(93);
        function g(e2, t2) {
          var n2 = s(e2);
          if (i) {
            var r2 = i(e2);
            t2 && (r2 = a(r2).call(r2, function(t3) {
              return c(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        n(0);
        var h = { user_id: "", trace_id: "", action: 7, exception_service: 6, duration: 0, start_time: 0, state: 1, extension: [] };
        e.exports = function() {
          "use strict";
          function e2(t2) {
            d(this, e2), this.clientProto = t2, this.reset();
          }
          return f2(e2, [{ key: "reset", value: function() {
            this.traceData = o({}, h), this.traceData.extension = [];
          } }, { key: "start", value: function(e3) {
            this.reset(), o(this.traceData, e3), this.traceData.user_id = this.clientProto.account, this.traceData.start_time = (/* @__PURE__ */ new Date()).getTime();
          } }, { key: "update", value: function(e3) {
            var t2 = this.clientProto.checkNetworkAvailable();
            this.traceData.extension.push(function(e4) {
              for (var t3 = 1; t3 < arguments.length; t3++) {
                var n2, o2, s2 = null != arguments[t3] ? arguments[t3] : {};
                t3 % 2 ? u(n2 = g(Object(s2), true)).call(n2, function(t4) {
                  r(e4, t4, s2[t4]);
                }) : l2 ? m(e4, l2(s2)) : u(o2 = g(Object(s2))).call(o2, function(t4) {
                  p(e4, t4, c(s2, t4));
                });
              }
              return e4;
            }({ code: 0, description: "", foreground: true, foreg_backg_switch: false, net_type: 0, net_connect: t2 }, e3));
          } }, { key: "end", value: function(e3) {
            var t2 = this.traceData.extension[0], n2 = this.traceData.extension[1];
            if (t2 && 0 === t2.operation_type && n2 && 1 === n2.operation_type) {
              var r2 = t2.net_type !== n2.net_type || t2.net_connect !== n2.net_connect;
              if (e3 || !r2)
                return this.traceData.duration = (/* @__PURE__ */ new Date()).getTime() - this.traceData.start_time, this.clientProto.reporter.report("exceptions", this.traceData), void this.reset();
              this.reset();
            } else
              this.reset();
          } }]), e2;
        }();
      }, function(e, t, n) {
        var r = n(2), o = n(92), s = n(93), i = n(62).getPromiseWithAbort, a = function() {
          "use strict";
          function e2() {
            o(this, e2), this.abortFns = [];
          }
          return s(e2, [{ key: "add", value: function(e3) {
            var t2 = i(e3);
            return this.abortFns.push(t2.abort), t2.promise;
          } }, { key: "clear", value: function() {
            var e3;
            r(e3 = this.abortFns).call(e3, function(e4) {
              return e4("Request aborted");
            }), this.abortFns = [];
          } }, { key: "destroy", value: function() {
            this.clear();
          } }]), e2;
        }();
        e.exports = a;
      }, function(e, t, n) {
        var r = n(57), o = n(58), s = n(2), i = n(71), a = n(3), c = n(9), u = n(60), l2 = n(15), m = n(6), p = n(8), d = n(26), f2 = n(92), g = n(93), h = n(0), y = n(11), v = n(64), b = n(289), T = n(41);
        e.exports = function() {
          "use strict";
          function e2(t3) {
            var n2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : { socketConcurrent: 1 };
            f2(this, e2), this.clientProto = t3, this.logger = t3.logger, this.urls = [], this.sockets = [], this.config = n2;
          }
          var t2;
          return g(e2, [{ key: "setConfig", value: function() {
            var e3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : { socketConcurrent: 1 };
            this.config = e3;
          } }, { key: "setUrls", value: function(e3) {
            this.urls = e3;
          } }, { key: "resetSockets", value: function() {
            var e3;
            s(e3 = this.sockets).call(e3, function(e4) {
              e4 && (e4.removeAllListenersX("info"), e4.disconnect());
            }), this.sockets = [];
          } }, { key: "connect", value: (t2 = o(r.mark(function e3() {
            var t3, n2, o2, u2 = this;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    if (this.clientProto.statusProtector.emit("auth/loginLifeCycleConnect"), 0 !== (n2 = i(t3 = this.urls).call(t3, 0, this.config.socketConcurrent)).length) {
                      e4.next = 4;
                      break;
                    }
                    throw new T("no_socket_url", 408, {});
                  case 4:
                    return e4.prev = 4, e4.next = 7, a.any(c(n2).call(n2, function(e5, t4) {
                      return u2.doConnect(e5, t4);
                    }));
                  case 7:
                    return e4.abrupt("return", e4.sent);
                  case 10:
                    throw e4.prev = 10, e4.t0 = e4.catch(4), s(o2 = e4.t0.errors).call(o2, function(e5, t4) {
                      u2.logger.warn("imsocket::connect failed ".concat(t4), e5);
                    }), e4.t0;
                  case 14:
                  case "end":
                    return e4.stop();
                }
            }, e3, this, [[4, 10]]);
          })), function() {
            return t2.apply(this, arguments);
          }) }, { key: "success", value: function(e3) {
            var t3;
            return s(t3 = this.sockets).call(t3, function(t4, n2) {
              e3 !== n2 && t4 && (t4.removeAllListenersX("info"), t4.disconnect());
            }), this.sockets[e3];
          } }, { key: "failed", value: function(e3) {
            var t3 = this.sockets[e3];
            t3 && (t3.removeAllListenersX("info"), t3.disconnect());
          } }, { key: "getTransport", value: function(e3) {
            var t3 = h.getGlobal();
            if ("undefined" == typeof window) {
              var n2 = e3.split(":");
              return t3 && !t3.location && n2.length > 1 && (t3.location = { protocol: n2.shift(), port: n2.pop(), hostname: n2.join("") }), ["websocket"];
            }
            return this.clientProto.options.transports ? this.clientProto.options.transports : "IE" !== v.name || t3.WebSocket ? ["websocket"] : ["xhr-polling"];
          } }, { key: "doConnect", value: function(e3, t3) {
            var n2 = this;
            if (this.clientProto && true === this.clientProto.__destroyed)
              return a.reject("instance has been destroyed");
            var r2 = this.getTransport(e3), o2 = u();
            return new a(function(s2, i2) {
              var a2, c2, u2, f3;
              try {
                f3 = b.connect(e3, { transports: l2(r2).call(r2), reconnect: false, "force new connection": true, "connect timeout": y.connectTimeout, needToXHR: "boolean" == typeof n2.clientProto.options.needToXHR ? n2.clientProto.options.needToXHR : y.needToXHR }), n2.sockets[t3] = f3;
              } catch (r3) {
                var g2;
                return n2.logger.warn(m(g2 = "link::connectToUrl ".concat(t3, ":io.connect caught exception: ")).call(g2, r3 && r3.message), r3), void i2(new T("socket_error", 408, { startTime: o2, url: e3, reason: r3.message, rawError: r3 }));
              }
              n2.logger.info(m(a2 = m(c2 = "link::connectToUrl ".concat(t3, ": socket url: ")).call(c2, e3, ", transports: ")).call(a2, p(r2))), f3.on("connect", function() {
                n2.logger.info("link::connectToUrl ".concat(t3, " success")), n2.success(t3), n2.clientProto.reporterHookLinkKeep.start({ trace_id: f3.socket.sessionid }), n2.clientProto.reporterHookLinkKeep.update({ code: 0, description: "", operation_type: 0, target: e3 }), n2.clientProto.url = e3, s2(f3);
              }), f3.on("handshake_failed", function() {
                n2.failed(t3), i2(new T("handshake_failed", 408, { startTime: o2, url: e3 }));
              }), f3.on("connect_failed", function(r3) {
                n2.failed(t3), i2(new T("connect_failed", 408, { startTime: o2, url: e3, reason: r3 }));
              }), f3.on("error", function() {
                var r3, s3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "", a3 = arguments.length > 1 ? arguments[1] : void 0, c3 = a3 && a3.message || s3;
                n2.logger.warn(m(r3 = "link::onSocketError ".concat(t3, ": reason is ")).call(r3, c3, ", error is "), a3), i2(new T("socket_error", 408, { startTime: o2, url: e3, reason: c3, rawError: a3 }));
              }), f3.on("info", function(e4, r3) {
                var o3, s3;
                r3 ? n2.logger.info(m(o3 = "link::onSocketInfo ".concat(t3, ": ")).call(o3, e4, ", extraInfo:"), r3) : n2.logger.info(m(s3 = "link::onSocketInfo ".concat(t3, ": ")).call(s3, e4, "."));
              }), f3.on("message", d(u2 = n2.clientProto.onMessage).call(u2, n2.clientProto)), f3.on("disconnect", function(t4) {
                n2.logger.warn("link::onSocketDisconnect: socket url: ".concat(e3, ", disconnected"), t4), n2.clientProto.hasLogin = false, n2.clientProto.doLogout ? n2.clientProto.logout() : n2.clientProto.onDisconnect("link::socketDisconnect"), n2.clientProto.statusProtector.emit("auth/loginLifeCycleDisconnected", new Error("disconnect due to internal reasons"));
              }), f3.on("websocketOnclose", function(t4) {
                n2.clientProto.reporterHookLinkKeep.update({ code: t4 && t4.code || 0, description: t4 && t4.reason || "", operation_type: 1, target: e3 }), n2.clientProto.reporterHookLinkKeep.end(false);
              });
            });
          } }, { key: "destroy", value: function() {
            this.urls = [], this.resetSockets();
          } }]), e2;
        }();
      }, function(e, t, n) {
        var r = n(22).default, o = n(140), s = n(155), i = n(189), a = n(283), c = n(651), u = n(191), l2 = n(288), m = n(662), p = n(309);
        function d() {
          "use strict";
          e.exports = d = function() {
            return t2;
          }, e.exports.__esModule = true, e.exports.default = e.exports;
          var t2 = {}, n2 = Object.prototype, f2 = n2.hasOwnProperty, g = o || function(e2, t3, n3) {
            e2[t3] = n3.value;
          }, h = "function" == typeof s ? s : {}, y = h.iterator || "@@iterator", v = h.asyncIterator || "@@asyncIterator", b = h.toStringTag || "@@toStringTag";
          function T(e2, t3, n3) {
            return o(e2, t3, { value: n3, enumerable: true, configurable: true, writable: true }), e2[t3];
          }
          try {
            T({}, "");
          } catch (e2) {
            T = function(e3, t3, n3) {
              return e3[t3] = n3;
            };
          }
          function S(e2, t3, n3, r2) {
            var o2 = t3 && t3.prototype instanceof x ? t3 : x, s2 = i(o2.prototype), a2 = new F(r2 || []);
            return g(s2, "_invoke", { value: O(e2, n3, a2) }), s2;
          }
          function M(e2, t3, n3) {
            try {
              return { type: "normal", arg: e2.call(t3, n3) };
            } catch (e3) {
              return { type: "throw", arg: e3 };
            }
          }
          t2.wrap = S;
          var k = {};
          function x() {
          }
          function C() {
          }
          function I() {
          }
          var w = {};
          T(w, y, function() {
            return this;
          });
          var _ = a && a(a(D([])));
          _ && _ !== n2 && f2.call(_, y) && (w = _);
          var P = I.prototype = x.prototype = i(w);
          function A(e2) {
            var t3;
            c(t3 = ["next", "throw", "return"]).call(t3, function(t4) {
              T(e2, t4, function(e3) {
                return this._invoke(t4, e3);
              });
            });
          }
          function N(e2, t3) {
            var n3;
            g(this, "_invoke", { value: function(o2, s2) {
              function i2() {
                return new t3(function(n4, i3) {
                  !function n5(o3, s3, i4, a2) {
                    var c2 = M(e2[o3], e2, s3);
                    if ("throw" !== c2.type) {
                      var u2 = c2.arg, l3 = u2.value;
                      return l3 && "object" == r(l3) && f2.call(l3, "__await") ? t3.resolve(l3.__await).then(function(e3) {
                        n5("next", e3, i4, a2);
                      }, function(e3) {
                        n5("throw", e3, i4, a2);
                      }) : t3.resolve(l3).then(function(e3) {
                        u2.value = e3, i4(u2);
                      }, function(e3) {
                        return n5("throw", e3, i4, a2);
                      });
                    }
                    a2(c2.arg);
                  }(o2, s2, n4, i3);
                });
              }
              return n3 = n3 ? n3.then(i2, i2) : i2();
            } });
          }
          function O(e2, t3, n3) {
            var r2 = "suspendedStart";
            return function(o2, s2) {
              if ("executing" === r2)
                throw new Error("Generator is already running");
              if ("completed" === r2) {
                if ("throw" === o2)
                  throw s2;
                return U();
              }
              for (n3.method = o2, n3.arg = s2; ; ) {
                var i2 = n3.delegate;
                if (i2) {
                  var a2 = E(i2, n3);
                  if (a2) {
                    if (a2 === k)
                      continue;
                    return a2;
                  }
                }
                if ("next" === n3.method)
                  n3.sent = n3._sent = n3.arg;
                else if ("throw" === n3.method) {
                  if ("suspendedStart" === r2)
                    throw r2 = "completed", n3.arg;
                  n3.dispatchException(n3.arg);
                } else
                  "return" === n3.method && n3.abrupt("return", n3.arg);
                r2 = "executing";
                var c2 = M(e2, t3, n3);
                if ("normal" === c2.type) {
                  if (r2 = n3.done ? "completed" : "suspendedYield", c2.arg === k)
                    continue;
                  return { value: c2.arg, done: n3.done };
                }
                "throw" === c2.type && (r2 = "completed", n3.method = "throw", n3.arg = c2.arg);
              }
            };
          }
          function E(e2, t3) {
            var n3 = t3.method, r2 = e2.iterator[n3];
            if (void 0 === r2)
              return t3.delegate = null, "throw" === n3 && e2.iterator.return && (t3.method = "return", t3.arg = void 0, E(e2, t3), "throw" === t3.method) || "return" !== n3 && (t3.method = "throw", t3.arg = new TypeError("The iterator does not provide a '" + n3 + "' method")), k;
            var o2 = M(r2, e2.iterator, t3.arg);
            if ("throw" === o2.type)
              return t3.method = "throw", t3.arg = o2.arg, t3.delegate = null, k;
            var s2 = o2.arg;
            return s2 ? s2.done ? (t3[e2.resultName] = s2.value, t3.next = e2.nextLoc, "return" !== t3.method && (t3.method = "next", t3.arg = void 0), t3.delegate = null, k) : s2 : (t3.method = "throw", t3.arg = new TypeError("iterator result is not an object"), t3.delegate = null, k);
          }
          function R(e2) {
            var t3 = { tryLoc: e2[0] };
            1 in e2 && (t3.catchLoc = e2[1]), 2 in e2 && (t3.finallyLoc = e2[2], t3.afterLoc = e2[3]), this.tryEntries.push(t3);
          }
          function j2(e2) {
            var t3 = e2.completion || {};
            t3.type = "normal", delete t3.arg, e2.completion = t3;
          }
          function F(e2) {
            this.tryEntries = [{ tryLoc: "root" }], c(e2).call(e2, R, this), this.reset(true);
          }
          function D(e2) {
            if (e2) {
              var t3 = e2[y];
              if (t3)
                return t3.call(e2);
              if ("function" == typeof e2.next)
                return e2;
              if (!isNaN(e2.length)) {
                var n3 = -1, r2 = function t4() {
                  for (; ++n3 < e2.length; )
                    if (f2.call(e2, n3))
                      return t4.value = e2[n3], t4.done = false, t4;
                  return t4.value = void 0, t4.done = true, t4;
                };
                return r2.next = r2;
              }
            }
            return { next: U };
          }
          function U() {
            return { value: void 0, done: true };
          }
          return C.prototype = I, g(P, "constructor", { value: I, configurable: true }), g(I, "constructor", { value: C, configurable: true }), C.displayName = T(I, b, "GeneratorFunction"), t2.isGeneratorFunction = function(e2) {
            var t3 = "function" == typeof e2 && e2.constructor;
            return !!t3 && (t3 === C || "GeneratorFunction" === (t3.displayName || t3.name));
          }, t2.mark = function(e2) {
            return u ? u(e2, I) : (e2.__proto__ = I, T(e2, b, "GeneratorFunction")), e2.prototype = i(P), e2;
          }, t2.awrap = function(e2) {
            return { __await: e2 };
          }, A(N.prototype), T(N.prototype, v, function() {
            return this;
          }), t2.AsyncIterator = N, t2.async = function(e2, n3, r2, o2, s2) {
            void 0 === s2 && (s2 = l2);
            var i2 = new N(S(e2, n3, r2, o2), s2);
            return t2.isGeneratorFunction(n3) ? i2 : i2.next().then(function(e3) {
              return e3.done ? e3.value : i2.next();
            });
          }, A(P), T(P, b, "Generator"), T(P, y, function() {
            return this;
          }), T(P, "toString", function() {
            return "[object Generator]";
          }), t2.keys = function(e2) {
            var t3 = Object(e2), n3 = [];
            for (var r2 in t3)
              n3.push(r2);
            return m(n3).call(n3), function e3() {
              for (; n3.length; ) {
                var r3 = n3.pop();
                if (r3 in t3)
                  return e3.value = r3, e3.done = false, e3;
              }
              return e3.done = true, e3;
            };
          }, t2.values = D, F.prototype = { constructor: F, reset: function(e2) {
            var t3;
            if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = false, this.delegate = null, this.method = "next", this.arg = void 0, c(t3 = this.tryEntries).call(t3, j2), !e2)
              for (var n3 in this)
                "t" === n3.charAt(0) && f2.call(this, n3) && !isNaN(+p(n3).call(n3, 1)) && (this[n3] = void 0);
          }, stop: function() {
            this.done = true;
            var e2 = this.tryEntries[0].completion;
            if ("throw" === e2.type)
              throw e2.arg;
            return this.rval;
          }, dispatchException: function(e2) {
            if (this.done)
              throw e2;
            var t3 = this;
            function n3(n4, r3) {
              return s2.type = "throw", s2.arg = e2, t3.next = n4, r3 && (t3.method = "next", t3.arg = void 0), !!r3;
            }
            for (var r2 = this.tryEntries.length - 1; r2 >= 0; --r2) {
              var o2 = this.tryEntries[r2], s2 = o2.completion;
              if ("root" === o2.tryLoc)
                return n3("end");
              if (o2.tryLoc <= this.prev) {
                var i2 = f2.call(o2, "catchLoc"), a2 = f2.call(o2, "finallyLoc");
                if (i2 && a2) {
                  if (this.prev < o2.catchLoc)
                    return n3(o2.catchLoc, true);
                  if (this.prev < o2.finallyLoc)
                    return n3(o2.finallyLoc);
                } else if (i2) {
                  if (this.prev < o2.catchLoc)
                    return n3(o2.catchLoc, true);
                } else {
                  if (!a2)
                    throw new Error("try statement without catch or finally");
                  if (this.prev < o2.finallyLoc)
                    return n3(o2.finallyLoc);
                }
              }
            }
          }, abrupt: function(e2, t3) {
            for (var n3 = this.tryEntries.length - 1; n3 >= 0; --n3) {
              var r2 = this.tryEntries[n3];
              if (r2.tryLoc <= this.prev && f2.call(r2, "finallyLoc") && this.prev < r2.finallyLoc) {
                var o2 = r2;
                break;
              }
            }
            o2 && ("break" === e2 || "continue" === e2) && o2.tryLoc <= t3 && t3 <= o2.finallyLoc && (o2 = null);
            var s2 = o2 ? o2.completion : {};
            return s2.type = e2, s2.arg = t3, o2 ? (this.method = "next", this.next = o2.finallyLoc, k) : this.complete(s2);
          }, complete: function(e2, t3) {
            if ("throw" === e2.type)
              throw e2.arg;
            return "break" === e2.type || "continue" === e2.type ? this.next = e2.arg : "return" === e2.type ? (this.rval = this.arg = e2.arg, this.method = "return", this.next = "end") : "normal" === e2.type && t3 && (this.next = t3), k;
          }, finish: function(e2) {
            for (var t3 = this.tryEntries.length - 1; t3 >= 0; --t3) {
              var n3 = this.tryEntries[t3];
              if (n3.finallyLoc === e2)
                return this.complete(n3.completion, n3.afterLoc), j2(n3), k;
            }
          }, catch: function(e2) {
            for (var t3 = this.tryEntries.length - 1; t3 >= 0; --t3) {
              var n3 = this.tryEntries[t3];
              if (n3.tryLoc === e2) {
                var r2 = n3.completion;
                if ("throw" === r2.type) {
                  var o2 = r2.arg;
                  j2(n3);
                }
                return o2;
              }
            }
            throw new Error("illegal catch attempt");
          }, delegateYield: function(e2, t3, n3) {
            return this.delegate = { iterator: D(e2), resultName: t3, nextLoc: n3 }, "next" === this.method && (this.arg = void 0), k;
          } }, t2;
        }
        e.exports = d, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(652);
      }, function(e, t, n) {
        e.exports = n(653);
      }, function(e, t, n) {
        var r = n(654);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(230);
        e.exports = r;
      }, function(e, t, n) {
        e.exports = n(656);
      }, function(e, t, n) {
        var r = n(657);
        n(658), n(659), n(660), n(661), e.exports = r;
      }, function(e, t, n) {
        var r = n(232);
        e.exports = r;
      }, function(e, t, n) {
        n(233);
      }, function(e, t, n) {
        n(247);
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(70), s = n(104);
        r({ target: "Promise", stat: true, forced: true }, { try: function(e2) {
          var t2 = o.f(this), n2 = s(e2);
          return (n2.error ? t2.reject : t2.resolve)(n2.value), t2.promise;
        } });
      }, function(e, t, n) {
        n(248);
      }, function(e, t, n) {
        e.exports = n(663);
      }, function(e, t, n) {
        e.exports = n(664);
      }, function(e, t, n) {
        var r = n(665);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(276);
        e.exports = r;
      }, function(e, t, n) {
        e.exports = n(667);
      }, function(e, t, n) {
        var r = n(668);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(251);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(57), o = n(58), s = n(2), i = n(6), a = n(15), c = n(71), u = n(24), l2 = n(3), m = n(26), p = n(78).fn, d = n(41), f2 = n(670), g = n(11), h = n(0), y = n(671);
        function v() {
          this.logger.log("offlineListener enter"), this.forceDisconnect(), this.statusProtector.emit("auth/loginLifeCycleDisconnected", new Error("disconnect due to network offline")), this.options.ondisconnect && this.options.ondisconnect({ code: "offlineListener", callFunc: "link::offlineListener", message: "offlineListener disconnect" }), this.onDisconnect("link::offlineListener", "broken");
        }
        function b() {
          var e2 = this;
          this.logger.log("onlineListener start"), this && this.isConnected() && !this.connecting ? (this.stopHeartbeat(), this.sendCmd("heartbeat", null, function(t2) {
            if (t2) {
              e2.logger.info("onlineListener heartbeat detect error", t2);
              try {
                e2.forceDisconnect(), e2.onDisconnect("link::onHeartbeat", "broken");
              } catch (t3) {
                e2.logger.info("onlineListener heartbeat websocket.onclose", t3);
              }
            } else
              e2.logger.log("onlineListener heartbeat detect success");
          })) : this.logger.log("onlineListener disconnected or connecting", this && this.isConnected(), this.connecting);
        }
        p.initConnect = function() {
          this.socket = null, this.retryCount = 0, this.connecting = false, this.shouldReconnect = true, this.hasNotifyDisconnected = false, this.doLogout = false;
        }, p.resetConnect = function() {
          var e2 = this.options;
          h.notundef(e2.needReconnect) ? (h.verifyParamType("needReconnect", e2.needReconnect, "boolean", "link::resetConnect"), this.needReconnect = e2.needReconnect) : this.needReconnect = true, this.logger.info("link::resetConnect: needReconnect ".concat(this.needReconnect)), h.notundef(e2.reconnectionAttempts) && h.verifyParamType("reconnectionAttempts", e2.reconnectionAttempts, "number", "link::resetConnect"), h.notundef(e2.noCacheLinkUrl) && h.verifyParamType("noCacheLinkUrl", e2.noCacheLinkUrl, "boolean", "link::resetConnect"), this.reconnectionAttempts = "number" == typeof e2.reconnectionAttempts ? e2.reconnectionAttempts : 1 / 0, this.backoff = new f2({ min: g.reconnectionDelay, max: g.reconnectionDelayMax, jitter: g.reconnectionJitter });
        }, p.reportTCPException = function(e2) {
          var t2 = this;
          s(e2).call(e2, function(e3, n2) {
            var r2, o2 = e3.event, s2 = void 0 === o2 ? {} : o2, a2 = e3.message, c2 = s2.startTime, u2 = s2.code, l3 = s2.reason, m2 = s2.url, p2 = "";
            "handshake_failed" === a2 ? p2 = "handshake_failed" : "connect_failed" === a2 ? p2 = l3 ? "connect_failed:".concat(l3) : "connect_failed" : "socket_error" === a2 && (p2 = l3 ? "socket.io error:".concat(l3) : "socket.io error"), t2.logger.warn(i(r2 = "connect::failed ".concat(n2, ", ")).call(r2, p2), e3), t2.reporter.reportTraceStart("exceptions", { user_id: t2.options.account, trace_id: h.get(self, "socket.socket.sessionid"), start_time: c2, action: 0, exception_service: 6 }), t2.reporter.reportTraceUpdateV2("exceptions", { code: u2, description: a2, operation_type: 0, target: m2, net_connect: t2.checkNetworkAvailable() }), t2.reporter.reportTraceEnd("exceptions", 1);
          });
        }, p.connect = o(r.mark(function e2() {
          var t2, n2, o2, s2, i2;
          return r.wrap(function(e3) {
            for (; ; )
              switch (e3.prev = e3.next) {
                case 0:
                  if (o2 = this, clearTimeout(o2.connectTimer), !o2.isConnected()) {
                    e3.next = 5;
                    break;
                  }
                  return o2.logger.warn("link::connect: already connected"), e3.abrupt("return");
                case 5:
                  if (!o2.connecting) {
                    e3.next = 8;
                    break;
                  }
                  return o2.logger.warn("link::connect: already connecting"), e3.abrupt("return");
                case 8:
                  if (o2.connecting = true, o2.hasNotifyDisconnected = false, o2.shouldReconnect = true, o2.socket && o2.forceDisconnect(), o2.logger.info("link::connect: connect to new socket, autoconnect is " + o2.autoconnect), "string" == typeof o2.options.socketUrl && (o2.logger.info("link::connect: try to options.socketUrl ", o2.options.socketUrl), o2.socketUrls = [o2.options.socketUrl]), e3.prev = 14, o2.socketUrls && o2.socketUrls.length > 0) {
                    e3.next = 20;
                    break;
                  }
                  return e3.next = 18, o2.refreshSocketUrl();
                case 18:
                  o2.socketUrls = y(o2.socketUrls), o2.logger.info("link::connect: refreshSocketUrl success, socketConcurrent ".concat(o2.imsocket.config.socketConcurrent), o2.socketUrls);
                case 20:
                  e3.next = 28;
                  break;
                case 22:
                  return e3.prev = 22, e3.t0 = e3.catch(14), o2.logger.warn("connect::refreshSocketUrl: catch exception,", e3.t0 && e3.t0.message), o2.connecting = false, this.options.ondisconnect({ code: "initConnectFail", callFunc: "ProtocolFn.connect", message: "refresh socket url fail" }), e3.abrupt("return");
                case 28:
                  return o2.imsocket.resetSockets(), o2.imsocket.setUrls(a(t2 = o2.socketUrls).call(t2, 0)), c(n2 = o2.socketUrls).call(n2, 0, o2.imsocket.config.socketConcurrent), e3.prev = 31, e3.next = 34, o2.imsocket.connect();
                case 34:
                  o2.socket = e3.sent, o2.onConnect(), e3.next = 46;
                  break;
                case 38:
                  e3.prev = 38, e3.t1 = e3.catch(31), i2 = "", e3.t1.errors && (o2.reportTCPException(e3.t1.errors), s2 = e3.t1.errors[0]), "handshake_failed" === s2.message ? (o2.onHandshakeFailed(s2.event.startTime, s2.event.url), i2 = "link::onHandshakeFailed") : "connect_failed" === s2.message ? (o2.onConnectFailed(s2.event.reason, s2.event.startTime, s2.event.url), i2 = "link::onConnectFailed") : "socket_error" === s2.message ? (o2.onSocketError(s2.event.reason, s2.event.startTime, s2.event.url), i2 = "link::onSocketError") : (i2 = "link::otherFailed", o2.logger.warn("link::otherFailed", s2)), this.statusProtector.emit("auth/loginLifeCycleConnectFail", new Error("".concat(i2, " 408"))), o2.connecting = false, o2.willReconnect() ? o2.onDisconnect(i2) : this.options.ondisconnect({ code: "initConnectFail", callFunc: "ProtocolFn.connect", message: "init connect fail" });
                case 46:
                case "end":
                  return e3.stop();
              }
          }, e2, this, [[14, 22], [31, 38]]);
        })), p.isConnected = function() {
          return !!this.socket && !!this.socket.socket && this.socket.socket.connected;
        }, p.disconnect = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : function() {
          }, t2 = this;
          function n2(n3) {
            clearTimeout(t2.disconnectCallbackTimer), t2.msgAckBufferManager && t2.msgAckBufferManager.clear(), t2.roamingMsgSyncDoneBufferManager && t2.roamingMsgSyncDoneBufferManager.clear(), t2.statusProtector.emit("auth/loginLifeCycleDisconnected", new Error("disconnect due to active action")), t2.statusProtector.emit("auth/loginLifeCycleLogout"), u(function() {
              e2(n3);
            }, 0);
          }
          clearTimeout(t2.connectTimer), t2.disconnectCallbackTimer = u(function() {
            e2.call(t2, "mark disconnected due to timeout");
          }, 1e4), t2.mixStorePolicy = null, t2.appGrayConfig = null, t2.resetReconnectStatus(), clearTimeout(t2.mixStorePolicyClock), this.onlineListener && "undefined" != typeof window && h.isFunction(window.removeEventListener) && (window.removeEventListener("online", this.onlineListener), window.removeEventListener("offline", this.offlineListener), this.onlineListener = null, this.offlineListener = null), t2.isConnected() ? (t2.logger.warn("link::disconnect: start disconnecting"), t2.logout()) : t2.connecting ? (t2.logger.warn("link::disconnect: abort connecting"), t2.disconnectSocket()) : (t2.logger.warn("link::disconnect: already disconnected"), t2.connecting = false, t2.shouldReconnect = false, t2.socket = null, t2.autoconnect = false, t2.options.ondisconnect({ code: "alreadyDisconnected", callFunc: "link::disconnect", message: "manually disconnect status" })), t2.socket && t2.socket.socket && t2.socket.socket.transport ? t2.socket.socket.transport.onDisconnectDone = function(e3) {
            t2.logger.warn("link::disconnect: invoke [done] when socket closed", e3), n2(e3);
          } : (t2.logger.warn("link::disconnect: invoke [done]"), n2(null));
        }, p.resetReconnectStatus = function() {
          this.backoff && (this.backoff.setMin(g.reconnectionDelay), this.backoff.setMax(g.reconnectionDelayMax), this.backoff.reset()), this.retryCount = 0, this.logger.info("link::resetReconnectStatus: reset retryCount and backoff");
        }, p.onConnect = function() {
          this.connecting = false, this.shouldReconnect = true, this.hasNotifyDisconnected = false, this.logger.info("link::onConnect success"), this.statusProtector.emit("auth/loginLifeCycleConnectSucc"), this.login();
        }, p.onDisconnect = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, t2 = arguments.length > 1 ? arguments[1] : void 0, n2 = this;
          this.logger.warn("socket::onDisconnect: " + e2), n2.connecting = false, n2.markAllCallbackInvalid(d.newNetworkError({ callFunc: e2, uploadCode: 415, disconnectReason: t2 })), n2.msgAckBufferManager && n2.msgAckBufferManager.clear(), n2.roamingMsgSyncDoneBufferManager && n2.roamingMsgSyncDoneBufferManager.clear(), n2.stopHeartbeat(), n2.reconnect();
        }, p.willReconnect = function() {
          return this.shouldReconnect && this.needReconnect && this.retryCount < this.reconnectionAttempts;
        }, p.reconnect = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          if (!this.__destroyed)
            if (this.willReconnect()) {
              if (this.socket && (this.logger.info("link::reconnect: try to force disconnect"), this.forceDisconnect()), 0 === this.socketUrls.length && !this.options.socketUrl && "function" == typeof e2.allFailedCB)
                return this.logger.log("reconnect: All socket links have been polled, trigger hooks"), void e2.allFailedCB();
              this.doReconnect();
            } else
              this.notifyDisconnect({ code: "allAttemptsFailed", message: "All attempts failed" });
        }, p.doReconnect = function() {
          var e2, t2 = this;
          t2.socket = null, t2.retryCount++, t2.hasLogin = false;
          var n2, r2 = t2.backoff.duration();
          if ("function" == typeof t2.options.reconnectDelayProvider)
            try {
              var o2 = t2.options.reconnectDelayProvider(r2);
              "number" == typeof o2 && (r2 = o2 >= 1e3 ? o2 : 1e3);
            } catch (e3) {
              t2.logger.error("link::reconnect:reconnectDelayProvider excute failed,", e3 && e3.message ? e3.message : e3);
            }
          t2.logger.info(i(e2 = "link::reconnect: will retry after ".concat(r2, "ms, retryCount ")).call(e2, t2.retryCount)), n2 = t2.options.onwillreconnect({ retryCount: t2.retryCount, duration: r2 }), t2.statusProtector.emit("auth/loginLifeCycleWaiting"), clearTimeout(t2.connectTimer), t2.connectTimer = u(function() {
            1 == +t2.options.authType && n2 instanceof l2 ? (t2.logger.info("link::reconnect: wait onwillreconnect promise"), n2.finally(function() {
              return t2.connect();
            })) : t2.connect();
          }, r2);
        }, p.notifyConnectError = function(e2) {
          var t2 = d.newConnectError({ message: e2, callFunc: "link::notifyConnectError" });
          this.logger.error("link::notifyConnectError:", t2), this.options.onerror(t2);
        }, p.notifyDisconnect = function(e2) {
          this.hasNotifyDisconnected ? this.logger.warn("notifyDisconnect:: already notified") : (this.hasNotifyDisconnected = true, this.disconnectSocket(), this.forceDisconnect(), (e2 = e2 || new d()).retryCount = this.retryCount, e2.willReconnect = this.willReconnect(), this.backoff && this.backoff.reset(), this.retryCount = 0, this.autoconnect = false, this.logger.info("link::notifyDisconnect: ondisconnected", e2), this.options.ondisconnect(e2), this.onWbNotifyHangup instanceof Function && this.onWbNotifyHangup({ content: { account: this.account, channelId: null, timetag: +Date() } }));
        }, p.disconnectSocket = function() {
          if (this.isConnected() || this.connecting) {
            this.connecting = false, this.shouldReconnect = false;
            try {
              this.socket && this.socket.disconnect();
            } catch (e2) {
              this.socket && "function" == typeof this.socket.removeAllListenersX && this.socket.removeAllListenersX("info"), this.logger.info("link::disconnectSocket: disconnect failed, error ", e2 && e2.message);
            }
          }
        }, p.initOnlineListener = function() {
          this.needReconnect && this.options && this.options.quickReconnect ? "undefined" != typeof window && h.isFunction(window.addEventListener) ? this.onlineListener || (this.onlineListener = m(b).call(b, this), this.offlineListener = m(v).call(v, this), this.logger.info("initOnlineListener success"), window.addEventListener("online", this.onlineListener), window.addEventListener("offline", this.offlineListener)) : this.logger.warn("initOnlineListener no window.addEventListener") : this.logger.warn("initOnlineListener no quickReconnect");
        }, p.forceDisconnect = function() {
          var e2 = this.socket || {};
          this.socket = null;
          try {
            "function" == typeof e2.removeAllListenersX && e2.removeAllListenersX("info"), "function" == typeof e2.disconnect && e2.disconnect();
          } catch (e3) {
            this.logger.error("forceDisconnect:: oldSocket error", e3 || e3.message);
          }
          this.hasLogin = false;
        };
      }, function(e, t) {
        function n(e2) {
          e2 = e2 || {}, this.ms = e2.min || 100, this.max = e2.max || 1e4, this.factor = e2.factor || 2, this.jitter = e2.jitter > 0 && e2.jitter <= 1 ? e2.jitter : 0, this.attempts = 0;
        }
        e.exports = n, n.prototype.duration = function() {
          var e2 = this.ms * Math.pow(this.factor, this.attempts++);
          if (this.jitter) {
            var t2 = Math.random(), n2 = Math.floor(t2 * this.jitter * e2);
            e2 = 0 == (1 & Math.floor(10 * t2)) ? e2 - n2 : e2 + n2;
          }
          return 0 | Math.min(e2, this.max);
        }, n.prototype.reset = function() {
          this.attempts = 0;
        }, n.prototype.setMin = function(e2) {
          this.ms = e2;
        }, n.prototype.setMax = function(e2) {
          this.max = e2;
        }, n.prototype.setJitter = function(e2) {
          this.jitter = e2;
        };
      }, function(e, t, n) {
        var r = n(672);
        e.exports = function(e2) {
          return e2 && e2.length ? r(e2) : [];
        };
      }, function(e, t, n) {
        var r = n(673), o = n(676), s = n(681), i = n(682), a = n(683), c = n(290);
        e.exports = function(e2, t2, n2) {
          var u = -1, l2 = o, m = e2.length, p = true, d = [], f2 = d;
          if (n2)
            p = false, l2 = s;
          else if (m >= 200) {
            var g = t2 ? null : a(e2);
            if (g)
              return c(g);
            p = false, l2 = i, f2 = new r();
          } else
            f2 = t2 ? [] : d;
          e:
            for (; ++u < m; ) {
              var h = e2[u], y = t2 ? t2(h) : h;
              if (h = n2 || 0 !== h ? h : 0, p && y == y) {
                for (var v = f2.length; v--; )
                  if (f2[v] === y)
                    continue e;
                t2 && f2.push(y), d.push(h);
              } else
                l2(f2, y, n2) || (f2 !== d && f2.push(y), d.push(h));
            }
          return d;
        };
      }, function(e, t, n) {
        var r = n(260), o = n(674), s = n(675);
        function i(e2) {
          var t2 = -1, n2 = null == e2 ? 0 : e2.length;
          for (this.__data__ = new r(); ++t2 < n2; )
            this.add(e2[t2]);
        }
        i.prototype.add = i.prototype.push = o, i.prototype.has = s, e.exports = i;
      }, function(e, t) {
        e.exports = function(e2) {
          return this.__data__.set(e2, "__lodash_hash_undefined__"), this;
        };
      }, function(e, t) {
        e.exports = function(e2) {
          return this.__data__.has(e2);
        };
      }, function(e, t, n) {
        var r = n(677);
        e.exports = function(e2, t2) {
          return !!(null == e2 ? 0 : e2.length) && r(e2, t2, 0) > -1;
        };
      }, function(e, t, n) {
        var r = n(678), o = n(679), s = n(680);
        e.exports = function(e2, t2, n2) {
          return t2 == t2 ? s(e2, t2, n2) : r(e2, o, n2);
        };
      }, function(e, t) {
        e.exports = function(e2, t2, n, r) {
          for (var o = e2.length, s = n + (r ? 1 : -1); r ? s-- : ++s < o; )
            if (t2(e2[s], s, e2))
              return s;
          return -1;
        };
      }, function(e, t) {
        e.exports = function(e2) {
          return e2 != e2;
        };
      }, function(e, t) {
        e.exports = function(e2, t2, n) {
          for (var r = n - 1, o = e2.length; ++r < o; )
            if (e2[r] === t2)
              return r;
          return -1;
        };
      }, function(e, t) {
        e.exports = function(e2, t2, n) {
          for (var r = -1, o = null == e2 ? 0 : e2.length; ++r < o; )
            if (n(t2, e2[r]))
              return true;
          return false;
        };
      }, function(e, t) {
        e.exports = function(e2, t2) {
          return e2.has(t2);
        };
      }, function(e, t, n) {
        var r = n(272), o = n(684), s = n(290), i = r && 1 / s(new r([, -0]))[1] == 1 / 0 ? function(e2) {
          return new r(e2);
        } : o;
        e.exports = i;
      }, function(e, t) {
        e.exports = function() {
        };
      }, function(e, t, n) {
        var r, o = n(15), s = n(78).fn, i = n(41), a = n(195), c = n(0), u = n(11), l2 = n(45), m = n(196).getLibEnv, p = n(64), d = n(196).getHostEnvEnum, f2 = c.notundef;
        s.genSessionKey = (r = {}, function() {
          var e2 = this.name;
          return r[e2] = r[e2] || c.guid();
        }), s.afterLogin = c.emptyFunc, s.assembleIMLogin = function() {
          var e2, t2 = this.options, n2 = t2.account;
          this.sdkSession = this.genSessionKey();
          var r2 = { appLogin: this.autoconnect ? 0 : 1, appKey: t2.appKey, account: n2, token: t2.token, sdkVersion: u.info.sdkVersion, sdkHumanVersion: u.info.sdkHumanVersion, protocolVersion: u.info.protocolVersion, os: "[object Object]" === p.os.toString() ? p.os.family : p.os.toString(), browser: p.name + " " + p.version, clientType: u.CLIENTTYPE || 16, session: this.sdkSession, deviceId: l2.deviceId, isReactNative: u.isRN ? 1 : 0, customTag: t2.customTag || "" };
          return r2.userAgent = (u.isBrowser ? navigator && navigator.userAgent : "") || "", r2.userAgent = t2.loginSDKTypeParamCompat ? "Native/" + u.info.sdkHumanVersion : o(e2 = r2.userAgent).call(e2, 0, 299), r2.libEnv = t2.loginSDKTypeParamCompat ? void 0 : m(), r2.sdkType = t2.loginSDKTypeParamCompat ? 0 : d(), t2.customClientType && (r2.customClientType = +t2.customClientType), t2.authType && (r2.authType = +t2.authType), t2.loginExt && (r2.loginExt = t2.loginExt), r2;
        }, s.notifyLogin = function(e2) {
          this.logger.info("link::notifyLogin: on connect", e2), this.options.onconnect(e2);
        }, s.logout = function() {
          if (this.doLogout)
            return this.doLogout = false, void this.onAuthError(new i("done logout", "logout", { disconnectReason: "close", uploadCode: 415 }), "link::logout");
          this.isConnected() && this.onAuthError(new i("done disconnect", "logout", { disconnectReason: "close", uploadCode: 415 }), "link::logout");
        }, s.onKicked = function(e2) {
          var t2 = e2.content, n2 = t2.from, r2 = t2.reason, o2 = t2.custom, s2 = t2.customClientType, u2 = { reason: this.kickedReasons[r2] || "unknown", message: this.kickedMessages[r2] || "未知原因" };
          f2(n2) && (u2.from = a.reverseType(n2)), f2(o2) && (u2.custom = o2), +s2 > 0 && (u2.customClientType = s2), this.logger.warn("link::onKicked:", u2);
          var l3 = new i("被踢了", "kicked", { disconnectReason: "kicked", uploadCode: 415 });
          c.merge(l3, u2), this.onAuthError(l3, "link::onKicked"), this.statusProtector.emit("auth/loginLifeCycleDisconnected", new Error("disconnect due to kicked")), this.statusProtector.emit("auth/loginLifeCycleKicked", u2);
        }, s.onAuthError = function(e2, t2) {
          var n2 = e2 && e2.code;
          if (this.logger.error("onAuthError ", t2, n2), /^(Error_Internet_Disconnected|Error_Timeout|Error_Connection_Socket_State_not_Match)$/.test(n2))
            return this.forceDisconnect(), void this.onDisconnect("link::onAuthError::" + n2, "broken");
          (e2 = e2 || i.newConnectionError({ callFunc: t2, uploadCode: 415, disconnectReason: "close" })).callFunc = e2.callFunc || t2 || null, this.shouldReconnect = false, this.markAllCallbackInvalid(e2), this.notifyDisconnect(e2);
        };
      }, function(e, t, n) {
        var r = n(24), o = n(26), s = n(22), i = n(78).fn, a = n(11), c = n(0);
        i.processLink = function(e2) {
          switch (e2.cmd) {
            case "heartbeat":
              this.startHeartbeat();
              break;
            case "notifyDetect":
              "object" === s(c._get(e2, "content.notifyDetectTag")) && (e2.content.notifyDetectTag.t3 = (/* @__PURE__ */ new Date()).getTime(), this.startDetect(e2));
          }
        }, i.startHeartbeat = function() {
          var e2 = this;
          e2.stopHeartbeat(), e2.heartbeatTimer = r(function() {
            var t2;
            e2.sendCmd("heartbeat", null, o(t2 = e2.onHeartbeat).call(t2, e2));
          }, a.heartbeatInterval);
        }, i.detectHeartbeat = function() {
          var e2;
          this.stopHeartbeat(), this.sendCmd("heartbeat", null, o(e2 = this.onHeartbeat).call(e2, this));
        }, i.startDetect = function(e2) {
          var t2 = e2.content.notifyDetectTag;
          t2.t4 = (/* @__PURE__ */ new Date()).getTime(), this.sendCmd("uploadDetect", { notifyDetectTag: t2 });
        }, i.stopHeartbeat = function() {
          this.heartbeatTimer && (clearTimeout(this.heartbeatTimer), this.heartbeatTimer = null);
        }, i.onHeartbeat = function(e2) {
          if (e2) {
            if (this.syncing)
              return this.logger.warn("onHeartbeat::ignore error in connecting"), void this.startHeartbeat();
            var t2;
            if (e2.callFunc = "link::onHeartbeat", this.onCustomError("heartbeat error", e2), this.heartbeatFail++, this.logger.warn("onHeartbeat::error ", e2.code, e2), "Error_Timeout" === e2.code)
              if (this.heartbeatFail > 1)
                this.reporterHookLinkKeep.update({ code: 0, description: "Heartbeat-discovered link failure", operation_type: 1, target: this.url }), this.reporterHookLinkKeep.end(true), this.forceDisconnect(), this.onDisconnect("link::onHeartbeat", "broken");
              else
                this.sendCmd("heartbeat", null, o(t2 = this.onHeartbeat).call(t2, this));
          } else
            this.heartbeatFail = 0;
        }, i.checkNetworkAvailable = "undefined" != typeof navigator && "boolean" == typeof navigator.onLine ? function() {
          return navigator.onLine;
        } : function() {
        }, i.heartbeat = function() {
        };
      }, function(e, t, n) {
        var r = n(3), o = n(7), s = n(32), i = n(24), a = n(48), c = n(78).fn, u = n(286), l2 = n(11), m = n(45);
        c.processMisc = function(e2) {
          switch (e2.cmd) {
            case "getSimpleNosToken":
              e2.error || (e2.obj = e2.content.nosTokens[0]);
              break;
            case "getNosToken":
              e2.error || (e2.obj = e2.content.nosToken);
              break;
            case "getGrayscaleConfig":
              e2.error || (e2.obj = e2.content.appGrayConfigTag);
              break;
            case "getMixStorePolicy":
              e2.error || (e2.obj = e2.content.mixStorePolicyTag);
              break;
            case "getMixStoreToken":
              e2.error || (e2.obj = e2.content.mixStoreTokenTag);
              break;
            case "getBackSourceToken":
              e2.error || (e2.obj = e2.content.backSourceTokenTag);
              break;
            case "uploadSdkLogUrl":
              e2.error ? this.logger.error("uploadSdkLogUrl::error", e2.error) : this.logger.info("uploadSdkLogUrl::success", e2.obj && e2.obj.url);
              break;
            case "notifyUploadLog":
              e2.error || (l2.isRN ? this.uploadLocalLogRN() : l2.isBrowser && this.uploadLocalLogWeb(), this.emitAPI({ type: "notifyUploadLog" }));
              break;
            case "audioToText":
              e2.error || (e2.obj.text = e2.content.text);
              break;
            case "processImage":
              e2.obj.imageOps = u.reverseImageOps(e2.obj.imageOps), e2.error || (e2.obj = { url: e2.content.url });
              break;
            case "getNosTokenTrans":
              e2.error || (e2.obj = { nosToken: e2.content.nosToken, docId: e2.content.docId });
              break;
            case "getNosOriginUrl":
              e2.error || (e2.obj = e2.content.nosFileUrlTag.originUrl);
              break;
            case "notifyTransLog":
              e2.error || this.emitAPI({ type: "notifyTransLog", obj: e2.content.transInfo });
              break;
            case "fetchFile":
            case "fetchFileList":
            case "removeFile":
              e2.error || (e2.obj = e2.content);
              break;
            case "getServerTime":
              e2.obj = e2.content && e2.content.time;
              break;
            case "getNosCdnHost":
              this.getNosCdnHost(e2);
          }
        }, c.uploadLocalLogRN = function() {
          if (l2.isRN && m.rnfs) {
            var e2 = m.rnfs, t2 = this, n2 = e2.nimIndex, s2 = (e2.nimIndex + 1) % 2;
            e2.nimPromise = e2.nimPromise.then(function() {
              return r.all([e2.exists(i2(n2)), e2.exists(i2(s2))]);
            }).then(function(t3) {
              return t3 && (t3[0] || t3[1]) ? t3[0] && t3[1] ? e2.copyFile(i2(s2), i2(2)).then(function() {
                return e2.readFile(i2(n2));
              }).then(function(t4) {
                return e2.appendFile(i2(2), t4);
              }) : t3[0] ? e2.copyFile(i2(n2), i2(2)) : void (t3[1] && e2.copyFile(i2(s2), i2(2))) : r.reject();
            }).then(function() {
              return new r(function(n3) {
                t2.api.previewFile({ filePath: i2(2), done: function(s3, a2) {
                  if (r.all([e2.unlink(i2(2)), e2.unlink(i2(1)), e2.unlink(i2(0))]).finally(function() {
                    n3();
                  }), s3)
                    t2.logger.error("nim::uploadLocalLogRN:previewFile:error", s3);
                  else {
                    var c2 = a2.url;
                    o(c2).call(c2, "?") > 0 ? c2 += "&" : c2 += "?", c2 += "download=" + (/* @__PURE__ */ new Date()).getTime() + "_rn.log", t2.api.uploadSdkLogUrl({ url: c2 });
                  }
                } });
              });
            }).catch(function(n3) {
              e2.unlink(i2(2)).catch(function() {
              }), t2.logger.error("nim::protocol::uploadLocalLogRN", n3);
            });
          }
          function i2(t3) {
            return e2.DocumentDirectoryPath + "/nimlog_" + t3 + ".log";
          }
        }, c.uploadLocalLogWeb = function() {
          var e2 = this;
          false !== this.options.dbLog && this.logger._local ? this.logger._local.fetchLog().then(function(t2) {
            !t2 || !t2.logs || s(t2.logs) && 0 === t2.logs.length ? e2.logger.warn("uploadLocalLogWeb::no logs") : e2.api.previewFile({ blob: new Blob([t2.logs], { type: "text/plain" }), done: function(n2, r2) {
              if (n2)
                e2.logger.error("uploadLocalLogWeb::previewFile:error", n2);
              else {
                e2.logger.log("uploadLocalLogWeb::previewFile:success", r2);
                var s2 = r2.url;
                s2 += (o(s2).call(s2, "?") > 0 ? "&" : "?") + "download=" + (/* @__PURE__ */ new Date()).getTime() + "_web.log", e2.api.uploadSdkLogUrl({ url: s2 }), e2.logger._local.deleteLogs(t2.time).then(function() {
                  e2.logger.log("uploadLocalLogWeb::deleteLogs success");
                }).catch(function(t3) {
                  return e2.logger.error("uploadLocalLogWeb::deleteLogs:error ,", t3);
                });
              }
            } });
          }).catch(function(t2) {
            e2.logger.error("uploadLocalLogWeb::fetchLog:error", t2);
          }) : this.logger.warn("uploadLocalLogWeb::no dbLog");
        }, c.getNosCdnHost = function(e2) {
          var t2 = this, n2 = e2.error;
          if (n2 && (n2.callFunc = "events::getNosCdnHost", t2.onCustomError("getNosCdnHost", "EVENT_GET_NOS_CDN_HOST_ERROR", n2)), e2.content && e2.content.nosConfigTag) {
            var r2 = e2.content.nosConfigTag, o2 = "", s2 = "";
            0 !== r2.expire && r2.cdnDomain ? -1 === r2.expire ? (o2 = r2.cdnDomain, s2 = r2.objectNamePrefix) : (o2 = r2.cdnDomain, s2 = r2.objectNamePrefix, t2.nosCdnHostTimer && clearTimeout(t2.nosCdnHostTimer), t2.nosCdnHostTimer = i(function() {
              t2.sendCmd("getNosCdnHost", {});
            }, 800 * a(r2.expire))) : (o2 = "", s2 = ""), l2.serverNosConfig.cdnDomain = o2, l2.serverNosConfig.objectPrefix = s2, l2.hasLocalStorage && (localStorage.setItem("nim_cdn_domain", o2), localStorage.setItem("nim_object_prefix", s2));
          }
        };
      }, function(e, t, n) {
        var r = n(9), o = n(32), s = n(78).fn, i = n(0), a = n(287), c = n(107).EMSyncType;
        s.processAvSignal = function(e2) {
          switch (e2.cmd) {
            case "signalingCreate":
            case "signalingDelay":
            case "signalingClose":
            case "signalingJoin":
            case "signalingLeave":
            case "signalingInvite":
            case "signalingCancel":
            case "signalingReject":
            case "signalingAccept":
            case "signalingControl":
            case "signalingSyncMsgRead":
            case "signalingGetChannelInfo":
            case "signalingCallEx":
              break;
            case "signalingNotify":
              this.onSignalingNotify(e2);
              break;
            case "signalingMutilClientSyncNotify":
              this.onSignalingMutilClientSyncNotify(e2);
              break;
            case "signalingUnreadMessageSyncNotify":
              this.onSignalingUnreadMessageSyncNotify(e2);
              break;
            case "signalingChannelsSyncNotify":
              this.onSignalingMembersSyncNotify(e2);
              break;
            default:
              this.logger.warn("avSignal::unhandled cmd:", e2.cmd);
          }
        };
        var u = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          if (e2.needPush && (e2.needPush = "1" === e2.needPush), e2.needBadge && (e2.needBadge = "1" === e2.needBadge), e2.channelInValid && (e2.channelInValid = "1" === e2.channelInValid), e2.attach) {
            var t2 = JSON.parse(e2.attach);
            e2.eventType = a.parseAvSignalType(t2.type);
          }
          if (e2.members) {
            var n2 = JSON.parse(e2.members);
            e2.members = r(n2).call(n2, function(e3) {
              return a.parseAvSignalMember(e3);
            });
          }
          return e2;
        };
        s.onSignalingNotify = function(e2) {
          if (e2.error) {
            var t2 = e2.error;
            this.logger.error("protocal::avSignal:onSignalingNotify error", t2), this.emitAPI({ type: "error", error: t2 }), this.options.onerror(t2);
          } else {
            e2.raw && e2.raw.r && e2.raw.r.length && e2.content && e2.content.avSignalTag && (e2.content.avSignalTag.msgid = e2.raw.r[0]);
            var n2 = e2.content.avSignalTag;
            n2 = o(n2) ? r(n2).call(n2, function(e3) {
              return u(e3);
            }) : u(n2), this.emitAPI({ type: "signalingNotify", obj: n2 }), i.isFunction(this.options.onSignalingNotify) && this.options.onSignalingNotify(n2);
          }
        }, s.onSignalingMutilClientSyncNotify = function(e2) {
          if (e2.error) {
            var t2 = e2.error;
            this.logger.error("protocal::avSignal:onSignalingMutilClientSyncNotify error", t2), this.emitAPI({ type: "error", error: t2 }), this.options.onerror(t2);
          } else {
            var n2 = e2.content.avSignalTag;
            n2 = o(n2) ? r(n2).call(n2, function(e3) {
              return u(e3);
            }) : u(n2), this.emitAPI({ type: "signalingMutilClientSyncNotify", obj: n2 }), i.isFunction(this.options.onSignalingMutilClientSyncNotify) && this.options.onSignalingMutilClientSyncNotify(n2);
          }
        }, s.onSignalingUnreadMessageSyncNotify = function(e2) {
          if (e2.error) {
            var t2 = e2.error;
            this.logger.error("protocal::avSignal:onSignalingUnreadMessageSyncNotify error", t2), this.emitAPI({ type: "error", error: t2 }), this.options.onerror(t2);
          } else {
            var n2 = e2.content.avSignalTag;
            o(n2) && (n2 = r(n2).call(n2, function(e3) {
              return u(e3);
            })), this.emitAPI({ type: "signalingUnreadMessageSyncNotify", obj: n2 }), this.reporterHook.emit("reporter/syncItemComplete", c.kSyncType15_13), i.isFunction(this.options.onSignalingUnreadMessageSyncNotify) && this.options.onSignalingUnreadMessageSyncNotify(n2);
          }
        }, s.onSignalingMembersSyncNotify = function(e2) {
          if (e2.error) {
            var t2 = e2.error;
            this.logger.error("protocal::avSignal:onSignalingMembersSyncNotify error", t2), this.emitAPI({ type: "error", error: t2 }), this.options.onerror(t2);
          } else {
            var n2 = e2.content.avSignalTag;
            o(n2) || (n2 = [n2]), n2 = r(n2).call(n2, function(e3) {
              return u(e3);
            }), this.emitAPI({ type: "signalingChannelsSyncNotify", obj: n2 }), i.isFunction(this.options.onSignalingMembersSyncNotify) && this.options.onSignalingMembersSyncNotify(n2);
          }
        };
      }, function(e, t, n) {
        var r = n(8), o = n(26), s = n(0), i = n(78).fn, a = n(118), c = n(278);
        i.adaptersRequest = function(e2) {
          var t2 = this, n2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, o2 = arguments.length > 2 ? arguments[2] : void 0, i2 = n2.onerror || function() {
          }, c2 = (/* @__PURE__ */ new Date()).getTime(), u = s.get(o2, "exception_service") || 0;
          return n2.onerror = function() {
            i2.apply(void 0, arguments);
            var o3 = arguments.length <= 0 ? void 0 : arguments[0];
            t2.reporter.reportTraceStart("exceptions", { user_id: t2.account, trace_id: s.get(self, "socket.socket.sessionid"), start_time: c2, action: 1, exception_service: u }), t2.reporter.reportTraceUpdateV2("exceptions", { code: "number" == typeof o3.status ? o3.status : "number" == typeof o3.code ? o3.code : 0, description: o3.message || "".concat(o3.code), operation_type: 0, target: e2, context: n2 ? r(n2) : "", net_connect: t2.checkNetworkAvailable() }), t2.reporter.reportTraceEnd("exceptions", 1);
          }, a(e2, n2);
        }, i.adaptersUploadFile = function(e2, t2) {
          var n2, a2 = this;
          e2.adaptersRequest = o(n2 = i.adaptersRequest).call(n2, this);
          var u = (/* @__PURE__ */ new Date()).getTime();
          return e2.errorHook = function(t3) {
            var n3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            if (t3) {
              a2.reporter.reportTraceStart("exceptions", { user_id: a2.account, trace_id: s.get(self, "socket.socket.sessionid"), start_time: u, action: 1, exception_service: "s3" === n3.provider ? 4 : 3 });
              var o2 = n3.url || e2.url;
              t3.bucket && (o2 = r(t3)), a2.reporter.reportTraceUpdateV2("exceptions", { code: "number" == typeof t3.status ? t3.status : "number" == typeof t3.code ? t3.code : 0, description: t3.message || "".concat(t3.code), operation_type: 1, target: o2, net_connect: a2.checkNetworkAvailable() }), a2.reporter.reportTraceEnd("exceptions", 1);
            }
          }, new c(e2, this, t2);
        };
      }, function(e, t, n) {
        n(292);
        var r, o, s, i = n(43), a = n(60), c = n(37), u = n(2), l2 = n(3), m = n(4), p = n(24), d = n(16), f2 = n(15), g = n(6), h = n(22);
        s = function() {
          "use strict";
          function e2(e3, t3) {
            for (var n3 = 0; n3 < t3.length; n3++) {
              var r2 = t3[n3];
              r2.enumerable = r2.enumerable || false, r2.configurable = true, "value" in r2 && (r2.writable = true), i(e3, r2.key, r2);
            }
          }
          var t2 = { isDataReportEnable: true, maxSize: 100, msgListMaxSize: 1e3, cacheMaxSize: 1e3, maxDelay: 3e5, maxInterval: 3e4, minInterval: 1e4, timeout: 5e3, autoStart: true }, n2 = function() {
          };
          return function() {
            function r2(e3) {
              !function(e4, t3) {
                if (!(e4 instanceof t3))
                  throw new TypeError("Cannot call a class as a function");
              }(this, r2), this.isUploadEnable = false, this.initConfigLoaded = false, this.loading = false, this.isDestroyed = false, this.reportConfig = t2, this.traceMsgCache = {}, this.highPriorityMsgList = [], this.msgList = [], this.lowPriorityMsgList = [], this.cacheMsgList = [], this.lastReportTime = a(), this.timer = null, this.setConfig(e3), this.reportConfig.isDataReportEnable && this.reportConfig.autoStart && this.initUploadConfig();
            }
            var o2, s2, h2;
            return o2 = r2, (s2 = [{ key: "setConfig", value: function(e3) {
              var t3 = c({}, this.reportConfig.common, e3.common);
              this.reportConfig = c({}, this.reportConfig, e3), this.reportConfig.common = t3, this.reportConfig.common.sdk_type || (this.reportConfig.common.sdk_type = "im");
            } }, { key: "reportImmediately", value: function(e3, t3) {
              var n3 = this;
              this.reportConfig.isDataReportEnable && this.reportConfig.request(e3, c({ dataType: "json", method: "POST", timeout: this.reportConfig.timeout }, t3)).catch(function(e4) {
                var t4, r3;
                null === (r3 = null === (t4 = n3.reportConfig) || void 0 === t4 ? void 0 : t4.logger) || void 0 === r3 || r3.warn("Reporter immediately upload failed", e4);
              });
            } }, { key: "report", value: function(e3, t3) {
              var n3 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
              if (n3.priority || (n3.priority = this.getEventPriority(e3, t3)), this.reportConfig.isDataReportEnable && e3) {
                var r3 = a();
                "HIGH" === n3.priority ? this.highPriorityMsgList.push({ module: e3, msg: t3, createTime: r3 }) : "NORMAL" === n3.priority ? this.msgList.push({ module: e3, msg: t3, createTime: r3 }) : "LOW" === n3.priority && this.lowPriorityMsgList.push({ module: e3, msg: t3, createTime: r3 }), this.highPriorityMsgList.length > this.reportConfig.msgListMaxSize && this.highPriorityMsgList.shift(), this.msgList.length > this.reportConfig.msgListMaxSize && this.msgList.shift(), this.lowPriorityMsgList.length > this.reportConfig.msgListMaxSize && this.lowPriorityMsgList.shift(), this.doReport();
              }
            } }, { key: "reportTraceStart", value: function(e3, t3) {
              if (this.reportConfig.isDataReportEnable && e3 && !this.traceMsgCache[e3]) {
                var n3 = c(c({ start_time: a() }, t3), { extension: [] });
                this.traceMsgCache[e3] = n3;
              }
            } }, { key: "reportTraceUpdate", value: function(e3) {
            } }, { key: "reportTraceUpdateV2", value: function(e3, t3, n3) {
              var r3, o3 = this;
              if (this.reportConfig.isDataReportEnable && this.traceMsgCache[e3]) {
                var s3 = this.traceMsgCache[e3].extension, i2 = s3.length, a2 = (/* @__PURE__ */ new Date()).getTime();
                0 === i2 ? t3.duration = a2 - this.traceMsgCache[e3].start_time : s3[i2 - 1].end_time ? t3.duration = a2 - s3[i2 - 1].end_time : t3.duration = a2 - this.traceMsgCache[e3].start_time, s3.push(c({ end_time: a2 }, t3));
                var u2 = s3.length - 1;
                (null == n3 ? void 0 : n3.asyncParams) && ((r3 = this.traceMsgCache[e3]).asyncPromiseArray || (r3.asyncPromiseArray = []), this.traceMsgCache[e3].asyncPromiseArray.push(n3.asyncParams.then(function(t4) {
                  o3.traceMsgCache[e3] && o3.traceMsgCache[e3].extension[u2] && c(o3.traceMsgCache[e3].extension[u2], t4);
                })));
              }
            } }, { key: "reportTraceEnd", value: function(e3) {
              var t3, n3 = this, r3 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
              if (this.reportConfig.isDataReportEnable && this.traceMsgCache[e3])
                if ("nos" !== e3 || false === r3)
                  if ("boolean" == typeof r3 ? this.traceMsgCache[e3].succeed = !!r3 : this.traceMsgCache[e3].state = r3, this.traceMsgCache[e3].duration = a() - this.traceMsgCache[e3].start_time, u(t3 = this.traceMsgCache[e3].extension).call(t3, function(e4) {
                    delete e4.end_time;
                  }), this.traceMsgCache[e3].asyncPromiseArray) {
                    var o3 = this.traceMsgCache[e3], s3 = function() {
                      o3 === n3.traceMsgCache[e3] && (delete n3.traceMsgCache[e3].asyncPromiseArray, n3.report(e3, n3.traceMsgCache[e3], { priority: n3.getEventPriority(e3, n3.traceMsgCache[e3]) }), n3.traceMsgCache[e3] = null);
                    };
                    l2.all(this.traceMsgCache[e3].asyncPromiseArray).then(s3).catch(s3);
                  } else
                    this.report(e3, this.traceMsgCache[e3], { priority: this.getEventPriority(e3, this.traceMsgCache[e3]) }), this.traceMsgCache[e3] = null;
                else
                  this.traceMsgCache[e3] = null;
            } }, { key: "getEventPriority", value: function(e3, t3) {
              if ("exceptions" === e3) {
                if (0 === t3.action)
                  return "HIGH";
                if (2 === t3.action)
                  return "HIGH";
                if (1 === t3.action && 0 !== t3.exception_service)
                  return "HIGH";
              } else {
                if ("msgReceive" === e3)
                  return "LOW";
                if ("nim_api_trace" === e3)
                  return "LOW";
              }
              return "NORMAL";
            } }, { key: "reportTraceCancel", value: function(e3) {
              this.reportConfig.isDataReportEnable && (this.traceMsgCache[e3] = null);
            } }, { key: "pause", value: function() {
              this.reportConfig.isDataReportEnable && (this.isUploadEnable = false);
            } }, { key: "restore", value: function() {
              this.reportConfig.isDataReportEnable && (this.isUploadEnable = true, this.initConfigLoaded || this.initUploadConfig());
            } }, { key: "destroy", value: function() {
              var e3, t3 = this;
              this.reportConfig.isDataReportEnable && (u(e3 = m(this.traceMsgCache)).call(e3, function(e4) {
                t3.reportTraceEnd(e4, 1);
              }), null !== this.timer && clearTimeout(this.timer), this.setConfig = n2, this.report = n2, this.reportTraceStart = n2, this.reportTraceUpdate = n2, this.reportTraceEnd = n2, this.pause = n2, this.restore = n2, this.destroy = n2, this.cacheMsgList = [], this.traceMsgCache = {}, this.lowPriorityMsgList = [], this.msgList = [], this.highPriorityMsgList = [], this.reportConfig = {}, this.isDestroyed = true);
            } }, { key: "initUploadConfig", value: function() {
              var e3, t3, n3 = this;
              if (!this.loading) {
                this.loading = true;
                var r3 = this.reportConfig.common || {};
                try {
                  this.reportConfig.request(this.reportConfig.reportConfigUrl, { method: "GET", dataType: "json", params: { deviceId: r3.dev_id, sdkVer: r3.sdk_ver, platform: r3.platform, appkey: r3.app_key }, timeout: this.reportConfig.timeout }).then(function(e4) {
                    var t4, r4;
                    if (!n3.isDestroyed) {
                      if (200 === e4.status && e4.data && 200 === e4.data.code) {
                        var o3 = e4.data.data || {};
                        n3.reportConfig.maxSize = o3.maxSize > 1e3 ? 1e3 : o3.maxSize, n3.reportConfig.maxInterval = o3.maxInterval > 1e4 ? 1e4 : o3.maxInterval, n3.reportConfig.maxInterval = o3.maxInterval < 10 ? 10 : o3.maxInterval, n3.reportConfig.minInterval = o3.minInterval < 2 ? 2 : o3.minInterval, n3.reportConfig.maxDelay = o3.maxDelay || 300, n3.reportConfig.maxInterval = 1e3 * n3.reportConfig.maxInterval, n3.reportConfig.minInterval = 1e3 * n3.reportConfig.minInterval, n3.reportConfig.maxDelay = 1e3 * n3.reportConfig.maxDelay, n3.isUploadEnable = true, n3.initConfigLoaded = true, n3.loading = false, n3.reportHeartBeat();
                      }
                      null === (r4 = null === (t4 = n3.reportConfig) || void 0 === t4 ? void 0 : t4.logger) || void 0 === r4 || r4.log("Get reporter upload config success");
                    }
                  }).catch(function(e4) {
                    var t4, r4;
                    n3.loading = false, null === (r4 = null === (t4 = n3.reportConfig) || void 0 === t4 ? void 0 : t4.logger) || void 0 === r4 || r4.error("Get reporter upload config failed", e4);
                  });
                } catch (n4) {
                  this.loading = false, null === (t3 = null === (e3 = this.reportConfig) || void 0 === e3 ? void 0 : e3.logger) || void 0 === t3 || t3.error("Exec reporter request failed", n4);
                }
              }
            } }, { key: "reportHeartBeat", value: function() {
              var e3 = this;
              this.isDestroyed || (this.timer = p(function() {
                e3.reportHeartBeat();
              }, this.reportConfig.minInterval), this.doReport());
            } }, { key: "doReport", value: function() {
              if (!this.isDestroyed) {
                var e3 = this.highPriorityMsgList.length + this.msgList.length + this.lowPriorityMsgList.length + this.cacheMsgList.length > 2 * this.reportConfig.maxSize ? this.reportConfig.minInterval : this.reportConfig.maxInterval;
                a() - this.lastReportTime >= e3 && this.upload();
              }
            } }, { key: "getUploadMsg", value: function() {
              var e3, t3, n3, r3, o3, s3, i2 = this, c2 = {}, l3 = a();
              this.highPriorityMsgList = d(e3 = this.highPriorityMsgList).call(e3, function(e4) {
                return l3 - e4.createTime < i2.reportConfig.maxDelay;
              }), this.msgList = d(t3 = this.msgList).call(t3, function(e4) {
                return l3 - e4.createTime < i2.reportConfig.maxDelay;
              }), this.lowPriorityMsgList = d(n3 = this.lowPriorityMsgList).call(n3, function(e4) {
                return l3 - e4.createTime < i2.reportConfig.maxDelay;
              }), this.cacheMsgList = d(r3 = this.cacheMsgList).call(r3, function(e4) {
                return l3 - e4.createTime < i2.reportConfig.maxDelay;
              });
              var m2 = f2(o3 = this.highPriorityMsgList).call(o3, 0, this.reportConfig.maxSize);
              if (this.highPriorityMsgList = f2(s3 = this.highPriorityMsgList).call(s3, m2.length), m2.length < this.reportConfig.maxSize) {
                var p2, h3, y = this.reportConfig.maxSize - m2.length;
                m2 = g(m2).call(m2, f2(p2 = this.msgList).call(p2, 0, y)), this.msgList = f2(h3 = this.msgList).call(h3, y);
              }
              if (m2.length < this.reportConfig.maxSize) {
                var v, b, T = this.reportConfig.maxSize - m2.length;
                m2 = g(m2).call(m2, f2(v = this.lowPriorityMsgList).call(v, 0, T)), this.lowPriorityMsgList = f2(b = this.lowPriorityMsgList).call(b, T);
              }
              if (m2.length < this.reportConfig.maxSize) {
                var S, M, k = this.reportConfig.maxSize - m2.length;
                m2 = g(m2).call(m2, f2(S = this.cacheMsgList).call(S, 0, k)), this.cacheMsgList = f2(M = this.cacheMsgList).call(M, k);
              }
              return u(m2).call(m2, function(e4) {
                c2[e4.module] ? c2[e4.module].push(e4.msg) : c2[e4.module] = [e4.msg];
              }), { uploadMsgArr: m2, uploadMsg: c2 };
            } }, { key: "upload", value: function() {
              var e3, t3, n3 = this;
              if (this.isUploadEnable && !(this.lastReportTime && a() - this.lastReportTime < this.reportConfig.minInterval)) {
                var r3 = this.getUploadMsg(), o3 = r3.uploadMsgArr, s3 = r3.uploadMsg;
                if (o3.length) {
                  this.lastReportTime = a();
                  try {
                    this.reportConfig.request(this.reportConfig.reportUrl, { dataType: "json", method: "POST", data: { common: this.reportConfig.common, event: s3 }, headers: { sdktype: "im" }, timeout: this.reportConfig.timeout }).catch(function(e4) {
                      var t4, r4, s4, i2;
                      n3.cacheMsgList = f2(t4 = g(r4 = n3.cacheMsgList).call(r4, o3)).call(t4, 0, n3.reportConfig.cacheMaxSize), null === (i2 = null === (s4 = n3.reportConfig) || void 0 === s4 ? void 0 : s4.logger) || void 0 === i2 || i2.warn("Reporter upload failed", e4);
                    });
                  } catch (n4) {
                    null === (t3 = null === (e3 = this.reportConfig) || void 0 === e3 ? void 0 : e3.logger) || void 0 === t3 || t3.warn("Exec reporter request failed", n4);
                  }
                  clearTimeout(this.timer), this.reportHeartBeat();
                }
              }
            } }]) && e2(o2.prototype, s2), h2 && e2(o2, h2), i(o2, "prototype", { writable: false }), r2;
          }();
        }, "object" === h(t) && void 0 !== e ? e.exports = s() : void 0 === (o = "function" == typeof (r = s) ? r.call(t, n, t, e) : r) || (e.exports = o);
      }, function(e, t, n) {
        e.exports = n(692);
      }, function(e, t, n) {
        n(693);
        var r = n(694);
        e.exports = r;
      }, function(e, t, n) {
        n(293);
      }, function(e, t, n) {
        var r = n(695);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(696);
        e.exports = r;
      }, function(e, t, n) {
        n(293), e.exports = n(14);
      }, function(e, t, n) {
        var r, o, s, i = n(93), a = n(92), c = n(281), u = n(282), l2 = n(192), m = n(698), p = (n(292), n(2)), d = n(4), f2 = n(6), g = n(3), h = n(24), y = n(8), v = n(279), b = n(22);
        function T(e2) {
          var t2 = function() {
            if ("undefined" == typeof Reflect || !v)
              return false;
            if (v.sham)
              return false;
            if ("function" == typeof Proxy)
              return true;
            try {
              return Boolean.prototype.valueOf.call(v(Boolean, [], function() {
              })), true;
            } catch (e3) {
              return false;
            }
          }();
          return function() {
            var n2, r2 = l2(e2);
            if (t2) {
              var o2 = l2(this).constructor;
              n2 = v(r2, arguments, o2);
            } else
              n2 = r2.apply(this, arguments);
            return u(this, n2);
          };
        }
        s = function() {
          "use strict";
          function e2(e3) {
            if (e3) {
              var t3, n2 = "";
              return p(t3 = d(e3)).call(t3, function(t4, r2) {
                var o2;
                n2 += 0 === r2 ? "?" : "&", n2 += f2(o2 = "".concat(t4, "=")).call(o2, e3[t4]);
              }), n2;
            }
            return "";
          }
          var t2 = function(e3) {
            c(n2, e3);
            var t3 = T(n2);
            function n2(e4, r2, o2, s2) {
              var i2;
              return a(this, n2), (i2 = t3.call(this, o2)).source = e4, i2.code = r2, i2.desc = o2, i2.detail = s2 || {}, i2;
            }
            return i(n2);
          }(m(Error));
          return function(n2) {
            var r2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : { dataType: "json", method: "GET", timeout: 5e3 }, o2 = "text" === r2.dataType ? "text/plain; charset=UTF-8" : "application/json; charset=UTF-8", s2 = "GET" === r2.method ? e2(r2.params) : "";
            return new g(function(e3, i2) {
              if (window.XMLHttpRequest) {
                var a2, c2, u2 = new XMLHttpRequest();
                if (u2.onreadystatechange = function() {
                  if (4 === u2.readyState)
                    if (200 === u2.status) {
                      try {
                        c2 = JSON.parse(u2.response || "{}");
                      } catch (e4) {
                        c2 = u2.response;
                      }
                      e3({ status: u2.status, data: c2 });
                    } else
                      h(function() {
                        var e4;
                        i2(new t2(1, u2.status, f2(e4 = "readyState: ".concat(u2.readyState, "; statusText: ")).call(e4, u2.statusText)));
                      }, 0);
                }, u2.open(r2.method, f2(a2 = "".concat(n2)).call(a2, s2)), u2.timeout = r2.timeout || 5e3, u2.setRequestHeader("Content-Type", o2), r2.headers)
                  for (var l3 in r2.headers)
                    u2.setRequestHeader(l3, r2.headers[l3]);
                u2.ontimeout = function(e4) {
                  i2(new t2(1, 408, e4 && e4.message ? e4.message : "request timeout"));
                }, u2.send(y(r2.data));
              } else
                i2(new t2(2, 10400, "request no suppout"));
            });
          };
        }, "object" === b(t) && void 0 !== e ? e.exports = s() : void 0 === (o = "function" == typeof (r = s) ? r.call(t, n, t, e) : r) || (e.exports = o);
      }, function(e, t, n) {
        var r = n(699), o = n(189), s = n(192), i = n(190), a = n(738), c = n(739);
        function u(t2) {
          var n2 = "function" == typeof r ? new r() : void 0;
          return e.exports = u = function(e2) {
            if (null === e2 || !a(e2))
              return e2;
            if ("function" != typeof e2)
              throw new TypeError("Super expression must either be null or a function");
            if (void 0 !== n2) {
              if (n2.has(e2))
                return n2.get(e2);
              n2.set(e2, t3);
            }
            function t3() {
              return c(e2, arguments, s(this).constructor);
            }
            return t3.prototype = o(e2.prototype, { constructor: { value: t3, enumerable: false, writable: true, configurable: true } }), i(t3, e2);
          }, e.exports.__esModule = true, e.exports.default = e.exports, u(t2);
        }
        e.exports = u, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(700);
      }, function(e, t, n) {
        e.exports = n(701);
      }, function(e, t, n) {
        var r = n(702);
        n(713), n(715), n(717), n(719), n(720), n(722), n(723), n(724), n(725), n(726), n(728), n(729), n(730), n(731), n(732), n(733), n(734), n(735), n(736), n(737), e.exports = r;
      }, function(e, t, n) {
        var r = n(703);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(704);
        n(69), e.exports = r;
      }, function(e, t, n) {
        n(86), n(705), n(100), n(115);
        var r = n(13);
        e.exports = r.Map;
      }, function(e, t, n) {
        n(706);
      }, function(e, t, n) {
        "use strict";
        n(707)("Map", function(e2) {
          return function() {
            return e2(this, arguments.length ? arguments[0] : void 0);
          };
        }, n(711));
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(14), s = n(294), i = n(5), a = n(61), c = n(47), u = n(171), l2 = n(17), m = n(28), p = n(85), d = n(39).f, f2 = n(74).forEach, g = n(27), h = n(101), y = h.set, v = h.getterFor;
        e.exports = function(e2, t2, n2) {
          var h2, b = -1 !== e2.indexOf("Map"), T = -1 !== e2.indexOf("Weak"), S = b ? "set" : "add", M = o[e2], k = M && M.prototype, x = {};
          if (g && l2(M) && (T || k.forEach && !i(function() {
            new M().entries().next();
          }))) {
            var C = (h2 = t2(function(t3, n3) {
              y(u(t3, C), { type: e2, collection: new M() }), null != n3 && c(n3, t3[S], { that: t3, AS_ENTRIES: b });
            })).prototype, I = v(e2);
            f2(["add", "clear", "delete", "forEach", "get", "has", "set", "keys", "values", "entries"], function(e3) {
              var t3 = "add" == e3 || "set" == e3;
              !(e3 in k) || T && "clear" == e3 || a(C, e3, function(n3, r2) {
                var o2 = I(this).collection;
                if (!t3 && T && !m(n3))
                  return "get" == e3 && void 0;
                var s2 = o2[e3](0 === n3 ? 0 : n3, r2);
                return t3 ? this : s2;
              });
            }), T || d(C, "size", { configurable: true, get: function() {
              return I(this).collection.size;
            } });
          } else
            h2 = n2.getConstructor(t2, e2, b, S), s.enable();
          return p(h2, e2, false, true), x[e2] = h2, r({ global: true, forced: true }, x), T || n2.setStrong(h2, e2, b), h2;
        };
      }, function(e, t, n) {
        var r = n(5), o = n(28), s = n(65), i = n(709), a = Object.isExtensible, c = r(function() {
          a(1);
        });
        e.exports = c || i ? function(e2) {
          return !!o(e2) && ((!i || "ArrayBuffer" != s(e2)) && (!a || a(e2)));
        } : a;
      }, function(e, t, n) {
        var r = n(5);
        e.exports = r(function() {
          if ("function" == typeof ArrayBuffer) {
            var e2 = new ArrayBuffer(8);
            Object.isExtensible(e2) && Object.defineProperty(e2, "a", { value: 8 });
          }
        });
      }, function(e, t, n) {
        var r = n(5);
        e.exports = !r(function() {
          return Object.isExtensible(Object.preventExtensions({}));
        });
      }, function(e, t, n) {
        "use strict";
        var r = n(39).f, o = n(84), s = n(712), i = n(34), a = n(171), c = n(96), u = n(47), l2 = n(169), m = n(170), p = n(238), d = n(27), f2 = n(294).fastKey, g = n(101), h = g.set, y = g.getterFor;
        e.exports = { getConstructor: function(e2, t2, n2, l3) {
          var m2 = e2(function(e3, r2) {
            a(e3, p2), h(e3, { type: t2, index: o(null), first: void 0, last: void 0, size: 0 }), d || (e3.size = 0), c(r2) || u(r2, e3[l3], { that: e3, AS_ENTRIES: n2 });
          }), p2 = m2.prototype, g2 = y(t2), v = function(e3, t3, n3) {
            var r2, o2, s2 = g2(e3), i2 = b(e3, t3);
            return i2 ? i2.value = n3 : (s2.last = i2 = { index: o2 = f2(t3, true), key: t3, value: n3, previous: r2 = s2.last, next: void 0, removed: false }, s2.first || (s2.first = i2), r2 && (r2.next = i2), d ? s2.size++ : e3.size++, "F" !== o2 && (s2.index[o2] = i2)), e3;
          }, b = function(e3, t3) {
            var n3, r2 = g2(e3), o2 = f2(t3);
            if ("F" !== o2)
              return r2.index[o2];
            for (n3 = r2.first; n3; n3 = n3.next)
              if (n3.key == t3)
                return n3;
          };
          return s(p2, { clear: function() {
            for (var e3 = g2(this), t3 = e3.index, n3 = e3.first; n3; )
              n3.removed = true, n3.previous && (n3.previous = n3.previous.next = void 0), delete t3[n3.index], n3 = n3.next;
            e3.first = e3.last = void 0, d ? e3.size = 0 : this.size = 0;
          }, delete: function(e3) {
            var t3 = g2(this), n3 = b(this, e3);
            if (n3) {
              var r2 = n3.next, o2 = n3.previous;
              delete t3.index[n3.index], n3.removed = true, o2 && (o2.next = r2), r2 && (r2.previous = o2), t3.first == n3 && (t3.first = r2), t3.last == n3 && (t3.last = o2), d ? t3.size-- : this.size--;
            }
            return !!n3;
          }, forEach: function(e3) {
            for (var t3, n3 = g2(this), r2 = i(e3, arguments.length > 1 ? arguments[1] : void 0); t3 = t3 ? t3.next : n3.first; )
              for (r2(t3.value, t3.key, this); t3 && t3.removed; )
                t3 = t3.previous;
          }, has: function(e3) {
            return !!b(this, e3);
          } }), s(p2, n2 ? { get: function(e3) {
            var t3 = b(this, e3);
            return t3 && t3.value;
          }, set: function(e3, t3) {
            return v(this, 0 === e3 ? 0 : e3, t3);
          } } : { add: function(e3) {
            return v(this, e3 = 0 === e3 ? 0 : e3, e3);
          } }), d && r(p2, "size", { get: function() {
            return g2(this).size;
          } }), m2;
        }, setStrong: function(e2, t2, n2) {
          var r2 = t2 + " Iterator", o2 = y(t2), s2 = y(r2);
          l2(e2, t2, function(e3, t3) {
            h(this, { type: r2, target: e3, state: o2(e3), kind: t3, last: void 0 });
          }, function() {
            for (var e3 = s2(this), t3 = e3.kind, n3 = e3.last; n3 && n3.removed; )
              n3 = n3.previous;
            return e3.target && (e3.last = n3 = n3 ? n3.next : e3.state.first) ? m("keys" == t3 ? n3.key : "values" == t3 ? n3.value : [n3.key, n3.value], false) : (e3.target = void 0, m(void 0, true));
          }, n2 ? "entries" : "values", !n2, true), p(t2);
        } };
      }, function(e, t, n) {
        var r = n(68);
        e.exports = function(e2, t2, n2) {
          for (var o in t2)
            n2 && n2.unsafe && e2[o] ? e2[o] = t2[o] : r(e2, o, t2[o], n2);
          return e2;
        };
      }, function(e, t, n) {
        n(1)({ target: "Map", stat: true, forced: true }, { from: n(714) });
      }, function(e, t, n) {
        "use strict";
        var r = n(34), o = n(20), s = n(31), i = n(172), a = n(96), c = n(47), u = [].push;
        e.exports = function(e2) {
          var t2, n2, l2, m, p = arguments.length, d = p > 1 ? arguments[1] : void 0;
          return i(this), (t2 = void 0 !== d) && s(d), a(e2) ? new this() : (n2 = [], t2 ? (l2 = 0, m = r(d, p > 2 ? arguments[2] : void 0), c(e2, function(e3) {
            o(u, n2, m(e3, l2++));
          })) : c(e2, u, { that: n2 }), new this(n2));
        };
      }, function(e, t, n) {
        n(1)({ target: "Map", stat: true, forced: true }, { of: n(716) });
      }, function(e, t, n) {
        "use strict";
        var r = n(102);
        e.exports = function() {
          return new this(r(arguments));
        };
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(38), s = n(63).remove;
        r({ target: "Map", proto: true, real: true, forced: true }, { deleteAll: function() {
          for (var e2, t2 = o(this), n2 = true, r2 = 0, i = arguments.length; r2 < i; r2++)
            e2 = s(t2, arguments[r2]), n2 = n2 && e2;
          return !!n2;
        } });
      }, function(e, t) {
        e.exports = function(e2, t2) {
          return 1 == t2 ? function(t3, n) {
            return t3[e2](n);
          } : function(t3, n, r) {
            return t3[e2](n, r);
          };
        };
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(38), s = n(63), i = s.get, a = s.has, c = s.set;
        r({ target: "Map", proto: true, real: true, forced: true }, { emplace: function(e2, t2) {
          var n2, r2, s2 = o(this);
          return a(s2, e2) ? (n2 = i(s2, e2), "update" in t2 && (n2 = t2.update(n2, e2, s2), c(s2, e2, n2)), n2) : (r2 = t2.insert(e2, s2), c(s2, e2, r2), r2);
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(34), s = n(38), i = n(59);
        r({ target: "Map", proto: true, real: true, forced: true }, { every: function(e2) {
          var t2 = s(this), n2 = o(e2, arguments.length > 1 ? arguments[1] : void 0);
          return false !== i(t2, function(e3, r2) {
            if (!n2(e3, r2, t2))
              return false;
          }, true);
        } });
      }, function(e, t, n) {
        var r = n(20);
        e.exports = function(e2, t2, n2) {
          for (var o, s, i = n2 || e2.next; !(o = r(i, e2)).done; )
            if (void 0 !== (s = t2(o.value)))
              return s;
        };
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(34), s = n(38), i = n(63), a = n(59), c = i.Map, u = i.set;
        r({ target: "Map", proto: true, real: true, forced: true }, { filter: function(e2) {
          var t2 = s(this), n2 = o(e2, arguments.length > 1 ? arguments[1] : void 0), r2 = new c();
          return a(t2, function(e3, o2) {
            n2(e3, o2, t2) && u(r2, o2, e3);
          }), r2;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(34), s = n(38), i = n(59);
        r({ target: "Map", proto: true, real: true, forced: true }, { find: function(e2) {
          var t2 = s(this), n2 = o(e2, arguments.length > 1 ? arguments[1] : void 0), r2 = i(t2, function(e3, r3) {
            if (n2(e3, r3, t2))
              return { value: e3 };
          }, true);
          return r2 && r2.value;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(34), s = n(38), i = n(59);
        r({ target: "Map", proto: true, real: true, forced: true }, { findKey: function(e2) {
          var t2 = s(this), n2 = o(e2, arguments.length > 1 ? arguments[1] : void 0), r2 = i(t2, function(e3, r3) {
            if (n2(e3, r3, t2))
              return { key: r3 };
          }, true);
          return r2 && r2.key;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(20), s = n(12), i = n(17), a = n(31), c = n(47), u = n(63).Map, l2 = s([].push);
        r({ target: "Map", stat: true, forced: true }, { groupBy: function(e2, t2) {
          var n2 = new (i(this) ? this : u)();
          a(t2);
          var r2 = a(n2.has), s2 = a(n2.get), m = a(n2.set);
          return c(e2, function(e3) {
            var i2 = t2(e3);
            o(r2, n2, i2) ? l2(o(s2, n2, i2), e3) : o(m, n2, i2, [e3]);
          }), n2;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(727), s = n(38), i = n(59);
        r({ target: "Map", proto: true, real: true, forced: true }, { includes: function(e2) {
          return true === i(s(this), function(t2) {
            if (o(t2, e2))
              return true;
          }, true);
        } });
      }, function(e, t) {
        e.exports = function(e2, t2) {
          return e2 === t2 || e2 != e2 && t2 != t2;
        };
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(20), s = n(47), i = n(17), a = n(31), c = n(63).Map;
        r({ target: "Map", stat: true, forced: true }, { keyBy: function(e2, t2) {
          var n2 = new (i(this) ? this : c)();
          a(t2);
          var r2 = a(n2.set);
          return s(e2, function(e3) {
            o(r2, n2, t2(e3), e3);
          }), n2;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(38), s = n(59);
        r({ target: "Map", proto: true, real: true, forced: true }, { keyOf: function(e2) {
          var t2 = s(o(this), function(t3, n2) {
            if (t3 === e2)
              return { key: n2 };
          }, true);
          return t2 && t2.key;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(34), s = n(38), i = n(63), a = n(59), c = i.Map, u = i.set;
        r({ target: "Map", proto: true, real: true, forced: true }, { mapKeys: function(e2) {
          var t2 = s(this), n2 = o(e2, arguments.length > 1 ? arguments[1] : void 0), r2 = new c();
          return a(t2, function(e3, o2) {
            u(r2, n2(e3, o2, t2), e3);
          }), r2;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(34), s = n(38), i = n(63), a = n(59), c = i.Map, u = i.set;
        r({ target: "Map", proto: true, real: true, forced: true }, { mapValues: function(e2) {
          var t2 = s(this), n2 = o(e2, arguments.length > 1 ? arguments[1] : void 0), r2 = new c();
          return a(t2, function(e3, o2) {
            u(r2, o2, n2(e3, o2, t2));
          }), r2;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(38), s = n(47), i = n(63).set;
        r({ target: "Map", proto: true, real: true, arity: 1, forced: true }, { merge: function(e2) {
          for (var t2 = o(this), n2 = arguments.length, r2 = 0; r2 < n2; )
            s(arguments[r2++], function(e3, n3) {
              i(t2, e3, n3);
            }, { AS_ENTRIES: true });
          return t2;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(31), s = n(38), i = n(59), a = TypeError;
        r({ target: "Map", proto: true, real: true, forced: true }, { reduce: function(e2) {
          var t2 = s(this), n2 = arguments.length < 2, r2 = n2 ? void 0 : arguments[1];
          if (o(e2), i(t2, function(o2, s2) {
            n2 ? (n2 = false, r2 = o2) : r2 = e2(r2, o2, s2, t2);
          }), n2)
            throw a("Reduce of empty map with no initial value");
          return r2;
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(34), s = n(38), i = n(59);
        r({ target: "Map", proto: true, real: true, forced: true }, { some: function(e2) {
          var t2 = s(this), n2 = o(e2, arguments.length > 1 ? arguments[1] : void 0);
          return true === i(t2, function(e3, r2) {
            if (n2(e3, r2, t2))
              return true;
          }, true);
        } });
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(31), s = n(38), i = n(63), a = TypeError, c = i.get, u = i.has, l2 = i.set;
        r({ target: "Map", proto: true, real: true, forced: true }, { update: function(e2, t2) {
          var n2 = s(this), r2 = arguments.length;
          o(t2);
          var i2 = u(n2, e2);
          if (!i2 && r2 < 3)
            throw a("Updating absent value");
          var m = i2 ? c(n2, e2) : o(r2 > 2 ? arguments[2] : void 0)(e2, n2);
          return l2(n2, e2, t2(m, e2, n2)), n2;
        } });
      }, function(e, t, n) {
        "use strict";
        n(1)({ target: "Map", proto: true, real: true, forced: true }, { upsert: n(295) });
      }, function(e, t, n) {
        "use strict";
        n(1)({ target: "Map", proto: true, real: true, name: "upsert", forced: true }, { updateOrInsert: n(295) });
      }, function(e, t, n) {
        var r = n(188);
        e.exports = function(e2) {
          var t2;
          return -1 !== r(t2 = Function.toString.call(e2)).call(t2, "[native code]");
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(151), o = n(296), s = n(190), i = n(743);
        function a(t2, n2, c) {
          var u;
          i() ? (e.exports = a = r(u = o).call(u), e.exports.__esModule = true, e.exports.default = e.exports) : (e.exports = a = function(e2, t3, n3) {
            var o2 = [null];
            o2.push.apply(o2, t3);
            var i2 = new (r(Function).apply(e2, o2))();
            return n3 && s(i2, n3.prototype), i2;
          }, e.exports.__esModule = true, e.exports.default = e.exports);
          return a.apply(null, arguments);
        }
        e.exports = a, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(741);
      }, function(e, t, n) {
        var r = n(742);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(280);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(296);
        e.exports = function() {
          if ("undefined" == typeof Reflect || !r)
            return false;
          if (r.sham)
            return false;
          if ("function" == typeof Proxy)
            return true;
          try {
            return Boolean.prototype.valueOf.call(r(Boolean, [], function() {
            })), true;
          } catch (e2) {
            return false;
          }
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(16), o = n(0), s = n(193), i = o.merge({}, s.idMap, { auth: { id: 2, login: 3, kicked: 5, logout: 6, multiPortLogin: 7, kick: 8 }, user: { id: 3, updatePushToken: 1, appBackground: 2, markInBlacklist: 3, getBlacklist: 4, markInMutelist: 5, getMutelist: 6, getRelations: 8, getUsers: 7, updateMyInfo: 10, updateDonnop: 15, syncMyInfo: 109, syncUpdateMyInfo: 110 }, notify: { id: 4, markRead: 3, syncOfflineMsgs: 4, batchMarkRead: 5, syncOfflineSysMsgs: 6, syncOfflineNetcallMsgs: 8, syncRoamingMsgs: 9, syncMsgReceipts: 12, syncRobots: 15, syncBroadcastMsgs: 16, syncSuperTeamRoamingMsgs: 17, syncOfflineSuperTeamSysMsgs: 18, syncDeleteSuperTeamMsgOfflineRoaming: 19, syncDeleteMsgSelf: 21, syncSessionsWithMoreRoaming: 22, syncStickTopSessions: 23, syncSessionHistoryMsgsDelete: 24, syncSessionReliableInfo: 25 }, sync: { id: 5, sync: 1, syncTeamMembers: 2, syncSuperTeamMembers: 3 }, msg: { id: 7, sendMsg: 1, msg: 2, sysMsg: 3, getHistoryMsgs: 6, sendCustomSysMsg: 7, searchHistoryMsgs: 8, deleteSessions: 9, getSessions: 10, syncSendMsg: 101, sendMsgReceipt: 11, msgReceipt: 12, deleteMsg: 13, msgDeleted: 14, markSessionAck: 16, markSessionAckBatch: 25, broadcastMsg: 17, clearServerHistoryMsgs: 18, getServerSessions: 19, getServerSession: 20, updateServerSession: 21, deleteServerSessions: 22, deleteMsgSelf: 23, deleteMsgSelfBatch: 24, msgFtsInServer: 26, msgFtsInServerByTiming: 27, onClearServerHistoryMsgs: 118, syncUpdateServerSession: 121, onDeleteMsgSelf: 123, onDeleteMsgSelfBatch: 124 }, msgExtend: { id: 23, getThreadMsgs: 1, getMsgsByIdServer: 2, addQuickComment: 3, deleteQuickComment: 4, onQuickComment: 5, onDeleteQuickComment: 6, getQuickComments: 7, addCollect: 8, deleteCollects: 9, updateCollect: 10, getCollects: 11, addStickTopSession: 12, deleteStickTopSession: 13, updateStickTopSession: 14, addMsgPin: 15, updateMsgPin: 16, deleteMsgPin: 17, onAddMsgPin: 18, onUpdateMsgPin: 19, onDeleteMsgPin: 20, getMsgPins: 21, syncAddQuickComment: 103, syncDeleteQuickComment: 104, syncAddStickTopSession: 112, syncDeleteStickTopSession: 113, syncUpdateStickTopSession: 114, syncAddMsgPin: 115, syncUpdateMsgPin: 116, syncDeleteMsgPin: 117 }, team: { id: 8, createTeam: 1, sendTeamMsg: 2, teamMsg: 3, teamMsgs: 4, addTeamMembers: 5, removeTeamMembers: 6, updateTeam: 7, leaveTeam: 8, getTeam: 9, getTeams: 10, getTeamMembers: 11, dismissTeam: 12, applyTeam: 13, passTeamApply: 14, rejectTeamApply: 15, addTeamManagers: 16, removeTeamManagers: 17, transferTeam: 18, updateInfoInTeam: 19, updateNickInTeam: 20, acceptTeamInvite: 21, rejectTeamInvite: 22, getTeamHistoryMsgs: 23, searchTeamHistoryMsgs: 24, updateMuteStateInTeam: 25, getMyTeamMembers: 26, getMutedTeamMembers: 27, sendTeamMsgReceipt: 28, getTeamMsgReads: 29, getTeamMsgReadAccounts: 30, notifyTeamMsgReads: 31, muteTeamAll: 32, getTeamMemberInvitorAccid: 33, getTeamsById: 34, syncMyTeamMembers: 126, syncTeams: 109, syncTeamMembers: 111, syncCreateTeam: 101, syncSendTeamMsg: 102, syncUpdateTeamMember: 119 }, superTeam: { id: 21, sendSuperTeamMsg: 2, superTeamMsg: 3, addSuperTeamMembers: 5, removeSuperTeamMembers: 6, leaveSuperTeam: 7, updateSuperTeam: 8, getSuperTeam: 9, getSuperTeams: 12, updateInfoInSuperTeam: 10, getMySuperTeamMembers: 11, getSuperTeamMembers: 13, getSuperTeamHistoryMsgs: 14, getSuperTeamMembersByJoinTime: 15, sendSuperTeamCustomSysMsg: 16, deleteSuperTeamMsg: 17, superTeamMsgDelete: 18, superTeamCustomSysMsg: 19, applySuperTeam: 20, passSuperTeamApply: 21, rejectSuperTeamApply: 22, acceptSuperTeamInvite: 23, rejectSuperTeamInvite: 24, markSuperTeamSessionAck: 25, addSuperTeamManagers: 26, removeSuperTeamManagers: 27, updateSuperTeamMute: 28, updateSuperTeamMembersMute: 29, updateNickInSuperTeam: 30, transferSuperTeam: 31, markSuperTeamSessionsAck: 32, getSuperTeamMembersByAccounts: 33, getMutedSuperTeamMembers: 34, syncMySuperTeamMembers: 111, syncSuperTeams: 109, syncSuperTeamMembers: 113, syncCreateSuperTeam: 101, syncSendSuperTeamMsg: 102, syncUpdateSuperTeamMember: 110, syncDeleteSuperTeamMsg: 117 }, friend: { id: 12, friendRequest: 1, syncFriendRequest: 101, deleteFriend: 2, syncDeleteFriend: 102, updateFriend: 3, syncUpdateFriend: 103, getFriends: 4 }, chatroom: { id: 13, getChatroomAddress: 1 }, filter: { id: 101, sendFilterMsg: 1, filterMsg: 2, filterSysMsg: 3, sendFilterCustomSysMsg: 7 }, eventService: { id: 14, publishEvent: 1, pushEvent: 2, subscribeEvent: 3, unSubscribeEventsByAccounts: 4, unSubscribeEventsByType: 5, querySubscribeEventsByAccounts: 6, querySubscribeEventsByType: 7, pushEvents: 9 }, proxyService: { id: 22, httpProxy: 1, onProxyMsg: 2 }, qchat: { id: 24, getQChatAddress: 1 } }), a = o.merge({}, s.cmdConfig, { login: { sid: i.auth.id, cid: i.auth.login, params: [{ type: "Property", name: "login" }] }, logout: { sid: i.auth.id, cid: i.auth.logout }, kick: { sid: i.auth.id, cid: i.auth.kick, params: [{ type: "StrArray", name: "deviceIds" }] }, updatePushToken: { sid: i.user.id, cid: i.user.updatePushToken, params: [{ type: "String", name: "tokenName" }, { type: "String", name: "token" }, { type: "int", name: "pushkit" }] }, appBackground: { sid: i.user.id, cid: i.user.appBackground, params: [{ type: "bool", name: "isBackground" }, { type: "Int", name: "badge" }] }, markInBlacklist: { sid: i.user.id, cid: i.user.markInBlacklist, params: [{ type: "String", name: "account" }, { type: "bool", name: "isAdd" }] }, getBlacklist: { sid: i.user.id, cid: i.user.getBlacklist, params: [{ type: "long", name: "time" }] }, markInMutelist: { sid: i.user.id, cid: i.user.markInMutelist, params: [{ type: "String", name: "account" }, { type: "bool", name: "isAdd" }] }, getMutelist: { sid: i.user.id, cid: i.user.getMutelist, params: [{ type: "long", name: "time" }] }, getRelations: { sid: i.user.id, cid: i.user.getRelations, params: [{ type: "long", name: "timetag" }] }, getUsers: { sid: i.user.id, cid: i.user.getUsers, params: [{ type: "StrArray", name: "accounts" }] }, updateMyInfo: { sid: i.user.id, cid: i.user.updateMyInfo, params: [{ type: "Property", name: "user" }, { type: "Property", name: "antispamTag" }] }, updateDonnop: { sid: i.user.id, cid: i.user.updateDonnop, params: [{ type: "Property", name: "donnop" }] }, markRead: { sid: i.notify.id, cid: i.notify.markRead, params: [{ type: "long", name: "id" }, { type: "ph", name: "ph" }] }, batchMarkRead: { sid: i.notify.id, cid: i.notify.batchMarkRead, params: [{ type: "byte", name: "sid" }, { type: "byte", name: "cid" }, { type: "LongArray", name: "ids" }] }, sync: { sid: i.sync.id, cid: i.sync.sync, isAwaitable: false, params: [{ type: "Property", name: "sync" }] }, syncTeamMembers: { sid: i.sync.id, cid: i.sync.syncTeamMembers, params: [{ type: "LongLongMap", name: "sync" }] }, syncSuperTeamMembers: { sid: i.sync.id, cid: i.sync.syncSuperTeamMembers, params: [{ type: "LongLongMap", name: "sync" }] }, sendMsg: { sid: i.msg.id, cid: i.msg.sendMsg, params: [{ type: "Property", name: "msg" }] }, getHistoryMsgs: { sid: i.msg.id, cid: i.msg.getHistoryMsgs, params: [{ type: "String", name: "to" }, { type: "long", name: "beginTime" }, { type: "long", name: "endTime" }, { type: "long", name: "lastMsgId" }, { type: "int", name: "limit" }, { type: "bool", name: "reverse" }, { type: "LongArray", name: "msgTypes" }] }, sendCustomSysMsg: { sid: i.msg.id, cid: i.msg.sendCustomSysMsg, params: [{ type: "Property", name: "sysMsg" }] }, searchHistoryMsgs: { sid: i.msg.id, cid: i.msg.searchHistoryMsgs, params: [{ type: "String", name: "to" }, { type: "long", name: "beginTime" }, { type: "long", name: "endTime" }, { type: "String", name: "keyword" }, { type: "int", name: "limit" }, { type: "bool", name: "reverse" }] }, getSessions: { sid: i.msg.id, cid: i.msg.getSessions, params: [{ type: "long", name: "time" }] }, deleteSessions: { sid: i.msg.id, cid: i.msg.deleteSessions, params: [{ type: "StrArray", name: "sessions" }] }, sendMsgReceipt: { sid: i.msg.id, cid: i.msg.sendMsgReceipt, params: [{ type: "Property", name: "msgReceipt" }] }, deleteMsg: { sid: i.msg.id, cid: i.msg.deleteMsg, params: [{ type: "Property", name: "sysMsg" }] }, markSessionAck: { sid: i.msg.id, cid: i.msg.markSessionAck, params: [{ type: "byte", name: "scene" }, { type: "String", name: "to" }, { type: "long", name: "timetag" }] }, markSessionAckBatch: { sid: i.msg.id, cid: i.msg.markSessionAckBatch, params: [{ type: "PropertyArray", name: "sessionAckTags", entity: "sessionAckTag" }] }, clearServerHistoryMsgs: { sid: i.msg.id, cid: i.msg.clearServerHistoryMsgs, params: [{ type: "Property", name: "clearMsgsParams" }] }, clearServerHistoryMsgsWithSync: { sid: i.msg.id, cid: i.msg.clearServerHistoryMsgs, params: [{ type: "Property", name: "clearMsgsParamsWithSync" }] }, msgFtsInServer: { sid: i.msg.id, cid: i.msg.msgFtsInServer, params: [{ type: "Property", name: "msgFullSearchRequestTag" }] }, msgFtsInServerByTiming: { sid: i.msg.id, cid: i.msg.msgFtsInServerByTiming, params: [{ type: "Property", name: "msgTimingFullSearchRequestTag" }] }, onClearServerHistoryMsgs: { sid: i.msg.id, cid: i.msg.clearServerHistoryMsgs }, getServerSessions: { sid: i.msg.id, cid: i.msg.getServerSessions, params: [{ type: "Property", name: "sessionReqTag" }] }, getServerSession: { sid: i.msg.id, cid: i.msg.getServerSession, params: [{ type: "Property", name: "session" }] }, updateServerSession: { sid: i.msg.id, cid: i.msg.updateServerSession, params: [{ type: "Property", name: "session" }] }, deleteServerSessions: { sid: i.msg.id, cid: i.msg.deleteServerSessions, params: [{ type: "PropertyArray", name: "sessions", entity: "session" }] }, deleteMsgSelf: { sid: i.msg.id, cid: i.msg.deleteMsgSelf, params: [{ type: "Property", name: "deleteMsgSelfTag" }] }, deleteMsgSelfBatch: { sid: i.msg.id, cid: i.msg.deleteMsgSelfBatch, params: [{ type: "PropertyArray", name: "deleteMsgSelfTags", entity: "deleteMsgSelfTag" }] }, onDeleteMsgSelf: { sid: i.msg.id, cid: i.msg.onDeleteMsgSelf }, onDeleteMsgSelfBatch: { sid: i.msg.id, cid: i.msg.onDeleteMsgSelfBatch }, sendSuperTeamMsg: { sid: i.superTeam.id, cid: i.superTeam.sendSuperTeamMsg, params: [{ type: "Property", name: "msg" }] }, addSuperTeamMembers: { sid: i.superTeam.id, cid: i.superTeam.addSuperTeamMembers, params: [{ type: "long", name: "teamId" }, { type: "StrArray", name: "accounts" }, { type: "String", name: "ps" }] }, removeSuperTeamMembers: { sid: i.superTeam.id, cid: i.superTeam.removeSuperTeamMembers, params: [{ type: "long", name: "teamId" }, { type: "StrArray", name: "accounts" }] }, leaveSuperTeam: { sid: i.superTeam.id, cid: i.superTeam.leaveSuperTeam, params: [{ type: "long", name: "teamId" }] }, updateSuperTeam: { sid: i.superTeam.id, cid: i.superTeam.updateSuperTeam, params: [{ type: "Property", name: "team" }, { type: "Property", name: "antispamTag" }] }, getSuperTeam: { sid: i.superTeam.id, cid: i.superTeam.getSuperTeam, params: [{ type: "long", name: "teamId" }] }, getSuperTeams: { sid: i.superTeam.id, cid: i.superTeam.getSuperTeams, params: [{ type: "long", name: "timetag" }] }, getSuperTeamMembers: { sid: i.superTeam.id, cid: i.superTeam.getSuperTeamMembers, params: [{ type: "long", name: "teamId" }, { type: "long", name: "timetag" }] }, updateInfoInSuperTeam: { sid: i.superTeam.id, cid: i.superTeam.updateInfoInSuperTeam, params: [{ type: "Property", name: "superTeamMember" }, { type: "Property", name: "teamSpecialFollowUpdateTag" }] }, getSuperTeamHistoryMsgs: { sid: i.superTeam.id, cid: i.superTeam.getSuperTeamHistoryMsgs, params: [{ type: "long", name: "to" }, { type: "long", name: "beginTime" }, { type: "long", name: "endTime" }, { type: "long", name: "lastMsgId" }, { type: "int", name: "limit" }, { type: "bool", name: "reverse" }, { type: "LongArray", name: "msgTypes" }] }, applySuperTeam: { sid: i.superTeam.id, cid: i.superTeam.applySuperTeam, params: [{ type: "long", name: "teamId" }, { type: "String", name: "ps" }] }, passSuperTeamApply: { sid: i.superTeam.id, cid: i.superTeam.passSuperTeamApply, params: [{ type: "long", name: "teamId" }, { type: "String", name: "from" }] }, rejectSuperTeamApply: { sid: i.superTeam.id, cid: i.superTeam.rejectSuperTeamApply, params: [{ type: "long", name: "teamId" }, { type: "String", name: "from" }, { type: "String", name: "ps" }] }, acceptSuperTeamInvite: { sid: i.superTeam.id, cid: i.superTeam.acceptSuperTeamInvite, params: [{ type: "long", name: "teamId" }, { type: "String", name: "from" }] }, rejectSuperTeamInvite: { sid: i.superTeam.id, cid: i.superTeam.rejectSuperTeamInvite, params: [{ type: "long", name: "teamId" }, { type: "String", name: "from" }, { type: "String", name: "ps" }] }, markSuperTeamSessionAck: { sid: i.superTeam.id, cid: i.superTeam.markSuperTeamSessionAck, params: [{ type: "long", name: "to" }, { type: "long", name: "timetag" }] }, addSuperTeamManagers: { sid: i.superTeam.id, cid: i.superTeam.addSuperTeamManagers, params: [{ type: "long", name: "teamId" }, { type: "StrArray", name: "accounts" }] }, removeSuperTeamManagers: { sid: i.superTeam.id, cid: i.superTeam.removeSuperTeamManagers, params: [{ type: "long", name: "teamId" }, { type: "StrArray", name: "accounts" }] }, updateSuperTeamMute: { sid: i.superTeam.id, cid: i.superTeam.updateSuperTeamMute, params: [{ type: "long", name: "teamId" }, { type: "int", name: "mute" }] }, updateSuperTeamMembersMute: { sid: i.superTeam.id, cid: i.superTeam.updateSuperTeamMembersMute, params: [{ type: "long", name: "teamId" }, { type: "StrArray", name: "accounts" }, { type: "int", name: "mute" }] }, updateNickInSuperTeam: { sid: i.superTeam.id, cid: i.superTeam.updateNickInSuperTeam, params: [{ type: "Property", name: "superTeamMember" }] }, transferSuperTeam: { sid: i.superTeam.id, cid: i.superTeam.transferSuperTeam, params: [{ type: "long", name: "teamId" }, { type: "String", name: "account" }, { type: "bool", name: "leave" }] }, markSuperTeamSessionsAck: { sid: i.superTeam.id, cid: i.superTeam.markSuperTeamSessionsAck, params: [{ type: "PropertyArray", name: "sessionAckTags", entity: "sessionAckTag" }] }, getSuperTeamMembersByJoinTime: { sid: i.superTeam.id, cid: i.superTeam.getSuperTeamMembersByJoinTime, params: [{ type: "long", name: "teamId" }, { type: "long", name: "joinTime" }, { type: "int", name: "limit" }, { type: "bool", name: "reverse" }] }, getSuperTeamMembersByAccounts: { sid: i.superTeam.id, cid: i.superTeam.getSuperTeamMembersByAccounts, params: [{ type: "StrArray", name: "memberIds" }] }, getMutedSuperTeamMembers: { sid: i.superTeam.id, cid: i.superTeam.getMutedSuperTeamMembers, params: [{ type: "long", name: "teamId" }, { type: "long", name: "joinTime" }, { type: "int", name: "limit" }, { type: "bool", name: "reverse" }] }, sendSuperTeamCustomSysMsg: { sid: i.superTeam.id, cid: i.superTeam.sendSuperTeamCustomSysMsg, params: [{ type: "Property", name: "sysMsg" }] }, deleteSuperTeamMsg: { sid: i.superTeam.id, cid: i.superTeam.deleteSuperTeamMsg, params: [{ type: "Property", name: "sysMsg" }] }, getMySuperTeamMembers: { sid: i.superTeam.id, cid: i.superTeam.getMySuperTeamMembers, params: [{ type: "LongArray", name: "teamIds" }] }, createTeam: { sid: i.team.id, cid: i.team.createTeam, params: [{ type: "Property", name: "team" }, { type: "StrArray", name: "accounts" }, { type: "String", name: "ps" }, { type: "Property", name: "antispamTag" }] }, sendTeamMsg: { sid: i.team.id, cid: i.team.sendTeamMsg, params: [{ type: "Property", name: "msg" }] }, addTeamMembers: { sid: i.team.id, cid: i.team.addTeamMembers, params: [{ type: "long", name: "teamId" }, { type: "StrArray", name: "accounts" }, { type: "String", name: "ps" }, { type: "String", name: "attach" }] }, removeTeamMembers: { sid: i.team.id, cid: i.team.removeTeamMembers, params: [{ type: "long", name: "teamId" }, { type: "StrArray", name: "accounts" }] }, updateTeam: { sid: i.team.id, cid: i.team.updateTeam, params: [{ type: "Property", name: "team" }, { type: "Property", name: "antispamTag" }] }, leaveTeam: { sid: i.team.id, cid: i.team.leaveTeam, params: [{ type: "long", name: "teamId" }] }, getTeam: { sid: i.team.id, cid: i.team.getTeam, params: [{ type: "long", name: "teamId" }] }, getTeams: { sid: i.team.id, cid: i.team.getTeams, params: [{ type: "long", name: "timetag" }] }, getTeamsById: { sid: i.team.id, cid: i.team.getTeamsById, params: [{ type: "longArray", name: "teamIds" }] }, getTeamMembers: { sid: i.team.id, cid: i.team.getTeamMembers, params: [{ type: "long", name: "teamId" }, { type: "long", name: "timetag" }] }, dismissTeam: { sid: i.team.id, cid: i.team.dismissTeam, params: [{ type: "long", name: "teamId" }] }, applyTeam: { sid: i.team.id, cid: i.team.applyTeam, params: [{ type: "long", name: "teamId" }, { type: "String", name: "ps" }] }, passTeamApply: { sid: i.team.id, cid: i.team.passTeamApply, params: [{ type: "long", name: "teamId" }, { type: "String", name: "from" }] }, rejectTeamApply: { sid: i.team.id, cid: i.team.rejectTeamApply, params: [{ type: "long", name: "teamId" }, { type: "String", name: "from" }, { type: "String", name: "ps" }] }, addTeamManagers: { sid: i.team.id, cid: i.team.addTeamManagers, params: [{ type: "long", name: "teamId" }, { type: "StrArray", name: "accounts" }] }, removeTeamManagers: { sid: i.team.id, cid: i.team.removeTeamManagers, params: [{ type: "long", name: "teamId" }, { type: "StrArray", name: "accounts" }] }, transferTeam: { sid: i.team.id, cid: i.team.transferTeam, params: [{ type: "long", name: "teamId" }, { type: "String", name: "account" }, { type: "bool", name: "leave" }] }, updateInfoInTeam: { sid: i.team.id, cid: i.team.updateInfoInTeam, params: [{ type: "Property", name: "teamMember" }, { type: "Property", name: "teamSpecialFollowUpdateTag" }] }, updateNickInTeam: { sid: i.team.id, cid: i.team.updateNickInTeam, params: [{ type: "Property", name: "teamMember" }] }, acceptTeamInvite: { sid: i.team.id, cid: i.team.acceptTeamInvite, params: [{ type: "long", name: "teamId" }, { type: "String", name: "from" }] }, rejectTeamInvite: { sid: i.team.id, cid: i.team.rejectTeamInvite, params: [{ type: "long", name: "teamId" }, { type: "String", name: "from" }, { type: "String", name: "ps" }] }, getTeamHistoryMsgs: { sid: i.team.id, cid: i.team.getTeamHistoryMsgs, params: [{ type: "long", name: "to" }, { type: "long", name: "beginTime" }, { type: "long", name: "endTime" }, { type: "long", name: "lastMsgId" }, { type: "int", name: "limit" }, { type: "bool", name: "reverse" }, { type: "LongArray", name: "msgTypes" }] }, searchTeamHistoryMsgs: { sid: i.team.id, cid: i.team.searchTeamHistoryMsgs, params: [{ type: "long", name: "to" }, { type: "long", name: "beginTime" }, { type: "long", name: "endTime" }, { type: "String", name: "keyword" }, { type: "int", name: "limit" }, { type: "bool", name: "reverse" }] }, updateMuteStateInTeam: { sid: i.team.id, cid: i.team.updateMuteStateInTeam, params: [{ type: "long", name: "teamId" }, { type: "String", name: "account" }, { type: "int", name: "mute" }] }, getMyTeamMembers: { sid: i.team.id, cid: i.team.getMyTeamMembers, params: [{ type: "LongArray", name: "teamIds" }] }, getMutedTeamMembers: { sid: i.team.id, cid: i.team.getMutedTeamMembers, params: [{ type: "long", name: "teamId" }] }, sendTeamMsgReceipt: { sid: i.team.id, cid: i.team.sendTeamMsgReceipt, params: [{ type: "PropertyArray", name: "teamMsgReceipts", entity: "teamMsgReceipt" }] }, getTeamMsgReads: { sid: i.team.id, cid: i.team.getTeamMsgReads, params: [{ type: "PropertyArray", name: "teamMsgReceipts", entity: "teamMsgReceipt" }] }, getTeamMsgReadAccounts: { sid: i.team.id, cid: i.team.getTeamMsgReadAccounts, params: [{ type: "Property", name: "teamMsgReceipt" }] }, muteTeamAll: { sid: i.team.id, cid: i.team.muteTeamAll, params: [{ type: "long", name: "teamId" }, { type: "int", name: "mute" }] }, getTeamMemberInvitorAccid: { sid: i.team.id, cid: i.team.getTeamMemberInvitorAccid, params: [{ type: "long", name: "teamId" }, { type: "StrArray", name: "accounts" }] }, friendRequest: { sid: i.friend.id, cid: i.friend.friendRequest, params: [{ type: "String", name: "account" }, { type: "byte", name: "type" }, { type: "String", name: "ps" }] }, deleteFriend: { sid: i.friend.id, cid: i.friend.deleteFriend, params: [{ type: "String", name: "account" }, { type: "Property", name: "delFriendParams" }] }, updateFriend: { sid: i.friend.id, cid: i.friend.updateFriend, params: [{ type: "Property", name: "friend" }] }, getFriends: { sid: i.friend.id, cid: i.friend.getFriends, params: [{ type: "long", name: "timetag" }] }, getChatroomAddress: { sid: i.chatroom.id, cid: i.chatroom.getChatroomAddress, params: [{ type: "long", name: "chatroomId" }, { type: "bool", name: "isWeixinApp" }, { type: "number", name: "type" }] }, sendFilterMsg: { sid: r(i).id, cid: r(i).sendFilterMsg, params: [{ type: "Property", name: "msg" }] }, sendFilterCustomSysMsg: { sid: r(i).id, cid: r(i).sendFilterCustomSysMsg, params: [{ type: "Property", name: "sysMsg" }] }, publishEvent: { sid: i.eventService.id, cid: i.eventService.publishEvent, params: [{ type: "Property", name: "msgEvent" }] }, pushEvent: { sid: i.eventService.id, cid: i.eventService.pushEvent }, subscribeEvent: { sid: i.eventService.id, cid: i.eventService.subscribeEvent, params: [{ type: "Property", name: "msgEventSubscribe" }, { type: "StrArray", name: "accounts" }] }, unSubscribeEventsByAccounts: { sid: i.eventService.id, cid: i.eventService.unSubscribeEventsByAccounts, params: [{ type: "Property", name: "msgEventSubscribe" }, { type: "StrArray", name: "accounts" }] }, unSubscribeEventsByType: { sid: i.eventService.id, cid: i.eventService.unSubscribeEventsByType, params: [{ type: "Property", name: "msgEventSubscribe" }] }, querySubscribeEventsByAccounts: { sid: i.eventService.id, cid: i.eventService.querySubscribeEventsByAccounts, params: [{ type: "Property", name: "msgEventSubscribe" }, { type: "StrArray", name: "accounts" }] }, querySubscribeEventsByType: { sid: i.eventService.id, cid: i.eventService.querySubscribeEventsByType, params: [{ type: "Property", name: "msgEventSubscribe" }] }, pushEvents: { sid: i.eventService.id, cid: i.eventService.pushEvents }, getThreadMsgs: { sid: i.msgExtend.id, cid: i.msgExtend.getThreadMsgs, params: [{ type: "Property", name: "msg" }, { type: "Property", name: "threadMsgReq" }] }, getMsgsByIdServer: { sid: i.msgExtend.id, cid: i.msgExtend.getMsgsByIdServer, params: [{ type: "PropertyArray", name: "reqMsgs", entity: "msg" }] }, addQuickComment: { sid: i.msgExtend.id, cid: i.msgExtend.addQuickComment, params: [{ type: "Property", name: "msg" }, { type: "Property", name: "comment" }] }, deleteQuickComment: { sid: i.msgExtend.id, cid: i.msgExtend.deleteQuickComment, params: [{ type: "Property", name: "msg" }, { type: "Property", name: "comment" }] }, getQuickComments: { sid: i.msgExtend.id, cid: i.msgExtend.getQuickComments, params: [{ type: "PropertyArray", name: "commentReq", entity: "commentReq" }] }, addCollect: { sid: i.msgExtend.id, cid: i.msgExtend.addCollect, params: [{ type: "Property", name: "collect" }] }, deleteCollects: { sid: i.msgExtend.id, cid: i.msgExtend.deleteCollects, params: [{ type: "PropertyArray", name: "collectList", entity: "collect" }] }, updateCollect: { sid: i.msgExtend.id, cid: i.msgExtend.updateCollect, params: [{ type: "Property", name: "collect" }] }, getCollects: { sid: i.msgExtend.id, cid: i.msgExtend.getCollects, params: [{ type: "Property", name: "collectQuery" }] }, addStickTopSession: { sid: i.msgExtend.id, cid: i.msgExtend.addStickTopSession, params: [{ type: "Property", name: "stickTopSession" }] }, updateStickTopSession: { sid: i.msgExtend.id, cid: i.msgExtend.updateStickTopSession, params: [{ type: "Property", name: "stickTopSession" }] }, deleteStickTopSession: { sid: i.msgExtend.id, cid: i.msgExtend.deleteStickTopSession, params: [{ type: "Property", name: "stickTopSession" }] }, addMsgPin: { sid: i.msgExtend.id, cid: i.msgExtend.addMsgPin, params: [{ type: "Property", name: "msg" }, { type: "Property", name: "pinTag" }] }, updateMsgPin: { sid: i.msgExtend.id, cid: i.msgExtend.updateMsgPin, params: [{ type: "Property", name: "msg" }, { type: "Property", name: "pinTag" }] }, deleteMsgPin: { sid: i.msgExtend.id, cid: i.msgExtend.deleteMsgPin, params: [{ type: "Property", name: "msg" }, { type: "Property", name: "pinTag" }] }, getMsgPins: { sid: i.msgExtend.id, cid: i.msgExtend.getMsgPins, params: [{ type: "Property", name: "msgPinReq" }] }, httpProxy: { sid: i.proxyService.id, cid: i.proxyService.httpProxy, params: [{ type: "Property", name: "proxyTag" }] }, getQChatAddress: { sid: i.qchat.id, cid: i.qchat.getQChatAddress, params: [{ type: "Property", name: "getQChatAddressTag" }] } }), c = o.merge({}, s.packetConfig, { "2_3": { service: "auth", cmd: "login", response: [{ type: "Property", name: "loginRes" }, { type: "PropertyArray", name: "loginPorts", entity: "loginPort" }, { type: "Property", name: "aosPushInfo" }] }, "2_5": { service: "auth", cmd: "kicked", response: [{ type: "Number", name: "from" }, { type: "Number", name: "reason" }, { type: "String", name: "custom" }, { type: "Number", name: "customClientType" }] }, "2_6": { service: "auth", cmd: "logout" }, "2_7": { service: "auth", cmd: "multiPortLogin", response: [{ type: "Number", name: "state" }, { type: "PropertyArray", name: "loginPorts", entity: "loginPort" }] }, "2_8": { service: "auth", cmd: "kick", response: [{ type: "StrArray", name: "deviceIds" }] }, "3_1": { service: "user", cmd: "updatePushToken" }, "3_2": { service: "user", cmd: "appBackground" }, "3_3": { service: "user", cmd: "markInBlacklist" }, "3_103": { service: "user", cmd: "syncMarkInBlacklist", response: [{ type: "String", name: "account" }, { type: "Boolean", name: "isAdd" }] }, "3_4": { service: "user", cmd: "getBlacklist", response: [{ type: "StrArray", name: "blacklist" }] }, "3_5": { service: "user", cmd: "markInMutelist" }, "3_105": { service: "user", cmd: "syncMarkInMutelist", response: [{ type: "String", name: "account" }, { type: "Boolean", name: "isAdd" }] }, "3_6": { service: "user", cmd: "getMutelist", response: [{ type: "StrArray", name: "mutelist" }] }, "3_8": { service: "user", cmd: "getRelations", response: [{ type: "PropertyArray", name: "specialRelations", entity: "specialRelation" }, { type: "Number", name: "timetag" }] }, "3_7": { service: "user", cmd: "getUsers", response: [{ type: "PropertyArray", name: "users", entity: "user" }] }, "3_10": { service: "user", cmd: "updateMyInfo", response: [{ type: "Number", name: "timetag" }] }, "3_15": { service: "user", cmd: "updateDonnop", response: [{ type: "Number", name: "timetag" }] }, "3_115": { service: "user", cmd: "syncUpdateDonnop", response: [{ type: "Property", name: "donnop" }, { type: "Number", name: "timetag" }] }, "3_109": { service: "user", cmd: "syncMyInfo", response: [{ type: "Property", name: "user" }, { type: "Number", name: "timetag" }] }, "3_110": { service: "user", cmd: "syncUpdateMyInfo", response: [{ type: "Property", name: "user" }] }, "4_1": { service: "notify" }, "4_2": { service: "notify" }, "4_3": { service: "notify", cmd: "markRead" }, "4_4": { service: "notify", cmd: "syncOfflineMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "4_5": { service: "notify", cmd: "batchMarkRead" }, "4_6": { service: "notify", cmd: "syncOfflineSysMsgs", response: [{ type: "PropertyArray", name: "sysMsgs", entity: "sysMsg" }] }, "4_8": { service: "notify", cmd: "syncOfflineNetcallMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "4_9": { service: "notify", cmd: "syncRoamingMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "4_12": { service: "notify", cmd: "syncMsgReceipts", response: [{ type: "PropertyArray", name: "msgReceipts", entity: "msgReceipt" }, { type: "Number", name: "timetag" }] }, "4_13": { service: "notify", cmd: "syncDonnop", response: [{ type: "Property", name: "donnop" }, { type: "Number", name: "timetag" }] }, "4_14": { service: "notify", cmd: "syncSessionAck", response: [{ type: "StrLongMap", name: "p2p" }, { type: "LongLongMap", name: "team" }, { type: "Number", name: "timetag" }] }, "4_15": { service: "notify", cmd: "syncRobots", response: [{ type: "PropertyArray", name: "robots", entity: "robot" }] }, "4_16": { service: "notify", cmd: "syncBroadcastMsgs", response: [{ type: "PropertyArray", name: "broadcastMsgs", entity: "broadcastMsg" }] }, "4_17": { service: "notify", cmd: "syncSuperTeamRoamingMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "4_18": { service: "notify", cmd: "syncOfflineSuperTeamSysMsgs", response: [{ type: "PropertyArray", name: "sysMsgs", entity: "sysMsg" }] }, "4_19": { service: "notify", cmd: "syncDeleteSuperTeamMsgOfflineRoaming", response: [{ type: "PropertyArray", name: "sysMsgs", entity: "sysMsg" }, { type: "Number", name: "timetag" }, { type: "Number", name: "type" }] }, "4_20": { service: "notify", cmd: "syncSuperTeamSessionAck", response: [{ type: "LongLongMap", name: "superTeam" }, { type: "Number", name: "timetag" }] }, "4_21": { service: "notify", cmd: "syncDeleteMsgSelf", response: [{ type: "PropertyArray", name: "deletedMsgs", entity: "deleteMsgSelfTag" }] }, "4_22": { service: "notify", cmd: "syncSessionsWithMoreRoaming", response: [{ type: "PropertyArray", name: "sessions", entity: "msg" }] }, "4_23": { service: "notify", cmd: "syncStickTopSessions", response: [{ type: "Number", name: "timetag" }, { type: "boolean", name: "modify" }, { type: "PropertyArray", name: "sessions", entity: "stickTopSession" }] }, "4_24": { service: "notify", cmd: "syncSessionHistoryMsgsDelete", response: [{ type: "PropertyArray", name: "sessionHistoryMsgsDeleteTags", entity: "clearMsgsParamsWithSync" }] }, "4_25": { service: "notify", cmd: "syncSessionReliableInfo", response: [{ type: "Property", name: "context", entity: "sessionReliableSyncContextTag" }, { type: "PropertyArray", name: "datas", entity: "sessionReliableSyncTag" }] }, "4_100": { service: "notify", cmd: "syncOfflineFilterMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "4_101": { service: "notify", cmd: "syncOfflineFilterSysMsgs", response: [{ type: "PropertyArray", name: "sysMsgs", entity: "sysMsg" }] }, "5_1": { service: "sync", cmd: "syncDone", response: [{ type: "Number", name: "timetag" }] }, "5_2": { service: "sync", cmd: "syncTeamMembersDone", response: [{ type: "Number", name: "timetag" }] }, "5_3": { service: "sync", cmd: "syncSuperTeamMembersDone", response: [{ type: "Number", name: "timetag" }] }, "7_1": { service: "msg", cmd: "sendMsg", response: [{ type: "Property", name: "msg" }], trivialErrorCodes: [7101] }, "7_2": { service: "msg", cmd: "msg", response: [{ type: "Property", name: "msg" }] }, "7_3": { service: "msg", cmd: "sysMsg", response: [{ type: "Property", name: "sysMsg" }] }, "7_6": { service: "msg", cmd: "getHistoryMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "7_7": { service: "msg", cmd: "sendCustomSysMsg", trivialErrorCodes: [7101] }, "7_8": { service: "msg", cmd: "searchHistoryMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "7_9": { service: "msg", cmd: "deleteSessions" }, "7_10": { service: "msg", cmd: "getSessions", response: [{ type: "StrArray", name: "sessions" }] }, "7_101": { service: "msg", cmd: "syncSendMsg", response: [{ type: "Property", name: "msg" }] }, "7_11": { service: "msg", cmd: "sendMsgReceipt", response: [{ type: "Property", name: "msgReceipt" }] }, "7_12": { service: "msg", cmd: "msgReceipt", response: [{ type: "Property", name: "msgReceipt" }] }, "7_13": { service: "msg", cmd: "onDeleteMsg" }, "7_14": { service: "msg", cmd: "onMsgDeleted", response: [{ type: "Property", name: "sysMsg" }] }, "7_15": { service: "msg", cmd: "onDeleteMsgOfflineRoaming", response: [{ type: "PropertyArray", name: "sysMsgs", entity: "sysMsg" }, { type: "Number", name: "timetag" }, { type: "Number", name: "type" }] }, "7_16": { service: "msg", cmd: "onMarkSessionAck" }, "7_17": { service: "msg", cmd: "broadcastMsg", response: [{ type: "Property", name: "broadcastMsg" }] }, "7_18": { service: "msg", cmd: "clearServerHistoryMsgs", response: [{ type: "Long", name: "timetag" }] }, "7_19": { service: "session", cmd: "getServerSessions", response: [{ type: "Property", name: "sessionReqTag" }, { type: "PropertyArray", name: "sessionList", entity: "session" }] }, "7_20": { service: "session", cmd: "getServerSession", response: [{ type: "Property", name: "session" }] }, "7_21": { service: "session", cmd: "updateServerSession" }, "7_22": { service: "session", cmd: "deleteServerSessions" }, "7_23": { service: "msg", cmd: "deleteMsgSelf", response: [{ type: "Long", name: "timetag" }] }, "7_24": { service: "msg", cmd: "deleteMsgSelfBatch", response: [{ type: "Long", name: "timetag" }] }, "7_25": { service: "msg", cmd: "onMarkSessionAckBatch" }, "7_26": { service: "msg", cmd: "msgFtsInServer", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "7_27": { service: "msg", cmd: "msgFtsInServerByTiming", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "7_118": { service: "msg", cmd: "onClearServerHistoryMsgs", response: [{ type: "Property", name: "sessionHistoryMsgsDeleteTag", entity: "clearMsgsParamsWithSync" }] }, "7_123": { service: "msg", cmd: "onDeleteMsgSelf", response: [{ type: "Property", name: "deleteMsgSelfTag" }] }, "7_124": { service: "msg", cmd: "onDeleteMsgSelfBatch", response: [{ type: "PropertyArray", name: "deleteMsgSelfTags", entity: "deleteMsgSelfTag" }] }, "7_116": { service: "msg", cmd: "syncMarkSessionAck", response: [{ type: "Number", name: "scene" }, { type: "String", name: "to" }, { type: "Number", name: "timetag" }] }, "7_121": { service: "msg", cmd: "syncUpdateServerSession", response: [{ type: "Property", name: "session" }] }, "23_1": { service: "msgExtend", cmd: "getThreadMsgs", response: [{ type: "Property", name: "threadMsg", entity: "msg" }, { type: "Property", name: "threadMsgsMeta" }, { type: "PropertyArray", name: "msgs", entity: "msg" }] }, "23_2": { service: "msgExtend", cmd: "getMsgsByIdServer", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "23_3": { service: "msgExtend", cmd: "addQuickComment", response: [{ type: "Number", name: "timetag" }] }, "23_4": { service: "msgExtend", cmd: "deleteQuickComment", response: [{ type: "Number", name: "timetag" }] }, "23_5": { service: "msgExtend", cmd: "onQuickComment", response: [{ type: "Property", name: "msg" }, { type: "Property", name: "comment" }] }, "23_6": { service: "msgExtend", cmd: "onDeleteQuickComment", response: [{ type: "Property", name: "msg" }, { type: "Property", name: "comment" }] }, "23_7": { service: "msgExtend", cmd: "getQuickComments", response: [{ type: "PropertyArray", name: "commentRes", entity: "commentRes" }] }, "23_8": { service: "msgExtend", cmd: "addCollect", response: [{ type: "Property", name: "collect" }] }, "23_9": { service: "msgExtend", cmd: "deleteCollects", response: [{ type: "Number", name: "deleteNum" }] }, "23_10": { service: "msgExtend", cmd: "updateCollect", response: [{ type: "Property", name: "collect" }] }, "23_11": { service: "msgExtend", cmd: "getCollects", response: [{ type: "Number", name: "total" }, { type: "PropertyArray", name: "collectList", entity: "collect" }] }, "23_12": { service: "msgExtend", cmd: "addStickTopSession", response: [{ type: "Property", name: "stickTopSession" }] }, "23_13": { service: "msgExtend", cmd: "deleteStickTopSession", response: [{ type: "Number", name: "timetag" }] }, "23_14": { service: "msgExtend", cmd: "updateStickTopSession", response: [{ type: "Property", name: "stickTopSession" }] }, "23_15": { service: "msgExtend", cmd: "addMsgPin", response: [{ type: "Number", name: "timetag" }] }, "23_16": { service: "msgExtend", cmd: "updateMsgPin", response: [{ type: "Number", name: "timetag" }] }, "23_17": { service: "msgExtend", cmd: "deleteMsgPin", response: [{ type: "Number", name: "timetag" }] }, "23_18": { service: "msgExtend", cmd: "onAddMsgPin", response: [{ type: "Property", name: "msg" }, { type: "Property", name: "pinTag" }, { type: "Number", name: "timetag" }] }, "23_19": { service: "msgExtend", cmd: "onUpdateMsgPin", response: [{ type: "Property", name: "msg" }, { type: "Property", name: "pinTag" }, { type: "Number", name: "timetag" }] }, "23_20": { service: "msgExtend", cmd: "onDeleteMsgPin", response: [{ type: "Property", name: "msg" }, { type: "Property", name: "pinTag" }, { type: "Number", name: "timetag" }] }, "23_21": { service: "msgExtend", cmd: "getMsgPins", response: [{ type: "Number", name: "timetag" }, { type: "Boolean", name: "modify" }, { type: "PropertyArray", name: "pins", entity: "msgPinRes" }] }, "23_103": { service: "msgExtend", cmd: "syncAddQuickComment", response: [{ type: "Property", name: "msg" }, { type: "Property", name: "comment" }] }, "23_104": { service: "msgExtend", cmd: "syncDeleteQuickComment", response: [{ type: "Property", name: "msg" }, { type: "Property", name: "comment" }] }, "23_112": { service: "msgExtend", cmd: "syncAddStickTopSession", response: [{ type: "Property", name: "stickTopSession" }] }, "23_113": { service: "msgExtend", cmd: "syncDeleteStickTopSession", response: [{ type: "Number", name: "timetag" }, { type: "Property", name: "stickTopSession" }] }, "23_114": { service: "msgExtend", cmd: "syncUpdateStickTopSession", response: [{ type: "Property", name: "stickTopSession" }] }, "23_115": { service: "msgExtend", cmd: "syncAddMsgPin", response: [{ type: "Property", name: "msg" }, { type: "Property", name: "pinTag" }, { type: "Number", name: "timetag" }] }, "23_116": { service: "msgExtend", cmd: "syncUpdateMsgPin", response: [{ type: "Property", name: "msg" }, { type: "Property", name: "pinTag" }, { type: "Number", name: "timetag" }] }, "23_117": { service: "msgExtend", cmd: "syncDeleteMsgPin", response: [{ type: "Property", name: "msg" }, { type: "Property", name: "pinTag" }, { type: "Number", name: "timetag" }] }, "21_2": { service: "superTeam", cmd: "sendSuperTeamMsg", response: [{ type: "Property", name: "msg" }] }, "21_3": { service: "superTeam", cmd: "superTeamMsg", response: [{ type: "Property", name: "msg" }] }, "21_5": { service: "superTeam", cmd: "addSuperTeamMembers", response: [{ type: "StrArray", name: "abortedAccidList" }, { type: "long", name: "timetag" }] }, "21_6": { service: "superTeam", cmd: "removeSuperTeamMembers" }, "21_7": { service: "superTeam", cmd: "leaveSuperTeam" }, "21_8": { service: "superTeam", cmd: "updateSuperTeam", response: [{ type: "long", name: "timetag" }] }, "21_9": { service: "superTeam", cmd: "getSuperTeam", response: [{ type: "Property", name: "team" }] }, "21_12": { service: "superTeam", cmd: "getSuperTeams", response: [{ type: "PropertyArray", name: "teams", entity: "superTeam" }, { type: "bool", name: "isAll" }, { type: "long", name: "timetag" }] }, "21_10": { service: "superTeam", cmd: "updateInfoInSuperTeam", response: [{ type: "Property", name: "superTeamMember" }] }, "21_13": { service: "superTeam", cmd: "getSuperTeamMembers", response: [{ type: "long", name: "timetag" }] }, "21_11": { service: "superTeam", cmd: "getMySuperTeamMembers", response: [{ type: "PropertyArray", name: "members", entity: "superTeamMember" }] }, "21_14": { service: "superTeam", cmd: "getSuperTeamHistoryMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "21_15": { service: "superTeam", cmd: "getSuperTeamMembersByJoinTime", response: [{ type: "PropertyArray", name: "members", entity: "superTeamMember" }] }, "21_16": { service: "superTeam", cmd: "sendSuperTeamCustomSysMsg", trivialErrorCodes: [7101] }, "21_17": { service: "superTeam", cmd: "onDeleteSuperTeamMsg" }, "21_18": { service: "superTeam", cmd: "onSuperTeamMsgDelete", response: [{ type: "Property", name: "sysMsg" }] }, "21_19": { service: "superTeam", cmd: "superTeamCustomSysMsg", response: [{ type: "Property", name: "sysMsg" }] }, "21_20": { service: "superTeam", cmd: "applySuperTeam", response: [{ type: "Property", name: "team" }] }, "21_21": { service: "superTeam", cmd: "passSuperTeamApply" }, "21_22": { service: "superTeam", cmd: "rejectSuperTeamApply" }, "21_23": { service: "superTeam", cmd: "acceptSuperTeamInvite", response: [{ type: "Property", name: "team" }] }, "21_24": { service: "superTeam", cmd: "rejectSuperTeamInvite" }, "21_25": { service: "superTeam", cmd: "onMarkSuperTeamSessionAck" }, "21_26": { service: "superTeam", cmd: "addSuperTeamManagers" }, "21_27": { service: "superTeam", cmd: "removeSuperTeamManagers" }, "21_28": { service: "superTeam", cmd: "updateSuperTeamMute" }, "21_29": { service: "superTeam", cmd: "updateSuperTeamMembersMute", response: [{ type: "long", name: "timetag" }] }, "21_30": { service: "superTeam", cmd: "updateNickInSuperTeam" }, "21_31": { service: "superTeam", cmd: "transferSuperTeam" }, "21_32": { service: "superTeam", cmd: "onMarkSuperTeamSessionsAck" }, "21_33": { service: "superTeam", cmd: "getSuperTeamMembersByAccounts", response: [{ type: "PropertyArray", name: "members", entity: "superTeamMember" }] }, "21_34": { service: "superTeam", cmd: "getMutedSuperTeamMembers", response: [{ type: "PropertyArray", name: "members", entity: "superTeamMember" }] }, "21_113": { service: "superTeam", cmd: "syncSuperTeamMembers", response: [{ type: "Number", name: "teamId" }, { type: "PropertyArray", name: "members", entity: "superTeamMember" }, { type: "bool", name: "isAll" }, { type: "long", name: "timetag" }] }, "21_111": { service: "superTeam", cmd: "syncMySuperTeamMembers", response: [{ type: "PropertyArray", name: "teamMembers", entity: "superTeamMember" }, { type: "long", name: "timetag" }] }, "21_109": { service: "superTeam", cmd: "syncSuperTeams", response: [{ type: "PropertyArray", name: "teams", entity: "superTeam" }, { type: "bool", name: "isAll" }, { type: "long", name: "timetag" }] }, "21_101": { service: "superTeam", cmd: "syncCreateSuperTeam", response: [{ type: "Property", name: "team" }] }, "21_102": { service: "superTeam", cmd: "syncSendSuperTeamMsg", response: [{ type: "Property", name: "msg" }] }, "21_110": { service: "superTeam", cmd: "syncUpdateSuperTeamMember", response: [{ type: "Property", name: "teamMember", entity: "superTeamMember" }] }, "21_117": { service: "superTeam", cmd: "syncDeleteSuperTeamMsg", response: [{ type: "Property", name: "sysMsg" }] }, "21_125": { service: "superTeam", cmd: "syncMarkSuperTeamSessionAck", response: [{ type: "Long", name: "to" }, { type: "Long", name: "timetag" }] }, "8_1": { service: "team", cmd: "createTeam", response: [{ type: "Property", name: "team" }, { type: "StrArray", name: "abortedAccidList" }] }, "8_2": { service: "team", cmd: "sendTeamMsg", response: [{ type: "Property", name: "msg" }] }, "8_3": { service: "team", cmd: "teamMsg", response: [{ type: "Property", name: "msg" }] }, "8_4": { service: "team", cmd: "teamMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "8_5": { service: "team", cmd: "addTeamMembers", response: [{ type: "long", name: "time" }, { type: "StrArray", name: "abortedAccidList" }] }, "8_6": { service: "team", cmd: "removeTeamMembers" }, "8_7": { service: "team", cmd: "updateTeam", response: [{ type: "Number", name: "id" }, { type: "Number", name: "time" }] }, "8_8": { service: "team", cmd: "leaveTeam" }, "8_9": { service: "team", cmd: "getTeam", response: [{ type: "Property", name: "team" }] }, "8_10": { service: "team", cmd: "getTeams", response: [{ type: "PropertyArray", name: "teams", entity: "team" }, { type: "Number", name: "timetag" }] }, "8_11": { service: "team", cmd: "getTeamMembers", response: [{ type: "Number", name: "teamId" }, { type: "PropertyArray", name: "members", entity: "teamMember" }, { type: "Number", name: "timetag" }] }, "8_12": { service: "team", cmd: "dismissTeam" }, "8_13": { service: "team", cmd: "applyTeam", response: [{ type: "Property", name: "team" }] }, "8_14": { service: "team", cmd: "passTeamApply" }, "8_15": { service: "team", cmd: "rejectTeamApply" }, "8_16": { service: "team", cmd: "addTeamManagers" }, "8_17": { service: "team", cmd: "removeTeamManagers" }, "8_18": { service: "team", cmd: "transferTeam" }, "8_19": { service: "team", cmd: "updateInfoInTeam", response: [{ type: "Property", name: "teamMember" }] }, "8_20": { service: "team", cmd: "updateNickInTeam" }, "8_21": { service: "team", cmd: "acceptTeamInvite", response: [{ type: "Property", name: "team" }] }, "8_22": { service: "team", cmd: "rejectTeamInvite" }, "8_23": { service: "team", cmd: "getTeamHistoryMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "8_24": { service: "team", cmd: "searchTeamHistoryMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "8_25": { service: "team", cmd: "updateMuteStateInTeam" }, "8_26": { service: "team", cmd: "getMyTeamMembers", response: [{ type: "PropertyArray", name: "teamMembers", entity: "teamMember" }] }, "8_27": { service: "team", cmd: "getMutedTeamMembers", response: [{ type: "Number", name: "teamId" }, { type: "PropertyArray", name: "teamMembers", entity: "teamMember" }] }, "8_28": { service: "team", cmd: "sendTeamMsgReceipt", response: [{ type: "PropertyArray", name: "teamMsgReceipts", entity: "teamMsgReceipt" }] }, "8_29": { service: "team", cmd: "getTeamMsgReads", response: [{ type: "PropertyArray", name: "teamMsgReceipts", entity: "teamMsgReceipt" }] }, "8_30": { service: "team", cmd: "getTeamMsgReadAccounts", response: [{ type: "Property", name: "teamMsgReceipt" }, { type: "StrArray", name: "readAccounts" }, { type: "StrArray", name: "unreadAccounts" }] }, "8_31": { service: "team", cmd: "notifyTeamMsgReads", response: [{ type: "PropertyArray", name: "teamMsgReceipts", entity: "teamMsgReceipt" }] }, "8_32": { service: "team", cmd: "muteTeamAll", response: [] }, "8_33": { service: "team", cmd: "getTeamMemberInvitorAccid", response: [{ type: "object", name: "accountsMap" }] }, "8_34": { service: "team", cmd: "getTeamsById", response: [{ type: "PropertyArray", name: "teams", entity: "team" }, { type: "StrArray", name: "tids" }], trivialErrorCodes: [816] }, "8_126": { service: "team", cmd: "syncMyTeamMembers", response: [{ type: "PropertyArray", name: "teamMembers", entity: "teamMember" }, { type: "Number", name: "timetag" }] }, "8_109": { service: "team", cmd: "syncTeams", response: [{ type: "Number", name: "timetag" }, { type: "PropertyArray", name: "teams", entity: "team" }] }, "8_111": { service: "team", cmd: "syncTeamMembers", response: [{ type: "Number", name: "teamId" }, { type: "PropertyArray", name: "members", entity: "teamMember" }, { type: "Number", name: "timetag" }] }, "8_101": { service: "team", cmd: "syncCreateTeam", response: [{ type: "Property", name: "team" }] }, "8_102": { service: "team", cmd: "syncSendTeamMsg", response: [{ type: "Property", name: "msg" }] }, "8_119": { service: "team", cmd: "syncUpdateTeamMember", response: [{ type: "Property", name: "teamMember" }] }, "12_1": { service: "friend", cmd: "friendRequest" }, "12_101": { service: "friend", cmd: "syncFriendRequest", response: [{ type: "String", name: "account" }, { type: "Number", name: "type" }, { type: "String", name: "ps" }] }, "12_2": { service: "friend", cmd: "deleteFriend" }, "12_102": { service: "friend", cmd: "syncDeleteFriend", response: [{ type: "String", name: "account" }] }, "12_3": { service: "friend", cmd: "updateFriend" }, "12_103": { service: "friend", cmd: "syncUpdateFriend", response: [{ type: "Property", name: "friend" }] }, "12_4": { service: "friend", cmd: "getFriends", response: [{ type: "PropertyArray", name: "friends", entity: "friend" }, { type: "Number", name: "timetag" }] }, "12_5": { service: "friend", cmd: "syncFriends", response: [{ type: "PropertyArray", name: "friends", entity: "friend" }, { type: "Number", name: "timetag" }] }, "12_6": { service: "friend", cmd: "syncFriendUsers", response: [{ type: "PropertyArray", name: "users", entity: "user" }, { type: "Number", name: "timetag" }] }, "13_1": { service: "chatroom", cmd: "getChatroomAddress", response: [{ type: "StrArray", name: "address" }] }, "14_1": { service: "eventService", cmd: "publishEvent", response: [{ type: "Property", name: "msgEvent" }] }, "14_2": { service: "eventService", cmd: "pushEvent", response: [{ type: "Property", name: "msgEvent" }] }, "14_3": { service: "eventService", cmd: "subscribeEvent", response: [{ type: "StrArray", name: "accounts" }] }, "14_4": { service: "eventService", cmd: "unSubscribeEventsByAccounts", response: [{ type: "StrArray", name: "accounts" }] }, "14_5": { service: "eventService", cmd: "unSubscribeEventsByType" }, "14_6": { service: "eventService", cmd: "querySubscribeEventsByAccounts", response: [{ type: "PropertyArray", name: "msgEventSubscribes", entity: "msgEventSubscribe" }] }, "14_7": { service: "eventService", cmd: "querySubscribeEventsByType", response: [{ type: "PropertyArray", name: "msgEventSubscribes", entity: "msgEventSubscribe" }] }, "14_9": { service: "eventService", cmd: "pushEvents", response: [{ type: "PropertyArray", name: "msgEvents", entity: "msgEvent" }] }, "22_1": { service: "proxyService", cmd: "httpProxy", response: [{ type: "Property", name: "proxyTag" }] }, "22_2": { service: "proxyService", cmd: "onProxyMsg", response: [{ type: "Property", name: "proxyMsg", entity: "proxyMsgTag" }] }, "24_1": { service: "qchat", cmd: "getQChatAddress", response: [{ type: "StrArray", name: "address" }] }, "101_1": { service: "filter", cmd: "sendFilterMsg", response: [{ type: "Property", name: "msg" }] }, "101_2": { service: "filter", cmd: "filterMsg", response: [{ type: "Property", name: "msg" }] }, "101_3": { service: "filter", cmd: "filterSysMsg", response: [{ type: "Property", name: "sysMsg" }] }, "101_7": { service: "filter", cmd: "sendFilterCustomSysMsg" } });
        e.exports = { idMap: i, cmdConfig: a, packetConfig: c };
      }, function(e, t) {
        e.exports = { negotiateTransportTag: { version: -1, serializeList: 1, serialize: 101 }, initTransportTag: {}, nosToken: { objectName: 1, token: 2, bucket: 3, expireTime: 4, expireSec: 7, tag: 8, shortUrl: 9 }, audioToText: { url: 2 }, imageOp: { type: 0, stripmeta: 1, typeType: 2, blurRadius: 3, blurSigma: 4, qualityQuality: 5, cropX: 6, cropY: 7, cropWidth: 8, cropHeight: 9, rotateAngle: 10, pixelPixel: 11, thumbnailMode: 12, thumbnailWidth: 13, thumbnailHeight: 14, thumbnailAxisX: 15, thumbnailAxisY: 16, thumbnailCenterX: 17, thumbnailCenterY: 18, thumbnailEnlarge: 19, thumbnailToStatic: 20, watermarkType: 21, watermarkGravity: 22, watermarkDissolve: 23, watermarkDx: 24, watermarkDy: 25, watermarkImage: 26, watermarkText: 27, watermarkFont: 28, watermarkFontSize: 29, watermarkFontColor: 30, interlace: 31 }, robot: { account: 4, nick: 5, avatar: 6, intro: 7, config: 8, valid: 9, createTime: 10, updateTime: 11, custid: 12, botid: 13, bindTime: 14 }, clientAntispam: { version: 1, md5: 2, nosurl: 3, thesaurus: 4 }, fileQuickTransfer: { md5: 1, url: 2, size: 3, threshold: 4 }, transToken: { name: 1, type: 2, transType: 3, size: 4, extra: 5, body: 6 }, transInfo: { docId: 1, name: 2, prefix: 3, size: 4, type: 5, state: 6, transType: 7, transSize: 8, pageCount: 9, picInfo: 10, extra: 11, flag: 12 }, nosFileUrlTag: { safeUrl: 0, originUrl: 1 }, nosAccessTokenTag: { token: 0, url: 1, userAgent: 2, ext: 3 }, fileListParam: { fromDocId: 1, limit: 2 }, avSignalTag: { type: 1, channelName: 2, channelId: 3, channelCreateTime: 4, channelExpireTime: 5, creator: 6, ext: 7, channelInValid: 8, from: 10, to: 11, requestId: 12, needPush: 13, pushTitle: 14, pushContent: 15, pushPayload: 16, needBadge: 17, members: 18, attach: 19, attachExt: 20, isSave: 21, msgid: 22, uid: 23, time: 24, nertcChannelName: 25, nertcTokenTtl: 26, nertcToken: 27, nertcJoinRoomQueryParamMap: 28, nertcJoinRoomResponse: 29, callStatus: 30 }, login: { clientType: 3, os: 4, sdkVersion: 6, appLogin: 8, protocolVersion: 9, pushTokenName: 10, pushToken: 11, deviceId: 13, appKey: 18, account: 19, browser: 24, session: 26, deviceInfo: 32, sdkType: 41, userAgent: 42, libEnv: 44, isReactNative: 112, token: 1e3, customTag: 38, customClientType: 39, sdkHumanVersion: 40, authType: 115, loginExt: 116 }, loginRes: { lastLoginDeviceId: 17, customTag: 38, connectionId: 102, ip: 103, port: 104, country: 106, hasXMPush: 111 }, loginPort: { type: 3, os: 4, mac: 5, deviceId: 13, account: 19, deviceInfo: 32, connectionId: 102, ip: 103, time: 109, customTag: 38, customClientType: 39 }, aosPushInfo: { pushType: 110, hasTokenPreviously: 111 }, sync: { myInfo: 1, offlineMsgs: 2, teams: 3, netcallMsgs: 6, roamingMsgs: 7, relations: 9, friends: 11, sessions: 12, friendUsers: 13, msgReceipts: 14, myTeamMembers: 15, donnop: 16, deleteMsg: 17, sessionAck: 18, robots: 19, broadcastMsgs: 20, avSignal: 21, superTeams: 22, myInfoInSuperTeams: 23, superTeamRoamingMsgs: 24, deleteSuperTeamMsg: 25, superTeamSessionAck: 26, deleteMsgSelf: 27, stickTopSessions: 28, sessionHistoryMsgsDelete: 29, filterMsgs: 100 }, donnop: { open: 1 }, sessionReqTag: { minTimestamp: 1, maxTimestamp: 2, needLastMsg: 3, limit: 4, hasMore: 5 }, session: { id: 1, updateTime: 2, ext: 3, lastMsg: 4 }, superTeam: { teamId: 1, name: 3, type: 4, owner: 5, level: 6, selfCustom: 7, valid: 8, memberNum: 9, memberUpdateTime: 10, createTime: 11, updateTime: 12, validToCurrentUser: 13, intro: 14, announcement: 15, joinMode: 16, bits: 17, custom: 18, serverCustom: 19, avatar: 20, beInviteMode: 21, inviteMode: 22, updateTeamMode: 23, updateCustomMode: 24, mute: 100, muteType: 101 }, superTeamMember: { teamId: 1, account: 3, type: 4, nickInTeam: 5, bits: 7, active: 8, valid: 9, createTime: 10, updateTime: 11, custom: 12, mute: 13, invitoraccid: 14, joinTime: 15, followAccountIds: 17 }, team: { teamId: 1, name: 3, type: 4, owner: 5, level: 6, selfCustom: 7, valid: 8, memberNum: 9, memberUpdateTime: 10, createTime: 11, updateTime: 12, validToCurrentUser: 13, intro: 14, announcement: 15, joinMode: 16, bits: 17, custom: 18, serverCustom: 19, avatar: 20, beInviteMode: 21, inviteMode: 22, updateTeamMode: 23, updateCustomMode: 24, mute: 100, muteType: 101 }, teamMember: { teamId: 1, account: 3, type: 4, nickInTeam: 5, bits: 7, active: 8, valid: 9, joinTime: 10, updateTime: 11, custom: 12, mute: 13, invitorAccid: 14, followAccountIds: 16 }, teamSpecialFollowUpdateTag: { accountIds: 1, type: 2 }, msg: { scene: 0, to: 1, from: 2, fromClientType: 4, fromDeviceId: 5, fromNick: 6, time: 7, type: 8, body: 9, attach: 10, idClient: 11, idServer: 12, resend: 13, userUpdateTime: 14, custom: 15, pushPayload: 16, pushContent: 17, apnsAccounts: 18, apnsContent: 19, apnsForcePush: 20, yidunEnable: 21, antiSpamContent: 22, antiSpamBusinessId: 23, clientAntiSpam: 24, antiSpamUsingYidun: 25, needMsgReceipt: 26, needUpdateSession: 28, replyMsgFromAccount: 29, replyMsgToAccount: 30, replyMsgTime: 31, replyMsgIdServer: 32, replyMsgIdClient: 33, threadMsgFromAccount: 34, threadMsgToAccount: 35, threadMsgTime: 36, threadMsgIdServer: 37, threadMsgIdClient: 38, delete: 39, callbackExt: 40, subType: 41, yidunAntiCheating: 42, env: 43, yidunAntiSpamExt: 44, yidunAntiSpamRes: 45, __clientExt: 46, robotInfoFunction: 47, robotInfoTopic: 48, robotInfoCustomContent: 49, robotInfoAccount: 50, isHistoryable: 100, isRoamingable: 101, isSyncable: 102, isMuted: 104, cc: 105, isInBlackList: 106, isPushable: 107, isOfflinable: 108, isUnreadable: 109, needPushNick: 110, isReplyMsg: 111, tempTeamMemberCount: 112 }, threadMsgReq: { beginTime: 1, endTime: 2, lastMsgId: 3, limit: 4, reverse: 5 }, threadMsgsMeta: { total: 1, lastMsgTime: 2 }, comment: { from: 1, body: 2, time: 3, custom: 4, needPush: 5, needBadge: 6, pushTitle: 7, apnsText: 8, pushPayload: 9 }, commentReq: { scene: 1, from: 2, to: 3, time: 4, idServer: 5, idClient: 6, timestamp: 100 }, commentRes: { scene: 1, from: 2, to: 3, time: 4, idServer: 5, idClient: 6, detail: 7, modify: 8, timestamp: 100 }, collect: { id: 1, type: 2, data: 3, custom: 4, uniqueId: 5, createTime: 6, updateTime: 7 }, collectQuery: { beginTime: 1, endTime: 2, lastMsgId: 3, limit: 4, reverse: 5, type: 6 }, stickTopSession: { id: 1, topCustom: 2, createTime: 3, updateTime: 4 }, pinTag: { pinFrom: 1, pinCustom: 2, createTime: 3, updateTime: 4 }, msgPinReq: { sessionId: 1, timetag: 2 }, msgPinRes: { scene: 1, from: 2, to: 3, time: 4, idServer: 5, idClient: 6, pinFrom: 7, pinCustom: 8 }, msgReceipt: { to: 1, from: 2, time: 7, idClient: 11 }, teamMsgReceipt: { teamId: 0, idServer: 1, read: 100, unread: 101, idClient: 102, account: 103 }, deleteMsgSelfTag: { scene: 1, from: 2, to: 3, idServer: 4, idClient: 5, time: 6, deletedTime: 7, custom: 8 }, sysMsg: { time: 0, type: 1, to: 2, from: 3, ps: 4, attach: 5, idServer: 6, sendToOnlineUsersOnly: 7, apnsText: 8, pushPayload: 9, deletedIdClient: 10, deletedIdServer: 11, yidunEnable: 12, antiSpamContent: 13, deletedMsgTime: 14, deletedMsgFromNick: 15, opeAccount: 16, env: 21, idClient: 23, callbackExt: 22, cc: 105, isPushable: 107, isUnreadable: 109, needPushNick: 110 }, broadcastMsg: { broadcastId: 1, fromAccid: 2, fromUid: 3, timestamp: 4, body: 5 }, friend: { account: 4, flag: 5, beflag: 6, source: 7, alias: 8, bits: 9, custom: 10, createTime: 11, updateTime: 12, serverex: 13 }, user: { account: 1, nick: 3, avatar: 4, sign: 5, gender: 6, email: 7, birth: 8, tel: 9, custom: 10, createTime: 12, updateTime: 13 }, antispamTag: { antiSpamBusinessId: 1 }, specialRelation: { account: 0, isMuted: 1, isBlacked: 2, createTime: 3, updateTime: 4 }, msgType: { text: 0, picture: 1, audio: 2, video: 3, location: 4, notification: 5, file: 6, netcall_audio: 7, netcall_vedio: 8, datatunnel_new: 9, tips: 10, robot: 11, custom: 100 }, msgEvent: { type: 1, value: 2, idClient: 3, custom: 4, validTime: 5, broadcastType: 6, sync: 7, validTimeType: 8, durable: 9, time: 10, idServer: 11, clientType: 12, serverConfig: 13, serverCustom: 14, appid: 101, account: 103, enableMultiClient: 104, consid: 106 }, msgEventSubscribe: { type: 1, subscribeTime: 2, sync: 3, to: 102, from: 104, time: 105 }, clearMsgsParams: { account: 1, delRoam: 2 }, clearMsgsParamsWithSync: { type: 0, otherAccid: 1, isDeleteRoam: 2, toTid: 3, isSyncSelf: 4, fromAccid: 5, time: 6, ext: 7 }, msgFullSearchRequestTag: { keyword: 1, fromTime: 2, toTime: 3, sessionLimit: 4, msgLimit: 5, order: 6, p2pList: 7, teamList: 8, senderList: 9, msgTypeList: 10, msgSubTypeList: 11 }, msgTimingFullSearchRequestTag: { keyword: 1, fromTime: 2, toTime: 3, msgLimit: 5, order: 6, p2pList: 7, teamList: 8, senderList: 9, msgTypeList: 10, msgSubTypeList: 11 }, delFriendParams: { delAlias: 1 }, proxyTag: { zone: 1, path: 2, method: 3, header: 4, body: 5 }, proxyMsgTag: { from: 1, body: 2, time: 3 }, sessionAckTag: { scene: 1, to: 2, timetag: 3 }, mixTokenReq: { provider: 0, tokenCount: 1, fileExpireSec: 2, tag: 3, returnBody: 4 }, mixAuthTokenReq: { type: 1, urls: 2 }, notifyDetectTag: { type: 1, params: 2, result: 3, t1: 100, t2: 101, t3: 102, t4: 103, t5: 104, t6: 105 }, getQChatAddressTag: { ipType: 1 } };
      }, function(e, t) {
        e.exports = { negotiateTransportTag: { "-1": "version", 1: "serializeList", 101: "serialize" }, initTransportTag: {}, nosToken: { 1: "objectName", 2: "token", 3: "bucket", 4: "expireTime", 7: "expireSec", 8: "tag", 9: "shortUrl" }, audioToText: { 2: "url" }, imageOp: { 0: "type", 1: "stripmeta", 2: "typeType", 3: "blurRadius", 4: "blurSigma", 5: "qualityQuality", 6: "cropX", 7: "cropY", 8: "cropWidth", 9: "cropHeight", 10: "rotateAngle", 11: "pixelPixel", 12: "thumbnailMode", 13: "thumbnailWidth", 14: "thumbnailHeight", 15: "thumbnailAxisX", 16: "thumbnailAxisY", 17: "thumbnailCenterX", 18: "thumbnailCenterY", 19: "thumbnailEnlarge", 20: "thumbnailToStatic", 21: "watermarkType", 22: "watermarkGravity", 23: "watermarkDissolve", 24: "watermarkDx", 25: "watermarkDy", 26: "watermarkImage", 27: "watermarkText", 28: "watermarkFont", 29: "watermarkFontSize", 30: "watermarkFontColor", 31: "interlace" }, robot: { 4: "account", 5: "nick", 6: "avatar", 7: "intro", 8: "config", 9: "valid", 10: "createTime", 11: "updateTime", 12: "custid", 13: "botid", 14: "bindTime", _6_safe: "_avatar_safe" }, clientAntispam: { 1: "version", 2: "md5", 3: "nosurl", 4: "thesaurus" }, fileQuickTransfer: { 1: "md5", 2: "url", 3: "size", 4: "threshold", _2_safe: "_url_safe" }, transToken: { 1: "name", 2: "type", 3: "transType", 4: "size", 5: "extra", 6: "body" }, transInfo: { 1: "docId", 2: "name", 3: "prefix", 4: "size", 5: "type", 6: "state", 7: "transType", 8: "transSize", 9: "pageCount", 10: "picInfo", 11: "extra", 12: "flag" }, nosFileUrlTag: { 0: "safeUrl", 1: "originUrl" }, nosAccessTokenTag: { 0: "token", 1: "url", 2: "userAgent", 3: "ext" }, nosConfigTag: { 1: "bucket", 2: "cdnDomain", 3: "expire", 4: "objectNamePrefix" }, appGrayConfigTag: { 0: "grayConfig", 1: "ttl" }, mixStorePolicyTag: { 0: "providers", 1: "ttl", 2: "mixEnable", 3: "nosPolicy", 4: "s3Policy" }, mixStoreTokenTag: { 0: "provider", 1: "accessKeyId", 2: "secretAccessKey", 3: "sessionToken", 4: "token", 5: "expireAt", 6: "bucket", 7: "objectName", 8: "fileExpireSec", 9: "tag", 10: "shortUrl", 11: "region" }, notifyDetectTag: { 1: "type", 2: "params", 3: "result", 100: "t1", 101: "t2", 102: "t3", 103: "t4", 104: "t5", 105: "t6" }, backSourceTokenTag: { 1: "type", 2: "tokens", 3: "token", 4: "ttl" }, fileListParam: { 1: "fromDocId", 2: "limit" }, avSignalTag: { 1: "type", 2: "channelName", 3: "channelId", 4: "channelCreateTime", 5: "channelExpireTime", 6: "creator", 7: "ext", 8: "channelInValid", 10: "from", 11: "to", 12: "requestId", 13: "needPush", 14: "pushTitle", 15: "pushContent", 16: "pushPayload", 17: "needBadge", 18: "members", 19: "attach", 20: "attachExt", 21: "isSave", 22: "msgid", 23: "uid", 24: "time", 25: "nertcChannelName", 26: "nertcTokenTtl", 27: "nertcToken", 28: "nertcJoinRoomQueryParamMap", 29: "nertcJoinRoomResponse", 30: "callStatus" }, login: { 3: "clientType", 4: "os", 6: "sdkVersion", 8: "appLogin", 9: "protocolVersion", 10: "pushTokenName", 11: "pushToken", 13: "deviceId", 18: "appKey", 19: "account", 24: "browser", 26: "session", 32: "deviceInfo", 38: "customTag", 39: "customClientType", 40: "sdkHumanVersion", 112: "isReactNative", 115: "authType", 116: "loginExt", 1e3: "token" }, loginRes: { 17: "lastLoginDeviceId", 38: "customTag", 102: "connectionId", 103: "ip", 104: "port", 106: "country", 111: "hasXMPush" }, loginPort: { 3: "type", 4: "os", 5: "mac", 13: "deviceId", 19: "account", 32: "deviceInfo", 38: "customTag", 39: "customClientType", 102: "connectionId", 103: "ip", 109: "time" }, aosPushInfo: { 110: "pushType", 111: "hasTokenPreviously" }, sync: { 1: "myInfo", 2: "offlineMsgs", 3: "teams", 6: "netcallMsgs", 7: "roamingMsgs", 9: "relations", 11: "friends", 12: "sessions", 13: "friendUsers", 14: "msgReceipts", 15: "myTeamMembers", 16: "donnop", 17: "deleteMsg", 18: "sessionAck", 19: "robots", 20: "broadcastMsgs", 21: "avSignal", 22: "superTeams", 23: "myInfoInSuperTeams", 24: "superTeamRoamingMsgs", 25: "deleteSuperTeamMsg", 26: "superTeamSessionAck", 27: "deleteMsgSelf", 28: "stickTopSessions", 29: "sessionHistoryMsgsDelete", 100: "filterMsgs" }, donnop: { 1: "open" }, sessionReqTag: { 1: "minTimestamp", 2: "maxTimestamp", 3: "needLastMsg", 4: "limit", 5: "hasMore" }, session: { 1: "id", 2: "updateTime", 3: "ext", 4: "lastMsg", 5: "lastMsgType" }, superTeam: { 1: "teamId", 3: "name", 4: "type", 5: "owner", 6: "level", 7: "selfCustom", 8: "valid", 9: "memberNum", 10: "memberUpdateTime", 11: "createTime", 12: "updateTime", 13: "validToCurrentUser", 14: "intro", 15: "announcement", 16: "joinMode", 17: "bits", 18: "custom", 19: "serverCustom", 20: "avatar", 21: "beInviteMode", 22: "inviteMode", 23: "updateTeamMode", 24: "updateCustomMode", 100: "mute", 101: "muteType", _20_safe: "_avatar_safe" }, superTeamMember: { 1: "teamId", 3: "account", 4: "type", 5: "nickInTeam", 7: "bits", 8: "active", 9: "valid", 10: "createTime", 11: "updateTime", 12: "custom", 13: "mute", 14: "invitoraccid", 15: "joinTime", 17: "followAccountIds" }, team: { 1: "teamId", 3: "name", 4: "type", 5: "owner", 6: "level", 7: "selfCustom", 8: "valid", 9: "memberNum", 10: "memberUpdateTime", 11: "createTime", 12: "updateTime", 13: "validToCurrentUser", 14: "intro", 15: "announcement", 16: "joinMode", 17: "bits", 18: "custom", 19: "serverCustom", 20: "avatar", 21: "beInviteMode", 22: "inviteMode", 23: "updateTeamMode", 24: "updateCustomMode", 100: "mute", 101: "muteType", _20_safe: "_avatar_safe" }, teamMember: { 1: "teamId", 3: "account", 4: "type", 5: "nickInTeam", 7: "bits", 8: "active", 9: "valid", 10: "joinTime", 11: "updateTime", 12: "custom", 13: "mute", 14: "invitorAccid", 16: "followAccountIds" }, msg: { 0: "scene", 1: "to", 2: "from", 4: "fromClientType", 5: "fromDeviceId", 6: "fromNick", 7: "time", 8: "type", 9: "body", 10: "attach", 11: "idClient", 12: "idServer", 13: "resend", 14: "userUpdateTime", 15: "custom", 16: "pushPayload", 17: "pushContent", 18: "apnsAccounts", 19: "apnsContent", 20: "apnsForcePush", 21: "yidunEnable", 22: "antiSpamContent", 23: "antiSpamBusinessId", 24: "clientAntiSpam", 25: "antiSpamUsingYidun", 26: "needMsgReceipt", 28: "needUpdateSession", 29: "replyMsgFromAccount", 30: "replyMsgToAccount", 31: "replyMsgTime", 32: "replyMsgIdServer", 33: "replyMsgIdClient", 34: "threadMsgFromAccount", 35: "threadMsgToAccount", 36: "threadMsgTime", 37: "threadMsgIdServer", 38: "threadMsgIdClient", 39: "delete", 40: "callbackExt", 41: "subType", 42: "yidunAntiCheating", 43: "env", 44: "yidunAntiSpamExt", 45: "yidunAntiSpamRes", 46: "__clientExt", 47: "robotInfoFunction", 48: "robotInfoTopic", 49: "robotInfoCustomContent", 50: "robotInfoAccount", 100: "isHistoryable", 101: "isRoamingable", 102: "isSyncable", 104: "isMuted", 105: "cc", 106: "isInBlackList", 107: "isPushable", 108: "isOfflinable", 109: "isUnreadable", 110: "needPushNick", 111: "isReplyMsg", 112: "tempTeamMemberCount" }, threadMsgReq: { 1: "beginTime", 2: "endTime", 3: "lastMsgId", 4: "limit", 5: "reverse" }, threadMsgsMeta: { 1: "total", 2: "lastMsgTime" }, comment: { 1: "from", 2: "body", 3: "time", 4: "custom", 5: "needPush", 6: "needBadge", 7: "pushTitle", 8: "apnsText", 9: "pushPayload" }, commentReq: { 1: "scene", 2: "from", 3: "to", 4: "time", 5: "idServer", 6: "idClient", 100: "timestamp" }, commentRes: { 1: "scene", 2: "from", 3: "to", 4: "time", 5: "idServer", 6: "idClient", 7: "detail", 8: "modify", 100: "timestamp" }, collect: { 1: "id", 2: "type", 3: "data", 4: "custom", 5: "uniqueId", 6: "createTime", 7: "updateTime" }, collectQuery: { 1: "beginTime", 2: "endTime", 3: "lastMsgId", 4: "limit", 5: "reverse", 6: "type" }, stickTopSession: { 1: "id", 2: "topCustom", 3: "createTime", 4: "updateTime" }, pinTag: { 1: "pinFrom", 2: "pinCustom", 3: "createTime", 4: "updateTime" }, msgPinReq: { 1: "sessionId", 2: "timetag" }, msgPinRes: { 1: "scene", 2: "from", 3: "to", 4: "time", 5: "idServer", 6: "idClient", 7: "pinFrom", 8: "pinCustom" }, msgReceipt: { 1: "to", 2: "from", 7: "time", 11: "idClient" }, teamMsgReceipt: { 0: "teamId", 1: "idServer", 100: "read", 101: "unread", 102: "idClient", 103: "account" }, deleteMsgSelfTag: { 1: "scene", 2: "from", 3: "to", 4: "idServer", 5: "idClient", 6: "time", 7: "deletedTime", 8: "custom" }, sysMsg: { 0: "time", 1: "type", 2: "to", 3: "from", 4: "ps", 5: "attach", 6: "idServer", 7: "sendToOnlineUsersOnly", 8: "apnsText", 9: "pushPayload", 10: "deletedIdClient", 11: "deletedIdServer", 12: "yidunEnable", 13: "antiSpamContent", 14: "deletedMsgTime", 15: "deletedMsgFromNick", 16: "opeAccount", 21: "env", 22: "callbackExt", 23: "idClient", 105: "cc", 107: "isPushable", 109: "isUnreadable", 110: "needPushNick" }, broadcastMsg: { 1: "broadcastId", 2: "fromAccid", 3: "fromUid", 4: "timestamp", 5: "body" }, friend: { 4: "account", 5: "flag", 6: "beflag", 7: "source", 8: "alias", 9: "bits", 10: "custom", 11: "createTime", 12: "updateTime", 13: "serverex" }, user: { 1: "account", 3: "nick", 4: "avatar", 5: "sign", 6: "gender", 7: "email", 8: "birth", 9: "tel", 10: "custom", 12: "createTime", 13: "updateTime", _4_safe: "_avatar_safe" }, antispamTag: { antiSpamBusinessId: 1 }, specialRelation: { 0: "account", 1: "isMuted", 2: "isBlacked", 3: "createTime", 4: "updateTime" }, msgType: { 0: "text", 1: "picture", 2: "audio", 3: "video", 4: "location", 5: "notification", 6: "file", 7: "netcall_audio", 8: "netcall_vedio", 9: "datatunnel_new", 10: "tips", 11: "robot", 100: "custom" }, msgEvent: { 1: "type", 2: "value", 3: "idClient", 4: "custom", 5: "validTime", 6: "broadcastType", 7: "sync", 8: "validTimeType", 9: "durable", 10: "time", 11: "idServer", 12: "clientType", 13: "serverConfig", 14: "serverCustom", 101: "appid", 103: "account", 104: "enableMultiClient", 106: "consid" }, msgEventSubscribe: { 1: "type", 2: "subscribeTime", 3: "sync", 102: "to", 104: "from", 105: "time" }, clearMsgsParams: { 1: "account", 2: "delRoam" }, clearMsgsParamsWithSync: { 0: "type", 1: "otherAccid", 2: "delRoam", 3: "toTid", 4: "isSyncSelf", 5: "fromAccid", 6: "time", 7: "ext" }, msgFullSearchRequestTag: { 1: "keyword", 2: "fromTime", 3: "toTime", 4: "sessionLimit", 5: "msgLimit", 6: "order", 7: "p2pList", 8: "teamList", 9: "senderList", 10: "msgTypeList", 11: "msgSubTypeList" }, delFriendParams: { 1: "delAlias" }, proxyTag: { 1: "zone", 2: "path", 3: "method", 4: "header", 5: "body" }, proxyMsgTag: { 1: "from", 2: "body", 3: "time" }, sessionReliableSyncTag: { 1: "scene", 2: "sessionId", 3: "syncStatus", 4: "syncEndMsgId", 5: "syncEndMsgidClient", 6: "syncEndMsgTime", 7: "syncStartMsgid", 8: "syncStartMsgidClient", 9: "syncStartMsgTime", 10: "nextMsgid", 11: "nextMsgidClient", 12: "nextMsgTime", 13: "roamMsgSync", 14: "offlineMsgSync", 15: "netCallOfflineMsgSync" }, sessionReliableSyncContextTag: { 1: "timetag", 2: "type" } };
      }, function(e, t, n) {
        var r = n(0), o = n(193), s = r.merge({}, o.idMap, { chatroom: { id: 13, login: 2, kicked: 3, logout: 4, sendMsg: 6, msg: 7, getChatroomMembers: 8, getHistoryMsgs: 9, markChatroomMember: 11, closeChatroom: 12, getChatroom: 13, updateChatroom: 14, updateMyChatroomMemberInfo: 15, getChatroomMembersInfo: 16, kickChatroomMember: 17, updateChatroomMemberTempMute: 19, queueOffer: 20, queuePoll: 21, queueList: 22, peak: 23, queueDrop: 24, queueInit: 25, queueChange: 26, updateTagMembersTempMute: 30, getChatroomMembersByTag: 31, getChatroomMemberCountByTag: 32, updateCoordinate: 33, updateChatroomTags: 34, sendChatroomMsgAck: 35, getHistoryMsgsByTags: 36, notifyCdnInfo: 99 }, user: { id: 3, syncRobot: 16 } }), i = r.merge({}, o.cmdConfig, { login: { sid: s.chatroom.id, cid: s.chatroom.login, params: [{ type: "byte", name: "type" }, { type: "Property", name: "login" }, { type: "Property", name: "imLogin" }] }, logout: { sid: s.chatroom.id, cid: s.chatroom.logout }, sendMsg: { sid: s.chatroom.id, cid: s.chatroom.sendMsg, params: [{ type: "Property", name: "msg" }] }, getChatroomMembers: { sid: s.chatroom.id, cid: s.chatroom.getChatroomMembers, params: [{ type: "byte", name: "type" }, { type: "long", name: "time" }, { type: "int", name: "limit" }] }, getHistoryMsgs: { sid: s.chatroom.id, cid: s.chatroom.getHistoryMsgs, params: [{ type: "long", name: "timetag" }, { type: "int", name: "limit" }, { type: "bool", name: "reverse" }, { type: "LongArray", name: "msgTypes" }] }, markChatroomMember: { sid: s.chatroom.id, cid: s.chatroom.markChatroomMember, params: [{ type: "string", name: "account" }, { type: "int", name: "type" }, { type: "bool", name: "isAdd" }, { type: "int", name: "level" }, { type: "string", name: "custom" }] }, closeChatroom: { sid: s.chatroom.id, cid: s.chatroom.closeChatroom, params: [{ type: "string", name: "custom" }] }, getChatroom: { sid: s.chatroom.id, cid: s.chatroom.getChatroom }, updateChatroom: { sid: s.chatroom.id, cid: s.chatroom.updateChatroom, params: [{ type: "Property", name: "chatroom" }, { type: "bool", name: "needNotify" }, { type: "String", name: "custom" }, { type: "Property", name: "antispamTag" }] }, updateMyChatroomMemberInfo: { sid: s.chatroom.id, cid: s.chatroom.updateMyChatroomMemberInfo, params: [{ type: "Property", name: "chatroomMember" }, { type: "bool", name: "needNotify" }, { type: "String", name: "custom" }, { type: "bool", name: "needSave" }, { type: "Property", name: "antispamTag" }] }, getChatroomMembersInfo: { sid: s.chatroom.id, cid: s.chatroom.getChatroomMembersInfo, params: [{ type: "StrArray", name: "accounts" }] }, kickChatroomMember: { sid: s.chatroom.id, cid: s.chatroom.kickChatroomMember, params: [{ type: "string", name: "account" }, { type: "string", name: "custom" }] }, updateChatroomMemberTempMute: { sid: s.chatroom.id, cid: s.chatroom.updateChatroomMemberTempMute, params: [{ type: "String", name: "account" }, { type: "long", name: "duration" }, { type: "bool", name: "needNotify" }, { type: "String", name: "custom" }] }, queueOffer: { sid: s.chatroom.id, cid: s.chatroom.queueOffer, params: [{ type: "string", name: "elementKey" }, { type: "string", name: "elementValue" }, { type: "bool", name: "transient" }, { type: "string", name: "elementAccount" }] }, queuePoll: { sid: s.chatroom.id, cid: s.chatroom.queuePoll, params: [{ type: "string", name: "elementKey" }] }, queueList: { sid: s.chatroom.id, cid: s.chatroom.queueList }, peak: { sid: s.chatroom.id, cid: s.chatroom.peak }, queueDrop: { sid: s.chatroom.id, cid: s.chatroom.queueDrop }, queueInit: { sid: s.chatroom.id, cid: s.chatroom.queueInit, params: [{ type: "int", name: "limit" }] }, queueChange: { sid: s.chatroom.id, cid: s.chatroom.queueChange, params: [{ type: "StrStrMap", name: "elementMap" }, { type: "bool", name: "needNotify" }, { type: "string", name: "notifyExt" }] }, updateTagMembersTempMute: { sid: s.chatroom.id, cid: s.chatroom.updateTagMembersTempMute, params: [{ type: "Property", name: "tagMuteReq" }] }, updateCoordinate: { sid: s.chatroom.id, cid: s.chatroom.updateCoordinate, params: [{ type: "Property", name: "coordinateReq" }] }, getChatroomMemberCountByTag: { sid: s.chatroom.id, cid: s.chatroom.getChatroomMemberCountByTag, params: [{ type: "String", name: "tag" }] }, getChatroomMembersByTag: { sid: s.chatroom.id, cid: s.chatroom.getChatroomMembersByTag, params: [{ type: "Property", name: "tagMemberReq" }] }, updateChatroomTags: { sid: s.chatroom.id, cid: s.chatroom.updateChatroomTags, params: [{ type: "Property", name: "chatRoomTagsUpdateTag" }] }, sendChatroomMsgAck: { sid: s.chatroom.id, cid: s.chatroom.sendChatroomMsgAck, params: [{ type: "Property", name: "chatRoomMsgAckTag" }] }, getHistoryMsgsByTags: { sid: s.chatroom.id, cid: s.chatroom.getHistoryMsgsByTags, params: [{ type: "Property", name: "chatRoomTagHistoryMsgRequestTag" }] }, notifyCdnInfo: { sid: s.chatroom.id, cid: s.chatroom.notifyCdnInfo }, syncRobot: { sid: s.user.id, cid: s.user.syncRobot, params: [{ type: "long", name: "timetag" }] } }), a = r.merge({}, o.packetConfig, { "4_10": { service: "notify" }, "4_11": { service: "notify" }, "3_16": { service: "chatroom", cmd: "syncRobot", response: [{ type: "PropertyArray", name: "robots", entity: "robot" }] }, "13_2": { service: "chatroom", cmd: "login", response: [{ type: "Property", name: "chatroom" }, { type: "Property", name: "chatroomMember" }, { type: "Property", name: "chatroomCdnInfo" }] }, "13_3": { service: "chatroom", cmd: "kicked", response: [{ type: "Number", name: "reason" }, { type: "String", name: "custom" }] }, "13_4": { service: "chatroom", cmd: "logout" }, "13_6": { service: "chatroom", cmd: "sendMsg", response: [{ type: "Property", name: "msg" }] }, "13_7": { service: "chatroom", cmd: "msg", response: [{ type: "Property", name: "msg" }] }, "13_8": { service: "chatroom", cmd: "getChatroomMembers", response: [{ type: "PropertyArray", name: "members", entity: "chatroomMember" }] }, "13_9": { service: "chatroom", cmd: "getHistoryMsgs", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "13_11": { service: "chatroom", cmd: "markChatroomMember", response: [{ type: "Property", name: "chatroomMember" }] }, "13_12": { service: "chatroom", cmd: "closeChatroom" }, "13_13": { service: "chatroom", cmd: "getChatroom", response: [{ type: "Property", name: "chatroom" }] }, "13_14": { service: "chatroom", cmd: "updateChatroom" }, "13_15": { service: "chatroom", cmd: "updateMyChatroomMemberInfo" }, "13_16": { service: "chatroom", cmd: "getChatroomMembersInfo", response: [{ type: "PropertyArray", name: "members", entity: "chatroomMember" }] }, "13_17": { service: "chatroom", cmd: "kickChatroomMember" }, "13_19": { service: "chatroom", cmd: "updateChatroomMemberTempMute" }, "13_20": { service: "chatroom", cmd: "queueOffer" }, "13_21": { service: "chatroom", cmd: "queuePoll", response: [{ type: "String", name: "elementKey" }, { type: "String", name: "elementValue" }] }, "13_22": { service: "chatroom", cmd: "queueList", response: [{ type: "KVArray", name: "queueList" }] }, "13_23": { service: "chatroom", cmd: "peak", response: [{ type: "String", name: "elementKey" }, { type: "String", name: "elementValue" }] }, "13_24": { service: "chatroom", cmd: "queueDrop" }, "13_25": { service: "chatroom", cmd: "queueInit" }, "13_26": { service: "chatroom", cmd: "queueChange", response: [{ type: "StrArray", name: "elementKeyArray" }] }, "13_30": { service: "chatroom", cmd: "updateTagMembersTempMute" }, "13_33": { service: "chatroom", cmd: "updateCoordinate" }, "13_31": { service: "chatroom", cmd: "getChatroomMembersByTag", response: [{ type: "PropertyArray", name: "members", entity: "chatroomMember" }] }, "13_32": { service: "chatroom", cmd: "getChatroomMemberCountByTag", response: [{ type: "long", name: "count" }] }, "13_34": { service: "chatroom", cmd: "updateChatroomTags" }, "13_36": { service: "chatroom", cmd: "getHistoryMsgsByTags", response: [{ type: "PropertyArray", name: "msgs", entity: "msg" }] }, "13_99": { service: "chatroom", cmd: "notifyCdnInfo", response: [{ type: "Property", name: "chatroomCdnInfo" }] }, "13_101": { service: "chatroom", cmd: "updateChatroomTag", response: [{ type: "Property", name: "updateTags" }] } });
        e.exports = { idMap: s, cmdConfig: i, packetConfig: a };
      }, function(e, t) {
        e.exports = { imLogin: { clientType: 3, os: 4, sdkVersion: 6, appLogin: 8, protocolVersion: 9, pushTokenName: 10, pushToken: 11, deviceId: 13, appKey: 18, account: 19, browser: 24, session: 26, deviceInfo: 32, sdkType: 41, userAgent: 42, libEnv: 44, isReactNative: 112, authType: 115, loginExt: 116, token: 1e3, customTag: 38 }, nosToken: { objectName: 1, token: 2, bucket: 3, expireTime: 4, expireSec: 7, tag: 8, shortUrl: 9 }, audioToText: { url: 2 }, imageOp: { type: 0, stripmeta: 1, typeType: 2, blurRadius: 3, blurSigma: 4, qualityQuality: 5, cropX: 6, cropY: 7, cropWidth: 8, cropHeight: 9, rotateAngle: 10, pixelPixel: 11, thumbnailMode: 12, thumbnailWidth: 13, thumbnailHeight: 14, thumbnailAxisX: 15, thumbnailAxisY: 16, thumbnailCenterX: 17, thumbnailCenterY: 18, thumbnailEnlarge: 19, thumbnailToStatic: 20, watermarkType: 21, watermarkGravity: 22, watermarkDissolve: 23, watermarkDx: 24, watermarkDy: 25, watermarkImage: 26, watermarkText: 27, watermarkFont: 28, watermarkFontSize: 29, watermarkFontColor: 30, interlace: 31 }, robot: { account: 4, nick: 5, avatar: 6, intro: 7, config: 8, valid: 9, createTime: 10, updateTime: 11, custid: 12, botid: 13, bindTime: 14 }, clientAntispam: { version: 1, md5: 2, nosurl: 3, thesaurus: 4 }, fileQuickTransfer: { md5: 1, url: 2, size: 3, threshold: 4 }, transToken: { name: 1, type: 2, transType: 3, size: 4, extra: 5, body: 6 }, transInfo: { docId: 1, name: 2, prefix: 3, size: 4, type: 5, state: 6, transType: 7, transSize: 8, pageCount: 9, picInfo: 10, extra: 11, flag: 12 }, nosFileUrlTag: { safeUrl: 0, originUrl: 1 }, nosAccessTokenTag: { token: 0, url: 1, userAgent: 2, ext: 3 }, fileListParam: { fromDocId: 1, limit: 2 }, avSignalTag: { type: 1, channelName: 2, channelId: 3, channelCreateTime: 4, channelExpireTime: 5, creator: 6, ext: 7, channelInValid: 8, from: 10, to: 11, requestId: 12, needPush: 13, pushTitle: 14, pushContent: 15, pushPayload: 16, needBadge: 17, members: 18, attach: 19, attachExt: 20, isSave: 21, msgid: 22, uid: 23, time: 24, nertcChannelName: 25, nertcTokenTtl: 26, nertcToken: 27, nertcJoinRoomQueryParamMap: 28, nertcJoinRoomResponse: 29, callStatus: 30 }, login: { appKey: 1, account: 2, deviceId: 3, chatroomId: 5, appLogin: 8, chatroomNick: 20, chatroomAvatar: 21, chatroomCustom: 22, chatroomEnterCustom: 23, session: 26, isAnonymous: 38, tags: 39, notifyTargetTags: 40, loginAuthType: 41, loginExt: 42, loc_x: 43, loc_y: 44, loc_z: 45, distance: 46, antiSpamBusinessId: 47 }, chatroom: { id: 1, name: 3, announcement: 4, broadcastUrl: 5, custom: 12, createTime: 14, updateTime: 15, queuelevel: 16, creator: 100, onlineMemberNum: 101, mute: 102 }, msg: { idClient: 1, type: 2, attach: 3, custom: 4, resend: 5, userUpdateTime: 6, fromNick: 7, fromAvatar: 8, fromCustom: 9, yidunEnable: 10, antiSpamContent: 11, skipHistory: 12, body: 13, antiSpamBusinessId: 14, clientAntiSpam: 15, antiSpamUsingYidun: 16, time: 20, from: 21, chatroomId: 22, fromClientType: 23, highPriority: 25, callbackExt: 27, subType: 28, yidunAntiCheating: 29, env: 30, notifyTargetTags: 31, yidunAntiSpamExt: 32, yidunAntiSpamRes: 33, loc_x: 34, loc_y: 35, loc_z: 36, toAccids: 37, needHighPriorityMsgAck: 38, __clientExt: 39 }, chatroomMember: { chatroomId: 1, account: 2, type: 3, level: 4, nick: 5, avatar: 6, custom: 7, online: 8, guest: 9, enterTime: 10, blacked: 12, gaged: 13, valid: 14, updateTime: 15, tempMuted: 16, tempMuteDuration: 17 }, antispamTag: { antiSpamBusinessId: 1 }, chatroomCdnInfo: { enable: 1, cdnUrls: 2, timestamp: 3, interval: 4, decryptType: 5, decryptKey: 6, timeout: 7 }, tagMemberReq: { tag: 1, time: 2, limit: 3 }, tagMuteReq: { tag: 1, duration: 2, needNotify: 3, custom: 4, notifyTargetTags: 5 }, coordinateReq: { x: 1, y: 2, z: 3, distance: 4 }, chatRoomTagsUpdateTag: { tags: 1, notifyTargetTags: 2, needNotify: 3, ext: 4 }, chatRoomMsgAckTag: { idClient: 1, chatroomId: 2 }, chatRoomTagHistoryMsgRequestTag: { tags: 1, types: 2, fromTime: 3, toTime: 4, limit: 5, reverse: 6 } };
      }, function(e, t) {
        e.exports = { imLogin: { 3: "clientType", 4: "os", 6: "sdkVersion", 8: "appLogin", 9: "protocolVersion", 10: "pushTokenName", 11: "pushToken", 13: "deviceId", 18: "appKey", 19: "account", 24: "browser", 26: "session", 32: "deviceInfo", 38: "customTag", 41: "sdkType", 42: "userAgent", 44: "libEnv", 112: "isReactNative", 1e3: "token" }, nosToken: { 1: "objectName", 2: "token", 3: "bucket", 4: "expireTime", 7: "expireSec", 8: "tag", 9: "shortUrl" }, audioToText: { 2: "url" }, imageOp: { 0: "type", 1: "stripmeta", 2: "typeType", 3: "blurRadius", 4: "blurSigma", 5: "qualityQuality", 6: "cropX", 7: "cropY", 8: "cropWidth", 9: "cropHeight", 10: "rotateAngle", 11: "pixelPixel", 12: "thumbnailMode", 13: "thumbnailWidth", 14: "thumbnailHeight", 15: "thumbnailAxisX", 16: "thumbnailAxisY", 17: "thumbnailCenterX", 18: "thumbnailCenterY", 19: "thumbnailEnlarge", 20: "thumbnailToStatic", 21: "watermarkType", 22: "watermarkGravity", 23: "watermarkDissolve", 24: "watermarkDx", 25: "watermarkDy", 26: "watermarkImage", 27: "watermarkText", 28: "watermarkFont", 29: "watermarkFontSize", 30: "watermarkFontColor", 31: "interlace" }, robot: { 4: "account", 5: "nick", 6: "avatar", 7: "intro", 8: "config", 9: "valid", 10: "createTime", 11: "updateTime", 12: "custid", 13: "botid", 14: "bindTime", _6_safe: "_avatar_safe" }, clientAntispam: { 1: "version", 2: "md5", 3: "nosurl", 4: "thesaurus" }, fileQuickTransfer: { 1: "md5", 2: "url", 3: "size", 4: "threshold", _2_safe: "_url_safe" }, transToken: { 1: "name", 2: "type", 3: "transType", 4: "size", 5: "extra", 6: "body" }, transInfo: { 1: "docId", 2: "name", 3: "prefix", 4: "size", 5: "type", 6: "state", 7: "transType", 8: "transSize", 9: "pageCount", 10: "picInfo", 11: "extra", 12: "flag" }, nosFileUrlTag: { 0: "safeUrl", 1: "originUrl" }, nosAccessTokenTag: { 0: "token", 1: "url", 2: "userAgent", 3: "ext" }, fileListParam: { 1: "fromDocId", 2: "limit" }, avSignalTag: { 1: "type", 2: "channelName", 3: "channelId", 4: "channelCreateTime", 5: "channelExpireTime", 6: "creator", 7: "ext", 8: "channelInValid", 10: "from", 11: "to", 12: "requestId", 13: "needPush", 14: "pushTitle", 15: "pushContent", 16: "pushPayload", 17: "needBadge", 18: "members", 19: "attach", 20: "attachExt", 21: "isSave", 22: "msgid", 23: "uid", 24: "time", 25: "nertcChannelName", 26: "nertcTokenTtl", 27: "nertcToken", 28: "nertcJoinRoomQueryParamMap", 29: "nertcJoinRoomResponse", 30: "callStatus" }, login: { 1: "appKey", 2: "account", 3: "deviceId", 5: "chatroomId", 8: "appLogin", 20: "chatroomNick", 21: "chatroomAvatar", 22: "chatroomCustom", 23: "chatroomEnterCustom", 26: "session", 38: "isAnonymous", 39: "tags", 40: "notifyTargetTags", 41: "loginAuthType", 42: "loginExt", 43: "loc_x", 44: "loc_y", 45: "loc_z", 46: "distance", 47: "antiSpamBusinessId", _21_safe: "_chatroomAvatar_safe" }, chatroom: { 1: "id", 3: "name", 4: "announcement", 5: "broadcastUrl", 12: "custom", 14: "createTime", 15: "updateTime", 16: "queuelevel", 100: "creator", 101: "onlineMemberNum", 102: "mute" }, msg: { 1: "idClient", 2: "type", 3: "attach", 4: "custom", 5: "resend", 6: "userUpdateTime", 7: "fromNick", 8: "fromAvatar", 9: "fromCustom", 10: "yidunEnable", 11: "antiSpamContent", 12: "skipHistory", 13: "body", 14: "antiSpamBusinessId", 15: "clientAntiSpam", 16: "antiSpamUsingYidun", 20: "time", 21: "from", 22: "chatroomId", 23: "fromClientType", 25: "highPriority", 27: "callbackExt", 28: "subType", 29: "yidunAntiCheating", 30: "env", 31: "notifyTargetTags", 32: "yidunAntiSpamExt", 33: "yidunAntiSpamRes", 34: "loc_x", 35: "loc_y", 36: "loc_z", 37: "toAccids", 38: "needHighPriorityMsgAck", 39: "__clientExt", _8_safe: "_fromAvatar_safe" }, chatroomMember: { 1: "chatroomId", 2: "account", 3: "type", 4: "level", 5: "nick", 6: "avatar", 7: "custom", 8: "online", 9: "guest", 10: "enterTime", 12: "blacked", 13: "gaged", 14: "valid", 15: "updateTime", 16: "tempMuted", 17: "tempMuteDuration", _6_safe: "_avatar_safe" }, antispamTag: { antiSpamBusinessId: 1 }, chatroomCdnInfo: { 1: "enable", 2: "cdnUrls", 3: "timestamp", 4: "interval", 5: "decryptType", 6: "decryptKey", 7: "timeout" }, nosConfigTag: { 1: "bucket", 2: "cdnDomain", 3: "expire", 4: "objectNamePrefix" }, updateTags: { 1: "currentTags" } };
      }, function(e, t, n) {
        e.exports = n(791);
      }, function(e, t) {
        e.exports = function(e2, t2) {
          (null == t2 || t2 > e2.length) && (t2 = e2.length);
          for (var n = 0, r = new Array(t2); n < t2; n++)
            r[n] = e2[n];
          return r;
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(795);
      }, function(e, t, n) {
        var r = n(309), o = n(752), s = n(751);
        e.exports = function(e2, t2) {
          var n2;
          if (e2) {
            if ("string" == typeof e2)
              return s(e2, t2);
            var i = r(n2 = Object.prototype.toString.call(e2)).call(n2, 8, -1);
            return "Object" === i && e2.constructor && (i = e2.constructor.name), "Map" === i || "Set" === i ? o(e2) : "Arguments" === i || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i) ? s(e2, t2) : void 0;
          }
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(799);
      }, function(e, t, n) {
        var r = n(4), o = n(37), s = n(0), i = s.notundef, a = { addFriend: 1, applyFriend: 2, passFriendApply: 3, rejectFriendApply: 4 }, c = { 1: "addFriend", 2: "applyFriend", 3: "passFriendApply", 4: "rejectFriendApply" };
        function u(e2) {
          s.verifyOptions(e2, "account", "friend::Friend"), s.verifyParamAtLeastPresentOne(e2, "alias custom", "friend::Friend"), this.account = e2.account, i(e2.alias) && (this.alias = e2.alias), i(e2.custom) && (this.custom = e2.custom);
        }
        u.reverse = function(e2) {
          var t2 = s.filterObj(e2, "account alias custom createTime updateTime serverex");
          return i(e2.flag) && (t2.valid = "1" === e2.flag), i(t2.createTime) && (t2.createTime = +t2.createTime), i(t2.updateTime) && (t2.updateTime = +t2.updateTime), t2;
        }, u.validTypes = function() {
          return r(a);
        }, u.getByteFromType = function(e2) {
          return a[e2];
        }, u.getTypeFromByte = function(e2) {
          return c[e2];
        }, u.assembleFriend = function(e2) {
          var t2 = +/* @__PURE__ */ new Date();
          return o({}, e2, { alias: "", createTime: t2, custom: "", updateTime: t2, valid: true });
        }, e.exports = u;
      }, function(e, t, n) {
        var r = n(757), o = n(37), s = n(0), i = s.notundef;
        function a(e2, t2) {
          r(e2.body) || s.onParamError("body只能是整数", t2), this.body = e2.body, this.from = e2.from || "", this.custom = e2.custom || "", i(e2.pushTitle) && (this.pushTitle = e2.pushTitle), i(e2.apnsText) && (this.apnsText = e2.apnsText), i(e2.pushPayload) && (this.pushPayload = e2.pushPayload), i(e2.needPush) && (this.needPush = true === e2.needPush ? 1 : 0), i(e2.needBadge) && (this.needBadge = true === e2.needBadge ? 1 : 0);
        }
        a.reverse = function(e2) {
          var t2 = o({}, e2);
          return i(e2.needBadge) && (t2.needBadge = 1 == +e2.needBadge), i(e2.needPush) && (t2.needPush = 1 == +e2.needPush), t2.body = +e2.body, t2.time = +e2.time, t2;
        }, e.exports = a;
      }, function(e, t, n) {
        e.exports = n(817);
      }, function(e, t, n) {
        var r = n(757), o = n(37), s = n(0);
        function i(e2, t2) {
          r(e2.type) || s.onParamError("Collect.type只能是整数", t2), s.notundef(e2.uniqueId) && (this.uniqueId = e2.uniqueId), this.type = e2.type, this.data = e2.data || "", this.custom = e2.custom || "";
        }
        i.reverse = function(e2) {
          var t2 = o({}, e2);
          return t2.type = +t2.type, t2.createTime = +t2.createTime, t2.updateTime = +t2.updateTime, t2;
        }, e.exports = i;
      }, function(e, t, n) {
        var r = n(825), o = n(826), s = n(753), i = n(827);
        e.exports = function(e2, t2) {
          return r(e2) || o(e2, t2) || s(e2, t2) || i();
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        "use strict";
        var r = n(761), o = n(762), s = n(763), i = n(764);
        function a(e2, t2, n2) {
          var r2 = e2;
          return o(t2) ? (n2 = t2, "string" == typeof e2 && (r2 = { uri: e2 })) : r2 = i(t2, { uri: e2 }), r2.callback = n2, r2;
        }
        function c(e2, t2, n2) {
          return u(t2 = a(e2, t2, n2));
        }
        function u(e2) {
          if (void 0 === e2.callback)
            throw new Error("callback argument missing");
          var t2 = false, n2 = function(n3, r3, o3) {
            t2 || (t2 = true, e2.callback(n3, r3, o3));
          };
          function r2() {
            var e3 = void 0;
            if (e3 = l2.response ? l2.response : l2.responseText || function(e4) {
              try {
                if ("document" === e4.responseType)
                  return e4.responseXML;
                var t3 = e4.responseXML && "parsererror" === e4.responseXML.documentElement.nodeName;
                if ("" === e4.responseType && !t3)
                  return e4.responseXML;
              } catch (e5) {
              }
              return null;
            }(l2), y)
              try {
                e3 = JSON.parse(e3);
              } catch (e4) {
              }
            return e3;
          }
          function o2(e3) {
            return clearTimeout(m), e3 instanceof Error || (e3 = new Error("" + (e3 || "Unknown XMLHttpRequest Error"))), e3.statusCode = 0, n2(e3, v);
          }
          function i2() {
            if (!u2) {
              var t3;
              clearTimeout(m), t3 = e2.useXDR && void 0 === l2.status ? 200 : 1223 === l2.status ? 204 : l2.status;
              var o3 = v, i3 = null;
              return 0 !== t3 ? (o3 = { body: r2(), statusCode: t3, method: d, headers: {}, url: p, rawRequest: l2 }, l2.getAllResponseHeaders && (o3.headers = s(l2.getAllResponseHeaders()))) : i3 = new Error("Internal XMLHttpRequest Error"), n2(i3, o3, o3.body);
            }
          }
          var a2, u2, l2 = e2.xhr || null;
          l2 || (l2 = e2.cors || e2.useXDR ? new c.XDomainRequest() : new c.XMLHttpRequest());
          var m, p = l2.url = e2.uri || e2.url, d = l2.method = e2.method || "GET", f2 = e2.body || e2.data, g = l2.headers = e2.headers || {}, h = !!e2.sync, y = false, v = { body: void 0, headers: {}, statusCode: 0, method: d, url: p, rawRequest: l2 };
          if ("json" in e2 && false !== e2.json && (y = true, g.accept || g.Accept || (g.Accept = "application/json"), "GET" !== d && "HEAD" !== d && (g["content-type"] || g["Content-Type"] || (g["Content-Type"] = "application/json"), f2 = JSON.stringify(true === e2.json ? f2 : e2.json))), l2.onreadystatechange = function() {
            4 === l2.readyState && setTimeout(i2, 0);
          }, l2.onload = i2, l2.onerror = o2, l2.onprogress = function() {
          }, l2.onabort = function() {
            u2 = true;
          }, l2.ontimeout = o2, l2.open(d, p, !h, e2.username, e2.password), h || (l2.withCredentials = !!e2.withCredentials), !h && e2.timeout > 0 && (m = setTimeout(function() {
            if (!u2) {
              u2 = true, l2.abort("timeout");
              var e3 = new Error("XMLHttpRequest timeout");
              e3.code = "ETIMEDOUT", o2(e3);
            }
          }, e2.timeout)), l2.setRequestHeader)
            for (a2 in g)
              g.hasOwnProperty(a2) && l2.setRequestHeader(a2, g[a2]);
          else if (e2.headers && !function(e3) {
            for (var t3 in e3)
              if (e3.hasOwnProperty(t3))
                return false;
            return true;
          }(e2.headers))
            throw new Error("Headers cannot be set on an XDomainRequest object");
          return "responseType" in e2 && (l2.responseType = e2.responseType), "beforeSend" in e2 && "function" == typeof e2.beforeSend && e2.beforeSend(l2), l2.send(f2 || null), l2;
        }
        e.exports = c, e.exports.default = c, c.XMLHttpRequest = r.XMLHttpRequest || function() {
        }, c.XDomainRequest = "withCredentials" in new c.XMLHttpRequest() ? c.XMLHttpRequest : r.XDomainRequest, function(e2, t2) {
          for (var n2 = 0; n2 < e2.length; n2++)
            t2(e2[n2]);
        }(["get", "put", "post", "patch", "head", "delete"], function(e2) {
          c["delete" === e2 ? "del" : e2] = function(t2, n2, r2) {
            return (n2 = a(t2, n2, r2)).method = e2.toUpperCase(), u(n2);
          };
        });
      }, function(e, t, n) {
        (function(t2) {
          var n2;
          n2 = "undefined" != typeof window ? window : void 0 !== t2 ? t2 : "undefined" != typeof self ? self : {}, e.exports = n2;
        }).call(this, n(73));
      }, function(e, t) {
        e.exports = function(e2) {
          if (!e2)
            return false;
          var t2 = n.call(e2);
          return "[object Function]" === t2 || "function" == typeof e2 && "[object RegExp]" !== t2 || "undefined" != typeof window && (e2 === window.setTimeout || e2 === window.alert || e2 === window.confirm || e2 === window.prompt);
        };
        var n = Object.prototype.toString;
      }, function(e, t) {
        var n = function(e2) {
          return e2.replace(/^\s+|\s+$/g, "");
        };
        e.exports = function(e2) {
          if (!e2)
            return {};
          for (var t2, r = {}, o = n(e2).split("\n"), s = 0; s < o.length; s++) {
            var i = o[s], a = i.indexOf(":"), c = n(i.slice(0, a)).toLowerCase(), u = n(i.slice(a + 1));
            void 0 === r[c] ? r[c] = u : (t2 = r[c], "[object Array]" === Object.prototype.toString.call(t2) ? r[c].push(u) : r[c] = [r[c], u]);
          }
          return r;
        };
      }, function(e, t) {
        e.exports = function() {
          for (var e2 = {}, t2 = 0; t2 < arguments.length; t2++) {
            var r = arguments[t2];
            for (var o in r)
              n.call(r, o) && (e2[o] = r[o]);
          }
          return e2;
        };
        var n = Object.prototype.hasOwnProperty;
      }, function(e, t, n) {
        var r = n(22), o = n(126), s = n(6), i = n(8);
        function a(e2) {
          var t2 = this, n2 = e2.url || null;
          t2.level = { debug: 0, log: 1, info: 2, warn: 3, error: 4 }[e2.level] || 0, t2.logCache = [], t2.logNum = 1, t2.timeInterval = 5e3, window.onerror = function(e3, n3, r2, o2, s2) {
            t2.error(s2);
          }, o(function() {
            t2.logCache.length > 0 && n2 && t2.postLogs(n2, t2.logCache);
          }, t2.timeInterval);
        }
        a.prototype.debug = function() {
          var e2;
          this.level > 0 || (console.debug.apply(this, arguments), this.cacheLogs.apply(this, s(e2 = ["[degbug]"]).call(e2, arguments)));
        }, a.prototype.log = function() {
          var e2;
          this.level > 1 || (console.log.apply(this, arguments), this.cacheLogs.apply(this, s(e2 = ["[log]"]).call(e2, arguments)));
        }, a.prototype.info = function() {
          var e2;
          this.level > 2 || (console.info.apply(this, arguments), this.cacheLogs.apply(this, s(e2 = ["[info]"]).call(e2, arguments)));
        }, a.prototype.warn = function() {
          var e2;
          this.level > 3 || (console.warn.apply(this, arguments), this.cacheLogs.apply(this, s(e2 = ["[warn]"]).call(e2, arguments)));
        }, a.prototype.error = function() {
          var e2;
          this.level > 4 || (console.error.apply(this, arguments), this.cacheLogs.apply(this, s(e2 = ["[error]"]).call(e2, arguments)));
        }, a.prototype.cacheLogs = function(e2, t2) {
          for (var n2 = [], o2 = 0; o2 < t2.length; o2++) {
            var s2 = t2[o2];
            "object" === r(s2) ? n2.push(i(s2)) : n2.push(s2);
          }
          var a2 = this.logNum++ + " " + e2 + " " + n2.join("; ");
          this.logCache.push(a2.replace("%c", ""));
        }, a.prototype.postLogs = function(e2, t2) {
          var n2 = this, r2 = new XMLHttpRequest();
          r2.onreadystatechange = function() {
            4 === r2.readyState && (200 === r2.status ? (console.info("LoggerPlugin::日志上报完成"), n2.logCache = [], n2.timeInterval = 5e3) : n2.timeInterval += 5e3);
          }, r2.open("POST", e2), r2.setRequestHeader("Content-Type", "plain/text;charset=utf-8"), r2.timeout = 360, r2.send(t2.join("\n"));
        }, e.exports = a;
      }, function(e, t, n) {
        var r = n(3), o = n(45);
        e.exports = function(e2) {
          var t2, n2, s, i;
          e2.db && (o.db = e2.db), e2.rnfs && (o.rnfs = e2.rnfs, o.rnfs.size || (o.rnfs.size = 1048576), o.rnfs.nimPromise = (t2 = o.rnfs, n2 = t2.size / 2 - 256, i = 0, s = o.rnfs.DocumentDirectoryPath + "/nimlog_" + i + ".log", t2.exists(s).then(function(e3) {
            return e3 ? t2.stat(s) : r.reject(0);
          }).then(function(e3) {
            return e3 && e3.size > n2 ? r.reject(1) : r.reject(0);
          }).catch(function(e3) {
            return "number" == typeof e3 && (t2.nimIndex = e3), r.resolve();
          })));
        };
      }, function(e, t, n) {
        var r = n(48), o = n(0), s = o.notundef, i = o.undef;
        function a(e2) {
          s(e2.name) && (this.name = "" + e2.name), s(e2.announcement) && (this.announcement = "" + e2.announcement), s(e2.broadcastUrl) && (this.broadcastUrl = "" + e2.broadcastUrl), s(e2.custom) && (this.custom = "" + e2.custom), s(e2.queuelevel) && (this.queuelevel = r(e2.queuelevel));
        }
        a.reverse = function(e2) {
          var t2 = o.copy(e2);
          return i(t2.announcement) && (t2.announcement = ""), i(t2.broadcastUrl) && (t2.broadcastUrl = ""), i(t2.custom) && (t2.custom = ""), s(t2.createTime) && (t2.createTime = +t2.createTime), s(t2.updateTime) && (t2.updateTime = +t2.updateTime), s(t2.onlineMemberNum) && (t2.onlineMemberNum = +t2.onlineMemberNum), s(t2.mute) && (t2.mute = "1" === t2.mute), t2;
        }, e.exports = a;
      }, function(e, t, n) {
        var r, o, s;
        e.exports = (s = n(94), o = (r = s).lib.WordArray, r.enc.Base64 = { stringify: function(e2) {
          var t2 = e2.words, n2 = e2.sigBytes, r2 = this._map;
          e2.clamp();
          for (var o2 = [], s2 = 0; s2 < n2; s2 += 3)
            for (var i = (t2[s2 >>> 2] >>> 24 - s2 % 4 * 8 & 255) << 16 | (t2[s2 + 1 >>> 2] >>> 24 - (s2 + 1) % 4 * 8 & 255) << 8 | t2[s2 + 2 >>> 2] >>> 24 - (s2 + 2) % 4 * 8 & 255, a = 0; a < 4 && s2 + 0.75 * a < n2; a++)
              o2.push(r2.charAt(i >>> 6 * (3 - a) & 63));
          var c = r2.charAt(64);
          if (c)
            for (; o2.length % 4; )
              o2.push(c);
          return o2.join("");
        }, parse: function(e2) {
          var t2 = e2.length, n2 = this._map, r2 = this._reverseMap;
          if (!r2) {
            r2 = this._reverseMap = [];
            for (var s2 = 0; s2 < n2.length; s2++)
              r2[n2.charCodeAt(s2)] = s2;
          }
          var i = n2.charAt(64);
          if (i) {
            var a = e2.indexOf(i);
            -1 !== a && (t2 = a);
          }
          return function(e3, t3, n3) {
            for (var r3 = [], s3 = 0, i2 = 0; i2 < t3; i2++)
              if (i2 % 4) {
                var a2 = n3[e3.charCodeAt(i2 - 1)] << i2 % 4 * 2, c = n3[e3.charCodeAt(i2)] >>> 6 - i2 % 4 * 2, u = a2 | c;
                r3[s3 >>> 2] |= u << 24 - s3 % 4 * 8, s3++;
              }
            return o.create(r3, s3);
          }(e2, t2, r2);
        }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" }, s.enc.Base64);
      }, function(e, t, n) {
        var r, o, s, i, a, c, u, l2;
        e.exports = (l2 = n(94), n(894), n(895), o = (r = l2).lib, s = o.Base, i = o.WordArray, a = r.algo, c = a.MD5, u = a.EvpKDF = s.extend({ cfg: s.extend({ keySize: 4, hasher: c, iterations: 1 }), init: function(e2) {
          this.cfg = this.cfg.extend(e2);
        }, compute: function(e2, t2) {
          for (var n2, r2 = this.cfg, o2 = r2.hasher.create(), s2 = i.create(), a2 = s2.words, c2 = r2.keySize, u2 = r2.iterations; a2.length < c2; ) {
            n2 && o2.update(n2), n2 = o2.update(e2).finalize(t2), o2.reset();
            for (var l3 = 1; l3 < u2; l3++)
              n2 = o2.finalize(n2), o2.reset();
            s2.concat(n2);
          }
          return s2.sigBytes = 4 * c2, s2;
        } }), r.EvpKDF = function(e2, t2, n2) {
          return u.create(n2).compute(e2, t2);
        }, l2.EvpKDF);
      }, function(e, t, n) {
        n(299);
        var r = n(40);
        n(311)(r), e.exports = r;
      }, function(e, t, n) {
        var r = n(48), o = n(3), s = n(15), i = n(8), a = n(2), c = n(6), u = n(306), l2 = n(9), m = n(16), p = n(64), d = n(200), f2 = n(304), g = n(772), h = n(0), y = n(307), v = n(41), b = v.newSupportDBError, T = v.noDBError, S = false;
        function M(e2) {
          S = e2, y.set("db", e2, f2);
        }
        if (M(!!h.getGlobal().indexedDB), "IE" === p.name && M(false), "Microsoft Edge" === p.name && M(false), "Safari" === p.name)
          try {
            r(p.version.split(".")[0], 10) < 10 && M(false);
          } catch (e2) {
          }
        function k(e2) {
          this.concurrency = 0, this.pendingTasks = [], this.queue = o.resolve(), this.logger = e2.logger, this.reporter = e2.reporter, this.core = e2.core, this.account = e2.account, this.notifyError = e2.notifyError;
        }
        var x = k.prototype;
        x.reset = h.emptyFunc, S && (x.reset = function(e2) {
          this.enable = false !== e2;
        }), x.addTask = function(e2) {
          var t2 = this;
          return new o(function(n2, r2) {
            function o2(e3) {
              t2.concurrency--;
              var n3 = t2.pendingTasks.shift();
              n3 && t2.addTask(n3), e3();
            }
            if (t2.concurrency < 100)
              return t2.concurrency++, e2().then(function(t3) {
                o2(function() {
                  n2(t3), e2.resolve && e2.resolve(t3);
                });
              }, function(n3) {
                o2(function() {
                  var o3 = (n3 = n3 || {}).event || n3, s2 = { event: o3, callFunc: n3.callFunc || "db::addTask" };
                  t2.logger.error("db::error event is", o3, h.get(o3, "target.error")), r2(s2), e2.reject && e2.reject(s2);
                });
              });
            e2.resolve || (e2.resolve = n2, e2.reject = r2), t2.pendingTasks.push(e2);
          });
        }, x.reportError = function(e2) {
          var t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n2 = arguments.length > 2 ? arguments[2] : void 0;
          this.reporter.reportTraceStart("exceptions", { user_id: this.account, trace_id: h.get(this.core, "socket.socket.sessionid"), action: 4, exception_service: 0 });
          var r2, o2 = t2.context || "";
          if (n2)
            try {
              var a2;
              r2 = s(a2 = i(n2)).call(a2, 0, 100), o2 += ". ".concat(r2);
            } catch (e3) {
              r2 = "";
            }
          var c2 = h.get(e2, "code") || h.get(e2, "target.error.code") || 0, u2 = h.get(e2, "message") || h.get(e2, "target.error.message") || "unknown";
          this.reporter.reportTraceUpdateV2("exceptions", { code: c2, description: u2, operation_type: t2.operation_type, target: t2.target || this.name, context: o2 }), this.reporter.reportTraceEnd("exceptions", 1);
        }, x.init = function(e2) {
          var t2 = this;
          return t2.addTask(function() {
            return t2.enable ? t2.server ? o.resolve() : (t2.name = "nim-" + e2, f2.open({ server: t2.name, version: g.version, schema: g.schema }).then(function(e3) {
              t2.logger.info("db::init: ".concat(t2.name)), t2.server = e3;
            }, function(e3) {
              throw M(false), t2.server = null, t2.name = null, e3;
            }).catch(function(n2) {
              throw t2.reportError(n2, { operation_type: 0, context: "version ".concat(g.version), target: "nim-" + e2 }), n2;
            })) : o.reject(b({ callFunc: "db::init" }));
          });
        }, x.destroy = function() {
          var e2 = this;
          return e2.addTask(function() {
            if (!e2.enable)
              return o.reject(b({ callFunc: "db::destroy" }));
            if (!e2.server)
              return o.resolve();
            try {
              return f2.remove(e2.name).then(function() {
                e2.logger.info("db::destroy: ".concat(e2.name)), e2.server = null, e2.name = null;
              }).catch(function(t2) {
                throw e2.reportError(t2, { operation_type: 1, context: "remove database failed" }), t2;
              });
            } catch (t2) {
              throw e2.reportError(t2, { operation_type: 1, context: "remove database failed" }), t2;
            }
          });
        }, x.clear = function() {
          var e2 = this;
          return e2.addTask(function() {
            return e2.enable ? e2.server ? e2.server.clear("timetag").then(function() {
              var t2 = s([]).call(e2.server.getIndexedDB().objectStoreNames), n2 = [];
              if (a(t2).call(t2, function(t3) {
                n2.push(e2.server.clear(t3).catch(function(n3) {
                  throw e2.reportError(n3, { operation_type: 3, context: "tableName: ".concat(t3, ". clear table failed") }), n3;
                }));
              }), n2.length)
                return o.all(n2).then(function() {
                  e2.logger.info("db::clear: ".concat(e2.name));
                }).catch(function(t3) {
                  return e2.logger.error("db::clear: ", t3), o.reject(t3);
                });
            }) : o.resolve() : o.reject(b({ callFunc: "db::clear" }));
          });
        }, x.close = function() {
          this.server && (this.server.close(), this.server = null, this.name = null);
        }, x.remove = function(e2, t2, n2, r2, o2, s2, i2) {
          var a2 = this;
          return a2.addTask(function() {
            a2.checkDB();
            try {
              return a2.server.remove(e2, t2, n2, r2, o2, s2, i2).then(function() {
                var r3;
                a2.logger.info(c(r3 = "db::delete: ".concat(e2, " ")).call(r3, t2 || n2));
              }).catch(function(c2) {
                throw a2.reportError(c2, { operation_type: 3, context: "tableName: ".concat(e2, ", remove failed") }, { name: e2, keys: t2, keyName: n2, lowerBound: r2, upperBound: o2, lowerOpen: s2, upperOpen: i2 }), a2.logger.error("db::remove::server.remove error", c2), c2;
              });
            } catch (c2) {
              throw a2.reportError(c2, { operation_type: 3, context: "tableName: ".concat(e2, ", remove failed") }, { name: e2, keys: t2, keyName: n2, lowerBound: r2, upperBound: o2, lowerOpen: s2, upperOpen: i2 }), a2.logger.error("db::remove::server.remove error", c2), c2;
            }
          });
        }, x.put = function(e2, t2) {
          var n2 = this;
          return n2.addTask(function() {
            n2.checkDB(), h.isArray(t2) || (t2 = [t2]);
            try {
              return n2.server.update(e2, t2).then(function(t3) {
                var r2 = [e2], o2 = g.keyPath(e2), s2 = [];
                return o2 && (a(t3).call(t3, function(e3) {
                  s2.push(d(e3, o2));
                }), r2.push(1 === s2.length ? s2[0] : s2)), r2.unshift("db::put:"), "timetag" === e2 && r2.push(t3[0]), n2.logger.log.apply(n2.logger.log, r2), t3;
              }).catch(function(r2) {
                throw n2.reportError(r2, { operation_type: 3, context: "tableName: ".concat(e2, ". put failed") }, t2), r2;
              });
            } catch (r2) {
              throw n2.reportError(r2, { operation_type: 3, context: "tableName: ".concat(e2, ". put failed") }, t2), r2;
            }
          });
        }, x.get = function(e2, t2) {
          var n2 = this;
          return n2.addTask(function() {
            n2.checkDB();
            try {
              return n2.server.get(e2, t2).catch(function(r3) {
                var o2;
                throw n2.reportError(r3, { operation_type: 3, context: c(o2 = "tableName: ".concat(e2, ". get failed with key ")).call(o2, t2) }), r3;
              });
            } catch (o2) {
              var r2;
              throw n2.reportError(o2, { operation_type: 3, context: c(r2 = "tableName: ".concat(e2, ". get failed with key ")).call(r2, t2) }), o2;
            }
          });
        }, x.modifyOrPut = function(e2) {
          var t2 = this, n2 = e2.table, r2 = h.copy(e2.obj), o2 = e2.key, s2 = e2.modifyObjWhenPut, i2 = h.copy(r2);
          return delete i2[o2], t2.getOne(n2, null, r2[o2], { modifyObj: i2 }).then(function(e3) {
            return e3 ? (i2.idClient ? i2 = { idClient: i2.idClient, server: i2.server, pinFrom: i2.pinFrom } : (i2.lastMsg = i2.lastMsg && i2.lastMsg.idServer + "_" + i2.lastMsg.idClient, i2.localCustom = i2.localCustom && "***", i2.topCustom = i2.topCustom && "***"), t2.logger.log("db::modifyOrPut: update table ".concat(n2), i2), e3) : (r2 = h.merge(r2, s2), t2.put(n2, r2).then(function(e4) {
              return e4[0];
            }));
          });
        }, x.updateAndDelete = function(e2, t2, n2) {
          var r2 = this;
          return r2.addTask(function() {
            r2.checkDB();
            try {
              return r2.server.updateAndDelete(e2, t2, n2).catch(function(o2) {
                throw r2.reportError(o2, { operation_type: 3, context: "tableName: ".concat(e2, ". updateAndDelete failed") }, { updates: t2, deletes: n2 }), o2;
              });
            } catch (o2) {
              throw r2.reportError(o2, { operation_type: 3, context: "tableName: ".concat(e2, ". updateAndDelete failed") }, { updates: t2, deletes: n2 }), o2;
            }
          });
        }, x.getAll = function(e2, t2) {
          var n2 = this;
          return n2.addTask(function() {
            n2.checkDB(), (t2 = t2 || {}).keys = true === u(t2), t2.desc = true === t2.desc, t2.distinct = true === t2.distinct;
            try {
              var r2, o2, s2;
              return l2(r2 = u(o2 = m(s2 = n2.server.query(e2, t2.index)).call(s2, m(t2))).call(o2, u(t2)).desc(t2.desc).limit(t2.limit).distinct(t2.distinct)).call(r2, t2.mapper).modify(t2.modifyObj).execute().catch(function(r3) {
                throw n2.reportError(r3, { operation_type: 3, context: "tableName: ".concat(e2, ". getAll failed") }, t2), r3;
              });
            } catch (r3) {
              throw n2.reportError(r3, { operation_type: 3, context: "tableName: ".concat(e2, ". getAll failed") }, t2), r3;
            }
          });
        }, x.getOnly = function(e2, t2, n2, r2) {
          var o2 = this;
          return o2.addTask(function() {
            o2.checkDB(), (r2 = r2 || {}).keys = true === u(r2), r2.desc = true === r2.desc, r2.distinct = true === r2.distinct, r2.remove = true === r2.remove;
            try {
              var s2, i2, a2;
              return l2(s2 = u(i2 = m(a2 = o2.server.query(e2, t2).only(n2)).call(a2, m(r2))).call(i2, u(r2)).desc(r2.desc).limit(r2.limit).distinct(r2.distinct)).call(s2, r2.mapper).modify(r2.modifyObj).remove(r2.remove).execute().catch(function(s3) {
                var i3, a3;
                throw o2.reportError(s3, { operation_type: 3, context: c(i3 = c(a3 = "tableName: ".concat(e2, ". getOnly failed with index: ")).call(a3, t2, ", matchValue: ")).call(i3, n2) }, r2), s3;
              });
            } catch (s3) {
              var p2, d2;
              throw o2.reportError(s3, { operation_type: 3, context: c(p2 = c(d2 = "tableName: ".concat(e2, ". getOnly failed with index: ")).call(d2, t2, ", matchValue: ")).call(p2, n2) }, r2), s3;
            }
          });
        }, x.getOne = function() {
          var e2 = this;
          return e2.getOnly.apply(e2, arguments).then(function(e3) {
            return e3[0];
          });
        }, x.clearTable = function(e2) {
          var t2 = this;
          return t2.addTask(function() {
            t2.checkDB();
            try {
              return t2.server.clear(e2).catch(function(n2) {
                throw t2.reportError(n2, { operation_type: 3, context: "tableName: ".concat(e2, ". clearTable failed") }, options), n2;
              });
            } catch (n2) {
              throw t2.reportError(n2, { operation_type: 3, context: "tableName: ".concat(e2, ". clearTable failed") }, options), n2;
            }
          });
        }, x.checkDB = function() {
          if (!this.enable)
            throw b({ callFunc: "db::checkDB" });
          if (!this.server)
            throw T({ callFunc: "db::checkDB" });
        }, e.exports = k;
      }, function(e, t) {
        var n = { version: 13 }, r = { kv: { key: { keyPath: "key" } }, timetag: { key: { keyPath: "name" } }, sessionsWithMoreRoaming: { key: { keyPath: "id" } }, msgReadDetail: { key: { keyPath: "idClient" } }, blacklist: { key: { keyPath: "account" } }, mutelist: { key: { keyPath: "account" } }, friend: { key: { keyPath: "account" } }, user: { key: { keyPath: "account" } }, team: { key: { keyPath: "teamId" } }, teamMember: { key: { keyPath: "id" }, indexes: { teamId: { unique: false }, account: { unique: false } } }, superTeam: { key: { keyPath: "teamId" } }, superTeamMember: { key: { keyPath: "id" }, indexes: { teamId: { unique: false }, account: { unique: false }, id: { unique: false } } }, msg: { key: { autoIncrement: true }, indexes: { idClient: { unique: true }, sessionId: { unique: false }, time: { unique: false }, type: { unique: false }, sessionType: { unique: false }, status: { unique: false }, sessionTime: { key: ["sessionId", "time"], unique: false } } }, msg1: { key: { keyPath: "idClient" }, indexes: { threadMsgIdClient: { unique: false }, sessionId: { unique: false }, time: { unique: false }, status: { unique: false }, sessionTime: { key: ["sessionId", "time"], unique: false } } }, msgPin: { key: { keyPath: "idClient" }, indexes: { sessionId: { unique: false } } }, broadcastMsg: { key: { keyPath: "broadcastId" }, indexes: { time: { unique: false } } }, sysMsg: { key: { autoIncrement: true }, indexes: { idServer: { unique: true }, category: { unique: false }, type: { unique: false } } }, sysMsgUnread: { key: { keyPath: "type" } }, session: { key: { keyPath: "id" }, indexes: { updateTime: { unique: false } } } };
        n.keyPath = function(e2) {
          return r[e2].key.keyPath;
        }, n.schema = function() {
          return window._nimForceSyncIM = true, r;
        }, e.exports = n;
      }, function(e, t, n) {
        var r = n(75).fn;
        r.setKey = function(e2, t2) {
          return this.put("kv", { key: e2, value: t2 });
        }, r.getKey = function(e2) {
          return this.get("kv", e2).then(function(e3) {
            return e3 && e3.value;
          });
        }, r.setDonnop = function(e2) {
          return this.setKey("donnop", e2);
        }, r.getDonnop = function() {
          return this.getKey("donnop");
        };
      }, function(e, t, n) {
        var r = n(7), o = n(48), s = n(75).fn;
        s.getTimetags = function(e2) {
          var t2 = {};
          return this.getAll("timetag", { filter: e2, mapper: function(e3) {
            return t2[e3.name] = e3.value, e3;
          } }).then(function() {
            return t2;
          });
        }, s.getTeamMemberTimetags = function() {
          return this.getTimetags(function(e2) {
            var t2;
            return -1 !== r(t2 = e2.name).call(t2, "team-");
          });
        }, s.getSuperTeamMemberTimetags = function() {
          return this.getTimetags(function(e2) {
            var t2;
            return -1 !== r(t2 = e2.name).call(t2, "superTeam-");
          });
        }, s.getTimetag = function(e2) {
          return this.getOne("timetag", null, e2).then(function(e3) {
            return (e3 = e3 || { value: 0 }).value;
          });
        }, s.getTeamMemberTimetag = function() {
          return 0;
        }, s.updateTimetag = function(e2, t2) {
          var n2 = this, r2 = { name: e2, value: t2 };
          return this.put("timetag", r2).catch(function(e3) {
            n2.notifyError && n2.notifyError(e3);
          });
        }, s.updateMyInfoTimetag = function(e2) {
          return this.updateTimetag("myInfo", e2);
        }, s.updateRelationTimetag = function(e2) {
          return this.updateTimetag("relations", e2);
        }, s.getRelationsTimetag = function() {
          return this.getTimetag("relations");
        }, s.updateFriendTimetag = function(e2) {
          return this.updateTimetag("friends", e2);
        }, s.getFriendsTimetag = function() {
          return this.getTimetag("friends");
        }, s.updateFriendUserTimetag = function(e2) {
          return this.updateTimetag("friendUsers", e2);
        }, s.updateTeamTimetag = function(e2) {
          return this.updateTimetag("teams", e2);
        }, s.getTeamsTimetag = function() {
          return this.getTimetag("teams");
        }, s.updateSuperTeamTimetag = function(e2) {
          return this.updateTimetag("superTeams", e2);
        }, s.getSuperTeamsTimetag = function() {
          return this.getTimetag("superTeams");
        }, s.updateTeamMemberTimetag = function(e2, t2) {
          return this.updateTimetag("team-" + e2, t2);
        }, s.getTeamMembersTimetag = function(e2) {
          return this.getTimetag("team-" + e2);
        }, s.updateSuperTeamMemberTimetag = function(e2, t2) {
          return this.updateTimetag("superTeam-" + e2, t2);
        }, s.getSuperTeamMembersTimetag = function(e2) {
          return this.getTimetag("superTeam-" + e2);
        }, s.updateMyTeamMembersTimetag = function(e2) {
          return this.updateTimetag("myTeamMembers", e2);
        }, s.updateMySuperTeamMembersTimetag = function(e2) {
          return this.updateTimetag("myInfoInSuperTeams", e2);
        }, s.getBroadcastMsgTimetag = function() {
          return this.getTimetag("broadcastMsg");
        }, s.updateBroadcastMsgTimetag = function(e2) {
          return this.updateTimetag("broadcastMsg", o(e2));
        }, s.updateRoamingMsgTimetag = function(e2) {
          return this.updateTimetag("roamingMsgs", e2);
        }, s.updateSuperTeamRoamingMsgTimetag = function(e2) {
          return this.updateTimetag("superTeamRoamingMsgs", e2);
        }, s.updateMsgReceiptsTimetag = function(e2) {
          return this.updateTimetag("msgReceipts", e2);
        }, s.updateDonnopTimetag = function(e2) {
          return this.updateTimetag("donnop", e2);
        }, s.updateSessionAck = function(e2) {
          return this.updateTimetag("sessionAck", e2);
        }, s.updateDeleteMsgSelf = function(e2) {
          return this.updateTimetag("deleteMsgSelf", e2);
        }, s.updateSuperTeamSessionAck = function(e2) {
          return this.updateTimetag("superTeamSessionAck", e2);
        }, s.deleteTimetag = function(e2) {
          return this.remove("timetag", e2);
        }, s.deleteTeamMemberTimetag = function(e2) {
          return this.deleteTimetag("team-" + e2);
        }, s.deleteSuperTeamMemberTimetag = function(e2) {
          return this.deleteTimetag("superTeam-" + e2);
        };
      }, function(e, t, n) {
        var r = n(3), o = n(75).fn, s = n(0);
        o.mergeRelations = function(e2, t2, n2, o2, s2) {
          var i = this, a = i.updateAndDelete("blacklist", e2, t2), c = i.updateAndDelete("mutelist", n2, o2);
          return r.all([a, c]).then(function() {
            return i.logger.info("db::mergeRelations: timetag ".concat(s2)), i.updateRelationTimetag(s2), [e2, t2, n2, o2, s2];
          });
        }, o.getRelations = function() {
          var e2 = this.getAll("blacklist"), t2 = this.getAll("mutelist");
          return r.all([e2, t2]);
        }, o.markInBlacklist = function(e2) {
          if ((e2 = s.copy(e2)).isAdd) {
            var t2 = e2.record;
            return this.put("blacklist", t2);
          }
          var n2 = e2.account;
          return this.remove("blacklist", n2);
        }, o.markInMutelist = function(e2) {
          if ((e2 = s.copy(e2)).isAdd) {
            var t2 = e2.record;
            return this.put("mutelist", t2);
          }
          var n2 = e2.account;
          return this.remove("mutelist", n2);
        };
      }, function(e, t, n) {
        var r = n(9), o = n(3), s = n(123), i = n(75).fn, a = n(0);
        i.mergeFriends = function(e2, t2, n2) {
          var o2 = this;
          return o2.updateAndDelete("friend", e2, t2).then(function() {
            return o2.logger.log("db::mergeFriends: updateAndDelete done", e2 && r(e2).call(e2, function(e3) {
              return e3.account;
            }).join(",")), n2 && o2.updateFriendTimetag(n2), [e2, t2, n2];
          });
        }, i.putFriend = function(e2) {
          return this.put("friend", e2);
        }, i.updateFriend = function(e2) {
          var t2 = this, n2 = (e2 = a.copy(e2)).account;
          return this.getOne("friend", null, n2, { modifyObj: e2 }).then(function(e3) {
            return e3 ? t2.logger.log("db::updateFriend: ".concat(n2)) : t2.logger.warn("db::updateFriend: no record ".concat(n2)), e3;
          });
        }, i.deleteFriend = function(e2) {
          var t2 = this.remove("friend", e2), n2 = this.deleteUser(e2);
          return o.all([t2, n2]);
        }, i.getFriends = function() {
          var e2, t2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n2 = {};
          void 0 !== t2.accountIds && (n2 = s(e2 = t2.accountIds).call(e2, function(e3, t3) {
            return e3[t3] = true, e3;
          }, {}));
          var r2 = function(e3) {
            return !!e3.valid && (!(void 0 !== t2.updateTime && e3.updateTime <= t2.updateTime) && !(void 0 !== t2.accountIds && !n2[e3.account]));
          };
          return this.getAll("friend", { filter: r2 });
        }, i.getFriend = function(e2) {
          return this.getOne("friend", null, e2);
        }, i.getUserFromBlackList = function(e2) {
          return this.getOne("blacklist", null, e2);
        };
      }, function(e, t, n) {
        var r = n(3), o = n(2), s = n(6), i = n(123), a = n(9), c = n(75).fn, u = n(0), l2 = n(41), m = n(194), p = n(152);
        function d(e2) {
          return e2.valid && e2.validToCurrentUser;
        }
        function f2(e2) {
          return e2 && e2.valid;
        }
        function g(e2) {
          return e2 && u.fillUndef(e2, { mute: false, custom: "" }), e2;
        }
        c.mergeTeams = function(e2, t2, n2) {
          var o2 = this, s2 = o2.put("team", e2), i2 = o2.leaveTeams(t2, n2);
          return r.all([s2, i2]).then(function() {
            return o2.logger.log("db::mergeTeams:"), o2.updateTeamTimetag(n2), [e2, t2, n2];
          });
        }, c.putTeam = function(e2) {
          if (e2)
            return u.isArray(e2) || (e2 = [e2]), o(e2).call(e2, function(e3) {
              e3.validToCurrentUser = true;
            }), this.put("team", e2);
        }, c.updateTeam = function(e2) {
          var t2 = this, n2 = (e2 = u.copy(e2)).teamId;
          return t2.getOne("team", null, n2, { modifyObj: e2 }).then(function(r2) {
            if (r2)
              t2.logger.log("db::updateTeam: ".concat(n2));
            else if (t2.logger.warn("db::updateTeam: no record ".concat(n2)), e2.validToCurrentUser)
              return t2.putTeam(e2);
            return r2;
          });
        }, c.transferTeam = function(e2, t2, n2) {
          var r2 = this, o2 = e2.teamId, i2 = e2.memberUpdateTime, a2 = { teamId: o2, account: t2, type: "normal", updateTime: i2 }, c2 = { teamId: o2, account: n2, type: "owner", updateTime: i2 };
          return r2.updateTeamMembers([a2, c2]).then(function() {
            return r2.putTeam(e2).then(function() {
              var o3, i3;
              return r2.logger.info(s(o3 = s(i3 = "db::transferTeam: ".concat(e2.teamId, " ")).call(i3, t2, " -> ")).call(o3, n2)), [e2, t2, n2];
            });
          });
        }, c.leaveTeam = function(e2) {
          var t2 = this;
          return t2.updateTeam({ teamId: e2, validToCurrentUser: false }).then(function() {
            return t2.removeAllTeamMembers(e2);
          });
        }, c.dismissTeam = function(e2, t2) {
          var n2 = this, r2 = { teamId: e2, valid: false, validToCurrentUser: false, updateTime: t2 };
          return n2.updateTeam(r2).then(function() {
            return n2.removeAllTeamMembers(e2);
          });
        }, c.leaveTeams = function(e2, t2) {
          var n2, s2 = this, i2 = [];
          return o(e2).call(e2, function(e3) {
            n2 = s2.leaveTeam(e3.teamId, t2), i2.push(n2);
          }), r.all(i2);
        }, c.getTeamsByTeamIds = function(e2) {
          var t2, n2 = this, s2 = [];
          return o(e2).call(e2, function(e3) {
            t2 = n2.getTeam(e3), s2.push(t2);
          }), r.all(s2);
        }, c.getTeam = function(e2) {
          e2 = "" + e2;
          var t2 = this;
          return t2.getOne("team", null, e2).then(function(e3) {
            return e3 ? (t2.updateTeamProperties([e3]), e3) : null;
          });
        }, c.getTeams = function() {
          var e2, t2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n2 = {};
          void 0 !== t2.teamIds && (n2 = i(e2 = t2.teamIds).call(e2, function(e3, t3) {
            return e3[t3] = true, e3;
          }, {}));
          var r2 = function(e3) {
            return !!d(e3) && !(void 0 !== t2.teamIds && !n2[e3.teamId]);
          };
          return this.getAll("team", { filter: r2 });
        }, c.updateTeamProperties = function(e2) {
          o(e2).call(e2, function(e3) {
            e3 && m.fillProperties(e3);
          });
        }, c.mergeTeamMembers = function(e2, t2, n2, o2) {
          var s2 = this, i2 = s2.putTeamMembers(t2), a2 = s2.updateTeamMembers(n2);
          return r.all([i2, a2]).then(function() {
            return s2.logger.log("db::mergeTeamMembers: ".concat(e2)), s2.updateTeamMemberTimetag(e2, o2);
          });
        }, c.putTeamMembers = function(e2) {
          return this.put("teamMember", e2);
        }, c.getTeamMembersByAccount = function(e2) {
          return this.getOnly("teamMember", "account", e2, { filter: f2, mapper: g }).then();
        }, c.getTeamMembers = function() {
          var e2, t2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n2 = {};
          void 0 !== t2.accountIds && (n2 = i(e2 = t2.accountIds).call(e2, function(e3, t3) {
            return e3[t3] = true, e3;
          }, {}));
          var r2, o2 = {};
          void 0 !== t2.teamIds && (o2 = i(r2 = t2.teamIds).call(r2, function(e3, t3) {
            return e3[t3] = true, e3;
          }, {}));
          var s2 = function(e3) {
            return !!e3.valid && (!(void 0 !== t2.teamIds && !o2[e3.teamId]) && !(void 0 !== t2.accountIds && !n2[e3.account]));
          };
          return this.getAll("teamMember", { filter: s2 });
        }, c.getTeamMembersByTeamId = function(e2) {
          return this.getOnly("teamMember", "teamId", e2, { filter: f2, mapper: g });
        }, c.getTeamMembersById = function(e2) {
          return this.getOnly("teamMember", null, e2, { filter: f2, mapper: g });
        }, c.updateTeamMemberProperties = function(e2) {
          var t2, n2 = this, s2 = [];
          return o(e2).call(e2, function(e3) {
            p.fillProperties(e3) && (t2 = n2.updateTeamMember(e3), s2.push(t2));
          }), r.all(s2);
        }, c.getInvalidTeamMembers = function(e2, t2) {
          var n2 = this;
          e2 = "" + e2;
          var s2, i2 = [];
          return o(t2).call(t2, function(t3) {
            s2 = n2.getOne("teamMember", null, p.genId(e2, t3)).then(function(e3) {
              return g(e3);
            }), i2.push(s2);
          }), r.all(i2);
        }, c.updateTeamMember = function(e2) {
          var t2 = this, n2 = e2.teamId, r2 = e2.account, o2 = p.genId(n2, r2), i2 = u.filterObj(e2, "nickInTeam muteTeam mute custom updateTime type valid followAccountIds");
          return this.getOne("teamMember", null, o2, { modifyObj: i2, mapper: g }).then(function(e3) {
            var o3, a2;
            e3 ? t2.logger.log(s(o3 = "db::updateTeamMember: ".concat(n2, " ")).call(o3, r2), u.pickAsString(i2, ["muteTeam", "mute", "updateTime", "type", "valid"])) : t2.logger.warn(s(a2 = "db::updateTeam: no record ".concat(n2, " ")).call(a2, r2));
            return e3;
          });
        }, c.updateTeamMembers = function(e2) {
          var t2 = this;
          if (!e2.length)
            return r.resolve();
          var n2, s2 = [];
          return o(e2).call(e2, function(e3) {
            n2 = t2.updateTeamMember(e3), s2.push(n2);
          }), r.all(s2);
        }, c.updateTeamManagers = function(e2, t2, n2, r2) {
          var o2 = a(t2).call(t2, function(t3) {
            return { teamId: e2, account: t3, type: n2 ? "manager" : "normal", updateTime: r2 };
          });
          return this.updateTeamMembers(o2);
        }, c.removeTeamMembersByAccounts = function(e2, t2) {
          var n2 = a(t2).call(t2, function(t3) {
            return { teamId: e2, account: t3, valid: false };
          });
          return this.updateTeamMembers(n2);
        }, c.removeAllTeamMembers = function(e2) {
          var t2 = this;
          return t2.getOnly("teamMember", "teamId", e2, { modifyObj: { valid: false } }).then(function() {
            return t2.logger.warn("db::removeAllTeamMembers: ".concat(e2)), t2.deleteTeamMemberTimetag(e2);
          });
        }, c.deleteTeamMembers = function(e2) {
          var t2 = this;
          return t2.getOnly("teamMember", "teamId", e2, { remove: true }).then(function() {
            t2.logger.warn("db::deleteTeamMembers: ".concat(e2)), t2.deleteTeamMemberTimetag(e2);
          });
        }, c.deleteTeam = function(e2) {
          var t2, n2 = this, s2 = [];
          return u.isArray(e2) || (e2 = [e2]), o(e2).call(e2, function(e3) {
            e3 = "" + e3, t2 = n2.get("team", e3).then(function(t3) {
              if (t3 && d(t3))
                throw l2.stillInTeamError({ callFunc: "team::deleteTeam", team: t3 });
              var o2 = n2.remove("team", e3), s3 = n2.deleteTeamMembers(e3);
              return r.all([o2, s3]);
            }), s2.push(t2);
          }), 1 === s2.length ? s2[0] : r.all(s2);
        };
      }, function(e, t, n) {
        var r = n(3), o = n(2), s = n(10), i = n(6), a = n(9), c = n(75).fn, u = n(0), l2 = n(41), m = n(308), p = n(203);
        function d(e2) {
          return e2.valid && e2.validToCurrentUser;
        }
        function f2(e2) {
          return e2 && e2.valid;
        }
        function g(e2) {
          return e2 && u.fillUndef(e2, { mute: false, custom: "" }), e2;
        }
        c.mergeSuperTeams = function(e2, t2, n2) {
          var o2 = this, s2 = o2.put("superTeam", e2), i2 = o2.leaveTeams(t2, n2);
          return r.all([s2, i2]).then(function() {
            return o2.logger.log("db::mergeSuperTeams:"), o2.updateSuperTeamTimetag(n2), [e2, t2, n2];
          });
        }, c.putSuperTeam = function(e2) {
          if (e2)
            return u.isArray(e2) || (e2 = [e2]), o(e2).call(e2, function(e3) {
              e3.validToCurrentUser = true;
            }), this.put("superTeam", e2);
        }, c.updateSuperTeam = function(e2) {
          var t2 = this, n2 = (e2 = u.copy(e2)).teamId;
          return t2.getOne("superTeam", null, n2, { modifyObj: e2 }).then(function(r2) {
            return r2 ? (t2.logger.info("db::updateSuperTeam: ".concat(n2)), r2) : (t2.logger.warn("db::updateSuperTeam: no record ".concat(n2)), t2.putSuperTeam(e2));
          });
        }, c.leaveSuperTeam = function(e2) {
          var t2 = this;
          return t2.updateSuperTeam({ teamId: e2, validToCurrentUser: false }).then(function() {
            return t2.removeAllSuperTeamMembers(e2);
          });
        }, c.dismissSuperTeam = function(e2, t2) {
          var n2 = this, r2 = { teamId: e2, valid: false, validToCurrentUser: false, updateTime: t2 };
          return n2.updateSuperTeam(r2).then(function() {
            return n2.removeAllSuperTeamMembers(e2);
          });
        }, c.leaveSuperTeams = function(e2, t2) {
          var n2, s2 = this, i2 = [];
          return o(e2).call(e2, function(e3) {
            n2 = s2.leaveSuperTeam(e3.teamId, t2), i2.push(n2);
          }), r.all(i2);
        }, c.getSuperTeamsByTeamIds = function(e2) {
          var t2, n2 = this, s2 = [];
          return o(e2).call(e2, function(e3) {
            t2 = n2.getSuperTeam(e3), s2.push(t2);
          }), r.all(s2);
        }, c.getSuperTeam = function(e2) {
          e2 = "" + e2;
          var t2 = this;
          return t2.getOne("superTeam", null, e2).then(function(e3) {
            return e3 ? (t2.updateSuperTeamProperties([e3]), e3) : null;
          });
        }, c.getSuperTeams = function() {
          var e2 = this;
          return e2.getAll("superTeam", { filter: d }).then(function(t2) {
            return e2.updateSuperTeamProperties(t2), t2;
          });
        }, c.updateSuperTeamProperties = function(e2) {
          o(e2).call(e2, function(e3) {
            e3 && m.fillProperties(e3);
          });
        }, c.mergeSuperTeamMembers = function(e2, t2, n2, o2) {
          var s2 = this, i2 = s2.putSuperTeamMembers(t2), a2 = s2.updateSuperTeamMembers(n2);
          return r.all([i2, a2]).then(function() {
            return s2.logger.log("db::mergeSuperTeamMembers: ".concat(e2)), null != o2 ? s2.updateSuperTeamMemberTimetag(e2, o2) : r.resolve();
          });
        }, c.getSuperTeamMembersByTeamId = function(e2) {
          return this.getOnly("superTeamMember", "teamId", e2, { filter: f2, mapper: g }).then();
        }, c.getSuperTeamMembersById = function(e2) {
          return this.getOnly("superTeamMember", null, e2, { filter: f2, mapper: g }).then();
        }, c.putSuperTeamMembers = function(e2) {
          return this.put("superTeamMember", e2);
        }, c.getSuperTeamMemberById = function(e2) {
          return this.get("superTeamMember", e2);
        }, c.getSuperTeamMembers = function(e2, t2) {
          var n2 = this;
          e2 = "" + e2;
          var r2 = { filter: function(e3) {
            return e3.valid;
          }, mapper: g };
          if (t2) {
            if ("number" != typeof t2.joinTime)
              return void n2.logger.error("db::getSuperTeamMembers::params.joinTime should be number, not ", t2.joinTime);
            t2.limit && (r2.limit = t2.limit), s(t2) ? r2.filter = function(e3) {
              return e3.valid && e3.joinTime <= t2.joinTime;
            } : r2.filter = function(e3) {
              return e3.valid && e3.joinTime >= t2.joinTime;
            };
          }
          return n2.getOnly("superTeamMember", "teamId", e2, r2).then(function(e3) {
            return n2.updateSuperTeamMemberProperties(e3).then(function() {
              return e3;
            });
          });
        }, c.getSuperTeamMembersByAccount = function(e2) {
          return this.getOnly("superTeamMember", "account", e2, { filter: f2, mapper: g }).then();
        }, c.updateSuperTeamMemberProperties = function(e2) {
          var t2, n2 = this, s2 = [];
          return o(e2).call(e2, function(e3) {
            p.fillProperties(e3) && (t2 = n2.updateSuperTeamMember(e3), s2.push(t2));
          }), r.all(s2);
        }, c.getInvalidSuperTeamMembers = function(e2, t2) {
          var n2 = this;
          e2 = "" + e2;
          var s2, i2 = [];
          return o(t2).call(t2, function(t3) {
            s2 = n2.getOne("superTeamMember", "id", p.genId(e2, t3)).then(function(e3) {
              return g(e3);
            }), i2.push(s2);
          }), r.all(i2);
        }, c.updateSuperTeamMember = function(e2) {
          var t2 = this, n2 = e2.teamId, r2 = e2.account, o2 = p.genId(n2, r2), s2 = u.filterObj(e2, "nickInTeam muteTeam mute custom updateTime type valid followAccountIds");
          return this.getOne("superTeamMember", "id", o2, { modifyObj: s2, mapper: g }).then(function(e3) {
            var o3, a2;
            e3 ? t2.logger.log(i(o3 = "db::updateSuperTeamMember: ".concat(n2, " ")).call(o3, r2), u.pickAsString(s2, ["muteTeam", "mute", "updateTime", "type", "valid"])) : t2.logger.warn(i(a2 = "db::updateSuperTeam: no record ".concat(n2, " ")).call(a2, r2));
            return e3;
          });
        }, c.updateSuperTeamMembers = function(e2) {
          var t2 = this;
          if (!e2.length)
            return r.resolve();
          var n2, s2 = [];
          return o(e2).call(e2, function(e3) {
            n2 = t2.updateSuperTeamMember(e3), s2.push(n2);
          }), r.all(s2);
        }, c.removeSuperTeamMembersByAccounts = function(e2, t2) {
          var n2 = a(t2).call(t2, function(t3) {
            return { teamId: e2, account: t3, valid: false };
          });
          return this.updateSuperTeamMembers(n2);
        }, c.removeAllSuperTeamMembers = function(e2) {
          var t2 = this;
          return t2.getOnly("superTeamMember", "teamId", e2, { modifyObj: { valid: false } }).then(function() {
            return t2.logger.warn("db::removeAllSuperTeamMembers: ".concat(e2)), t2.deleteSuperTeamMemberTimetag(e2);
          });
        }, c.deleteSuperTeamMembers = function(e2) {
          var t2 = this;
          return t2.getOnly("superTeamMember", "teamId", e2, { remove: true }).then(function() {
            t2.logger.warn("db::deleteSuperTeamMembers: ".concat(e2)), t2.deleteSuperTeamMemberTimetag(e2);
          });
        }, c.deleteSuperTeam = function(e2) {
          var t2, n2 = this, s2 = [];
          return u.isArray(e2) || (e2 = [e2]), o(e2).call(e2, function(e3) {
            e3 = "" + e3, t2 = n2.get("superTeam", e3).then(function(t3) {
              if (t3 && d(t3))
                throw l2.stillInTeamError({ callFunc: "team::deleteTeam", team: t3 });
              var o2 = n2.remove("superTeam", e3), s3 = n2.deleteSuperTeamMembers(e3);
              return r.all([o2, s3]);
            }), s2.push(t2);
          }), 1 === s2.length ? s2[0] : r.all(s2);
        }, c.transferSuperTeam = function(e2, t2, n2) {
          var r2 = this;
          return r2.updateSuperTeamMembers([t2, n2]).then(function() {
            return r2.putSuperTeam(e2).then(function() {
              var o2, s2;
              return r2.logger.info(i(o2 = i(s2 = "db::transferSuperTeam: ".concat(e2.teamId, " ")).call(s2, t2.account, " -> ")).call(o2, n2.account)), [e2, t2, n2];
            });
          });
        };
      }, function(e, t, n) {
        var r = n(2), o = n(3), s = n(123), i = n(75).fn, a = n(0);
        i.mergeMyInfo = function(e2, t2) {
          var n2 = this;
          return n2.put("user", e2).then(function() {
            return t2 ? n2.updateMyInfoTimetag(e2.updateTime) : e2;
          });
        }, i.mergeFriendUsers = function(e2, t2) {
          var n2 = this;
          return n2.putUsers(e2).then(function() {
            n2.updateFriendUserTimetag(t2);
          });
        }, i.putUsers = function(e2) {
          return this.put("user", e2);
        }, i.putUser = function(e2) {
          return this.put("user", e2);
        }, i.updateUser = function(e2) {
          var t2 = this, n2 = (e2 = a.copy(e2)).account;
          return this.getOne("user", null, n2, { modifyObj: e2 }).then(function(e3) {
            return e3 ? t2.logger.log("db::updateUser: ".concat(n2)) : t2.logger.warn("db::updateUser: no record ".concat(n2)), e3;
          });
        }, i.putUsersIfIsFriend = function(e2) {
          var t2, n2 = this, s2 = [], i2 = [];
          return r(e2).call(e2, function(e3) {
            t2 = n2.getFriend(e3.account).then(function(r2) {
              return r2 && (t2 = n2.putUser(e3), i2.push(t2)), r2;
            }), s2.push(t2);
          }), o.all(s2).then(function() {
            return o.all(i2).then(function(e3) {
              return e3;
            });
          });
        }, i.deleteUser = function(e2) {
          return this.remove("user", e2);
        }, i.getUser = function(e2) {
          return this.getOne("user", null, e2);
        }, i.getUsers = function() {
          var e2, t2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n2 = {};
          void 0 !== t2.accountIds && (n2 = s(e2 = t2.accountIds).call(e2, function(e3, t3) {
            return e3[t3] = true, e3;
          }, {}));
          var r2 = function(e3) {
            return !(void 0 !== t2.accountIds && !n2[e3.account]);
          };
          return this.getAll("user", { filter: r2 });
        }, i.getAllUsers = function() {
          return this.getAll("user");
        };
      }, function(e, t, n) {
        var r = n(16), o = n(3), s = n(6), i = n(2), a = n(37), c = n(32), u = n(7), l2 = n(122), m = n(9), p = n(75).fn, d = n(0), f2 = n(11);
        p.putMsg = function(e2) {
          var t2 = this;
          return d.isArray(e2) || (e2 = [e2]), !e2.length || r(e2[0]) ? o.resolve() : (e2 = r(e2).call(e2, function(e3) {
            return !e3.ignore;
          }), t2.put("msg1", e2).catch(function(n2) {
            return t2.notifyError && t2.notifyError(n2), o.resolve(e2, n2);
          }));
        }, p.putMsgReadDetail = function(e2) {
          var t2 = this;
          if (e2.idClient)
            return this.put("msgReadDetail", e2).catch(function(e3) {
              t2.logger.error("putMsgReadDetail error", e3);
            });
        }, p.getMsgReadDetail = function(e2) {
          return this.getOne("msgReadDetail", null, e2);
        }, p.updateMsg = function(e2) {
          var t2 = this;
          if (!r(e2)) {
            var n2 = e2.idClient, i2 = d.filterObj(e2, "resend status idServer time localCustom commentTimetag comments hasSendAck callbackExt");
            return t2.getOne("msg1", null, n2, { modifyObj: i2 }).then(function(e3) {
              var r2, o2, a2;
              e3 ? t2.logger.info(s(r2 = s(o2 = s(a2 = "db::updateMsg: ".concat(n2, "，idServer: ")).call(a2, i2.idServer, "，status: ")).call(o2, i2.status, "，time: ")).call(r2, i2.time)) : t2.logger.warn("db::updateMsg: no record ".concat(n2));
              return e3;
            }).catch(function(n3) {
              return t2.notifyError && t2.notifyError(n3), o.resolve(e2);
            });
          }
        }, p.updateMsgBatch = function(e2) {
          var t2 = this;
          if (f2.isRN)
            this.logger.warn("react native can not support updateMsgBatch");
          else {
            this.checkDB();
            var n2 = this.server.getIndexedDB().transaction(["msg1"], "readwrite").objectStore("msg1");
            i(e2).call(e2, function(e3) {
              if (e3.idClient) {
                var r2 = n2.get(e3.idClient);
                r2.onerror = function(e4) {
                  t2.logger.error("updateMsgBatch::store.get:error", e4);
                }, r2.onsuccess = function() {
                  var o2 = r2.result || e3;
                  n2.put(a({}, o2, e3)).onerror = function(e4) {
                    t2.logger.error("updateMsgBatch::store.put:error", e4);
                  };
                };
              }
            });
          }
        }, p.getMsgs = function(e2) {
          return f2.isBrowser ? this.getMsgsIndexedDB(e2) : f2.isRN ? this.getMsgsRN(e2) : o.resolve();
        }, p.getSubMessages = function(e2) {
          return f2.isBrowser ? this.getSubMessagesIndexedDB(e2) : o.resolve([]);
        }, p.getMsgsRN = function(e2) {
          var t2 = {};
          return "number" == typeof e2.start && (t2.lowerBound = ["time", e2.start]), "number" == typeof e2.end && e2.end !== 1 / 0 && (t2.upperBound = ["time", e2.end]), t2.desc = false, t2.index = "time", "boolean" == typeof e2.desc && (t2.desc = e2.desc), "number" == typeof e2.limit && (t2.limit = e2.limit), t2.searchIndex = [], e2.sessionId && t2.searchIndex.push(["sessionId", e2.sessionId]), "string" == typeof e2.type && t2.searchIndex.push(["type", e2.type]), this.getAll("msg1", t2);
        }, p.getMsgsIndexedDB = function(e2) {
          var t2, n2 = this;
          n2.checkDB();
          var o2 = "time", i2 = false, a2 = false, l3 = (e2 = e2 || {}).sessionId || [], m2 = e2.sessionIds || [];
          d.isString(l3) ? l3 = [l3] : c(l3) || (l3 = []), d.isString(m2) ? m2 = [m2] : c(m2) || (m2 = []);
          var p2 = s(l3).call(l3, m2);
          1 === p2.length ? (i2 = true, o2 = "sessionTime", l3 = p2[0]) : p2.length > 1 && (i2 = true, a2 = true, m2 = p2);
          var f3 = e2.start || 0, g = e2.end || 1 / 0, h = f3, y = g;
          i2 && !a2 && (h = [l3, f3], y = [l3, g]);
          var v = false !== e2.desc, b = e2.limit || 100, T = false, S = false, M = e2.type || [], k = e2.types || [];
          d.isString(M) ? M = [M] : c(M) || (M = []), d.isString(k) ? k = [k] : c(k) || (k = []);
          var x = s(M).call(M, k);
          1 === x.length ? (T = true, M = x[0]) : x.length > 1 && (T = true, S = true, k = x);
          var C, I = e2.subTypes && e2.subTypes.length, w = e2.keyword || "", _ = e2.filterFunc;
          return (a2 || T || w || I || d.isFunction(_)) && (C = function(t3) {
            var n3;
            if (a2 && -1 === u(m2).call(m2, t3.sessionId))
              return false;
            if (T) {
              if (S) {
                if (-1 === u(k).call(k, t3.type))
                  return false;
              } else if (M !== t3.type)
                return false;
            }
            if (I && -1 === u(n3 = e2.subTypes).call(n3, t3.subType))
              return false;
            if (w) {
              var r2 = t3.text || t3.tip || "";
              if (-1 === u(r2).call(r2, w))
                return false;
            }
            return !_ || _(t3);
          }), r(t2 = n2.server.query("msg1", o2).bound(h, y, true, true).desc(v).limit(b)).call(t2, C).execute().catch(function(t3) {
            throw n2.reportError(t3, { operation_type: 3, context: "tableName: ".concat("msg1", ", index ").concat(o2, ", getMsgsIndexedDB error") }, e2), t3;
          });
        }, p.getSubMessagesIndexedDB = function(e2) {
          var t2 = this;
          return t2.checkDB(), t2.getOnly("msg1", "threadMsgIdClient", e2).then(function(e3) {
            var t3;
            return l2(t3 = e3 || []).call(t3, function(e4, t4) {
              return e4.time - t4.time;
            });
          }).catch(function(n2) {
            throw t2.reportError(n2, { operation_type: 3, context: "tableName: ".concat("msg1", ", IndexThreadMsgIdClient ").concat(e2, ", getSubMessagesIndexedDB error") }), n2;
          });
        }, p.getMsgCountAfterAck = function(e2) {
          return f2.isBrowser ? this.getMsgCountAfterAckIndexedDB(e2) : f2.isRN ? this.getMsgCountAfterAckRN(e2) : o.resolve();
        }, p.getMsgCountAfterAckRN = function(e2) {
          var t2 = this, n2 = e2 = e2 || {}, s2 = n2.sessionId, i2 = n2.ack;
          return t2.checkDB(), t2.getAll("msg1", { searchIndex: ["sessionId", s2], lowerBound: ["time", i2] }).then(function(n3) {
            var s3 = r(n3).call(n3, function(n4) {
              if ("out" === n4.flow || false === n4.isUnreadable)
                return false;
              if ("notification" === n4.type)
                try {
                  return e2.shouldCountNotifyUnread(n4);
                } catch (e3) {
                  throw t2.logger.error("userOption:shouldCountNotifyUnread function error", e3), e3;
                }
              return true;
            });
            return o.resolve(s3.length);
          });
        }, p.getMsgCountAfterAckIndexedDB = function(e2) {
          var t2 = this, n2 = (e2 = e2 || {}).sessionId;
          return t2.checkDB(), t2.server.query("msg1", "sessionTime").bound([n2, e2.ack], [n2, 1 / 0], true, true).execute().then(function(n3) {
            var s2 = r(n3).call(n3, function(n4) {
              if ("out" === n4.flow || false === n4.isUnreadable)
                return false;
              if ("notification" === n4.type)
                try {
                  return e2.shouldCountNotifyUnread(n4);
                } catch (e3) {
                  throw t2.logger.error("userOption:shouldCountNotifyUnread function error", e3), e3;
                }
              return true;
            });
            return o.resolve(s2.length);
          }).catch(function(n3) {
            throw t2.reportError(n3, { operation_type: 3, context: "tableName: ".concat("msg1", ", IndexSessionTime ").concat("sessionTime", ", getMsgCountAfterAckIndexedDB error") }, e2), n3;
          });
        }, p.amendMsg = function(e2) {
          return e2 ? (d.notexist(e2.text) && (e2.text = ""), e2) : null;
        }, p.getMsgByIdClient = function(e2) {
          var t2 = this;
          return t2.getOne("msg1", null, e2).then(function(e3) {
            return t2.amendMsg(e3);
          });
        }, p.getMsgsByIdClients = function(e2) {
          var t2, n2 = this, r2 = [];
          return i(e2).call(e2, function(e3) {
            t2 = n2.getMsgByIdClient(e3), r2.push(t2);
          }), o.all(r2);
        }, p.clearSendingMsgs = function() {
          var e2 = this;
          return e2.getOnly("msg1", "status", "sending", { modifyObj: { status: "fail" } }).then(function(t2) {
            e2.logger.info("db::clearSendingMsgs: msgs send failed", t2 && m(t2).call(t2, function(e3) {
              return e3.idClient;
            }).join(","));
          });
        }, p.deleteMsg = function(e2) {
          var t2, n2 = this, r2 = [];
          return d.isArray(e2) || (e2 = [e2]), i(e2).call(e2, function(e3) {
            t2 = n2.getOne("msg1", null, e3, { remove: true }).then(function(t3) {
              return n2.logger.info("db::deleteMsg done", e3, t3 && t3.idClient), t3;
            }).catch(function(t3) {
              throw n2.logger.error("db::deleteMsg failed", e3, t3), t3;
            }), r2.push(t2);
          }), 1 === r2.length ? r2[0] : o.all(r2);
        }, p.deleteMsgsBySessionId = function(e2) {
          var t2 = this, n2 = null, r2 = e2.start, o2 = e2.end;
          return void 0 !== r2 && void 0 !== o2 ? n2 = function(e3) {
            return e3 > r2 && e3 < o2;
          } : void 0 !== r2 ? n2 = function(e3) {
            return e3 > r2;
          } : void 0 !== o2 && (n2 = function(e3) {
            return e3 < o2;
          }), n2 ? t2.getOnly("msg1", "sessionId", e2.sessionId).then(function(e3) {
            var r3 = [];
            return m(e3 = e3 || []).call(e3, function(e4) {
              n2(e4.time) && r3.push(e4.idClient);
            }), t2.logger.info("db::deleteMsgsBySessionId: session results", r3), t2.deleteMsg(r3);
          }) : t2.getOnly("msg1", "sessionId", e2.sessionId, { remove: true });
        }, p.deleteMsgsByTime = function(e2) {
          return this.remove("msg1", null, "time", e2.start, e2.end, true, true);
        }, p.getDeletedMsgsCountByTime = function(e2) {
          this.checkDB();
          var t2 = this.server.getIndexedDB().transaction(["msg1"], "readonly").objectStore("msg1").index("time"), n2 = IDBKeyRange.bound(e2.start, e2.end, true, true), r2 = t2.count(n2);
          return new o(function(e3, t3) {
            r2.onsuccess = function(t4) {
              e3(t4.target.result);
            }, r2.onerror = function(e4) {
              this.logger.error("countDeletedMsgsByTime::index.count:error", e4), t3(e4);
            };
          });
        }, p.deleteAllMsgs = function() {
          var e2 = this.clearTable("msg1"), t2 = this.clearTable("session");
          return o.all([e2, t2]);
        }, p.getMsgPins = function(e2) {
          return this.getOnly("msgPin", "sessionId", e2);
        }, p.deleteMsgPins = function(e2) {
          return this.getOnly("msgPin", "sessionId", e2, { remove: true });
        }, p.putMsgPin = function(e2) {
          var t2 = this;
          return this.modifyOrPut({ table: "msgPin", obj: e2, key: "idClient" }).catch(function(e3) {
            t2.notifyError && t2.notifyError(e3);
          });
        }, p.putMsgPins = function(e2) {
          return this.put("msgPin", e2);
        }, p.deleteMsgPin = function(e2) {
          var t2 = this;
          return this.getOne("msgPin", null, e2.idClient, { remove: true }).then(function(e3) {
            return t2.logger.info("db::deleteMsgPin:", e3.idClient), e3;
          });
        };
      }, function(e, t, n) {
        var r = n(3), o = n(16), s = n(2), i = n(10), a = n(4), c = n(75).fn, u = n(0), l2 = u.notundef;
        c.putSysMsg = function(e2) {
          var t2 = this;
          return new r(function(n2) {
            if (u.isArray(e2) || (e2 = [e2]), !o(e2[0])) {
              var r2 = [], i2 = e2.length;
              s(e2).call(e2, function(e3) {
                e3 = u.copy(e3), t2.put("sysMsg", e3).then(function(e4) {
                  r2.push(e4[0]), a2();
                }, a2);
              });
            }
            function a2() {
              0 === --i2 && n2(r2);
            }
          });
        }, c.getSysMsgs = function(e2) {
          var t2 = !i(e2 = e2 || {}), n2 = e2.limit || 100, r2 = null, o2 = null;
          e2.category && (r2 = "category", o2 = e2.category), e2.type && (r2 = "type", o2 = e2.type);
          var s2, a2 = e2.lastIdServer, c2 = false, u2 = e2.read;
          return (l2(a2) || l2(u2)) && (s2 = function(e3) {
            return l2(a2) ? (a2 = "" + a2, c2 ? t3() : (e3.idServer === a2 && (c2 = true), false)) : t3();
            function t3() {
              return !l2(u2) || e3.read === u2;
            }
          }), e2 = { filter: s2, desc: t2, limit: n2 }, r2 ? this.getOnly("sysMsg", r2, o2, e2) : this.getAll("sysMsg", e2);
        }, c.getSysMsgByIdServer = function(e2) {
          return this.getOne("sysMsg", "idServer", e2);
        }, c.updateSysMsg = function(e2) {
          var t2 = this;
          if (!o(e2)) {
            var n2 = "" + e2.idServer, r2 = u.filterObj(e2, "read state error localCustom");
            return this.getOne("sysMsg", "idServer", n2, { modifyObj: r2 }).then(function(e3) {
              return e3 ? t2.logger.log("db::updateSysMsg: ".concat(n2), u.pickAsString(r2, ["read", "state", "error"])) : t2.logger.warn("db::updateSession: ".concat(n2)), e3;
            });
          }
        }, c.markSysMsgRead = function(e2) {
          var t2 = this;
          return new r(function(n2, o2) {
            u.isArray(e2) || (e2 = [e2]);
            var i2, a2, c2 = [], l3 = [];
            s(e2).call(e2, function(e3) {
              i2 = t2.getSysMsgByIdServer(e3.idServer).then(function(e4) {
                e4 && !e4.read && (a2 = t2.updateSysMsg({ idServer: e4.idServer, read: true }), l3.push(a2));
              }, o2), c2.push(i2);
            }), r.all(c2).then(function() {
              r.all(l3).then(function(e3) {
                n2(e3);
              }, o2);
            }, o2);
          });
        }, c.deleteSysMsg = function(e2) {
          var t2, n2 = this, o2 = [];
          return u.isArray(e2) || (e2 = [e2]), s(e2).call(e2, function(e3) {
            e3 = "" + e3, t2 = n2.getOne("sysMsg", "idServer", e3, { remove: true }), o2.push(t2);
          }), 1 === o2.length ? o2[0] : r.all(o2);
        }, c.deleteAllSysMsgs = function() {
          var e2 = this.clearTable("sysMsg"), t2 = this.clearTable("sysMsgUnread");
          return r.all([e2, t2]);
        }, c.getSysMsgUnread = function() {
          return this.getAll("sysMsgUnread").then(function(e2) {
            var t2 = {};
            return s(e2).call(e2, function(e3) {
              t2[e3.type] = e3.num;
            }), t2;
          });
        }, c.updateSysMsgUnread = function(e2) {
          var t2, n2 = this;
          e2 = u.copy(e2);
          var r2 = [];
          return s(t2 = a(e2)).call(t2, function(t3) {
            r2.push({ type: t3, num: e2[t3] });
          }), this.put("sysMsgUnread", r2).then(function() {
            return n2.logger.info("db::updateSysMsgUnread: ", e2), e2;
          });
        };
      }, function(e, t, n) {
        var r = n(3), o = n(2), s = n(75).fn, i = n(0);
        s.putBroadcastMsg = function(e2) {
          var t2 = this;
          return new r(function(n2) {
            i.isArray(e2) || (e2 = [e2]);
            var r2 = [], s2 = e2.length;
            function a() {
              0 === --s2 && n2(r2);
            }
            o(e2).call(e2, function(e3) {
              e3 = i.copy(e3), t2.put("broadcastMsg", e3).then(function(e4) {
                r2.push(e4[0]), a();
              }, a);
            });
          });
        }, s.getBroadcastMsgs = function(e2) {
          return e2 = e2 || {}, this.getAll("broadcastMsg", e2);
        };
      }, function(e, t, n) {
        var r = n(3), o = n(10), s = n(6), i = n(32), a = n(2), c = n(75).fn, u = n(0), l2 = u.notundef;
        c.putSession = function(e2) {
          var t2 = this, n2 = e2.unread;
          return void 0 === (e2 = u.merge({}, e2)).updateTime && e2.lastMsg && e2.lastMsg.time && (e2.updateTime = e2.lastMsg.time), (e2.lastMsg || !e2.ack && !e2.msgReceiptTime) && (e2.isDeleted = false), delete e2.unread, this.modifyOrPut({ table: "session", obj: e2, key: "id", modifyObjWhenPut: { unread: 0 } }).catch(function(o2) {
            return t2.notifyError && t2.notifyError(o2), e2.unread = n2, r.resolve(e2);
          });
        }, c.getAllSessions = function() {
          return this.getAll("session", { index: "updateTime", desc: true }).catch(function(e2) {
            self.notifyError && self.notifyError(e2);
          });
        }, c.getSessions = function(e2) {
          var t2 = !o(e2 = e2 || {}), n2 = e2.limit || 100, r2 = e2.lastSessionId, s2 = e2.sessionId, i2 = false, a2 = this, c2 = function() {
            return true;
          }, u2 = function() {
            return true;
          };
          return l2(s2) ? this.getSession(s2, e2.isDeleted) : (l2(r2) && (c2 = function(e3) {
            return e3.id === r2 && (i2 = true), i2;
          }), e2.includeDeleted || (u2 = function(e3) {
            return !e3.isDeleted;
          }), this.getAll("session", { index: "updateTime", desc: t2, limit: n2, filter: function(e3) {
            return c2(e3) && u2(e3);
          } }).catch(function(e3) {
            a2.notifyError && a2.notifyError(e3);
          }));
        }, c.getSession = function(e2, t2) {
          var n2 = this;
          return this.get("session", e2).then(function(e3) {
            return r.resolve(!t2 && e3 && e3.isDeleted ? void 0 : e3);
          }).catch(function(e3) {
            throw n2.notifyError && n2.notifyError(e3), e3;
          });
        }, c.updateSession = function(e2) {
          var t2 = this, n2 = e2.id, r2 = u.filterObj(e2, "ack unread lastMsg localCustom msgReceiptTime msgReceiptServerTime isTop topCustom isDeleted");
          return e2.lastMsg && (r2.lastMsg = e2.lastMsg), this.getOne("session", null, n2, { modifyObj: r2 }).then(function(e3) {
            if (e3) {
              var o2, i2 = s(o2 = "db::updateSession: ".concat(n2, " ")).call(o2, u.pickAsString(r2, ["ack", "unread", "msgReceiptTime", "msgReceiptServerTime", "isTop", "isDeleted"]));
              i2 += r2.lastMsg ? " lastMsg.idClient:".concat(u.get(r2, "lastMsg.idClient")) : "", t2.logger.info(i2);
            } else
              t2.logger.warn("db::updateSession: no record ".concat(n2));
            return e3;
          }).catch(function(e3) {
            t2.notifyError && t2.notifyError(e3);
          });
        }, c.getStickTopSessions = function() {
          var e2 = this;
          return this.getAll("session", { filter: function(e3) {
            return e3 && e3.isTop;
          } }).catch(function(t2) {
            e2.notifyError && e2.notifyError(t2);
          });
        }, c.deleteSession = function(e2, t2) {
          var n2 = t2 && t2.scene || "";
          return "superTeam" === n2 ? this.updateSuperTeamSessionAck(0) : ("p2p" === n2 || "team" === n2 || this.updateSuperTeamSessionAck(0), this.updateSessionAck(0)), this.updateMsgReceiptsTimetag(0), this.remove("session", e2);
        }, c.deleteSessionLogic = function(e2) {
          var t2 = this;
          if (!i(e2))
            return this.getOne("session", null, e2, { modifyObj: { isDeleted: true } });
          var n2 = [];
          return a(e2).call(e2, function(e3) {
            n2.push(t2.getOne("session", null, e3, { modifyObj: { isDeleted: true } }));
          }), r.all(n2);
        }, c.putSessionsWithMoreRoaming = function(e2) {
          return this.put("sessionsWithMoreRoaming", e2);
        }, c.updateSessionsWithMoreRoaming = function(e2) {
          var t2 = e2.id;
          return delete e2.id, this.getOne("sessionsWithMoreRoaming", null, t2, { modifyObj: e2 });
        }, c.deleteSessionsWithMoreRoaming = function(e2) {
          return this.remove("sessionsWithMoreRoaming", e2);
        }, c.getSessionsWithMoreRoaming = function(e2) {
          return e2 ? this.get("sessionsWithMoreRoaming", e2) : this.getAll("sessionsWithMoreRoaming");
        };
      }, function(e, t, n) {
        var r = n(6), o = n(92), s = n(93), i = n(0).throttle, a = function() {
          "use strict";
          function e2(t2) {
            o(this, e2), this.arr = [], this.timer = null, this.maxLength = t2.maxLength || 100, this.throttleTime = t2.throttleTime || 5e3, this.processFn = t2.processFn || function() {
            }, this.throttleFn = t2.processFn || function() {
            }, t2.processFn && (this.throttleFn = i(function(e3) {
              t2.processFn(e3), e3.length = 0;
            }, this.throttleTime, { leading: false }));
          }
          return s(e2, [{ key: "add", value: function(e3) {
            var t2;
            "[object Array]" === Object.prototype.toString.call(e3) ? this.arr = r(t2 = this.arr).call(t2, e3) : this.arr.push(e3);
            this.arr.length >= this.maxLength && (this.processFn(this.arr), this.arr = []), this.timer = this.throttleFn(this.arr);
          } }, { key: "destroy", value: function() {
            this.arr = [], this.timer && clearTimeout(this.timer), this.processFn = function() {
            }, this.throttleFn = function() {
            };
          } }, { key: "clear", value: function() {
            this.arr = [], this.timer && clearTimeout(this.timer);
          } }]), e2;
        }();
        e.exports = a;
      }, function(e, t, n) {
        var r = n(51), o = n(37), s = n(60), i = n(2), a = n(16), c = n(4), u = n(52), l2 = n(53), m = n(54), p = n(55), d = n(43), f2 = n(92), g = n(93);
        function h(e2, t2) {
          var n2 = c(e2);
          if (u) {
            var r2 = u(e2);
            t2 && (r2 = a(r2).call(r2, function(t3) {
              return l2(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        var y = { user_id: "", trace_id: "", duration: 0, start_time: 0, history: [] };
        e.exports = function() {
          "use strict";
          function e2(t2) {
            f2(this, e2), this.clientProto = t2, this.reset();
          }
          return g(e2, [{ key: "reset", value: function() {
            this.traceData = o({}, y), this.traceData.history = [];
          } }, { key: "start", value: function() {
            this.reset(), this.traceData.start_time = s();
          } }, { key: "updateBegin", value: function(e3) {
            this.traceData.history.push(function(e4) {
              for (var t2 = 1; t2 < arguments.length; t2++) {
                var n2, o2, s2 = null != arguments[t2] ? arguments[t2] : {};
                t2 % 2 ? i(n2 = h(Object(s2), true)).call(n2, function(t3) {
                  r(e4, t3, s2[t3]);
                }) : m ? p(e4, m(s2)) : i(o2 = h(Object(s2))).call(o2, function(t3) {
                  d(e4, t3, l2(s2, t3));
                });
              }
              return e4;
            }({ head: "", body: "", start_time: s(), httpdns: false, index: 0 }, e3));
          } }, { key: "updateComplete", value: function(e3) {
            var t2;
            i(t2 = this.traceData.history).call(t2, function(t3) {
              t3.target === e3.target && (o(t3, e3), t3.duration = s() - t3.start_time);
            });
          } }, { key: "end", value: function(e3) {
            var t2;
            if (this.traceData.succeed = e3, this.traceData.history = a(t2 = this.traceData.history).call(t2, function(e4) {
              return void 0 !== e4.code;
            }), 0 !== this.traceData.history.length) {
              this.traceData.duration = s() - this.traceData.start_time;
              var n2 = this.clientProto.checkNetworkAvailable();
              this.traceData.net_type = 0, this.traceData.net_connect = n2, this.clientProto.reporter.report("nim_sdk_lbs_records", this.traceData), this.reset();
            } else
              this.reset();
          } }]), e2;
        }();
      }, function(e, t, n) {
        var r = n(22), o = n(51), s = n(60), i = n(8), a = n(314), c = n(6), u = n(3), l2 = n(24), m = n(16), p = n(7), d = n(15), f2 = n(26), g = n(2), h = n(126), y = n(4), v = n(52), b = n(53), T = n(54), S = n(55), M = n(43);
        function k(e2, t2) {
          var n2 = y(e2);
          if (v) {
            var r2 = v(e2);
            t2 && (r2 = m(r2).call(r2, function(t3) {
              return b(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        function x(e2) {
          for (var t2 = 1; t2 < arguments.length; t2++) {
            var n2, r2, s2 = null != arguments[t2] ? arguments[t2] : {};
            t2 % 2 ? g(n2 = k(Object(s2), true)).call(n2, function(t3) {
              o(e2, t3, s2[t3]);
            }) : T ? S(e2, T(s2)) : g(r2 = k(Object(s2))).call(r2, function(t3) {
              M(e2, t3, b(s2, t3));
            });
          }
          return e2;
        }
        var C = n(35).fn, I = n(0), w = n(11), _ = n(157).V2NIMConnectStatus;
        function P(e2, t2) {
          var n2, r2, o2, s2, a2 = this, u2 = w.getDefaultLinkUrl(a2.options.secure);
          (a2.socketUrls = [u2], a2.reporterHookLBS.updateComplete({ target: t2, code: 200, body: e2 }), a2.reporterHookLBS.end(true), a2.reporter.reportTraceUpdateV2("login", { operation_type: "HTTP", target: t2, code: 200, net_connect: a2.checkNetworkAvailable(), succeed: true }), a2.msgStatEnable = !!e2.common["msg.stat.enable"], a2.msgStatEnable) && (a2.msgDelayTimer = l2(f2(r2 = a2.doReportMsgDelay).call(r2, a2), 1e4));
          e2.common && e2.common.link && g(o2 = e2.common.link).call(o2, function(e3) {
            a2.socketUrls.unshift(w.formatSocketUrl({ url: e3, secure: a2.options.secure }));
          });
          e2.common && e2.common["link.default"] && g(s2 = e2.common["link.default"]).call(s2, function(e3) {
            var t3, n3;
            (e3 = w.formatSocketUrl({ url: e3, secure: a2.options.secure }), -1 === p(t3 = a2.socketUrls).call(t3, e3)) && (a2.socketUrls = c(n3 = a2.socketUrls).call(n3, e3));
          });
          a2.socketUrls = m(n2 = a2.socketUrls).call(n2, function(e3, t3, n3) {
            return p(n3).call(n3, e3) === t3;
          });
          try {
            w.uploadUrl = e2.nosup[0];
          } catch (e3) {
          }
          if (w.chunkUploadUrl = e2["nos-chunk"] || w.chunkUploadUrl || "", a2.logger.info("link::refreshSocketUrl: ".concat(t2, " ajax load , got socket urls "), a2.socketUrls), w.hasLocalStorage) {
            e2.common["lbs.backup"] && a2.options.lbsBackup && localStorage.setItem("nim_lbs_backup", i(e2.common["lbs.backup"]));
            var d2 = I.get(e2, "common.report.apierror.on");
            e2.common.report && localStorage.setItem("nim_lbs_fail_report_on", false === d2 ? "0" : "1");
          }
          if (e2.common.socketConcurrent) {
            var h2 = e2.common.socketConcurrent;
            "number" == typeof h2 && h2 >= 1 && h2 <= 3 && (a2.options.socketConcurrent = h2, a2.imsocket.setConfig({ socketConcurrent: h2 }));
          }
        }
        function A(e2, t2) {
          if (this.statusProtector.getConnectStatus() === _.V2NIM_CONNECT_STATUS_DISCONNECTED)
            return u.reject(new Error("already disconnected"));
          if (e2 >= t2) {
            this.logger.warn("doRequestBackupLbsUrls backup lbs all tried");
            var n2 = w.getDefaultLinkUrl(this.options.secure);
            return this.logger.warn("doRequestBackupLbsUrls: use default socket link", n2), this.socketUrls = [n2], this.reporterHookLBS.end(false), u.resolve();
          }
          return this.logger.warn("doRequestBackupLbsUrls: wait for next lbs request"), u.reject(new Error("lbs request failed"));
        }
        function N(e2, t2) {
          var n2 = t2.status || 10001, r2 = "string" == typeof t2 ? t2 : t2 && t2.message ? t2.message : "Unknown error";
          this.reporterHookLBS.updateComplete({ target: e2, code: t2.status || t2.code || 0, body: t2 && t2.message || "" }), this.reporter.reportTraceUpdateV2("login", { operation_type: "HTTP", target: e2, code: n2, description: r2, net_connect: this.checkNetworkAvailable(), succeed: false });
        }
        function O(e2) {
          var t2 = this;
          if (!(e2 && e2.length > 0))
            throw new Error("No  lbs url to try");
          var n2 = 0, r2 = 0, o2 = false, s2 = null;
          t2.logger.log("doRequestBackupLbsUrls: use lbs url in index ", n2, e2), t2.reporterHookLBS.start();
          var i2 = function(n3) {
            var i3 = e2[n3], a2 = (/* @__PURE__ */ new Date()).getTime();
            return t2.reporterHookLBS.updateBegin({ target: i3, index: n3 }), t2.promiseAbortManager.add(t2.doRequestLbs(i3)).then(function(e3) {
              if (s2 && clearInterval(s2), false === o2)
                return P.call(t2, e3, i3), o2 = true, u.resolve();
            }).catch(function(n4) {
              return r2 += 1, t2.logger.warn("doRequestBackupLbsUrls: ".concat(i3, " ajax lbs error"), n4), N.call(t2, i3, n4, a2), A.call(t2, r2, e2.length);
            });
          };
          return new u(function(r3, o3) {
            s2 = h(function() {
              if (!(n2 >= e2.length))
                return t2.statusProtector.getConnectStatus() === _.V2NIM_CONNECT_STATUS_DISCONNECTED ? (s2 && clearInterval(s2), void o3(new Error("already disconnected"))) : void i2(n2++).then(function() {
                  s2 && clearInterval(s2), r3();
                }).catch(function() {
                });
              s2 && clearInterval(s2);
            }, 2e3), i2(n2++).then(function() {
              s2 && clearInterval(s2), r3();
            }).catch(function() {
            });
          });
        }
        C.connect = function() {
          w.isBrowser && this.reporter.restore(), this.createConnectTime = s(), this.reporter.reportTraceCancel("login"), this.autoconnect ? this.reporter.reportTraceStart("login", { user_id: this.options.account, action: "auto_login" }) : this.reporter.reportTraceStart("login", { user_id: this.options.account, action: "manual_login", process_id: this.processId }), this.reporter.reportTraceUpdateV2("login", { code: 0, description: i(x(x({}, this.options), {}, { account: "***", token: "***" }), function(e2, t2) {
            return "" === e2 || "function" != typeof t2 && "object" !== r(t2) ? t2 : void 0;
          }), operation_type: "conf_init", net_connect: this.checkNetworkAvailable(), succeed: true, target: "" }), a(C).connect.call(this);
        }, C.onConnect = function() {
          this.reporter.reportTraceUpdateV2("login", { operation_type: "TCP", target: this.url, code: 200, net_connect: this.checkNetworkAvailable(), succeed: true }), a(C).onConnect.call(this);
        }, C.onHandshakeFailed = function(e2, t2) {
          var n2;
          this.reporter.reportTraceUpdateV2("login", { operation_type: "TCP", target: t2, code: 408, succeed: false, net_connect: this.checkNetworkAvailable(), description: "ws_handshake_failed" }), this.reporter.reportTraceEnd("login", false), this.logger.warn(c(n2 = "link::onHandshakeFailed: shandshake failed, startTime: ".concat(e2, ", targetUrl: ")).call(n2, t2));
        }, C.onConnectFailed = function(e2, t2, n2) {
          var r2, o2;
          this.reporter.reportTraceUpdateV2("login", { operation_type: "TCP", target: n2, code: 408, succeed: false, net_connect: this.checkNetworkAvailable(), description: "ws_connect_failed" }), this.reporter.reportTraceEnd("login", false), this.logger.warn(c(r2 = c(o2 = "link::onConnectFailed: connect failed due to ".concat(e2, ", startTime: ")).call(o2, t2, ", targetUrl: ")).call(r2, n2));
        }, C.onSocketError = function(e2, t2, n2) {
          var r2, o2;
          this.reporter.reportTraceUpdateV2("login", { operation_type: "TCP", target: n2, description: "ws_onerror:" + e2, code: 0, net_connect: this.checkNetworkAvailable(), succeed: false }), this.reporter.reportTraceEnd("login", false), this.logger.warn(c(r2 = c(o2 = "link::onSocketError: due to ".concat(e2, ", startTime: ")).call(o2, t2, ", targetUrl: ")).call(r2, n2));
        }, C.probeIp = function() {
          var e2 = this, t2 = w.ipProbeAddr;
          return new u(function(n2) {
            var r2 = 0, o2 = -1;
            function s2() {
              2 === ++r2 && (r2 = -1, n2(o2));
            }
            e2.adaptersRequest(t2.ipv4, { timeout: 2e3, onerror: s2, onload: function(e3) {
              o2++, s2();
            } }), e2.adaptersRequest(t2.ipv6, { timeout: 2e3, onerror: s2, onload: function(e3) {
              o2 += 2, s2();
            } }), l2(function() {
              r2 || -1 === o2 || (r2 = -1, n2(o2));
            }, 100);
          });
        }, C.refreshSocketUrl = function() {
          var e2 = this;
          return this.statusProtector.emit("auth/loginLifeCycleAddressing"), w.isWeixinApp ? this.doRefreshSocketUrl(2) : 2 === this.options.ipVersion ? this.probeIp().then(function(t2) {
            return e2.doRefreshSocketUrl(t2);
          }) : this.doRefreshSocketUrl(this.options.ipVersion);
        }, C.doRefreshSocketUrl = function(e2) {
          var t2, n2, r2 = this.options.lbsUrl || w.lbsUrl;
          1 !== e2 && 2 !== e2 && (e2 = 0), w.ipVersion = e2;
          var o2 = this.options.lbsBackupUrlsCustomer || [], s2 = [];
          this.options.lbsBackup && w.hasLocalStorage && (s2 = (s2 = localStorage.getItem("nim_lbs_backup")) ? JSON.parse(s2) : []);
          var i2 = c(t2 = c(n2 = [r2]).call(n2, s2)).call(t2, o2);
          return i2 = m(i2).call(i2, function(e3, t3, n3) {
            return p(n3).call(n3, e3) === t3;
          }), O.call(this, i2);
        }, C.doRequestLbs = function(e2) {
          var t2 = this, n2 = this.options, r2 = w.info;
          e2 = e2 + I.genUrlSep(e2) + "id=" + n2.account + "&sv=" + r2.sdkVersion + "&pv=" + r2.protocolVersion + "&networkType=" + w.ipVersion + "&hostEnv=" + w.hostEnv + "&k=" + n2.appKey, this.logger.info("doRequestLbs ".concat(d(e2).call(e2, 0, -32)));
          var o2 = this;
          return new u(function(n3, r3) {
            w.isWeixinApp ? wx.request({ url: e2, success: function(e3) {
              var t3 = e3 && e3.statusCode, o3 = e3 && e3.data;
              200 === t3 ? n3(o3) : r3(o3);
            }, fail: function(e3) {
              r3(e3);
            } }) : t2.adaptersRequest(e2, { proxyUrl: I.url2origin(e2) + "/lbs/res/cors/nej_proxy_frame.html", timeout: w.xhrTimeout, onload: function(e3) {
              try {
                var t3 = JSON.parse(e3);
                n3(t3);
              } catch (e4) {
                o2.logger.warn("doRequestLbs parse JSON Error. request lbs failed"), r3(e4);
              }
            }, onerror: function(e3) {
              r3(e3);
            } }, { exception_service: 1 });
          });
        }, C.disconnect = function() {
          var e2 = this, t2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : function() {
          };
          if (this.isConnected())
            return this.sendCmd("logout"), void l2(function() {
              a(C).disconnect.call(e2, t2);
            }, 0);
          this.connecting ? this.logger.warn("IMProtocolFn api disconnect:: connecting but exiting") : this.statusProtector.getConnectStatus() !== _.V2NIM_CONNECT_STATUS_DISCONNECTED ? this.logger.warn("IMProtocolFn api disconnect:: has tried to disconnect") : this.logger.warn("IMProtocolFn api disconnect:: other logic entered");
          var n2 = a(C);
          n2.disconnect.call(this, t2);
        }, C.notifyDisconnect = function(e2) {
          a(C).notifyDisconnect.call(this, e2);
        };
      }, function(e, t, n) {
        var r = n(57), o = n(51), s = n(58), i = n(3), a = n(8), c = n(24), u = n(26), l2 = n(7), m = n(2), p = n(16), d = n(4), f2 = n(52), g = n(53), h = n(54), y = n(55), v = n(43);
        function b(e2, t2) {
          var n2 = d(e2);
          if (f2) {
            var r2 = f2(e2);
            t2 && (r2 = p(r2).call(r2, function(t3) {
              return g(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        function T(e2) {
          for (var t2 = 1; t2 < arguments.length; t2++) {
            var n2, r2, s2 = null != arguments[t2] ? arguments[t2] : {};
            t2 % 2 ? m(n2 = b(Object(s2), true)).call(n2, function(t3) {
              o(e2, t3, s2[t3]);
            }) : h ? y(e2, h(s2)) : m(r2 = b(Object(s2))).call(r2, function(t3) {
              v(e2, t3, g(s2, t3));
            });
          }
          return e2;
        }
        var S = n(35).fn, M = n(195), k = n(11), x = "NIM-AllGrayscaleConfig", C = "NIM-AllMixStorePolicy", I = n(0);
        function w() {
          var e2 = this;
          if (k.hasLocalStorage && localStorage.getItem(x)) {
            var t2 = null;
            try {
              t2 = JSON.parse(localStorage.getItem(x))[e2.options.appKey];
            } catch (t3) {
              e2.logger.error("appGrayConfig error", t3);
            }
            t2 && (e2.appGrayConfig = t2.timeStamp + 1e3 * t2.ttl > (/* @__PURE__ */ new Date()).getTime() ? t2 : null, e2.appGrayConfig && _.apply(e2));
          }
          e2.appGrayConfig || e2.sendCmd("getGrayscaleConfig", { providers: "" }, function(t3, n2) {
            if (t3)
              e2.logger.error("Calculate Delay time, getGrayscaleConfig error", t3);
            else if (n2) {
              var r2 = n2;
              if (r2.grayConfig = JSON.parse(r2.grayConfig), r2.ttl = Number(r2.ttl), r2.timeStamp = (/* @__PURE__ */ new Date()).getTime(), e2.appGrayConfig = r2, k.hasLocalStorage) {
                var o2 = localStorage.getItem(x) ? JSON.parse(localStorage.getItem(x)) : {};
                o2[e2.options.appKey] = r2, localStorage.setItem(x, a(o2));
              }
              _.apply(e2);
            } else
              e2.logger.error("Calculate Delay time, getGrayscaleConfig error", n2);
          });
        }
        function _() {
          var e2 = this;
          if (k.hasLocalStorage && localStorage.getItem(C)) {
            var t2 = null;
            try {
              t2 = JSON.parse(localStorage.getItem(C))[e2.options.appKey];
            } catch (t3) {
              e2.logger.error("mixStorePolicy error", t3);
            }
            t2 && (e2.mixStorePolicy = t2.timeStamp + 1e3 * t2.ttl > (/* @__PURE__ */ new Date()).getTime() ? t2 : null, e2.mixStorePolicy && t2.ttl && 0 !== t2.ttl && (e2.mixStorePolicyClock = c(u(_).call(_, e2), 1e3 * t2.ttl)));
          }
          e2.mixStorePolicy || e2.sendCmd("getMixStorePolicy", { providers: e2.options.providers && e2.options.providers.s3 ? [1, 2] : [1] }, function(t3, n2) {
            if (t3) {
              e2.logger.error("Calculate Delay time, getMixStorePolicy error", t3);
              try {
                n2 = JSON.parse(localStorage.getItem("NIM-AllMixStorePolicy"))[e2.options.appKey];
              } catch (t4) {
                e2.logger.error("error:", "get last mixStorePolicy failed", t4);
              }
            } else if (n2) {
              var r2 = n2;
              if (r2.ttl = Number(r2.ttl), r2.providers = r2.providers.split(","), r2.nosPolicy = r2.nosPolicy ? JSON.parse(r2.nosPolicy) : null, r2.s3Policy = r2.s3Policy ? JSON.parse(r2.s3Policy) : null, r2.timeStamp = (/* @__PURE__ */ new Date()).getTime(), e2.mixStorePolicy = r2, r2.ttl && 0 !== r2.ttl && (e2.mixStorePolicyClock = c(u(_).call(_, e2), 1e3 * r2.ttl)), k.hasLocalStorage) {
                var o2 = localStorage.getItem(C) ? JSON.parse(localStorage.getItem(C)) : {};
                o2[e2.options.appKey] = r2, localStorage.setItem(C, a(o2));
              }
            } else
              e2.logger.error("Calculate Delay time, mixStorePolicy error", n2);
          });
        }
        function P(e2) {
          var t2 = this, n2 = this;
          399 === e2.code ? (this.logger.warn("pendingLoginFailed:399, refresh LBS url and reconnecting"), n2.forceDisconnect(), n2.doRefreshSocketUrl(k.ipVersion).then(function() {
            n2.reconnect();
          }).catch(function() {
            t2.logger.warn("pendingLoginFailed:399, refresh LBS url failed");
          })) : 398 === e2.code ? (this.logger.warn("pendingLoginFailed:398 try to reconnect socket link，backoff set min 5s"), n2.backoff.setMin(5e3), n2.reconnect()) : (this.logger.error("pendingLoginFailed: ", e2.code, e2), n2.onAuthError(e2, "link::onLogin"));
        }
        S.assembleLogin = function() {
          var e2 = this.assembleIMLogin();
          return this.addPushInfo instanceof Function ? this.addPushInfo(e2) : i.resolve({ login: e2 });
        }, S.login = s(r.mark(function e2() {
          var t2, n2, o2, s2 = this;
          return r.wrap(function(e3) {
            for (; ; )
              switch (e3.prev = e3.next) {
                case 0:
                  return t2 = this, e3.next = 3, t2.assembleLogin();
                case 3:
                  if (n2 = e3.sent, !(o2 = this.socket && this.socket.socket && this.socket.socket.sessionid)) {
                    e3.next = 13;
                    break;
                  }
                  if (this.socketIds || (this.socketIds = {}), !this.socketIds[o2]) {
                    e3.next = 10;
                    break;
                  }
                  return this.logger.warn("onConnect::repeat login", o2), e3.abrupt("return");
                case 10:
                  this.socketIds[o2] = true, e3.next = 14;
                  break;
                case 13:
                  this.logger.warn("onConnect:: no socketId ", this.socket && this.socket.socket);
                case 14:
                  this.logger.warn("link::doLogin: " + o2 + " appLogin is " + n2.login.appLogin), t2.sendCmd("login", T({}, n2), function(e4, n3) {
                    if (e4) {
                      var r2 = I.get(e4, "event.uploadCode") || e4 && e4.code;
                      r2 = "number" != typeof r2 ? 408 : r2;
                      var o3 = I.get(e4, "event.disconnectReason"), i2 = o3 ? a({ disconnect_reason: o3 }) : e4 && e4.message || "login failed";
                      t2.reporter.reportTraceUpdateV2("login", { operation_type: "protocol", target: "2-3", code: r2, description: i2, net_connect: t2.checkNetworkAvailable(), succeed: false }), t2.reporter.reportTraceEnd("login", false), P.call(t2, e4), t2.statusProtector.emit("auth/loginLifeCycleLoginFail", e4);
                    } else
                      t2.reporter.reportTraceUpdateV2("login", { operation_type: "protocol", target: "2-3", succeed: true, net_connect: t2.checkNetworkAvailable(), code: 200 }), t2.reporter.reportTraceEnd("login", true), t2.resetReconnectStatus(), s2.heartbeatFail = 0, s2.hasLogin = true, s2.autoconnect = true, t2.startHeartbeat(), t2.initOnlineListener(), t2.statusProtector.emit("auth/loginLifeCycleLoginSucc"), t2.afterLogin(n3);
                  });
                case 16:
                case "end":
                  return e3.stop();
              }
          }, e2, this);
        })), S.afterLogin = function(e2) {
          var t2 = this;
          this.sendCmd("getNosCdnHost", {}), ("boolean" == typeof I.get(this.options, "privateConf.isMixStoreEnable") ? this.options.privateConf.isMixStoreEnable : k.privateConf.isMixStoreEnable) && w.apply(this), this.initPush instanceof Function && this.initPush();
          var n2 = this.db;
          if (n2.enable) {
            var r2 = this.account;
            this.options.appendAppKeyForDBName && (r2 += "-" + this.options.appKey), this.db.init(r2).then(function() {
              t2.notifyLogin(e2), t2.syncData();
            }, function(r3) {
              t2.logger.warn("link::afterLogin: no db", r3), n2.reset(false), t2.notifyLogin(e2), t2.syncData();
            });
          } else
            this.logger.info("link::afterLogin: no db"), this.notifyLogin(e2), this.syncData();
        }, S.getFileAuthToken = function(e2) {
          var t2 = this, n2 = t2.mixStorePolicy.nosPolicy.authPolicy.policyType;
          -1 !== n2 ? l2(n2).call(n2, e2.type) < 0 ? t2.logger.error("this type Token error not support") : 3 != e2.type || e2.urls && e2.urls.length ? t2.sendCmd("getBackSourceToken", { mixAuthTokenReq: e2 }, function(n3, r2) {
            if (n3)
              return t2.logger.error("getBackSourceToken error", n3), n3;
            e2.done && e2.done(r2);
          }) : t2.logger.error("urls is Required when type 3") : t2.logger.error("don't need token");
        }, S.processAuth = function(e2) {
          switch (e2.cmd) {
            case "login":
              e2.error || (e2.content = e2.content || {}, this.loginAndroidPush && this.loginAndroidPush(e2.content.aosPushInfo || {}), e2.obj = e2.content.loginRes, this.connectionId = e2.content.loginRes.connectionId, this.onLoginPortsChange(e2, 2));
              break;
            case "kicked":
              return void this.onKicked(e2);
            case "multiPortLogin":
              this.onLoginPortsChange(e2, e2.content.state);
              break;
            case "kick":
              e2.error || (e2.obj.deviceIds = e2.content.deviceIds);
          }
        }, S.onLoginPortsChange = function(e2, t2) {
          var n2 = this, r2 = e2.content.loginPorts;
          if (r2 && r2.length) {
            var o2 = true;
            switch (t2) {
              case 2:
                o2 = true;
                break;
              case 3:
                o2 = false;
            }
            m(r2).call(r2, function(e3) {
              e3.type = M.reverseType(e3.type), e3.customClientType && (e3.customClientType = +e3.customClientType), e3.time = +e3.time, e3.online = o2;
            }), (r2 = p(r2).call(r2, function(e3) {
              return e3.connectionId !== n2.connectionId;
            })).length && (n2.logger.info("link::onLoginPortsChange:", r2), n2.options.onloginportschange(r2));
          }
        }, S.kickedReasons = ["", "samePlatformKick", "serverKick", "otherPlatformKick", "silentlyKick"], S.kickedMessages = ["", "不允许同一个帐号在多个地方同时登录", "被服务器踢了", "被其它端踢了", "悄悄被踢"];
      }, function(e, t, n) {
        var r = n(57), o = n(58), s = n(789), i = n(3), a = n(26), c = n(6), u = n(754), l2 = n(37), m = n(2), p = n(4), d = n(122), f2 = n(7), g = n(71), h = n(16), y = n(9), v = n(121), b = n(803), T = n(24), S = n(32), M = n(90), k = n(35).fn, x = n(0), C = n(41), I = x.undef, w = x.objs2ids, _ = x.objs2accounts, P = x.teams2ids, A = n(154), N = x.getGlobal(), O = n(107).EMSyncType;
        k.beforeSync = function() {
          var e2 = this.db;
          return e2.enable ? e2.clearSendingMsgs() : i.resolve();
        }, k.syncData = function() {
          var e2 = this, t2 = e2.db, n2 = e2.options, r2 = t2.enable;
          function o2(t3) {
            var o3;
            e2.syncPromiseArray = [], e2.syncResult = {}, e2.syncTeamMembersPromiseArray = [], e2.syncSuperTeamMembersPromiseArray = [], e2.syncTeamMembersResult = {}, e2.checkNosReqNum = 0, e2.getNosOriginUrlReqNum = 0, x.verifyBooleanWithDefault(n2, "syncRelations syncFriends syncFriendUsers syncTeams syncSuperTeams syncRoamingMsgs syncSuperTeamRoamingMsgs syncMsgReceipts syncExtraTeamInfo syncExtraSuperTeamInfo syncAvSignal", true, "", "sync::syncData"), x.verifyBooleanWithDefault(n2, "syncFilter syncTeamMembers syncSuperTeamMembers", false, "", "sync::syncData");
            var s2 = {};
            t3 = t3 || {}, N._nimForceSyncIM && (e2.logger.warn("sync::syncData: nimForceSyncIM"), delete t3.teams, N._nimForceSyncIM = false), s2.myInfo = t3.myInfo || 0, s2.deleteMsgSelf = t3.deleteMsgSelf || 0, s2.offlineMsgs = 0, n2.syncRelations && (s2.relations = t3.relations || 0), n2.syncFriends && (s2.friends = t3.friends || 0), n2.syncFriendUsers && (s2.friendUsers = t3.friendUsers || 0), n2.syncRobots && (s2.robots = t3.robots || 0), n2.syncTeams && (s2.teams = t3.teams || 0), n2.syncSuperTeams && (s2.superTeams = t3.superTeams || 0), n2.syncStickTopSessions && (s2.stickTopSessions = t3.stickTopSessions || 0), n2.syncSessionUnread && (s2.sessionAck = r2 && t3.sessionAck || 0, s2.superTeamSessionAck = r2 && t3.superTeamSessionAck || 0), n2.syncRoamingMsgs && (s2.roamingMsgs = r2 && t3.roamingMsgs || t3.roamingMsgs || 0), n2.syncSuperTeamRoamingMsgs && (s2.superTeamRoamingMsgs = r2 && t3.superTeamRoamingMsgs || 0), n2.syncMsgReceipts && (s2.msgReceipts = t3.msgReceipts || 0), n2.syncExtraTeamInfo && (s2.myTeamMembers = t3.myTeamMembers || 0), n2.syncExtraSuperTeamInfo && (s2.myInfoInSuperTeams = t3.myInfoInSuperTeams || 0), n2.syncBroadcastMsgs && (s2.broadcastMsgs = t3.broadcastMsg || 0), s2.donnop = t3.donnop || 0, s2.deleteMsg = t3.deleteMsg || 0, s2.deleteSuperTeamMsg = t3.deleteSuperTeamMsg || 0, s2.sessionHistoryMsgsDelete = t3.sessionHistoryMsgsDelete || 0, s2.netcallMsgs = 0, n2.syncFilter && (s2.filterMsgs = 0), n2.syncAvSignal && (s2.avSignal = 0);
            var i2 = a(o3 = e2.onSyncData).call(o3, e2);
            i2.isImSyncDataCb = true, e2.logger.info("syncData:: start sync", s2), e2.reporterHook.emit("reporter/syncStart"), e2.sendCmd("sync", { sync: s2, isImSyncDataObj: true }, i2);
          }
          e2.syncing = true, e2.logger.log("sync::syncData: syncing = true"), r2 ? e2.beforeSync().then(function() {
            return e2.db.getTimetags();
          }).then(function(e3) {
            o2(e3);
          }, function() {
            o2();
          }) : o2(e2.timetags);
        }, k.onSyncData = function(e2) {
          e2 && (e2.callFunc = "sync::onSyncData", this.onCustomError("SYNC_DATA_ERROR", e2));
        }, k.processSync = function(e2) {
          switch (this.logger.log("sync::processSync cmd: ".concat(e2.cmd)), e2.cmd) {
            case "syncDone":
              if (e2.error) {
                var t2, n2 = x.get(e2.error, "message"), r2 = x.get(e2.error, "code");
                this.logger.error(c(t2 = "sync::processSync syncDoneError errMsg: ".concat(n2, ", errCode: ")).call(t2, r2)), this.logger.error("sync::processSync disconnect because syncDone failed");
                var o2 = C.syncError({ errMsg: n2, errCode: r2 });
                this.shouldReconnect = false, this.markAllCallbackInvalid(o2), this.notifyDisconnect(o2);
              } else
                this.timetags.sync = e2.content.timetag, this.reporterHook.emit("reporter/syncRecv"), this.onSyncDone();
              break;
            case "syncTeamMembersDone":
              this.onSyncTeamMembersDone();
              break;
            case "syncSuperTeamMembersDone":
              this.onSyncSuperTeamMembersDone();
          }
        }, k.onSyncDone = function() {
          var e2, t2, n2, r2, o2, a2, k2, C2, N2, E, R, j2, F, D, U, L, B, q, H, z, W, V, G, Q, J, K, $, X, Y, Z, ee = this, te = ee.db, ne = te.enable, re = ee.options, oe = ee.syncPromiseArray, se = ee.syncResult;
          function ie() {
            if (oe) {
              ee.logger.info("sync::onSyncDone: after sync", x.promises2cmds(oe)), oe = [], t2 = se.blacklist || [], n2 = se.invalidBlacklist || [], r2 = se.mutelist || [], o2 = se.invalidMutelist || [], a2 = se.friends, N2 = se.myTeamMembers, E = se.mySuperTeamMembers, k2 = se.invalidFriends || [], C2 = se.myInfo, R = se.users, F = se.superTeams, U = se.invalidSuperTeams, j2 = se.teams, D = se.invalidTeams || [], L = se.sessions || {}, B = u(l2({}, ee.sessionSet)), q = se.ackMap, se.msgReceipts, H = se.roamingMsgs, z = se.offlineMsgs, W = se.offlineFilterMsgs, G = se.offlineSysMsgs, Q = se.offlineCustomSysMsgs, J = se.offlineFilterSysMsgs, K = se.offlineFilterCustomSysMsgs, $ = se.sysMsgUnread, X = se.sessionsWithMoreRoaming, Z = se.clearServerHistoryMsgs || [];
              var T2 = i.resolve();
              !function() {
                if (ne) {
                  var e3, t3 = [ae()];
                  if (L)
                    m(e3 = p(L)).call(e3, function(e4) {
                      t3.push(te.putSession(L[e4]));
                    });
                  T2 = i.all(t3).then(function() {
                    var e4, t4 = c(e4 = []).call(e4, s(p(q || {})), s(p(L || {})));
                    t4 = h(t4).call(t4, function(e5, t5, n5) {
                      return f2(n5).call(n5, e5) === t5;
                    });
                    var n4 = [];
                    return m(t4).call(t4, function(e5) {
                      var t5, r4 = L[e5];
                      (r4.lastMsg || r4.ack) && (t5 = (t5 = r4.ack ? i.resolve(r4) : te.getSession(r4.id)).then(function(t6) {
                        var n5 = t6.ack || 0;
                        return te.getMsgCountAfterAck({ shouldCountNotifyUnread: ee.options.shouldCountNotifyUnread, sessionId: e5, ack: n5 }).then(function(n6) {
                          return t6.unread = n6 || 0, L[e5] = ee.mergeSession(t6), te.updateSession(t6);
                        });
                      }), n4.push(t5));
                    }), i.all(n4);
                  }).then(function() {
                    var e4 = [];
                    return ee.saveAck.p2pTeam && e4.push(te.updateSessionAck(ee.saveAck.p2pTeam).catch(function(e5) {
                      return ee.logger.error("sessionAck::syncSessionAck::updatetimetag db", e5), i.reject(e5);
                    })), ee.saveAck.superTeam && e4.push(te.updateSuperTeamSessionAck(ee.saveAck.superTeam).catch(function(e5) {
                      return ee.logger.error("sessionAck::syncSuperTeamSessionAck::updatetimetag db", e5), i.reject(e5);
                    })), i.all(e4);
                  });
                } else if (L) {
                  var n3, r3, o3;
                  m(n3 = [H, z]).call(n3, function(e4) {
                    e4 && m(e4).call(e4, function(e5) {
                      var t4;
                      (r3 = L[e5.sessionId]).unread = r3.unread || 0, r3.unreadMsgs = r3.unreadMsgs || [], o3 = r3.ack || 0, m(t4 = e5.msgs).call(t4, function(e6) {
                        if (!(o3 >= e6.time))
                          if ("notification" === e6.type) {
                            var t5;
                            try {
                              t5 = ee.options.shouldCountNotifyUnread(e6);
                            } catch (e7) {
                              throw ee.logger.error("userOption:shouldCountNotifyUnread function error", e7), e7;
                            }
                            t5 && r3.unread++;
                          } else
                            "in" === e6.flow && false !== e6.isUnreadable && (r3.unread++, r3.unreadMsgs.push(e6));
                      }), ee.mergeSession(r3);
                    });
                  });
                }
              }(), ee.syncDonePromiseArray = ee.syncDonePromiseArray || [], T2.then(function() {
                if (ne && !ee.hasSynced)
                  ee.hasSynced = true, function() {
                    re.syncRelations && (e2 = te.getRelations().then(function(e3) {
                      t2 = e3[0], r2 = e3[1], t2.invalid = n2, r2.invalid = o2;
                    }).catch(function(e3) {
                      return e3._msg = "on relations error", ee.logger.error("sync::syncRelation: ", e3), i.reject(e3);
                    }), oe.push(e2));
                    re.syncFriends && (e2 = te.getFriends().then(function(e3) {
                      (a2 = e3).invalid = k2;
                    }).catch(function(e3) {
                      return e3._msg = "on friends error", ee.logger.error("sync::syncFriends: ", e3), i.reject(e3);
                    }), oe.push(e2));
                    I(C2) && (e2 = te.getUser(ee.account).then(function(e3) {
                      C2 = e3;
                    }).catch(function(e3) {
                      return e3._msg = "on myInfo error", ee.logger.error("sync::syncMyInfo: ", e3), i.reject(e3);
                    }), oe.push(e2));
                    re.syncFriendUsers && (e2 = te.getFriends().then(function(e3) {
                      return y(e3).call(e3, function(e4) {
                        return e4.account;
                      });
                    }).then(function(e3) {
                      return te.getUsers({ accountIds: e3 });
                    }).then(function(e3) {
                      R = e3;
                    }).catch(function(e3) {
                      return e3._msg = "on users error", ee.logger.error("sync::syncFriendUser: ", e3), i.reject(e3);
                    }), oe.push(e2));
                    re.syncTeams && (e2 = te.getTeams().then(function(e3) {
                      (j2 = e3).invalid = D;
                    }).catch(function(e3) {
                      return e3._msg = "on teams error", ee.logger.error("sync::syncTeams: ", e3), i.reject(e3);
                    }), oe.push(e2));
                    re.syncSuperTeams && (e2 = te.getSuperTeams().then(function(e3) {
                      (F = e3).invalid = U;
                    }).catch(function(e3) {
                      return e3._msg = "on superteams error", ee.logger.error("sync::syncSuperTeams: ", e3), i.reject(e3);
                    }), oe.push(e2));
                    e2 = te.getTeamMembersByAccount(ee.account).then(function(e3) {
                      N2 = e3, ee.mergeMyTeamMembers(e3);
                    }).catch(function(e3) {
                      return ee.logger.error("sync::getTeamMembersByAccount: ", e3), i.reject(e3);
                    }), oe.push(e2), e2 = te.getSuperTeamMembersByAccount(ee.account).then(function(e3) {
                      E = e3, ee.mergeMySuperTeamMembers(e3);
                    }).catch(function(e3) {
                      return ee.logger.error("sync::getSuperTeamMembersByAccount: ", e3), i.reject(e3);
                    }), oe.push(e2), e2 = te.getDonnop().then(function(e3) {
                      ee.mergeDonnop(e3);
                    }).catch(function(e3) {
                      return ee.logger.error("sync::donnop: ", e3), i.reject(e3);
                    }), oe.push(e2), e2 = te.getAllSessions().then(function(e3) {
                      L = e3;
                    }).catch(function(e3) {
                      return ee.logger.error("sync::getSession: ", e3), i.reject(e3);
                    }), oe.push(e2), e2 = te.getSysMsgUnread().then(function(e3) {
                      $ = e3;
                    }).catch(function(e3) {
                      return e3._msg = "on sysMsgUnread error", ee.logger.error("sync::getSysMsgUnread: ", e3), i.reject(e3);
                    }), oe.push(e2), oe.push(te.getSessionsWithMoreRoaming().then(function(e3) {
                      X = e3;
                    }));
                  }();
                else {
                  var l3, T3, S2 = [];
                  m(l3 = p(L)).call(l3, function(e3) {
                    (T3 = L[e3]).lastMsg && S2.push(T3);
                  }), L = d(S2).call(S2, function(e3, t3) {
                    return t3.updateTime - e3.updateTime;
                  });
                }
                var M2 = i.all(oe);
                function x2(e3) {
                  var t3;
                  e3 || (ee.syncDonePromiseSuccessCount += 1);
                  var n3, r3 = f2(t3 = ee.syncDonePromiseArray).call(t3, M2);
                  r3 > -1 && g(n3 = ee.syncDonePromiseArray).call(n3, r3, 1);
                  ee.logger.log("afterSync::syncDonePromiseHandler syncPromiseArray length: ", ee.syncDonePromiseArray.length, "success count: ", ee.syncDonePromiseSuccessCount), 0 === ee.syncDonePromiseArray.length && ee.syncDonePromiseSuccessCount > 0 ? (ee.logger.log("onSyncDone afterSync last syncDonePromsie. Execute taskAfterSync and notifyData"), function() {
                    ee.logger.info("sync::onSyncDone: taskAfterSync"), function() {
                      if (se.deleteMsgSysMsgs) {
                        var e5, t4 = {};
                        H && m(H).call(H, function(e6) {
                          t4[e6.sessionId] = e6;
                        });
                        var n4 = {};
                        z && m(z).call(z, function(e6) {
                          n4[e6.sessionId] = e6;
                        });
                        var r4 = ee.api;
                        if (m(e5 = se.deleteMsgSysMsgs).call(e5, function(e6) {
                          var o4;
                          m(o4 = e6.sysMsgs).call(o4, function(o5) {
                            var s2 = o5.msg, i3 = s2.sessionId;
                            "roaming" === e6.type && t4[i3] ? t4[i3].msgs = r4.cutMsgs(t4[i3].msgs, s2) : n4[i3] && (n4[i3].msgs = r4.cutMsgs(n4[i3].msgs, s2));
                          });
                        }), !te.enable) {
                          var o3, i2 = c(o3 = []).call(o3, s(H || []), s(z || []));
                          m(i2).call(i2, function(e6) {
                            if (e6.msgs.length) {
                              var t5 = ee.genSessionByMsgs(e6.msgs);
                              ee.cacheSyncedSession(t5), L.unshift(t5);
                            } else {
                              var n5 = b(L).call(L, function(t6) {
                                return t6.id === e6.sessionId;
                              });
                              g(L).call(L, n5, 1);
                            }
                          });
                          var a3 = {};
                          m(L).call(L, function(e6) {
                            if (a3[e6.id]) {
                              var t5 = e6.lastMsg.time > a3[e6.id].lastMsg.time ? e6.lastMsg : a3[e6.id].lastMsg;
                              a3[e6.id] = e6, a3[e6.id].lastMsg = t5;
                            } else
                              a3[e6.id] = e6;
                          }), L = u(a3), L = d(L).call(L, function(e6, t5) {
                            return t5.updateTime - e6.updateTime;
                          });
                        }
                      }
                    }(), Y = ee.syncResult.stickTopSessions || [], m(Y).call(Y, function(e5) {
                      e5.isTop = true;
                    }), m(L).call(L, function(e5) {
                      var t4 = ee.sessionSet[e5.id];
                      t4 && t4.isTop && (e5.isTop = true), v(Y).call(Y, function(t5) {
                        return t5.id === e5.id;
                      }) && (e5.isTop = true);
                    });
                    var e4 = [ee.deleteMsgOfflineRoaming(se.deleteMsgSysMsgs, L)];
                    Z && m(Z).call(Z, function(t4) {
                      e4.push(function(e5, t5) {
                        var n4;
                        ee.logger.info("sync::taskAfterSync:sessionHistoryMsgsDelete ".concat(e5)), t5 = t5 || (/* @__PURE__ */ new Date()).getTime();
                        var r4 = h(L).call(L, function(t6) {
                          return t6.id === e5;
                        }), o3 = ee.getSessionInCache(e5);
                        n4 = o3 || r4[0];
                        var s2 = false !== re.rollbackClearMsgsUnread, a3 = [];
                        te.enable && a3.push(te.deleteMsgsBySessionId({ sessionId: e5, end: t5 }));
                        s2 && n4 && (n4.lastMsg = null, n4.unread = 0, n4 = ee.mergeSession(n4), te.enable && a3.push(te.updateSession(n4)));
                        return i.all(a3);
                      }(t4.sessionId, t4.time));
                    });
                    return i.all(e4);
                  }().then(ce, function(e4) {
                    ee.logger.error("taskAfterSync syncDBDataPromise error:", e4), e4.callFunc = "sync::onSyncDone", e4.message = "taskAfterSync+notifyData 出错", ee.onCustomError("SYNC_SESSION_ACK_ERROR", e4);
                  })) : e3 ? (ee.logger.error("onSyncDone afterSync syncDonePromise Error:", e3), e3.callFunc = "sync::onSyncDone", e3.message = "pullFullData 出错", ee.onCustomError("SYNC_SESSION_ACK_ERROR", e3)) : ee.logger.log("onSyncDone afterSync syncDonePromise success, wait for next syncDonePromise");
                }
                0 === ee.syncDonePromiseArray.length && (ee.syncDonePromiseSuccessCount = 0), ee.syncDonePromiseArray.push(M2), M2.then(function() {
                  return x2();
                }).catch(function(e3) {
                  return x2(e3);
                });
              });
            } else
              ee.logger.warn("sync::onSyncDone: after sync --no promiseArray");
          }
          function ae() {
            var e3 = [];
            return H && m(H).call(H, function(t3) {
              var n3;
              e3 = c(n3 = []).call(n3, s(e3), s(t3.msgs));
            }), z && m(z).call(z, function(t3) {
              var n3;
              e3 = c(n3 = []).call(n3, s(e3), s(t3.msgs));
            }), e3.length ? te.putMsg(e3).then(function() {
              return e3;
            }) : i.resolve(e3);
          }
          function ce() {
            T(ue, 0);
          }
          function ue() {
            var e3, n3, o3 = [], s2 = [];
            if (t2 && t2.length && (ee.logger.info("sync::notifyDataAsync: on blacklist", _(t2)), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType3_8), re.onblacklist(t2)), r2 && r2.length && (ee.logger.info("sync::notifyDataAsync: on mutelist", _(r2)), re.onmutelist(r2)), a2 && (ee.logger.info("sync::notifyDataAsync: on friends", _(a2)), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType12_5), re.onfriends(a2)), C2 && (ee.logger.info("sync::notifyDataAsync: on myInfo"), ee.myInfo = C2, ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType3_109), re.onmyinfo(x.copy(C2))), N2) {
              ee.logger.info("sync::notifyDataAsync: on myTeamMembers", N2), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType8_126);
              var u2 = x.simpleClone(N2);
              S(u2) || (u2 = [u2]), re.onMyTeamMembers(u2);
            }
            if (E) {
              ee.logger.info("sync::notifyDataAsync: on mySuperTeamMembers", E), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType21_111);
              var l3 = x.simpleClone(E);
              S(l3) || (l3 = [l3]), re.onMySuperTeamMembers(l3);
            }
            R && (m(R).call(R, function(e4) {
              ee.mergeUser(e4);
            }), ee.logger.info("sync::notifyDataAsync: on users", _(R)), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType12_6), re.onusers(R)), j2 && (ee.logger.info("sync::notifyDataAsync: on teams", P(j2)), re.onteams(j2), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType8_109)), F && (ee.logger.info("sync::notifyDataAsync: onSuperTeams", P(F)), re.onSuperTeams(F), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType21_109)), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_12), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_14), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_20), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_21), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType7_15), L && L.length ? (L = y(L).call(L, function(e4) {
              return ee.mergeSession(e4), M(A).call(A, e4);
            }), L = h(L).call(L, function(e4) {
              return !e4.isDeleted;
            }), ee.logger.info("sync::notifyDataAsync: on sessions", w(L), x.secureOutput("session", L)), !ne && ee.timetags && ee.timetags.roamingMsgs ? re.onsessions(h(B).call(B, function(e4) {
              return A.isComplete(e4);
            })) : re.onsessions(L)) : !ne && B.length && (ee.logger.info("sync::notifyDataAsync: on sessions", w(L), x.secureOutput("session", L)), re.onsessions(h(B).call(B, function(e4) {
              return A.isComplete(e4);
            }))), Y && Y.length && (Y = y(Y).call(Y, function(e4) {
              var t3 = ee.getSessionInCache(e4.id);
              return t3 ? (t3.isTop = true, e4 = ee.mergeSession(t3), M(A).call(A, t3)) : (e4 = ee.mergeSession(e4), M(A).call(A, e4));
            }), ee.logger.info("sync::notifyDataAsync: onStickTopSessions", w(Y), x.secureOutput("session", Y)), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_23), re.onStickTopSessions(Y)), H && m(H).call(H, function(e4) {
              "superTeam" === e4.scene ? s2.push(e4.timetag) : o3.push(e4.timetag), (n3 = e4.msgs).length && (ee.logger.info("sync::notifyDataAsync: on roaming msgs", e4.sessionId, n3.length), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_9), re.onroamingmsgs(e4));
            }), z && (ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_4), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_17), m(z).call(z, function(e4) {
              "superTeam" === e4.scene ? s2.push(e4.timetag) : o3.push(e4.timetag), (n3 = e4.msgs).length && (ee.logger.info("sync::notifyDataAsync: on offline msgs", e4.sessionId, n3.length, y(n3).call(n3, function(e5) {
                return e5.idServer;
              })), re.onofflinemsgs(e4));
            })), W && (ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_100), m(W).call(W, function(e4) {
              o3.push(e4.timetag), (n3 = e4.msgs).length && (ee.logger.info("sync::notifyDataAsync: on offline filter msgs", e4.sessionId, n3.length), re.onofflinefiltermsgs(n3));
            })), X && (ee.logger.info("sync::notifyDataAsync: on sessionsWithMoreRoaming", w(X), X), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_22), re.onSessionsWithMoreRoaming(X));
            var p2, d2 = [], f3 = [];
            se.deleteMsgSysMsgs && m(p2 = se.deleteMsgSysMsgs).call(p2, function(e4) {
              "roaming" === e4.type ? d2 = c(d2).call(d2, e4.sysMsgs) : f3 = c(f3).call(f3, e4.sysMsgs);
            });
            d2.length && (V = c(V = V || []).call(V, d2)), f3.length && (G = c(G = G || []).call(G, f3)), V && (ee.logger.info("sync::notifyDataAsync: on roaming sys msgs", V.length), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_19), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_15), re.onroamingsysmsgs(V)), G && (ee.logger.info("sync::notifyDataAsync: on offline sys msgs", G.length), re.onofflinesysmsgs(G)), J && (ee.logger.info("sync::notifyDataAsync: on offline filter sys msgs", J.length), re.onofflinefiltersysmsgs(J)), Q && (ee.logger.info("sync::notifyDataAsync: on offline custom sys msgs", Q.length), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_6), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_18), re.onofflinecustomsysmsgs(Q)), K && (ee.logger.info("sync::notifyDataAsync: on offline filter custom sys msgs", K.length), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_101), re.onofflinefiltercustomsysmsgs(K)), $ && ($ = x.merge({}, ee.sysMsgUnread, $), ee.sysMsgUnread = x.merge({}, $), ee.logger.info("sync::notifyDataAsync: on sysMsgUnread", $), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_6), re.onsysmsgunread($));
            var g2 = ee.getPushNotificationMultiportConfig();
            ee.logger.info("sync::notifyDataAsync: on pushNotificationMultiportConfig", g2), ee.reporterHook.emit("reporter/syncItemComplete", O.kSyncType4_13), re.onPushNotificationMultiportConfig(g2);
            var v2 = s2.length && Math.max.apply(Math, s2);
            if (e3 = o3.length && Math.max.apply(Math, o3), te.enable) {
              var b2 = [];
              v2 && b2.push(ee.db.updateSuperTeamRoamingMsgTimetag(v2)), e3 && b2.push(ee.db.updateRoamingMsgTimetag(e3)), i.all(b2).then(le).catch(le);
            } else
              ee.timetags.superTeamRoamingMsgs = v2, ee.timetags.roamingMsgs = e3 || ee.timetags.roamingMsgs, le();
            ee.syncPromiseArray = [], ee.syncResult = {};
          }
          function le() {
            ee.processUnsettledMsgs(), ee.msgPromise.then(function() {
              ee.canHandleDeletedMsgInSyncing = true, T(function() {
                ee.processUnsettledSysMsgs();
              }, 0);
            }), ee.syncing && re.onsyncdone(), ee.syncing = false, ee.logger.log("sync::onsyncdone: syncing = false"), ee.reporterHook.emit("reporter/syncComplete"), te.enable && re.syncTeamMembers && ee.syncTeamMembers(j2), te.enable && re.syncSuperTeamMembers && ee.syncSuperTeamMembers(F);
          }
          oe && oe.length ? i.all(oe).then(ie).catch(function(e3) {
            ie(), ee.logger.error(e3), e3.callFunc = "sync::onSyncDone", e3.message = "afterSync syncNormalPromise 出错", ee.onCustomError("SYNC_promiseArray_ERROR", e3);
          }) : ie();
        }, k.syncTeamMembers = function() {
          var e2 = o(r.mark(function e3(t2) {
            var n2, o2, s2, i2, c2, u2, d2, f3;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    if (o2 = (n2 = this).db, s2 = {}, !o2.enable) {
                      e4.next = 33;
                      break;
                    }
                    return e4.prev = 4, e4.next = 7, o2.getTeamMemberTimetags();
                  case 7:
                    u2 = e4.sent, e4.next = 14;
                    break;
                  case 10:
                    e4.prev = 10, e4.t0 = e4.catch(4), n2.logger.error("sync::syncTeamMembers: getTeamMemberTimetags error", e4.t0), u2 = {};
                  case 14:
                    if (S(t2)) {
                      e4.next = 25;
                      break;
                    }
                    return e4.prev = 15, e4.next = 18, o2.getTeams();
                  case 18:
                    t2 = e4.sent, e4.next = 25;
                    break;
                  case 21:
                    e4.prev = 21, e4.t1 = e4.catch(15), n2.logger.error("sync::syncTeamMembers: getTeams error", e4.t1), t2 = [];
                  case 25:
                    m(t2).call(t2, function(e5) {
                      s2[e5.teamId] = 0;
                    }), d2 = {}, m(i2 = p(u2)).call(i2, function(e5) {
                      var t3 = e5.split("-")[1];
                      d2[t3] = u2[e5];
                    }), p(d2).length && (s2 = l2(s2, d2)), n2.logger.log("sync::syncTeamMembers: getTeamMemberTimetags", s2), (f3 = a(c2 = n2.onSyncTeamMembers).call(c2, n2)).isImSyncDataCb = true, n2.sendCmd("syncTeamMembers", { sync: s2, isImSyncDataObj: true }, f3);
                  case 33:
                  case "end":
                    return e4.stop();
                }
            }, e3, this, [[4, 10], [15, 21]]);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), k.syncSuperTeamMembers = function() {
          var e2 = o(r.mark(function e3(t2) {
            var n2, o2, s2, i2, c2, u2, d2, f3;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    if (o2 = (n2 = this).db, s2 = {}, !o2.enable) {
                      e4.next = 33;
                      break;
                    }
                    return e4.prev = 4, e4.next = 7, o2.getSuperTeamMemberTimetags();
                  case 7:
                    u2 = e4.sent, e4.next = 14;
                    break;
                  case 10:
                    e4.prev = 10, e4.t0 = e4.catch(4), n2.logger.error("sync::syncSuperTeamMembers: getSuperTeamMemberTimetags error", e4.t0), u2 = {};
                  case 14:
                    if (S(t2)) {
                      e4.next = 25;
                      break;
                    }
                    return e4.prev = 15, e4.next = 18, o2.getSuperTeams();
                  case 18:
                    t2 = e4.sent, e4.next = 25;
                    break;
                  case 21:
                    e4.prev = 21, e4.t1 = e4.catch(15), n2.logger.error("sync::syncSuperTeamMembers: getSuperTeams error", e4.t1), t2 = [];
                  case 25:
                    m(t2).call(t2, function(e5) {
                      s2[e5.teamId] = 0;
                    }), d2 = {}, m(i2 = p(u2)).call(i2, function(e5) {
                      var t3 = e5.split("-")[1];
                      d2[t3] = u2[e5];
                    }), p(d2).length && (s2 = l2(s2, d2)), n2.logger.log("sync::syncSuperTeamMembers: getSuperTeamMemberTimetags", s2), (f3 = a(c2 = n2.syncSuperTeamMembersCallBack).call(c2, n2)).isImSyncDataCb = true, n2.sendCmd("syncSuperTeamMembers", { sync: s2, isImSyncDataObj: true }, f3);
                  case 33:
                  case "end":
                    return e4.stop();
                }
            }, e3, this, [[4, 10], [15, 21]]);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), k.onSyncTeamMembers = function(e2) {
          e2 && (e2.callFunc = "sync::onSyncTeamMembers", e2.message = "同步群成员错误", this.onCustomError("SYNC_TEAM_MEMBERS_ERROR", e2));
        }, k.syncSuperTeamMembersCallBack = function(e2) {
          e2 && (e2.callFunc = "sync::SyncSuperTeamMembersCallBack", e2.message = "同步超级群成员错误", this.onCustomError("SYNC_SUPERTEAM_MEMBERS_ERROR", e2));
        }, k.onSyncTeamMembersDone = function() {
          var e2 = this, t2 = e2.options, n2 = e2.syncTeamMembersResult, r2 = e2.syncTeamMembersPromiseArray;
          i.all(r2).then(function() {
            var o2;
            r2 = [];
            var s2 = {};
            m(o2 = p(n2)).call(o2, function(e3) {
              var t3, r3, o3, i2;
              -1 === f2(e3).call(e3, "invalid") && (e3 in s2 ? (c(t3 = s2[e3].members).call(t3, n2[e3]), c(r3 = s2[e3].invalid).call(r3, n2[e3 + "-invalid"])) : s2[e3] = { members: c(o3 = []).call(o3, n2[e3] || []), invalid: c(i2 = []).call(i2, n2[e3 + "-invalid"] || []) });
            }), t2.onsyncteammembersdone(s2), e2.syncTeamMembersResult = [], e2.syncTeamMembersPromiseArray = [];
          });
        }, k.onSyncSuperTeamMembersDone = function() {
          var e2 = this, t2 = e2.options, n2 = e2.syncSuperTeamMembersResult, r2 = e2.syncSuperTeamMembersPromiseArray;
          i.all(r2).then(function() {
            var o2;
            r2 = [];
            var s2 = {};
            m(o2 = p(n2)).call(o2, function(e3) {
              var t3, r3, o3, i2;
              -1 === f2(e3).call(e3, "invalid") && (e3 in s2 ? (c(t3 = s2[e3].members).call(t3, n2[e3]), c(r3 = s2[e3].invalid).call(r3, n2[e3 + "-invalid"])) : s2[e3] = { members: c(o3 = []).call(o3, n2[e3] || []), invalid: c(i2 = []).call(i2, n2[e3 + "-invalid"] || []) });
            }), t2.onsyncsuperteammembersdone(s2), e2.syncSuperTeamMembersResult = [], e2.syncSuperTeamMembersPromiseArray = [];
          });
        };
      }, function(e, t, n) {
        var r = n(790), o = n(794), s = n(753), i = n(798);
        e.exports = function(e2) {
          return r(e2) || o(e2) || s(e2) || i();
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(750), o = n(751);
        e.exports = function(e2) {
          if (r(e2))
            return o(e2);
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(792);
      }, function(e, t, n) {
        var r = n(793);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(300);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(155), o = n(72), s = n(752);
        e.exports = function(e2) {
          if (void 0 !== r && null != o(e2) || null != e2["@@iterator"])
            return s(e2);
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(796);
      }, function(e, t, n) {
        var r = n(797);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(301);
        e.exports = r;
      }, function(e, t) {
        e.exports = function() {
          throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(800);
        e.exports = r;
      }, function(e, t, n) {
        n(801);
        var r = n(13);
        e.exports = r.Object.values;
      }, function(e, t, n) {
        var r = n(1), o = n(802).values;
        r({ target: "Object", stat: true }, { values: function(e2) {
          return o(e2);
        } });
      }, function(e, t, n) {
        var r = n(27), o = n(12), s = n(120), i = n(44), a = o(n(150).f), c = o([].push), u = function(e2) {
          return function(t2) {
            for (var n2, o2 = i(t2), u2 = s(o2), l2 = u2.length, m = 0, p = []; l2 > m; )
              n2 = u2[m++], r && !a(o2, n2) || c(p, e2 ? [n2, o2[n2]] : o2[n2]);
            return p;
          };
        };
        e.exports = { entries: u(true), values: u(false) };
      }, function(e, t, n) {
        e.exports = n(804);
      }, function(e, t, n) {
        var r = n(805);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(19), o = n(806), s = Array.prototype;
        e.exports = function(e2) {
          var t2 = e2.findIndex;
          return e2 === s || r(s, e2) && t2 === s.findIndex ? o : t2;
        };
      }, function(e, t, n) {
        n(807);
        var r = n(29);
        e.exports = r("Array").findIndex;
      }, function(e, t, n) {
        "use strict";
        var r = n(1), o = n(74).findIndex, s = n(199), i = true;
        "findIndex" in [] && Array(1).findIndex(function() {
          i = false;
        }), r({ target: "Array", proto: true, forced: i }, { findIndex: function(e2) {
          return o(this, e2, arguments.length > 1 ? arguments[1] : void 0);
        } }), s("findIndex");
      }, function(e, t, n) {
        var r = n(9), o = n(10), s = n(3), i = n(2), a = n(35).fn, c = n(0), u = c.objs2accounts, l2 = n(809), m = n(204);
        a.processUser = function(e2) {
          var t2, n2 = this, s2 = n2.db, i2 = e2.obj, a2 = e2.error, c2 = e2.content;
          switch (e2.cmd) {
            case "markInBlacklist":
              a2 || n2.markInBlacklist(i2);
              break;
            case "syncMarkInBlacklist":
              n2.markInBlacklist(c2, true);
              break;
            case "markInMutelist":
              a2 || n2.markInMutelist(i2);
              break;
            case "syncMarkInMutelist":
              n2.markInMutelist(c2, true);
              break;
            case "getRelations":
              a2 || n2.onRelations(e2);
              break;
            case "syncMyInfo":
              n2.onMyInfo(e2, true);
              break;
            case "updateMyInfo":
              a2 || (i2.user.updateTime = c2.timetag, n2.onUpdateMyInfo(e2, i2.user));
              break;
            case "syncUpdateMyInfo":
              n2.onUpdateMyInfo(e2, c2.user, true);
              break;
            case "getUsers":
              var u2;
              if (!a2)
                t2 = r(u2 = c2.users).call(u2, function(e3) {
                  return e3 = o(m).call(m, e3, n2.mixStorePolicy && n2.mixStorePolicy.s3Policy ? n2.mixStorePolicy.s3Policy.dlcdns : [], n2.mixStorePolicy && n2.mixStorePolicy.s3Policy ? n2.mixStorePolicy.s3Policy.dlcdn : ""), n2.mergeUser(e3), e3;
                }), e2.obj = t2, s2.enable && s2.putUsers(t2);
              break;
            case "updateDonnop":
              n2.onUpdateDonnop(e2);
              break;
            case "syncUpdateDonnop":
              n2.onDonnop(e2, false);
          }
        }, a.onMyInfo = function(e2) {
          var t2, n2 = this, r2 = n2.db, i2 = e2.error, a2 = e2.content, c2 = new s(function(e3, s2) {
            var c3, l3;
            i2 ? (i2 && (i2.callFunc = "user::onMyInfo"), e3(i2), n2.syncData()) : (t2 = o(m).call(m, a2.user), r2.enable ? (c3 = e3, l3 = s2, r2.mergeMyInfo(t2, true).then(function() {
              u2(), c3();
            }).then(void 0, function(e4) {
              e4.message = "db.mergeMyInfo error", e4.callFunc = "user::onMyInfo", l3(e4);
            })) : (u2(), e3()));
          }).catch(function(e3) {
            return n2.logger.error("user::onMyInfo: ", e3), s.reject(e3);
          });
          function u2() {
            n2.timetags.myInfo = t2.updateTime, n2.syncResult.myInfo = t2;
          }
          c2.cmd = "myInfo", n2.syncPromiseArray.push(c2);
        }, a.onUpdateMyInfo = function(e2, t2, n2) {
          var r2 = this.db, s2 = o(m).call(m, t2), i2 = c.merge(this.myInfo, s2);
          this.myInfo = i2, n2 ? (this.logger.info("user::onUpdateMyInfo:", i2 && i2.account), this.options.onupdatemyinfo(i2)) : e2.obj = i2, r2.enable && (s2.account = this.account, r2.updateUser(s2));
        }, a.onRelations = function(e2) {
          var t2, n2 = this, r2 = n2.db, o2 = e2.error, a2 = n2.packetFromSync(e2), c2 = e2.content.specialRelations, m2 = true, p = [], d = [], f2 = [], g = [], h = new s(function(h2, v) {
            var b, T;
            o2 ? a2 && (h2(o2), n2.syncData()) : (i(c2).call(c2, function(e3) {
              var t3 = { account: (e3 = l2.parse(e3)).account, createTime: e3.createTime, updateTime: e3.updateTime };
              e3.isBlacked ? p.push(t3) : d.push(t3), e3.isMuted ? f2.push(t3) : g.push(t3);
            }), n2.logger.info("user::onRelations: parse blacklist", u(p), p, "delete", u(d), d), n2.logger.info("user::onRelations: parse mutelist", u(f2), f2, "delete", u(g), g), c2.length ? (m2 = true, t2 = e2.content.timetag) : m2 = false, r2.enable ? (b = h2, T = v, e2.promise = new s(function(e3, o3) {
              function s2() {
                a2 ? (y(), e3(), b()) : r2.getRelations().then(function(t3) {
                  p = t3[0], f2 = t3[1], y(), e3(), b();
                }).then(void 0, function(e4) {
                  e4.message = "db.getRelations error", e4.callFunc = "user::onRelations", o3(e4), T(e4);
                });
              }
              m2 ? r2.mergeRelations(p, d, f2, g, t2).then(function() {
                s2();
              }).then(void 0, function(e4) {
                e4.message = "db.mergeRelations error", e4.callFunc = "user::onRelations", o3(e4), T(e4);
              }) : (n2.logger.warn("user::onRelations: no relations need merge"), s2());
            }).then(void 0, function(e3) {
              throw e3.message = "merge relations data error", e3.callFunc = "user::onRelations", T(e3), e3;
            })) : (y(), h2()));
          }).catch(function(e3) {
            return n2.logger.error("user::onRelations: ", e3), s.reject(e3);
          });
          function y() {
            n2.timetags.relations = t2, p.invalid = d, f2.invalid = g, a2 ? (n2.syncResult.blacklist = p, n2.syncResult.mutelist = f2, n2.syncResult.invalidBlacklist = d, n2.syncResult.invalidMutelist = g) : (n2.logger.info("user::onRelations: get relations", p, f2), e2.obj.blacklist = p, e2.obj.mutelist = f2);
          }
          a2 && (h.cmd = "relations", n2.syncPromiseArray.push(h));
        }, a.markInBlacklist = function(e2, t2) {
          var n2 = this.db;
          e2.record = { account: e2.account, updateTime: +/* @__PURE__ */ new Date() }, n2.enable && n2.markInBlacklist(e2), t2 && (this.logger.info("user::markInBlacklist:", e2), this.options.onsyncmarkinblacklist(e2));
        }, a.markInMutelist = function(e2, t2) {
          var n2 = this.db;
          e2.record = { account: e2.account, updateTime: +/* @__PURE__ */ new Date() }, n2.enable && n2.markInMutelist(e2), t2 && (this.logger.info("user::markInMutelist:", e2), this.options.onsyncmarkinmutelist(e2));
        }, a.mergeUser = function(e2) {
          this.userSet[e2.account] = e2;
        };
      }, function(e, t, n) {
        var r = n(0);
        function o() {
        }
        o.parse = function(e2) {
          var t2 = r.copy(e2);
          return t2.isBlacked = "1" === t2.isBlacked, t2.isMuted = "1" === t2.isMuted, t2.createTime = +t2.createTime, t2.updateTime = +t2.updateTime, t2;
        }, e.exports = o;
      }, function(e, t, n) {
        var r = n(125), o = n(2), s = n(10), i = n(3), a = n(6), c = n(9), u = ["type"], l2 = n(35).fn, m = n(0), p = m.objs2accounts, d = n(755), f2 = n(204);
        l2.processFriend = function(e2) {
          var t2 = e2.obj, n2 = e2.content, r2 = e2.error;
          switch (e2.cmd) {
            case "friendRequest":
              this.updateFriendSysMsg(e2), r2 || this.onFriendRequest(t2);
              break;
            case "syncFriendRequest":
              this.onFriendRequest(n2, true);
              break;
            case "deleteFriend":
              r2 || this.onDeleteFriend(t2);
              break;
            case "syncDeleteFriend":
              this.onDeleteFriend(n2, true);
              break;
            case "updateFriend":
              r2 || this.onUpdateFriend(t2);
              break;
            case "syncUpdateFriend":
              this.onUpdateFriend(n2.friend, true);
              break;
            case "getFriends":
              this.getFriends(e2);
              break;
            case "syncFriends":
              this.onFriends(e2);
              break;
            case "syncFriendUsers":
              this.onFriendUsers(e2);
          }
        }, l2.getFriends = function(e2) {
          var t2 = e2.content.friends, n2 = [], r2 = [];
          o(t2).call(t2, function(e3) {
            (e3 = s(d).call(d, e3)).valid ? n2.push(e3) : r2.push(e3);
          }), n2.invalid = r2, e2.obj = n2;
        }, l2.onFriends = function(e2) {
          var t2, n2 = this, r2 = n2.db, c2 = e2.error, u2 = e2.content.friends, l3 = true, m2 = [], f3 = [], g = new i(function(a2, g2) {
            var y, v;
            c2 ? g2(c2) : (!function() {
              l3 && o(u2).call(u2, function(e3) {
                (e3 = s(d).call(d, e3)).valid ? m2.push(e3) : f3.push(e3);
              });
              n2.logger.info("friend::onFriends: parse friends", p(m2), "delete", p(f3)), u2.length ? (l3 = true, t2 = e2.content.timetag) : l3 = false;
            }(), r2.enable ? (y = a2, v = g2, e2.promise = new i(function(e3, o2) {
              function s2() {
                h(), e3(), y();
              }
              l3 ? r2.mergeFriends(m2, f3, t2).then(function() {
                s2();
              }).then(void 0, function(e4) {
                e4._msg = "merge friends error", o2(e4), v(e4);
              }) : (n2.logger.info("friend::onFriends: no merge friends"), s2());
            }).then(void 0, function(e3) {
              throw e3._msg = "merge friends data error", v(e3), e3;
            })) : (h(), a2()));
          }).catch(function(e3) {
            return n2.logger.error("friend::onFriends: ", e3), i.reject(e3);
          });
          function h() {
            var e3, r3;
            n2.timetags.friends = t2, m2.invalid = f3, n2.syncResult.friends = a(e3 = n2.syncResult.friends || []).call(e3, m2 || []), n2.syncResult.invalidFriends = a(r3 = n2.syncResult.invalidFriends || []).call(r3, f3 || []);
          }
          g.cmd = "friends", n2.syncPromiseArray.push(g);
        }, l2.onFriendRequest = function(e2, t2) {
          var n2 = i.resolve(), o2 = this.db, s2 = e2.type, a2 = r(e2, u);
          if ("addFriend" === (s2 = e2.type = d.getTypeFromByte(s2) || s2) || "passFriendApply" === s2) {
            var c2 = e2.friend = d.assembleFriend(a2);
            o2.enable && (n2 = o2.putFriend(c2));
          }
          return t2 && this.onSyncFriendAction(e2), n2;
        }, l2.onSyncFriendAction = function(e2) {
          this.logger.info("friend::onSyncFriendActionon: ".concat(e2.type, ", "), e2.account), this.options.onsyncfriendaction(e2);
        }, l2.onDeleteFriend = function(e2, t2) {
          var n2 = i.resolve(), r2 = this.db;
          return r2.enable && (n2 = r2.deleteFriend(e2.account)), t2 && (e2.type = "deleteFriend", this.onSyncFriendAction(e2)), n2;
        }, l2.onUpdateFriend = function(e2, t2) {
          var n2 = this.db, r2 = s(d).call(d, e2);
          n2.enable && n2.updateFriend(r2), t2 && this.onSyncFriendAction({ type: "updateFriend", friend: r2 });
        }, l2.onFriendUsers = function(e2) {
          var t2, n2, r2 = this.db, o2 = e2.content, u2 = c(t2 = o2.users).call(t2, function(e3) {
            return s(f2).call(f2, e3);
          });
          this.logger.info("friend::onFriendUsers: parse users", p(u2));
          var l3 = o2.timetag, m2 = i.resolve();
          r2.enable && (m2 = r2.mergeFriendUsers(u2, l3)), this.timetags.friendUsers = l3, m2.cmd = "friendUsers", this.syncPromiseArray.push(m2), this.syncResult.users = a(n2 = this.syncResult.users || []).call(n2, u2 || []), this.syncing || this.onSyncDone();
        }, l2.updateFriendSysMsg = function(e2) {
          var t2, n2, r2 = e2.obj, o2 = e2.error;
          if (e2.obj.idServer) {
            if (o2)
              t2 = "error", o2 = m.filterObj(o2, "code message");
            else {
              var s2 = r2.type;
              switch (s2 = d.getTypeFromByte(s2) || s2) {
                case "passFriendApply":
                  t2 = "passed";
                  break;
                case "rejectFriendApply":
                  t2 = "rejected";
              }
            }
            n2 = { idServer: r2.idServer, state: t2, from: r2.account, type: "applyFriend" }, o2 && (n2.error = o2), this.updateSysMsg(n2);
          }
        };
      }, function(e, t, n) {
        var r = n(32), o = n(16), s = n(35).fn, i = n(0);
        s.onRobots = function(e2) {
          var t2 = e2.content;
          if (i.isFunction(this.options.onrobots) && r(t2.robots)) {
            var n2, s2 = o(n2 = t2.robots).call(n2, function(e3) {
              return !!e3.botid;
            });
            s2.length > 0 && this.options.onrobots(s2 || []);
          }
        };
      }, function(e, t, n) {
        var r = n(57), o = n(58), s = n(10), i = n(2), a = n(24), c = n(121), u = n(3), l2 = n(9), m = n(6), p = n(16), d = n(4), f2 = n(35).fn, g = n(0), h = g.objs2accounts, y = g.teams2ids, v = n(194), b = n(152);
        f2.processTeam = function(e2) {
          var t2, n2, r2, o2 = e2.error;
          switch (void 0 === e2.obj && (e2.obj = {}), e2.cmd) {
            case "createTeam":
              t2 = e2.obj.team, o2 || (t2 = e2.content.team), t2 = s(v).call(v, t2), e2.obj.team = t2, r2 = b.assembleOwner(t2), e2.obj.owner = r2, o2 || (this.logger.info("team::processTeam: create team ", t2 && t2.teamId, r2 && r2.account), this.onCreateTeam(t2, r2));
              break;
            case "syncCreateTeam":
              t2 = s(v).call(v, e2.content.team), r2 = b.assembleOwner(t2), this.logger.info("team::processTeam: sync createTeam", t2 && t2.teamId, r2 && r2.account), this.options.onsynccreateteam(t2, r2), this.onCreateTeam(t2, r2);
              break;
            case "sendSuperTeamMsg":
            case "sendTeamMsg":
              this.onSendMsg(e2);
              break;
            case "teamMsg":
              this.onMsg(e2);
              break;
            case "teamMsgs":
              this.onMsgs(e2);
              break;
            case "addTeamMembers":
            case "removeTeamMembers":
            case "leaveTeam":
            case "dismissTeam":
            case "addTeamManagers":
            case "removeTeamManagers":
            case "transferTeam":
              break;
            case "updateInfoInTeam":
              o2 || (e2.promise = this.onUpdateInfoInTeam(e2));
              break;
            case "updateNickInTeam":
              e2.obj = s(b).call(b, e2.obj);
              break;
            case "updateTeam":
              e2.obj = s(v).call(v, e2.obj, true);
              break;
            case "applyTeam":
              e2.error || (e2.obj = s(v).call(v, e2.content.team));
              break;
            case "passTeamApply":
              this.updateTeamSysMsgState(e2, "passed");
              break;
            case "rejectTeamApply":
              this.updateTeamSysMsgState(e2, "rejected");
              break;
            case "acceptTeamInvite":
              this.updateTeamSysMsgState(e2, "passed"), e2.error || (e2.obj = s(v).call(v, e2.content.team));
              break;
            case "rejectTeamInvite":
              this.updateTeamSysMsgState(e2, "rejected");
              break;
            case "getTeam":
              e2.error || (e2.obj = s(v).call(v, e2.content.team));
              break;
            case "getTeams":
              this.onTeams(e2);
              break;
            case "getTeamMembers":
              this.onTeamMembers(e2);
              break;
            case "syncTeams":
              this.onTeams(e2);
              break;
            case "syncTeamMembers":
              this.onTeamMembers(e2);
              break;
            case "getTeamHistoryMsgs":
            case "searchTeamHistoryMsgs":
              this.onHistoryMsgs(e2);
              break;
            case "syncSendTeamMsg":
              this.onMsg(e2);
              break;
            case "notifyTeamMsgReads":
              this.onTeamMsgReceipt(e2);
              break;
            case "syncUpdateTeamMember":
              (n2 = s(b).call(b, e2.content.teamMember)).account === this.account && this.mergeMyTeamMembers(n2), this.onUpdateTeamMember(n2);
              break;
            case "updateMuteStateInTeam":
              break;
            case "getMyTeamMembers":
              e2.error || (e2.obj = b.reverseMembers(e2.content.teamMembers));
              break;
            case "getMutedTeamMembers":
              e2.error || (e2.obj = { teamId: e2.obj.teamId, members: b.reverseMembers(e2.content.teamMembers) });
              break;
            case "syncMyTeamMembers":
              this.onSyncMyTeamMembers(e2);
              break;
            case "sendTeamMsgReceipt":
              this.sendTeamMsgReceipt(e2);
              break;
            case "getTeamMsgReads":
              this.getTeamMsgReads(e2);
              break;
            case "getTeamMsgReadAccounts":
              this.getTeamMsgReadAccounts(e2);
              break;
            case "getTeamsById":
              this.getTeamsById(e2);
          }
        }, f2.onUpdateInfoInTeam = function() {
          var e2 = o(r.mark(function e3(t2) {
            var n2, o2, i2;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    if (n2 = this, !(t2.content && t2.content.teamMember && t2.content.teamMember.teamId)) {
                      e4.next = 11;
                      break;
                    }
                    if (o2 = s(b).call(b, t2.content.teamMember), !n2.db.enable) {
                      e4.next = 7;
                      break;
                    }
                    return e4.next = 6, n2.db.updateTeamMember(o2);
                  case 6:
                    o2 = e4.sent;
                  case 7:
                    return n2.mergeMyTeamMembers(o2), n2.onUpdateTeamMember(o2), t2.obj = o2, e4.abrupt("return");
                  case 11:
                    if ((i2 = t2.obj.teamMember ? t2.obj.teamMember : t2.obj).account = n2.account, i2.account) {
                      e4.next = 15;
                      break;
                    }
                    return e4.abrupt("return");
                  case 15:
                    i2.id = b.genId(i2.teamId, i2.account), i2 = s(b).call(b, i2), n2.mergeMyTeamMembers(i2), t2.obj = n2.myTeamMembersMap && n2.myTeamMembersMap[i2.teamId] || i2, n2.onUpdateTeamMember(i2);
                  case 20:
                  case "end":
                    return e4.stop();
                }
            }, e3, this);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), f2.getTeamMsgReads = function(e2) {
          var t2 = this;
          if (e2.error)
            this.logger.error("team::sendTeamMsgReceipt: ", e2.error);
          else {
            var n2 = g._get(e2, "content.teamMsgReceipts") || [];
            if (this.db.enable) {
              var r2 = [];
              i(n2).call(n2, function(e3) {
                e3.idClient && r2.push({ idClient: e3.idClient, unread: +e3.unread, read: +e3.read });
              }), r2.length > 0 && a(function() {
                return t2.db.updateMsgBatch(r2);
              }, 0);
            }
          }
        }, f2.getTeamMsgReadAccounts = function(e2) {
          if (e2.error)
            this.logger.error("team::getTeamMsgReadAccounts: ", e2.error);
          else {
            var t2 = g._get(e2, "content.readAccounts") || [], n2 = g._get(e2, "content.unreadAccounts") || [], r2 = g._get(e2, "content.teamMsgReceipt.idClient") || [];
            this.db.enable && this.db.putMsgReadDetail({ idClient: r2, readAccounts: t2, unreadAccounts: n2 });
          }
        }, f2.sendTeamMsgReceipt = function(e2) {
          var t2 = this;
          if (e2.error)
            this.logger.error("team::sendTeamMsgReceipt: ", e2.error);
          else {
            var n2 = g._get(e2, "obj.teamMsgReceipts") || [], r2 = g._get(e2, "content.teamMsgReceipts") || [];
            if (this.db.enable) {
              var o2 = [];
              i(n2).call(n2, function(e3) {
                c(r2).call(r2, function(t3) {
                  return e3.idServer === t3.idServer;
                }) || o2.push({ idClient: e3.idClient, hasRead: true });
              }), o2.length > 0 && (this.logger.log("sendTeamMsgReceipt::updateMsgBatch"), a(function() {
                return t2.db.updateMsgBatch(o2);
              }, 0));
            }
          }
        }, f2.onCreateTeam = function(e2, t2) {
          var n2 = this.db;
          n2.enable && (n2.putTeam(e2), n2.putTeamMembers(t2)), this.options.onCreateTeam(e2, t2);
        }, f2.onTeams = function(e2) {
          e2.content = e2.content || {};
          var t2, n2 = this, r2 = n2.db, o2 = n2.packetFromSync(e2), a2 = e2.content.teams || [], c2 = true, l3 = [], m2 = [];
          if (e2.error)
            switch (e2.error.code) {
              case 803:
                e2.error = null, c2 = false;
            }
          var p2 = new u(function(p3, f3) {
            var g2, h2;
            e2.error ? o2 && f3(e2.error) : (!function() {
              c2 && i(a2).call(a2, function(e3) {
                (e3 = s(v).call(v, e3)).validToCurrentUser ? l3.push(e3) : m2.push(e3);
              });
              a2.length ? (c2 = true, t2 = e2.content.timetag) : c2 = false;
            }(), r2.enable ? (g2 = p3, h2 = f3, e2.promise = new u(function(e3, s2) {
              function i2() {
                o2 ? (d2(), e3(), g2()) : r2.getTeams().then(function(t3) {
                  l3 = t3, d2(), e3(), g2();
                }).catch(function(e4) {
                  e4.message = "db.getTeams error", e4.callFunc = "team::afterMergeData", s2(e4), h2(e4);
                });
              }
              c2 ? r2.mergeTeams(l3, m2, t2).then(function() {
                i2();
              }).catch(function(e4) {
                var t3 = { callFunc: "team::onTeams:mergeData", message: "db.mergeTeams error", event: e4 };
                s2(t3), h2(t3);
              }) : (n2.logger.warn("team::onTeams:mergeData: no teams need merge"), i2());
            }).then(void 0, function(e3) {
              throw e3.message = "merge teams data error", e3.callFunc = "team::mergeData", h2(e3), e3;
            })) : (d2(), p3()));
          }).catch(function(e3) {
            return n2.logger.error("team::onTeams: ", e3), u.reject(e3);
          });
          function d2() {
            n2.timetags.teams = t2, l3.invalid = m2, o2 ? (n2.syncResult.teams = l3, n2.syncResult.invalidTeams = m2, n2.syncing || n2.onSyncDone()) : (n2.logger.info("team::onTeams: not in syncing, get teams", y(l3)), e2.obj = l3);
          }
          o2 && (p2.cmd = "teams", n2.syncPromiseArray.push(p2));
        }, f2.getTeamsById = function(e2) {
          var t2;
          if (e2.error) {
            if (816 !== e2.error.code)
              return;
            this.logger.error("team::getTeamsById: ", e2.error), e2.error = null;
          }
          e2.content.teams = l2(t2 = e2.content.teams).call(t2, function(e3) {
            return s(v).call(v, e3);
          }), e2.obj = e2.content;
        }, f2.onTeamMembers = function(e2) {
          e2.content = e2.content || {};
          var t2, n2 = this, r2 = n2.db, o2 = n2.packetFromSync(e2), a2 = e2.content.members || [], c2 = true, l3 = [], p2 = [];
          if (e2.obj && (t2 = e2.obj.teamId), t2 || (t2 = e2.content.teamId), t2 = "" + t2, e2.error)
            switch (e2.error.code) {
              case 406:
                e2.error = null, c2 = false;
            }
          var d2 = new u(function(u2, d3) {
            e2.error ? (n2.logger.error("team::onTeamMember: team error:", t2, e2.error), u2()) : (function() {
              c2 && i(a2).call(a2, function(e3) {
                (e3 = s(b).call(b, e3)).valid ? l3.push(e3) : p2.push(e3);
              });
              a2.length ? (c2 = true, e2.content.timetag) : c2 = false;
            }(), function(s2, i2) {
              if (o2) {
                n2.syncTeamMembersResult[t2] = l3, n2.syncTeamMembersResult[t2 + "-invalid"] = p2;
                var a3 = m(l3).call(l3, p2);
                r2.putTeamMembers(a3).catch(function(e3) {
                  throw n2.logger.error("team::onTeamMembers: putTeamMembers error: ", e3), e3;
                }).then(function() {
                  return r2.updateTeamMemberTimetag(t2, e2.content.timetag);
                }).catch(function(r3) {
                  n2.logger.error("team::onTeamMembers error: ", r3, t2, e2.content.timetag);
                }).then(s2);
              } else
                n2.logger.info("team::onTeamMembers: not syncing, get members", t2, h(l3)), e2.obj = { teamId: t2, members: l3 }, s2();
            }(u2));
          });
          o2 && (d2.cmd = t2, n2.syncTeamMembersPromiseArray.push(d2));
        }, f2.onUpdateTeamMember = function(e2) {
          if (e2.updateTime || (e2.updateTime = +/* @__PURE__ */ new Date()), this.account === e2.account) {
            var t2 = this.myTeamMembersMap[e2.teamId];
            this.logger.info("team::onMyTeamMembers: ", [t2]), e2 = t2 || e2, this.options.onMyTeamMembers(g.simpleClone([t2]));
          }
          this.logger.info("team::onUpdateTeamMember: ", e2 && e2.account), this.options.onupdateteammember(g.simpleClone(e2));
          var n2 = { teamId: e2.teamId, memberUpdateTime: e2.updateTime };
          this.onUpdateTeam(n2);
          var r2 = this.db;
          r2.enable && r2.updateTeamMember(e2);
        }, f2.onUpdateTeam = function(e2) {
          this.logger.info("team::onUpdateTeam:", e2 && e2.teamId), this.options.onUpdateTeam(g.simpleClone(e2));
          var t2 = this.db;
          t2.enable && t2.updateTeam(e2);
        }, f2.onSyncMyTeamMembers = function(e2) {
          var t2 = this, n2 = t2.db, r2 = b.reverseMembers(e2.content.teamMembers);
          if (n2.enable) {
            var o2 = n2.putTeamMembers(r2).then(function() {
              return n2.updateMyTeamMembersTimetag(e2.content.timetag);
            }).catch(function(e3) {
              return t2.logger.error("team::syncMyTeamMember: ", e3), u.reject(e3);
            });
            o2.cmd = "myTeamMembers", t2.syncTeamMembersPromiseArray.push(o2), t2.syncPromiseArray.push(o2);
          } else
            t2.syncResult.myTeamMembers = r2;
          t2.mergeMyTeamMembers(r2);
        }, f2.mergeMyTeamMembers = function(e2) {
          g.isArray(e2) || (e2 = [e2]);
          var t2 = this.myTeamMembersMap = this.myTeamMembersMap || {};
          i(e2).call(e2, function(e3) {
            var n2 = e3.teamId;
            t2[n2] = g.merge(t2[n2], e3);
          });
        }, f2.notifyForNewTeamMsg = function(e2) {
          g.isArray(e2) || (e2 = [e2]);
          var t2 = this, n2 = this.myTeamMembersMap || {}, r2 = {}, o2 = [];
          i(e2).call(e2, function(e3) {
            g.exist(n2[e3]) ? r2[e3] = n2[e3].muteNotiType : o2.push(e3);
          });
          var s2 = u.resolve({ map: r2 });
          return o2.length && (s2 = t2.api.getMyTeamMembers({ teamIds: o2, promise: true }).then(function(n3) {
            t2.mergeMyTeamMembers(n3), i(n3).call(n3, function(e3) {
              r2[e3.teamId] = e3.muteNotiType;
            });
            var o3 = p(e2).call(e2, function(e3) {
              return !r2[e3];
            });
            return u.resolve({ map: r2, miss: o3 });
          }).catch(function(e3) {
            return d(r2).length > 0 ? u.resolve({ map: r2, miss: o2, error: e3 }) : u.reject(e3);
          })), s2;
        }, f2.updateTeamSysMsgState = function(e2, t2) {
          var n2, r2 = e2.error;
          r2 && (t2 = "error", r2 = g.filterObj(r2, "code message")), n2 = { idServer: e2.obj.idServer, state: t2, from: e2.obj.from, type: e2.obj.type }, r2 && (n2.error = r2), this.updateSysMsg(n2);
        }, f2.onTeamMsgReceipt = function(e2) {
          var t2 = e2.content, n2 = e2.error;
          n2 && this.logger.error("team::onTeamMsgReceipt:", n2), t2 && t2.teamMsgReceipts && (this.options.onTeamMsgReceipt(t2), this.options.onMsgReceipts(t2.teamMsgReceipts));
        };
      }, function(e, t, n) {
        var r = n(57), o = n(58), s = n(10), i = n(3), a = n(2), c = n(6), u = n(35).fn, l2 = n(0), m = l2.teams2ids, p = n(308), d = n(203);
        u.processSuperTeam = function(e2) {
          var t2, n2, r2, o2 = e2.error;
          switch (void 0 === e2.obj && (e2.obj = {}), e2.cmd) {
            case "sendSuperTeamMsg":
              this.onSendMsg(e2);
              break;
            case "superTeamMsg":
              this.onMsg(e2);
              break;
            case "sendSuperTeamCustomSysMsg":
              this.onSendSysMsg(e2);
              break;
            case "superTeamCustomSysMsg":
              this.onSysMsg(e2);
              break;
            case "syncSuperTeams":
              this.onSuperTeams(e2);
              break;
            case "syncCreateSuperTeam":
              t2 = s(p).call(p, e2.content.team), r2 = d.assembleOwner(t2), this.logger.info("team::processTeam: sync createTeam", t2 && t2.teamId, r2 && r2.account), this.options.onSyncCreateSuperTeam(t2, r2), this.onCreateSuperTeam(t2, r2);
              break;
            case "getSuperTeamHistoryMsgs":
            case "searchSuperTeamHistoryMsgs":
              this.onHistoryMsgs(e2);
              break;
            case "syncSendSuperTeamMsg":
              this.onMsg(e2);
              break;
            case "addSuperTeamMembers":
            case "removeSuperTeamMembers":
            case "leaveSuperTeam":
            case "addSuperTeamManagers":
            case "removeSuperTeamManagers":
            case "transferSuperTeam":
              break;
            case "updateInfoInSuperTeam":
              o2 || (e2.promise = this.onUpdateInfoInSuperTeam(e2));
              break;
            case "updateNickInTeam":
              e2.obj = s(d).call(d, e2.obj);
              break;
            case "syncUpdateSuperTeamMember":
              (n2 = s(d).call(d, e2.content.teamMember)).account === this.account && this.mergeMySuperTeamMembers(n2), this.onUpdateSuperTeamMember(n2);
              break;
            case "updateSuperTeam":
              e2.obj = s(p).call(p, e2.obj, true);
              break;
            case "getSuperTeam":
              e2.error || (e2.obj = s(p).call(p, e2.content.team));
              break;
            case "getSuperTeams":
              this.onSuperTeams(e2);
              break;
            case "syncSuperTeamMembers":
              this.onSyncSuperTeamMembers(e2);
              break;
            case "syncMySuperTeamMembers":
              this.onSyncMySuperTeamMembers(e2);
              break;
            case "getSuperTeamMembers":
              e2.error || this.onGetAllSuperTeamMembers(e2);
              break;
            case "getSuperTeamMembersByJoinTime":
            case "getSuperTeamMembersByAccounts":
            case "getMutedSuperTeamMembers":
              e2.error || this.onSuperTeamMembers(e2);
              break;
            case "onDeleteSuperTeamMsg":
              this.onDeleteMsg(e2);
              break;
            case "onSuperTeamMsgDelete":
            case "syncDeleteSuperTeamMsg":
              this.onMsgDeleted(e2, true);
              break;
            case "onMarkSuperTeamSessionAck":
              this.onMarkSessionAck(e2);
              break;
            case "syncMarkSuperTeamSessionAck":
              this.syncMarkSessionAck(e2);
              break;
            case "passSuperTeamApply":
              this.updateSuperTeamSysMsgState(e2, "passed");
              break;
            case "rejectSuperTeamApply":
              this.updateTeamSysMsgState(e2, "rejected");
              break;
            case "acceptSuperTeamInvite":
              this.updateTeamSysMsgState(e2, "passed");
              break;
            case "rejectSuperTeamInvite":
              this.updateSuperTeamSysMsgState(e2, "rejected");
              break;
            case "getMySuperTeamMembers":
              e2.error || (e2.obj = d.reverseMembers(e2.content.members));
          }
        }, u.onUpdateInfoInSuperTeam = function() {
          var e2 = o(r.mark(function e3(t2) {
            var n2, o2, i2;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    if (n2 = this, !(t2.content && t2.content.superTeamMember && t2.content.superTeamMember.teamId)) {
                      e4.next = 11;
                      break;
                    }
                    if (o2 = s(d).call(d, t2.content.superTeamMember), !n2.db.enable) {
                      e4.next = 7;
                      break;
                    }
                    return e4.next = 6, n2.db.updateSuperTeamMember(o2);
                  case 6:
                    o2 = e4.sent;
                  case 7:
                    return n2.mergeMySuperTeamMembers(o2), n2.onUpdateSuperTeamMember(o2), t2.obj = o2, e4.abrupt("return");
                  case 11:
                    (i2 = t2.obj.superTeamMember ? t2.obj.superTeamMember : t2.obj).account = n2.account, i2.id = d.genId(i2.teamId, i2.account), i2 = s(d).call(d, i2), n2.mergeMySuperTeamMembers(i2), t2.obj = n2.mySuperTeamMembersMap && n2.mySuperTeamMembersMap[i2.teamId] || i2, n2.onUpdateSuperTeamMember(i2);
                  case 18:
                  case "end":
                    return e4.stop();
                }
            }, e3, this);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), u.onSuperTeams = function(e2) {
          e2.content = e2.content || {};
          var t2, n2 = this, r2 = n2.db, o2 = n2.packetFromSync(e2), c2 = e2.content.teams || [], u2 = true, l3 = [], d2 = [];
          if (e2.error)
            switch (e2.error.code) {
              case 803:
                e2.error = null, u2 = false;
            }
          var f2 = new i(function(m2, f3) {
            var h, y;
            e2.error ? o2 && f3(e2.error) : (!function() {
              u2 && a(c2).call(c2, function(e3) {
                (e3 = s(p).call(p, e3)).validToCurrentUser ? l3.push(e3) : d2.push(e3);
              });
              c2.length ? (u2 = true, t2 = e2.content.timetag) : u2 = false;
            }(), r2.enable ? (h = m2, y = f3, e2.promise = new i(function(e3, s2) {
              function i2() {
                o2 ? (g(), e3(), h()) : r2.getSuperTeams().then(function(t3) {
                  l3 = t3, g(), e3(), h();
                }).then(void 0, function(e4) {
                  e4.message = "db.getSuperTeams error", e4.callFunc = "superTeam::afterMergeData", s2(e4), y(e4);
                });
              }
              u2 ? r2.mergeSuperTeams(l3, d2, t2).then(function() {
                i2();
              }).then(void 0, function(e4) {
                var t3 = { callFunc: "superTeam::onSuperTeams:mergeData", message: "db.mergeSuperTeams error", event: e4 };
                s2(t3), y(t3);
              }) : (n2.logger.warn("superTeam::onSuperTeams:mergeData: no teams need merge"), i2());
            }).then(void 0, function(e3) {
              throw e3.message = "merge teams data error", e3.callFunc = "superTeam::mergeData", y(e3), e3;
            })) : (g(), m2()));
          }).catch(function(e3) {
            return n2.logger.error("superTeam::onSuperTeams: ", e3), i.reject(e3);
          });
          function g() {
            n2.timetags.superTeams = t2, l3.invalid = d2, o2 ? (n2.syncResult.superTeams = l3, n2.syncResult.invalidSuperTeams = d2) : (n2.logger.info("superTeam::onSuperTeams: not in syncing, get teams", m(l3)), e2.obj = l3);
          }
          o2 && (f2.cmd = "superteams", n2.syncPromiseArray.push(f2));
        }, u.onCreateSuperTeam = function(e2, t2) {
          var n2 = this.db;
          n2.enable && (n2.putSuperTeam(e2), n2.putSuperTeamMembers(t2));
        }, u.onGetAllSuperTeamMembers = function(e2) {
          var t2 = this, n2 = this.db, r2 = e2.raw.ser, o2 = this.superTeamMembersData[r2] || {}, s2 = o2.teamId || e2.obj && e2.obj.teamId;
          if (n2.enable) {
            var a2 = e2.content && e2.content.timetag, c2 = 200 === e2.raw.code ? i.all(o2.pArr) : i.resolve();
            e2.promise = c2.then(function() {
              return n2.getSuperTeamMembers(s2).then(function(t3) {
                a2 && n2.updateSuperTeamMemberTimetag(s2, a2), e2.obj = { members: t3, invalid: [], teamId: s2 };
              });
            }).catch(function(e3) {
              return t2.logger.error(e3);
            });
          } else
            e2.obj = { members: o2.members, invalid: o2.invalid, teamId: s2 };
          this.superTeamMembersData[r2] = void 0;
        }, u.onSyncSuperTeamMembers = function(e2) {
          var t2, n2 = this, r2 = this.db, o2 = [], u2 = [], l3 = e2.content.members || [], m2 = e2.raw.ser, p2 = n2.packetFromSync(e2);
          if (e2.obj && (t2 = e2.obj.teamId), t2 || (t2 = e2.content.teamId), a(l3).call(l3, function(e3) {
            (e3 = s(d).call(d, e3)).valid ? u2.push(e3) : o2.push(e3);
          }), p2) {
            var f2 = new i(function(s2, i2) {
              if (e2.error)
                n2.logger.error("team::onSuperTeamMember: team error:", t2, e2.error), s2();
              else {
                n2.syncSuperTeamMembersResult[t2] = u2, n2.syncSuperTeamMembersResult[t2 + "-invalid"] = o2;
                var a2 = c(u2).call(u2, o2);
                r2.putSuperTeamMembers(a2).catch(function(e3) {
                  throw n2.logger.error("team::onSuperTeamMembers: putSuperTeamMembers error: ", e3), e3;
                }).then(function() {
                  return r2.updateSuperTeamMemberTimetag(t2, e2.content.timetag);
                }).catch(function(r3) {
                  n2.logger.error("team::onSuperTeamMembers error: ", r3, t2, e2.content.timetag);
                }).then(s2);
              }
            });
            n2.syncSuperTeamMembersPromiseArray.push(f2);
          } else {
            if (r2.enable) {
              n2.superTeamMembersData[m2] = n2.superTeamMembersData[m2] || { teamId: t2, pArr: [] };
              var g = i.resolve();
              e2.content && e2.content.isAll && (g = r2.deleteSuperTeamMembers(t2));
              var h = g.then(function() {
                return r2.mergeSuperTeamMembers(t2, u2, o2);
              }).then(function() {
                return i.resolve();
              });
              n2.superTeamMembersData[m2].pArr.push(h);
            } else
              n2.superTeamMembersData[m2] = n2.superTeamMembersData[m2] || { teamId: t2, members: [], invalid: [] }, u2.length && (n2.superTeamMembersData[m2].members = n2.api.mergeTeamMembers(n2.superTeamMembersData[m2].members, u2)), o2.length && (n2.superTeamMembersData[m2].invalid = n2.api.mergeTeamMembers(n2.superTeamMembersData[m2].invalid, o2));
            e2.raw = void 0;
          }
        }, u.onSyncMySuperTeamMembers = function(e2) {
          var t2 = this, n2 = t2.db, r2 = d.reverseMembers(e2.content.teamMembers);
          if (n2.enable) {
            var o2 = n2.putSuperTeamMembers(r2).then(function() {
              return n2.updateMySuperTeamMembersTimetag(e2.content.timetag);
            }).catch(function(e3) {
              return t2.logger.error("superTeam::syncMySuperTeamMember: ", e3), i.reject(e3);
            });
            t2.syncPromiseArray.push(o2);
          } else
            t2.syncResult.mySuperTeamMembers = r2;
          t2.mergeMySuperTeamMembers(r2);
        }, u.onSuperTeamMembers = function(e2, t2) {
          var n2, r2 = this.db, o2 = [], i2 = [], c2 = e2.content.members || [];
          a(c2).call(c2, function(e3) {
            (e3 = s(d).call(d, e3)).valid ? i2.push(e3) : o2.push(e3);
          }), e2.obj && (n2 = e2.obj.teamId), n2 || (n2 = e2.content.teamId || i2[0] && i2[0].teamId), r2.enable && !t2 && r2.mergeSuperTeamMembers(n2, i2, o2), e2.obj = { members: i2, invalid: o2, teamId: n2 };
        }, u.onUpdateSuperTeamMember = function(e2) {
          if (e2.updateTime || (e2.updateTime = +/* @__PURE__ */ new Date()), this.account === e2.account) {
            var t2 = this.mySuperTeamMembersMap[e2.teamId];
            this.logger.info("superTeam::onMySuperTeamMembers: ", [t2]), e2 = t2 || e2, this.options.onMySuperTeamMembers(l2.simpleClone([t2]));
          }
          this.logger.info("superTeam::onUpdateSuperTeamMember: ", e2 && e2.account), this.options.onUpdateSuperTeamMember(l2.simpleClone(e2));
          var n2 = { teamId: e2.teamId, memberUpdateTime: e2.updateTime };
          this.onUpdateSuperTeam(n2);
          var r2 = this.db;
          r2.enable && r2.updateSuperTeamMember(e2);
        }, u.onUpdateSuperTeam = function(e2) {
          this.logger.info("superteam::onUpdateSuperTeam:", e2 && e2.teamId), this.options.onUpdateSuperTeam(l2.simpleClone(e2));
          var t2 = this.db;
          t2.enable && t2.updateSuperTeam(e2);
        }, u.mergeMySuperTeamMembers = function(e2) {
          l2.isArray(e2) || (e2 = [e2]);
          var t2 = this.mySuperTeamMembersMap = this.mySuperTeamMembersMap || {};
          a(e2).call(e2, function(e3) {
            var n2 = e3.teamId;
            t2[n2] = l2.merge(t2[n2], e3);
          });
        }, u.updateSuperTeamSysMsgState = function(e2, t2) {
          var n2, r2 = e2.error;
          r2 && (t2 = "error", r2 = l2.filterObj(r2, "code message")), n2 = { idServer: e2.obj.idServer, state: t2, from: e2.obj.from, type: e2.obj.type }, r2 && (n2.error = r2), this.updateSysMsg(n2);
        };
      }, function(e, t, n) {
        var r = n(10), o = n(3), s = n(24), i = n(35).fn, a = n(0), c = n(310);
        i.processNotify = function(e2) {
          switch (e2.cmd) {
            case "syncOfflineNetcallMsgs":
            case "syncOfflineMsgs":
              this.onOfflineMsgs(e2);
              break;
            case "batchMarkRead":
              break;
            case "syncOfflineSysMsgs":
            case "syncOfflineSuperTeamSysMsgs":
              this.onOfflineSysMsgs(e2);
              break;
            case "syncRoamingMsgs":
            case "syncSuperTeamRoamingMsgs":
              this.onRoamingMsgs(e2);
              break;
            case "syncOfflineFilterMsgs":
              this.onOfflineMsgs(e2, true);
              break;
            case "syncOfflineFilterSysMsgs":
              this.onOfflineSysMsgs(e2, true);
              break;
            case "syncMsgReceipts":
              this.onOfflineMsgReceipts(e2);
              break;
            case "syncDonnop":
              this.onDonnop(e2, true);
              break;
            case "syncSessionAck":
              this.syncSessionAck(e2);
              break;
            case "syncSuperTeamSessionAck":
              this.syncSuperTeamSessionAck(e2);
              break;
            case "syncRobots":
              this.onRobots(e2);
              break;
            case "syncBroadcastMsgs":
              this.onBroadcastMsgs(e2);
              break;
            case "syncDeleteSuperTeamMsgOfflineRoaming":
              this.onDeleteMsgOfflineRoaming(e2);
              break;
            case "syncDeleteMsgSelf":
              this.syncDeleteMsgSelf(e2);
              break;
            case "syncSessionsWithMoreRoaming":
              this.syncSessionsWithMoreRoaming(e2);
              break;
            case "syncStickTopSessions":
              this.syncStickTopSessions(e2);
              break;
            case "syncSessionHistoryMsgsDelete":
              this.syncSessionHistoryMsgsDelete(e2);
          }
        }, i.onDonnop = function(e2, t2) {
          if (!e2.error) {
            var n2 = this, s2 = n2.db, i2 = r(c).call(c, e2.content.donnop);
            n2.mergeDonnop(i2);
            var a2 = n2.dbDonnop();
            if (t2) {
              var u = e2.content.timetag;
              n2.timetags.donnop = u, s2.enable && (a2 = a2.then(function() {
                return n2.db.updateDonnopTimetag(u);
              }).catch(function(e3) {
                return n2.logger.error("notify::onDonnop: ", e3), o.reject(e3);
              })), a2.cmd = "donnop", n2.syncPromiseArray.push(a2);
            } else
              n2.onPushNotificationMultiportConfigUpdate();
          }
        }, i.onUpdateDonnop = function(e2) {
          if (!e2.error) {
            var t2 = e2.obj;
            t2 && (this.mergeDonnop(a.filterObj(t2, ["shouldPushNotificationWhenPCOnline"])), this.dbDonnop(), this.onPushNotificationMultiportConfigUpdate());
          }
        }, i.getPushNotificationMultiportConfig = function() {
          return a.merge({}, this.pushNotificationMultiportConfig);
        }, i.mergeDonnop = function(e2) {
          this.pushNotificationMultiportConfig = a.merge({}, this.pushNotificationMultiportConfig, e2);
        }, i.dbDonnop = function() {
          return this.db.enable ? this.db.setDonnop(this.pushNotificationMultiportConfig) : o.resolve();
        }, i.onPushNotificationMultiportConfigUpdate = function() {
          var e2 = this;
          s(function() {
            var t2 = e2.getPushNotificationMultiportConfig();
            e2.logger.info("link::onPushNotificationMultiportConfigUpdate:", t2), e2.options.onPushNotificationMultiportConfigUpdate(t2);
          });
        };
      }, function(e, t, n) {
        var r = n(51), o = n(2), s = n(16), i = n(9), a = n(3), c = n(4), u = n(7), l2 = n(8), m = n(10), p = n(122), d = n(6), f2 = n(24), g = n(26), h = n(48), y = n(37), v = n(158), b = n(52), T = n(53), S = n(54), M = n(55), k = n(43), x = n(15), C = n(88), I = n(89), w = n(72), _ = n(32);
        function P(e2, t2) {
          var n2 = void 0 !== I && w(e2) || e2["@@iterator"];
          if (!n2) {
            if (_(e2) || (n2 = function(e3, t3) {
              var n3;
              if (!e3)
                return;
              if ("string" == typeof e3)
                return A(e3, t3);
              var r3 = x(n3 = Object.prototype.toString.call(e3)).call(n3, 8, -1);
              "Object" === r3 && e3.constructor && (r3 = e3.constructor.name);
              if ("Map" === r3 || "Set" === r3)
                return C(e3);
              if ("Arguments" === r3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r3))
                return A(e3, t3);
            }(e2)) || t2 && e2 && "number" == typeof e2.length) {
              n2 && (e2 = n2);
              var r2 = 0, o2 = function() {
              };
              return { s: o2, n: function() {
                return r2 >= e2.length ? { done: true } : { done: false, value: e2[r2++] };
              }, e: function(e3) {
                throw e3;
              }, f: o2 };
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          }
          var s2, i2 = true, a2 = false;
          return { s: function() {
            n2 = n2.call(e2);
          }, n: function() {
            var e3 = n2.next();
            return i2 = e3.done, e3;
          }, e: function(e3) {
            a2 = true, s2 = e3;
          }, f: function() {
            try {
              i2 || null == n2.return || n2.return();
            } finally {
              if (a2)
                throw s2;
            }
          } };
        }
        function A(e2, t2) {
          (null == t2 || t2 > e2.length) && (t2 = e2.length);
          for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
            r2[n2] = e2[n2];
          return r2;
        }
        function N(e2, t2) {
          var n2 = c(e2);
          if (b) {
            var r2 = b(e2);
            t2 && (r2 = s(r2).call(r2, function(t3) {
              return T(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        var O = n(35).fn, E = n(0), R = E.undef, j2 = n(45), F = n(152), D = n(203), U = n(154), L = n(291), B = n(11), q = n(64), H = n(76);
        function z(e2, t2, n2) {
          var r2 = this, o2 = r2.message.Message, s2 = n2 ? "offlineFilterMsgs" : "offlineMsgs";
          if (!(t2 && t2.length > 0))
            return a.resolve();
          var i2 = o2.getMaxTimetag(t2), c2 = t2[0].scene, u2 = t2[0].target;
          r2.markMsgRead(t2), t2 = o2.deduplication(t2), t2 = o2.sortMsgs(t2);
          var l3 = r2.genSessionByMsgs(t2);
          r2.cacheSyncedSession(l3);
          var m2 = r2.putMsg(t2, "offlineMsgs").then(function(t3) {
            var n3 = t3;
            (n3 = r2.filterIgnore(n3)).length && (r2.logger.info("msg::onOfflineMsgs： toreLastSession", s2, e2, n3.length), r2.syncResult[s2] = r2.syncResult[s2] || [], r2.syncResult[s2].push({ sessionId: e2, scene: c2, to: u2, msgs: n3, timetag: i2 }));
          }).catch(function(e3) {
            return r2.logger.error("msg::onOfflineMsgs: ", e3), a.reject(e3);
          });
          return m2.cmd = "offlineMsgs-" + e2, m2;
        }
        O.processMsg = function(e2) {
          switch (e2.cmd) {
            case "sendMsg":
              this.onSendMsg(e2);
              break;
            case "msg":
              this.onMsg(e2);
              break;
            case "sysMsg":
              this.onSysMsg(e2);
              break;
            case "broadcastMsg":
              this.onBroadcastMsg(e2);
              break;
            case "sendCustomSysMsg":
              this.onSendSysMsg(e2);
              break;
            case "getHistoryMsgs":
            case "searchHistoryMsgs":
              this.onHistoryMsgs(e2);
              break;
            case "msgFtsInServer":
            case "msgFtsInServerByTiming":
              this.onmsgFtsInServer(e2);
              break;
            case "syncSendMsg":
              this.onMsg(e2);
              break;
            case "deleteSessions":
              this.onDeleteSessions(e2);
              break;
            case "sendMsgReceipt":
              this.onSendMsgReceipt(e2);
              break;
            case "msgReceipt":
              this.onMsgReceipt(e2);
              break;
            case "onDeleteMsg":
              this.onDeleteMsg(e2);
              break;
            case "onMsgDeleted":
              this.onMsgDeleted(e2);
              break;
            case "onDeleteMsgOfflineRoaming":
              this.onDeleteMsgOfflineRoaming(e2);
              break;
            case "onMarkSessionAck":
              this.onMarkSessionAck(e2);
              break;
            case "syncMarkSessionAck":
              this.syncMarkSessionAck(e2);
              break;
            case "syncUpdateServerSession":
              this.onSyncUpdateServerSession(e2);
              break;
            case "deleteMsgSelf":
              this.deleteMsgSelf(e2);
              break;
            case "deleteMsgSelfBatch":
              this.deleteMsgSelfBatch(e2);
              break;
            case "onDeleteMsgSelf":
              this.onDeleteMsgSelf(e2);
              break;
            case "onDeleteMsgSelfBatch":
              this.onDeleteMsgSelfBatch(e2);
              break;
            case "clearServerHistoryMsgs":
              this.clearServerHistoryMsgs(e2);
              break;
            case "onClearServerHistoryMsgs":
              this.onClearServerHistoryMsgs(e2);
          }
        }, O.checkIgnore = function(e2) {
          var t2 = this;
          o(e2).call(e2, function(e3) {
            if (!e3.ignore) {
              try {
                t2.options.shouldIgnoreMsg(e3) && (e3.ignore = true);
              } catch (e4) {
                throw t2.logger.error("userOption:shouldIgnoreMsg function error", e4), e4;
              }
              var n2;
              try {
                n2 = t2.options.shouldIgnoreNotification(e3);
              } catch (e4) {
                throw t2.logger.error("userOption:shouldIgnoreNotification function error", e4), e4;
              }
              "notification" === e3.type && n2 && (e3.ignore = true);
            }
          });
        }, O.filterIgnore = function(e2) {
          return s(e2).call(e2, function(e3) {
            return !e3.ignore;
          });
        }, O.genSessionByMsgs = function(e2) {
          return this.checkIgnore(e2), U.genSessionByMsgs(this.message.Message, e2);
        }, O.onRoamingMsgs = function(e2) {
          var t2 = this, n2 = t2.message, r2 = n2.Message, o2 = r2.getMaxTimetag, s2 = n2.reverseMsgs(e2.content.msgs), c2 = o2(s2);
          s2 = r2.deduplication(s2);
          var u2 = (s2 = r2.sortMsgs(s2))[0], l3 = u2.sessionId, m2 = t2.genSessionByMsgs(s2);
          t2.cacheSyncedSession(m2);
          var p2 = t2.putMsg(s2, "roamingMsgs").then(function(e3) {
            var n3, r3 = (s2 = e3).length, o3 = (s2 = t2.filterIgnore(s2)).length;
            r3 !== o3 && t2.logger.info("msg::onRoamingMsgs msg length before filter: " + r3 + " after filter: " + o3), s2.length && (t2.logger.info("msg::onRoamingMsgs: putRoamingMsgs", l3, s2.length, i(n3 = s2 || []).call(n3, function(e4) {
              return "idServer: " + e4.idServer + " idClient: " + e4.idClient + " time:" + e4.time + " type: " + e4.type;
            }).join("\n")), t2.syncResult.roamingMsgs = t2.syncResult.roamingMsgs || [], t2.syncResult.roamingMsgs.push({ sessionId: l3, scene: u2.scene, to: u2.target, msgs: s2, timetag: c2 }), t2.syncing || t2.roamingMsgSyncDoneBufferManager.add());
          }).catch(function(e3) {
            return t2.logger.error("msg::onRoamingMsgs: ", e3), a.reject(e3);
          });
          p2.cmd = "roamingMsgs-" + l3, t2.syncPromiseArray.push(p2);
        }, O.onOfflineMsgs = function(e2, t2) {
          var n2, r2 = this, s2 = this.message, a2 = null;
          t2 && (a2 = { filter: true });
          var u2 = s2.reverseMsgs(e2.content.msgs, { modifyObj: a2 });
          u2 = H.deduplication(u2);
          var l3 = {};
          o(u2).call(u2, function(e3) {
            l3[e3.sessionId] = l3[e3.sessionId] || [], l3[e3.sessionId].push(e3);
          });
          var m2 = i(n2 = c(l3)).call(n2, function(e3) {
            return { sessionId: e3, msgs: l3[e3] };
          }), p2 = E.asyncPool(50, m2, function(e3) {
            return z.call(r2, e3.sessionId, e3.msgs, t2);
          });
          this.syncPromiseArray.push(p2);
        }, O.completeMsg = function(e2) {
          return e2.from = this.account, e2.fromNick = this.myInfo && this.myInfo.nick, e2.fromClientType = "Web", e2.fromDeviceId = j2.deviceId, e2.time || (e2.time = +/* @__PURE__ */ new Date()), e2;
        }, O.amendMsg = function(e2) {
          if ("team" === e2.scene) {
            var t2 = E.get(this.myTeamMembersMap, e2.to + ".nickInTeam");
            t2 && (e2.fromNick = t2);
          } else if ("superTeam" === e2.scene) {
            var n2 = E.get(this.mySuperTeamMembersMap, e2.to + ".nickInTeam");
            n2 && (e2.fromNick = n2);
          }
          return e2;
        }, O.onMsgs = function(e2) {
          var t2 = this, n2 = t2.reporterHook.getSafeClock(), s2 = t2.message.reverseMsgs(e2.content.msgs, { mapper: function(s3) {
            var i2 = function(e3) {
              for (var t3 = 1; t3 < arguments.length; t3++) {
                var n3, s4, i3 = null != arguments[t3] ? arguments[t3] : {};
                t3 % 2 ? o(n3 = N(Object(i3), true)).call(n3, function(t4) {
                  r(e3, t4, i3[t4]);
                }) : S ? M(e3, S(i3)) : o(s4 = N(Object(i3))).call(s4, function(t4) {
                  k(e3, t4, T(i3, t4));
                });
              }
              return e3;
            }({}, s3);
            if (i2.__receiveTime = e2.__receiveTime, i2.__handleTime = n2, i2.__clientExt)
              try {
                i2.__clientExt = JSON.parse(i2.__clientExt);
              } catch (e3) {
                t2.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat(i2.__clientExt));
              }
            return t2.handleMsg(i2), i2;
          } });
          t2.pushMsgDelay(s2);
        }, O.onMsg = function(e2, t2) {
          var n2;
          if (e2.content.msg.attach) {
            var r2 = null;
            try {
              r2 = JSON.parse(e2.content.msg.attach);
            } catch (e3) {
            }
            if (r2 && r2.url && E.get(this.mixStorePolicy, "s3Policy.dlcdns")) {
              var o2, s2 = P(this.mixStorePolicy.s3Policy.dlcdns);
              try {
                for (s2.s(); !(o2 = s2.n()).done; ) {
                  var i2, a2 = o2.value;
                  u(i2 = r2.url).call(i2, a2) >= 0 && (r2.isS3 = true, a2 !== this.mixStorePolicy.s3Policy.dlcdn && (r2.url = r2.url.replace(a2, this.mixStorePolicy.s3Policy.dlcdn)));
                }
              } catch (e3) {
                s2.e(e3);
              } finally {
                s2.f();
              }
            }
            e2.content.msg.attach = l2(r2);
          }
          var c2 = m(n2 = this.message).call(n2, e2.content.msg);
          if (c2.__receiveTime = e2.__receiveTime, c2.__handleTime = this.reporterHook.getSafeClock(), E.get(e2, "content.msg.__clientExt"))
            try {
              c2.__clientExt = JSON.parse(e2.content.msg.__clientExt);
            } catch (t3) {
              this.logger.warn("IMProtocolFn:onMsg __clientExt parse failed ".concat(e2.content.msg.__clientExt));
            }
          t2 && (c2.filter = true), "syncSendMsg" !== e2.cmd || c2.from !== c2.to ? (this.pushMsgDelay([c2]), this.syncing ? (this.logger.info("msg::onMsg:is in syncing ..."), this.unhandledMsgs.push({ type: "onMsg", msg: c2 })) : this.handleMsg(c2)) : this.logger.warn("onMsg::syncSendMsg to self, so ignore", c2.idClient, c2.idServer);
        }, O.onBroadcastMsgs = function(e2) {
          var t2 = e2.content.broadcastMsgs;
          t2 = p(t2).call(t2, function(e3, t3) {
            return e3.broadcastId - t3.broadcastId;
          }), this.putBroadcastMsgs(t2);
        }, O.onBroadcastMsg = function(e2) {
          var t2 = e2.content.broadcastMsg;
          t2.time = t2.timestamp, this.syncing ? this.unhandledMsgs.push({ type: "onBroadcastMsg", msg: t2 }) : t2 && this.putBroadcastMsg(t2);
        }, O.pushMsgTask = function(e2) {
          this.msgPromise = this.msgPromise.then(function() {
            return e2();
          });
        }, O.pushMsgDelay = function(e2) {
          if (e2 && e2.length > 0) {
            var t2 = this;
            if (t2.msgStatEnable && !B.isWeixinApp) {
              var n2, r2 = i(e2).call(e2, function(e3) {
                return { appkey: t2.options.appKey, accid: e3.to, fromAccid: e3.from, msgId: e3.idServer, serverTime: e3.time, receiveTime: t2.reporterHook.getNTPTime(), sessionId: t2.sdkSession, platform: "web", sdk_ver: B.info.version, manufactor: q.name + " " + q.version };
              });
              t2.msgDelayArr = d(n2 = t2.msgDelayArr).call(n2, r2), t2.msgDelayArr.length > 5 && t2.doReportMsgDelay();
            }
          }
        }, O.doReportMsgDelay = function() {
          var e2, t2 = l2(this.msgDelayArr);
          (this.msgDelayArr && this.msgDelayArr.length > 0 && (L.sendBeacon("https://statistic.live.126.net/statics/report/im/sdk/msgreceived", t2), this.msgDelayArr = []), this.msgDelayTimer && clearTimeout(this.msgDelayTimer), this.socket) && (this.msgDelayTimer = f2(g(e2 = this.doReportMsgDelay).call(e2, this), 1e4));
        }, O.handleMsg = function(e2) {
          var t2, n2 = this, r2 = n2.db, o2 = e2.time;
          n2.markMsgRead(e2), n2.logger.info(d(t2 = "msg::handleMsg:msgPromise start ".concat(e2.idServer, " ")).call(t2, e2.idClient)), n2.msgPromise = n2.msgPromise.then(function() {
            var t3;
            return n2.logger.info(d(t3 = "msg::handleMsg:msgPromise, putMsg start ".concat(e2.idServer, " ")).call(t3, e2.idClient)), n2.putMsg(e2, "onMsg");
          }).then(function() {
            var t3;
            return n2.logger.info(d(t3 = "msg::handleMsg:msgPromise, putMsg done and update timetag ".concat(e2.idServer, " ")).call(t3, e2.idClient)), r2.enable ? "superTeam" === e2.scene ? r2.updateSuperTeamRoamingMsgTimetag(o2) : r2.updateRoamingMsgTimetag(o2) : (n2.timetags["superTeam" === e2.scene ? "superTeamRoamingMsgs" : "roamingMsgs"] = o2, a.resolve());
          }).then(function() {
            if (e2)
              return n2.checkUserUpdate(e2);
          }).then(function() {
            if (e2) {
              var t3 = e2.type;
              switch (n2.logger.info("msg::handleMsg:msgPromise, checkUserUpdate " + e2.scene + " " + t3 + " msg" + ("notification" === t3 ? " " + e2.attach.type : "")), t3) {
                case "notification":
                  return n2.onTeamNotificationMsg(e2);
              }
            }
          }).then(function() {
            var t3, r3;
            n2.logger.info(d(t3 = d(r3 = "msg::handleMsg:msgPromise, onmsg ready: ".concat(e2.idServer, " ")).call(r3, e2.idClient, ", ")).call(t3, !!e2.ignore)), e2 && !e2.ignore && f2(function() {
              var t4, r4 = "p2p" === e2.scene;
              if (B.isBrowser && "out" !== e2.flow) {
                var o3 = { msgId: e2.idServer, clientId: e2.idClient, receiveTime: n2.reporterHook.getNTPTime(e2.__receiveTime), serverTime: e2.time, callbackTime: n2.reporterHook.getNTPTime(), preHandleTime: n2.reporterHook.getNTPTime(e2.__handleTime), fromAccid: e2.from, toAccid: n2.options.account, type: n2.message.sceneMap[e2.scene], tid: r4 ? "" : e2.to, result: 200, failReason: "", rt: h(n2.reporterHook.getSafeClock() - e2.__receiveTime) }, s2 = E.get(e2, "__clientExt.statistics.apiCallingTime"), i2 = E.get(e2, "__clientExt.statistics.sendTime");
                s2 && i2 && (o3.apiCallingTime = s2, o3.sendTime = i2, o3.attachUploadDuration = E.get(e2, "__clientExt.statistics.attachUploadDuration") || 0), n2.reporter && n2.reporter.report("msgReceive", o3);
              }
              delete e2.__receiveTime, delete e2.__handleTime, delete e2.__clientExt, n2.logger.info(d(t4 = "msg::handleMsg:msgPromise, tigger onmsg: ".concat(e2.idServer, " ")).call(t4, e2.idClient)), n2.options.onmsg(E.copy(e2));
            }, 0);
          }).catch(function(t3) {
            var r3;
            n2.logger.error(d(r3 = "msg::handleMsg:msgPromise, catch err ".concat(e2.idServer, " ")).call(r3, e2.idClient), t3), t3.callFunc = "msg::handleMsg", n2.onCustomError("消息处理错误", t3);
          });
        }, O.putMsg = function(e2, t2) {
          if (E.isArray(e2) || (e2 = [e2]), s(e2[0]))
            return a.resolve(e2);
          var n2, r2 = this, c2 = r2.db, u2 = c2.enable, l3 = a.resolve(), m2 = r2.message.Message.getLastMsg(e2), p2 = m2.flow, f3 = r2.genSessionByMsgs(e2);
          h2(f3);
          var g2 = [];
          function h2(e3) {
            "roamingMsgs" !== t2 && "offlineMsgs" !== t2 || r2.cacheSyncedSession(e3);
          }
          return l3 = (l3 = (l3 = l3.then(function() {
            var n3;
            u2 || r2.options.autoMarkRead || "roamingMsgs" === t2 || !f3 || (r2.sessionUnreadMsgs = r2.sessionUnreadMsgs || {}, r2.sessionUnreadMsgs[f3.id] = r2.sessionUnreadMsgs[f3.id] || [], r2.sessionUnreadMsgs[f3.id] = d(n3 = r2.sessionUnreadMsgs[f3.id]).call(n3, s(e2).call(e2, function(e3) {
              try {
                return r2.options.shouldCountNotifyUnread(e3);
              } catch (e4) {
                throw r2.logger.error("userOption:shouldCountNotifyUnread function error", e4), e4;
              }
            })));
            return "offlineMsgs" === t2 || "roamingMsgs" === t2 ? a.reject(e2) : u2 ? c2.putMsg(e2) : e2;
          }).then(function(t3) {
            return o(e2).call(e2, function(e3) {
              r2.checkMsgUnique(e3) && r2.logger.warn("msg::putMsg: msg is not unique", e3.idClient, e3.idServer, e3.time);
            }), g2 = u2 ? t3 : e2, a.resolve(e2);
          })).then(function(e3) {
            return e3.length && u2 && f3 ? new a(function(t3) {
              c2.getSessions({ sessionId: f3.id }).then(function(n3) {
                if (n3 && n3.lastMsg) {
                  var r3 = n3.lastMsg;
                  f3.lastMsg && f3.lastMsg.time < r3.time && (f3.lastMsg = r3);
                }
                g2 && g2.length ? f3 ? c2.putSession(f3).then(function(e4) {
                  t3(e4);
                }) : t3(n3) : (g2 = e3, t3(n3));
              });
            }) : a.resolve(f3);
          })).then(function(e3) {
            if (f3 && g2.length) {
              n2 = m2.sessionId !== r2.currSessionId;
              var s2 = "roamingMsgs" === t2, a2 = r2.options.syncSessionUnread, l4 = f3.id, d2 = r2.getSessionInCache(l4, true) || {}, y2 = d2.ack || 0;
              if ("offlineMsgs" === t2 || s2 && a2 || "onMsg" === t2 && "in" === p2 && n2) {
                var v2;
                if (u2 && e3) {
                  var b2 = d2.unread || 0;
                  (f3 = e3).unread = b2, y2 = y2 || f3.ack || 0;
                } else
                  (e3 = d2) && (f3.unread = e3.unread || 0);
                h2(f3), f3.unread = f3.unread || 0;
                var T2 = 0;
                o(g2).call(g2, function(e4) {
                  var t3;
                  try {
                    t3 = r2.options.shouldCountNotifyUnread(e4);
                  } catch (e5) {
                    throw r2.logger.error("userOption:shouldCountNotifyUnread function error", e5), e5;
                  }
                  var n3 = ("notification" !== e4.type || "notification" === e4.type && t3) && (R(e4.isUnreadable) || e4.isUnreadable);
                  if (n3 && a2 && (n3 = e4.time > y2 && "out" !== e4.flow), n3 && (T2++, a2 && !u2)) {
                    var o2 = d2.unreadMsgs || [];
                    o2.push(e4), f3.unreadMsgs = o2;
                  }
                }), f3.unread += T2;
                var S2 = E.secureOutput("session", f3);
                if (S2.unreadMsgs && (S2.unreadMsgs = i(v2 = S2.unreadMsgs).call(v2, function(e4) {
                  return e4 && e4.idServer;
                })), r2.logger.info("msg::putMsg:updateSession: ", S2), h2(f3), u2)
                  return c2.updateSession({ id: f3.id, unread: f3.unread });
              }
            }
          }), "onMsg" === t2 && (l3 = l3.then(function() {
            e2.length && f3 && (r2.onUpdateSession(f3), r2.options.syncSessionUnread && !n2 && r2.api.resetSessionUnread(r2.currSessionId));
          })), l3.then(function() {
            return a.resolve(e2);
          }).catch(function(e3) {
            return e3 && e3.length ? a.resolve(e3) : a.reject(e3);
          });
        }, O.putBroadcastMsgs = function(e2) {
          var t2 = this, n2 = t2.db, r2 = e2.length;
          if (r2 > 0) {
            if (t2.doMarkBroadcastMsgsRead(e2), n2.enable) {
              var o2 = e2[r2 - 1].broadcastId;
              return n2.updateBroadcastMsgTimetag(o2), n2.putBroadcastMsg(e2).then(function() {
                return f2(function() {
                  t2.doMarkMsgsRead(), t2.options.onbroadcastmsgs(E.copy(e2));
                }, 0), a.resolve(e2);
              });
            }
            f2(function() {
              t2.options.onbroadcastmsgs(E.copy(e2));
            }, 0);
          }
          return e2;
        }, O.putBroadcastMsg = function(e2) {
          var t2 = this, n2 = t2.db;
          return t2.doMarkBroadcastMsgsRead([e2]), n2.enable ? (e2.broadcastId && n2.updateBroadcastMsgTimetag(e2.broadcastId), n2.putBroadcastMsg(e2).then(function() {
            return f2(function() {
              t2.options.onbroadcastmsg(E.copy(e2));
            }, 0), a.resolve(e2);
          })) : (f2(function() {
            t2.options.onbroadcastmsg(E.copy(e2));
          }, 0), e2);
        }, O.doMarkBroadcastMsgsRead = function(e2) {
          e2 = i(e2).call(e2, function(e3) {
            return e3.broadcastId;
          }), this.sendCmd("batchMarkRead", { sid: 7, cid: 17, ids: e2 });
        }, O.cacheSyncedSession = function(e2) {
          if (e2 && this.syncResult) {
            e2 = y({}, e2), this.syncResult.sessions = this.syncResult.sessions || {};
            var t2 = e2.id, n2 = this.syncResult.sessions[t2] || {};
            n2 && n2.ack > e2.ack && delete e2.ack, n2 && n2.msgReceiptTime > e2.msgReceiptTime && delete e2.msgReceiptTime;
            var r2 = E.get(n2, "lastMsg.time"), o2 = E.get(e2, "lastMsg.time");
            r2 && o2 && r2 > o2 && (e2.lastMsg = n2.lastMsg), this.syncResult.sessions[t2] = y(n2, e2), this.syncResult.sessions[t2] = y({}, this.mergeSession(this.syncResult.sessions[t2]));
          }
        }, O.checkMsgUnique = E.genCheckUniqueFunc("idClient"), O.revokeMsgUniqueCheck = function(e2) {
          this.uniqueSet && this.uniqueSet.idClient && (this.uniqueSet.idClient[e2] = false);
        }, O.storeSendMsg = function(e2) {
          if (!this.syncing) {
            var t2 = this.putMsg(e2, "sendMsg");
            return this.msgPromise = this.msgPromise.then(function() {
              return t2;
            }), t2;
          }
          this.unhandledMsgs.push({ type: "sendMsg", msg: e2 });
        }, O.updateSendMsgError = function(e2) {
          if (!this.syncing) {
            var t2 = this.updateMsg(e2);
            return this.msgPromise = this.msgPromise.then(function() {
              return t2;
            }), t2;
          }
          this.unupdatedMsgs.push(e2);
        }, O.onSendMsg = function(e2, t2) {
          var n2, r2, o2 = this, s2 = e2.content && e2.content.msg, i2 = e2.obj && e2.obj.msg || s2;
          if (i2)
            if (this.logger.warn(d(n2 = d(r2 = "sendMsg::end: ".concat(s2 && s2.idServer, " ")).call(r2, i2.idClient, " ")).call(n2, e2 && e2.raw && e2.raw.ser)), e2.obj)
              u2();
            else {
              var c2 = o2.db;
              c2 && c2.enable && c2.getMsgByIdClient(i2.idClient).then(function(e3) {
                e3 && (i2 = e3, u2(false));
              }).catch(function() {
                return u2();
              });
            }
          else
            this.logger.error("sendMsg::error::get msg failed, msg empty");
          function u2() {
            var n3, r3 = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
            o2.completeMsg(i2);
            var c3 = e2.error && 7101 === e2.error.code;
            e2.error && !c3 || (i2.idServer = s2.idServer, i2.time = +s2.time, s2.yidunAntiSpamRes && (i2.yidunAntiSpamRes = s2.yidunAntiSpamRes), s2.callbackExt && (i2.callbackExt = s2.callbackExt)), c3 && (i2.isInBlackList = true), e2.error ? i2.status = "fail" : i2.status = "success", i2 = r3 ? m(n3 = o2.message).call(n3, i2) : i2, i2 = o2.amendMsg(i2), t2 && (i2.filter = true), e2.obj = i2, o2.syncing ? o2.unupdatedMsgs.push(i2) : o2.msgPromise = a.all([o2.msgPromise, e2.obj.promise]).then(function(e3) {
              return e3.length || (i2.resend = true), o2.updateMsg(i2).then(function() {
                return o2.options.syncSessionUnread && o2.currSessionId === i2.sessionId && o2.api.resetSessionUnread(o2.currSessionId), o2.resolveMsgReceiptTask(i2), i2;
              });
            }).catch(function(e3) {
              o2.logger.error("onSendMsg::dealMsg error", e3);
            });
          }
        }, O.updateLocalMsg = function(e2) {
          var t2 = this.updateMsg(e2);
          return this.msgPromise = this.msgPromise.then(function() {
            return t2;
          }), t2;
        }, O.updateMsg = function(e2) {
          if (s(e2) || this.options.shouldIgnoreMsg(e2))
            return a.resolve(e2);
          var t2 = this, n2 = t2.db, r2 = "success" === e2.status, o2 = U.genSessionByMsg(e2), i2 = !!e2.isLocal;
          return t2.onUpdateSession(o2), n2.enable ? n2.updateMsg(e2).then(function(t3) {
            var s2 = n2.updateSession(o2), c2 = a.resolve();
            return r2 && t3 && !i2 && (c2 = "superTeam" === e2.scene ? n2.updateSuperTeamRoamingMsgTimetag(t3.time) : n2.updateRoamingMsgTimetag(t3.time)), a.all([s2, c2]);
          }).catch(function(e3) {
            t2.logger.error("updateMsg error", e3);
          }) : (r2 && !i2 && (t2.timetags.roamingMsgs = e2.time), a.resolve(e2));
        }, O.updateRoamingMsgTimetag = function(e2) {
          var t2 = this.db;
          return t2.enable ? t2.updateRoamingMsgTimetag(e2) : (this.timetags.roamingMsgs = e2, a.resolve(e2));
        }, O.checkUserUpdate = function(e2) {
          var t2 = this, n2 = e2.from;
          return t2.logger.info("handleMsg::checkUserUpdate: ", n2, t2.account), n2 === t2.account ? a.resolve() : new a(function(r2) {
            var o2 = t2.userSet[n2];
            if (o2) {
              var s2 = +o2.updateTime, i2 = +e2.userUpdateTime;
              !isNaN(s2) && !isNaN(i2) && E.isNumber(s2) && E.isNumber(i2) && s2 < i2 ? a2() : r2();
            } else
              a2();
            function a2() {
              t2.api.getUser({ account: n2, sync: true, done: function(e3, n3) {
                e3 || f2(function() {
                  t2.logger.log("user::checkUserUpdate: onupdateuser", n3 && n3.account), t2.options.onupdateuser(n3);
                }, 0), r2();
              } });
            }
          });
        }, O.processUnsettledMsgs = function() {
          var e2, t2, n2 = this;
          o(e2 = n2.unhandledMsgs).call(e2, function(e3) {
            var t3 = e3.msg;
            switch (e3.type) {
              case "onMsg":
                n2.handleMsg(t3);
                break;
              case "sendMsg":
                n2.msgPromise = n2.msgPromise.then(function() {
                  return n2.putMsg(t3);
                });
                break;
              case "onBroadcastMsg":
                n2.msgPromise = n2.msgPromise.then(function() {
                  return n2.putBroadcastMsg(t3);
                });
            }
          }), o(t2 = n2.unupdatedMsgs).call(t2, function(e3) {
            n2.msgPromise = n2.msgPromise.then(function() {
              return n2.updateMsg(e3);
            });
          }), n2.resetUnsettledMsgs();
        }, O.onTeamNotificationMsg = function(e2) {
          var t2 = e2.attach, n2 = t2.type, r2 = e2.from, o2 = e2.to, s2 = e2.time, i2 = t2.team, a2 = t2.account, c2 = t2.accounts;
          switch (n2) {
            case "updateTeam":
              return i2.updateTime = s2, this.onUpdateTeam(i2);
            case "addTeamMembers":
              return this.onAddTeamMembers(e2, i2, c2);
            case "removeTeamMembers":
              return this.onRemoveTeamMembers(i2, o2, c2);
            case "acceptTeamInvite":
              return this.onAddTeamMembers(e2, i2, [r2]);
            case "passTeamApply":
              return this.onAddTeamMembers(e2, i2, [a2]);
            case "addTeamManagers":
              return this.updateTeamManagers(e2, o2, c2, true, s2);
            case "removeTeamManagers":
              return this.updateTeamManagers(e2, o2, c2, false, s2);
            case "leaveTeam":
              return this.onRemoveTeamMembers(i2, o2, [r2]);
            case "dismissTeam":
              return this.onDismissTeam(o2, s2);
            case "transferTeam":
              return this.transferTeam(e2, i2, r2, a2);
            case "updateTeamMute":
              return this.onUpdateTeamMembersMute(e2, i2, [a2], t2.mute);
            case "updateSuperTeam":
              return i2.updateTime = s2, this.onUpdateSuperTeam(i2);
            case "acceptSuperTeamInvite":
              return this.onAddSuperTeamMembers(e2, i2, [e2.from]);
            case "addSuperTeamMembers":
              return this.onAddSuperTeamMembers(e2, i2, c2);
            case "passSuperTeamApply":
              return this.onAddSuperTeamMembers(e2, i2, [a2]);
            case "removeSuperTeamMembers":
              return this.onRemoveSuperTeamMembers(i2, o2, c2);
            case "leaveSuperTeam":
              return this.onRemoveSuperTeamMembers(i2, o2, [r2]);
            case "dismissSuperTeam":
              return this.onDismissSuperTeam(o2, s2);
            case "transferSuperTeam":
              return this.transferSuperTeam(e2, i2, r2, a2);
            case "addSuperTeamManagers":
              return this.updateSuperTeamManagers(e2, o2, c2, true, s2);
            case "removeSuperTeamManagers":
              return this.updateSuperTeamManagers(e2, o2, c2, false, s2);
            case "updateSuperTeamMembersMute":
              return this.onUpdateSuperTeamMembersMute(e2, i2, c2, t2.mute);
          }
        }, O.onAddSuperTeamMembers = function(e2, t2, n2) {
          var r2 = this.db, o2 = D.assembleMembers(t2, n2);
          e2.attach.members = o2;
          var s2 = { team: t2, accounts: n2, members: o2 };
          if (this.logger.info("team::onAddSuperTeamMembers: ".concat(s2.team.teamId, ", "), s2.accounts), this.options.onAddSuperTeamMembers(E.simpleClone(s2)), r2.enable) {
            var i2 = r2.putSuperTeamMembers(o2), c2 = r2.putSuperTeam(t2);
            return a.all([i2, c2]);
          }
        }, O.onRemoveSuperTeamMembers = function(e2, t2, n2) {
          var r2 = this.db, o2 = { team: e2, teamId: t2, accounts: n2 };
          if (this.logger.info("team::onRemoveSuperTeamMembers: ".concat(t2, ", "), o2.accounts), this.options.onRemoveSuperTeamMembers && this.options.onRemoveSuperTeamMembers(E.simpleClone(o2)), this.mySuperTeamMembersMap && this.mySuperTeamMembersMap[t2] && this.mySuperTeamMembersMap[t2].followAccountIds) {
            var i2 = this.mySuperTeamMembersMap[t2].followAccountIds;
            if (s(i2).call(i2, function(e3) {
              return v(n2).call(n2, e3);
            }).length > 0) {
              this.mySuperTeamMembersMap[t2].followAccountIds = s(i2).call(i2, function(e3) {
                return !v(n2).call(n2, e3);
              });
              var c2 = this.mySuperTeamMembersMap[t2];
              this.db.enable && this.db.updateSuperTeamMember(c2), this.mergeMySuperTeamMembers(c2), this.onUpdateSuperTeamMember(c2);
            }
          }
          if (e2 && r2.enable) {
            if (-1 === u(n2).call(n2, this.account)) {
              var l3 = r2.removeSuperTeamMembersByAccounts(t2, n2), m2 = a.resolve();
              return e2 && (m2 = r2.putSuperTeam(e2)), a.all([l3, m2]);
            }
            return r2.leaveSuperTeam(t2);
          }
        }, O.onDismissSuperTeam = function(e2, t2) {
          var n2 = this.db, r2 = { teamId: e2 };
          if (this.logger.info("team::onDismissSuperTeam:", e2), this.options.onDismissSuperTeam(r2), n2.enable)
            return n2.dismissSuperTeam(e2, t2);
        }, O.onAddTeamMembers = function(e2, t2, n2) {
          var r2 = this, o2 = r2.db, i2 = t2.teamId, c2 = F.assembleMembers(t2, n2);
          e2.attach.members = c2;
          var l3 = { team: t2, accounts: n2, members: c2 };
          if (r2.logger.info("team::onAddTeamMembers: ", i2, n2), u(n2).call(n2, r2.account) > -1 && r2.mergeMyTeamMembers(s(c2).call(c2, function(e3) {
            return e3.account === r2.account;
          })), r2.options.onAddTeamMembers(E.simpleClone(l3)), o2.enable) {
            var m2, p2 = o2.putTeam(t2);
            return u(n2).call(n2, r2.account) > -1 ? m2 = o2.putTeamMembers(c2) : r2.logger.log("team::onAddTeamMembers: user join team", i2), a.all([m2, p2]);
          }
        }, O.onRemoveTeamMembers = function(e2, t2, n2) {
          var r2 = this.db, o2 = { team: e2, teamId: t2, accounts: n2 };
          if (this.logger.info("team::onRemoveTeamMembers: ".concat(t2), n2), this.options.onRemoveTeamMembers && this.options.onRemoveTeamMembers(E.simpleClone(o2)), this.myTeamMembersMap && this.myTeamMembersMap[t2] && this.myTeamMembersMap[t2].followAccountIds) {
            var i2 = this.myTeamMembersMap[t2].followAccountIds;
            if (s(i2).call(i2, function(e3) {
              return v(n2).call(n2, e3);
            }).length > 0) {
              this.myTeamMembersMap[t2].followAccountIds = s(i2).call(i2, function(e3) {
                return !v(n2).call(n2, e3);
              });
              var c2 = this.myTeamMembersMap[t2];
              this.db.enable && this.db.updateTeamMember(c2), this.mergeMyTeamMembers(c2), this.onUpdateTeamMember(c2);
            }
          }
          if (e2 && r2.enable) {
            if (-1 === u(n2).call(n2, this.account)) {
              var l3 = r2.removeTeamMembersByAccounts(t2, n2), m2 = a.resolve();
              return e2 && (m2 = r2.putTeam(e2)), a.all([l3, m2]);
            }
            return r2.leaveTeam(t2);
          }
        }, O.updateTeamManagers = function(e2, t2, n2, r2, o2) {
          var s2 = this.db, c2 = e2.attach.members = i(n2).call(n2, function(e3) {
            return { id: F.genId(t2, e3), type: r2 ? "manager" : "normal", updateTime: o2, account: e3 };
          }), u2 = { teamId: "" + t2, memberUpdateTime: o2 };
          e2.attach.team = u2;
          var l3 = { team: u2, accounts: n2, isManager: r2, members: c2 };
          if (this.logger.info("team::updateTeamManagers:", t2, n2, r2), this.options.onUpdateTeamManagers(E.simpleClone(l3)), s2.enable) {
            var m2 = s2.updateTeam(u2), p2 = s2.updateTeamManagers(t2, n2, r2, o2);
            return a.all([m2, p2]);
          }
        }, O.updateSuperTeamManagers = function(e2, t2, n2, r2, o2) {
          var s2 = this.db, c2 = e2.attach.members = i(n2).call(n2, function(e3) {
            return { id: F.genId(t2, e3), teamId: t2, account: e3, type: r2 ? "manager" : "normal", updateTime: o2 };
          }), u2 = { teamId: "" + t2, memberUpdateTime: o2 };
          e2.attach.team = u2;
          var l3 = { team: u2, accounts: n2, isManager: r2, members: c2 };
          if (this.logger.info("team::updateSuperTeamManagers:", t2, n2, r2), this.options.onUpdateSuperTeamManagers(E.simpleClone(l3)), s2.enable) {
            var m2 = s2.updateSuperTeam(u2), p2 = s2.updateSuperTeamMembers(c2);
            return a.all([m2, p2]);
          }
        }, O.onDismissTeam = function(e2, t2) {
          var n2 = this.db, r2 = { teamId: e2 };
          if (this.logger.info("team::onDismissTeam:", e2), this.options.onDismissTeam(r2), n2.enable)
            return n2.dismissTeam(e2, t2);
        }, O.transferTeam = function(e2, t2, n2, r2) {
          var o2 = this.db, s2 = t2.teamId, i2 = t2.memberUpdateTime, a2 = { id: F.genId(s2, n2), type: "normal", updateTime: i2 }, c2 = { id: F.genId(s2, r2), type: "owner", updateTime: i2 };
          e2.attach.members = [a2, c2];
          var u2 = { team: t2, from: a2, to: c2 };
          if (this.logger.info("team::transferTeam: from to", s2, n2, r2), this.options.onTransferTeam(E.simpleClone(u2)), o2.enable)
            return o2.transferTeam(t2, n2, r2);
        }, O.transferSuperTeam = function(e2, t2, n2, r2) {
          var o2 = this.db, s2 = t2.teamId, i2 = t2.memberUpdateTime, a2 = { teamId: s2, type: "normal", account: n2, updateTime: i2 }, c2 = { teamId: s2, type: "owner", account: r2, updateTime: i2 };
          e2.attach.members = [a2, c2];
          var u2 = { team: t2, from: a2, to: c2 };
          if (this.logger.info("team::transferSuperTeam: from to ", s2, n2, r2), this.options.onTransferSuperTeam(E.simpleClone(u2)), o2.enable)
            return o2.transferSuperTeam(t2, a2, c2);
        }, O.onUpdateTeamMembersMute = function(e2, t2, n2, r2) {
          var o2 = this.db, s2 = i(n2).call(n2, function(e3) {
            return { id: F.genId(t2.teamId, e3), account: e3, teamId: t2.teamId, mute: r2, updateTime: t2.memberUpdateTime };
          });
          e2.attach.members = s2;
          var c2 = { team: t2, accounts: n2, members: s2, mute: r2 };
          if (this.logger.info("team::onUpdateTeamMembersMute:", t2.teamId, n2, r2), this.options.onUpdateTeamMembersMute(E.simpleClone(c2)), o2.enable) {
            var u2 = o2.updateTeamMembers(s2), l3 = o2.putTeam(t2);
            return a.all([u2, l3]);
          }
        }, O.onUpdateSuperTeamMembersMute = function(e2, t2, n2, r2) {
          var o2 = this.db, s2 = i(n2).call(n2, function(e3) {
            return { id: D.genId(t2.teamId, e3), account: e3, teamId: t2.teamId, mute: r2, updateTime: t2.memberUpdateTime };
          });
          e2.attach.members = s2;
          var c2 = { team: t2, accounts: n2, members: s2, mute: r2 };
          if (this.logger.info("team::onUpdateSuperTeamMembersMute:", t2.teamId, n2, r2), this.options.onUpdateSuperTeamMembersMute(E.simpleClone(c2)), o2.enable) {
            var u2 = o2.updateSuperTeamMembers(s2), l3 = o2.putSuperTeam(t2);
            return a.all([u2, l3]);
          }
        }, O.onHistoryMsgs = function(e2) {
          e2.error || (e2.obj.msgs = this.message.reverseMsgs(e2.content.msgs));
        }, O.onmsgFtsInServer = function(e2) {
          if (!e2.error) {
            var t2 = this.message.reverseMsgs(e2.content.msgs);
            e2.obj.msgs = t2, e2.content.msgs = t2;
          }
        }, O.isFilterMsgs = function(e2) {
          return !!s(e2[0]);
        }, O.splitMsgs = function(e2, t2, n2, r2) {
          o(e2).call(e2, function(e3) {
            if (s(e3))
              r2.push(e3);
            else
              switch (e3.scene) {
                case "p2p":
                  t2.push(e3);
                  break;
                case "team":
                  n2.push(e3);
              }
          });
        }, O.markMsgRead = function(e2, t2) {
          E.isArray(e2) || (e2 = [e2]);
          if (this.db.enable || this.options.autoMarkRead || t2) {
            var n2 = i(e2).call(e2, function(e3) {
              return { flag: "msg", idServer: e3.idServer, scene: e3.scene, filter: s(e3), type: e3.type, attachType: e3.attach && e3.attach.type };
            });
            this.msgAckBufferManager.add(n2);
          }
        }, O.markSysMsgRead = function(e2, t2) {
          E.isArray(e2) || (e2 = [e2]);
          if (this.db.enable || this.options.autoMarkRead || t2) {
            var n2 = i(e2).call(e2, function(e3) {
              return { flag: "systemMsg", idServer: e3.idServer, scene: e3.scene, filter: s(e3), type: e3.type };
            });
            this.msgAckBufferManager.add(n2);
          }
        }, O.handleMsgsAck = function(e2) {
          var t2, n2 = this, r2 = { p2pSysMsgs: { sid: 7, cid: 3, msgs: [] }, p2pMsgs: { sid: 7, cid: 2, msgs: [] }, superTeamSysMsgs: { sid: 21, cid: 19, msgs: [] }, teamMsgs: { sid: 8, cid: 3, msgs: [] }, filterSysMsgs: { sid: 101, cid: 3, msgs: [] }, filterMsgs: { sid: 101, cid: 2, msgs: [] }, netcallMsgs: { sid: 9, cid: 11, msgs: [] } };
          o(e2).call(e2, function(e3) {
            /^(netcallBill|netcallMiss|netcallReject)$/.test(e3.attachType) ? r2.netcallMsgs.msgs.push(e3) : s(e3) ? "systemMsg" === e3.flag ? r2.filterSysMsgs.msgs.push(e3) : r2.filterMsgs.msgs.push(e3) : "systemMsg" !== e3.flag ? "p2p" === e3.scene ? r2.p2pMsgs.msgs.push(e3) : "team" === e3.scene && r2.teamMsgs.msgs.push(e3) : "superTeam" === e3.scene ? r2.superTeamSysMsgs.msgs.push(e3) : r2.p2pSysMsgs.msgs.push(e3);
          }), o(t2 = c(r2)).call(t2, function(e3) {
            return n2.doMarkMsgsRead(r2[e3].sid, r2[e3].cid, r2[e3].msgs);
          });
        }, O.doMarkMsgsRead = function(e2, t2, n2) {
          n2 && n2.length && (this.logger.log("markMsgRead::batchMarkRead", e2, t2, n2), this.sendCmd("batchMarkRead", { sid: e2, cid: t2, ids: i(n2).call(n2, function(e3) {
            return e3.idServer;
          }) }));
        };
      }, function(e, t, n) {
        var r = n(51), o = n(10), s = n(2), i = n(4), a = n(16), c = n(3), u = n(37), l2 = n(52), m = n(53), p = n(54), d = n(55), f2 = n(43);
        function g(e2, t2) {
          var n2 = i(e2);
          if (l2) {
            var r2 = l2(e2);
            t2 && (r2 = a(r2).call(r2, function(t3) {
              return m(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        function h(e2) {
          for (var t2 = 1; t2 < arguments.length; t2++) {
            var n2, o2, i2 = null != arguments[t2] ? arguments[t2] : {};
            t2 % 2 ? s(n2 = g(Object(i2), true)).call(n2, function(t3) {
              r(e2, t3, i2[t3]);
            }) : p ? d(e2, p(i2)) : s(o2 = g(Object(i2))).call(o2, function(t3) {
              f2(e2, t3, m(i2, t3));
            });
          }
          return e2;
        }
        var y = n(35).fn, v = n(756), b = n(758);
        function T(e2, t2, n2) {
          var r2 = this, o2 = this.timetags && this.timetags.sync;
          this.db.enable && o2 && t2 && this.db.getMsgByIdClient(e2).then(function(e3) {
            if (e3 && !(e3.commentTimetag && e3.commentTimetag <= o2 && e3.time <= o2)) {
              if (e3.commentTimetag = t2.time, e3.comments = e3.comments || [], n2) {
                var s2;
                e3.comments = a(s2 = e3.comments).call(s2, function(e4) {
                  return e4.body !== t2.body || e4.from !== t2.from;
                });
              } else {
                for (var i2, c2 = 0; c2 < e3.comments.length; c2++)
                  if (e3.comments[c2].from === t2.from && e3.comments[c2].body === t2.body) {
                    e3.comments[c2] = t2, i2 = true;
                    break;
                  }
                i2 || e3.comments.push(t2);
              }
              var u2 = { idClient: e3.idClient, comments: e3.comments, commentTimetag: e3.commentTimetag };
              r2.db.updateMsg(u2);
            }
          });
        }
        function S(e2) {
          e2.scene = this.message.sceneReverseMap[+e2.scene] || e2.scene, e2.time = +e2.time;
        }
        y.processMsgExtend = function(e2) {
          switch (e2.cmd) {
            case "getThreadMsgs":
              this.onGetThreadMsgs(e2);
              break;
            case "getMsgsByIdServer":
              this.onGetMsgsByIdServer(e2);
              break;
            case "addQuickComment":
              this.changeQuickComment(e2);
              break;
            case "deleteQuickComment":
              this.changeQuickComment(e2, true);
              break;
            case "onQuickComment":
            case "syncAddQuickComment":
              this.onQuickComment(e2);
              break;
            case "onDeleteQuickComment":
            case "syncDeleteQuickComment":
              this.onQuickComment(e2, true);
              break;
            case "getQuickComments":
              this.getQuickComments(e2);
              break;
            case "addCollect":
            case "updateCollect":
              this.addCollect(e2);
              break;
            case "deleteCollects":
              this.deleteCollects(e2);
              break;
            case "getCollects":
              this.getCollects(e2);
              break;
            case "addStickTopSession":
            case "syncAddStickTopSession":
              this.onChangeStickTopSession(e2, "add");
              break;
            case "updateStickTopSession":
            case "syncUpdateStickTopSession":
              this.onChangeStickTopSession(e2, "update");
              break;
            case "deleteStickTopSession":
            case "syncDeleteStickTopSession":
              this.onChangeStickTopSession(e2, "delete");
              break;
            case "addMsgPin":
            case "onAddMsgPin":
            case "syncAddMsgPin":
              this.pinMsgChange(e2, "add");
              break;
            case "updateMsgPin":
            case "onUpdateMsgPin":
            case "syncUpdateMsgPin":
              this.pinMsgChange(e2, "update");
              break;
            case "deleteMsgPin":
            case "onDeleteMsgPin":
            case "syncDeleteMsgPin":
              this.pinMsgChange(e2, "delete");
              break;
            case "getMsgPins":
              this.getMsgPins(e2);
          }
        }, y.onGetThreadMsgs = function(e2) {
          if (!e2.error) {
            var t2;
            e2.obj.msgs = this.message.reverseMsgs(e2.content.msgs), e2.obj.threadMsg = o(t2 = this.message).call(t2, e2.content.threadMsg);
            var n2 = e2.content.threadMsgsMeta || {};
            e2.obj.total = n2.total, e2.obj.timetag = n2.lastMsgTime;
          }
        }, y.onGetMsgsByIdServer = function(e2) {
          e2.error || (e2.obj.msgs = this.message.reverseMsgs(e2.content.msgs));
        }, y.changeQuickComment = function(e2, t2) {
          e2.error || (e2.obj.comment.time = e2.content.timetag, e2.obj.comment = o(v).call(v, e2.obj.comment), S.call(this, e2.obj.msg), T.call(this, e2.obj.msg.idClient, e2.obj.comment, t2));
        }, y.onQuickComment = function(e2, t2) {
          if (e2.content) {
            var n2 = e2.content, r2 = n2.comment, s2 = n2.msg;
            r2 && s2 && (S.call(this, s2), r2 = o(v).call(v, r2), t2 ? this.options.onDeleteQuickComment(e2.content.msg, r2) : this.options.onQuickComment(e2.content.msg, r2), T.call(this, s2.idClient, r2, t2));
          }
        }, y.getQuickComments = function(e2) {
          var t2, n2 = this;
          if (!e2.error) {
            var r2 = e2.obj.idMap, a2 = e2.obj.indexMap, c2 = e2.content && e2.content.commentRes || [];
            s(c2).call(c2, function(e3) {
              var t3 = [], a3 = n2.parser.unserializeMap.comment;
              if (1 == +e3.modify)
                try {
                  t3 = JSON.parse(e3.detail);
                } catch (e4) {
                  n2.logger.warn("getQuickComments parse detail error", e4);
                }
              if (s(t3).call(t3, function(e4, n3) {
                var r3, c4 = {};
                s(r3 = i(e4)).call(r3, function(t4) {
                  c4[a3[t4]] = e4[t4];
                }), c4 = o(v).call(v, c4), t3[n3] = c4;
              }), e3.timestamp = +e3.timestamp, r2[e3.idClient]) {
                var c3 = { idClient: e3.idClient, commentTimetag: e3.timestamp };
                r2[e3.idClient].commentTimetag = e3.timestamp, 1 == +e3.modify && (r2[e3.idClient].comments = t3, c3.comments = t3), n2.db.enable && n2.db.updateMsg(c3);
              } else
                r2[e3.idClient] = { idServer: e3.idServer, idClient: e3.idClient, comments: t3, commentTimetag: e3.timestamp, scene: n2.message.sceneReverseMap[e3.scene] || e3.scene };
            }), e2.obj = [], s(t2 = i(a2)).call(t2, function(t3) {
              e2.obj[a2[t3]] = r2[t3];
            });
          }
        }, y.addCollect = function(e2) {
          e2.error || (e2.obj.collect = o(b).call(b, e2.content.collect));
        }, y.deleteCollects = function(e2) {
          e2.error || (e2.obj.deleteNum = e2.content.deleteNum);
        }, y.getCollects = function(e2) {
          if (!e2.error) {
            var t2 = [], n2 = e2.content.collectList || [];
            s(n2).call(n2, function(e3) {
              t2.push(o(b).call(b, e3));
            }), e2.obj.collectList = t2, e2.obj.total = e2.content.total;
          }
        }, y.onChangeStickTopSession = function(e2, t2) {
          var n2 = this;
          if (!e2.error) {
            var r2 = e2.content.stickTopSession || e2.obj.stickTopSession || {}, o2 = e2.content.timetag || +r2.updateTime, s2 = r2.id.split("|");
            "super_team" === s2[0] && (s2[0] = "superTeam"), r2 = { id: s2.join("-"), scene: s2[0], to: s2[1], topCustom: r2.topCustom || "" }, "delete" === t2 ? r2.isTop = false : "add" === t2 && (r2.isTop = true), r2 = this.onUpdateSession(r2), e2.obj && (e2.obj.stickTopSession = r2), this.db.enable && (this.db.updateSession(r2).then(function(e3) {
              e3 || n2.db.putSession(r2);
            }), this.db.updateTimetag("stickTopSessions", o2));
          }
        }, y.pinMsgChange = function(e2, t2) {
          var n2 = this;
          if (!e2.error) {
            e2.content = e2.content || {};
            var r2 = this, o2 = this.db, s2 = e2.obj && e2.obj.msg, i2 = e2.content.msg || s2 || {}, a2 = e2.content.pinTag || e2.obj.pinTag, u2 = e2.content.timetag || +a2.updateTime, l3 = c.resolve();
            S.call(this, i2), o2.enable && (l3 = o2.getMsgByIdClient(i2.idClient)), a2.createTime && (a2.createTime = +a2.createTime), a2.updateTime && (a2.updateTime = +a2.updateTime), l3.then(function(l4) {
              return i2 = l4 || i2, l4 ? i2 = l4 : i2.sessionId = i2.scene + "-" + n2.message.Message.getMsgTarget(i2, n2.account), s2 ? (e2.obj.msg = i2, e2.obj.pinTag = a2) : n2.options.onPinMsgChange({ msg: i2, pinTag: a2 }, t2), function() {
                if (!o2.enable)
                  return;
                o2["delete" === t2 ? "deleteMsgPin" : "putMsgPin"](h(h({}, i2), {}, { pinFrom: a2.pinFrom, pinCustom: a2.pinCustom })).then(function() {
                  var e3 = "pin-" + i2.sessionId, t3 = r2.timetags.sync;
                  return o2.getTimetag(e3).then(function(n3) {
                    return n3 > t3 ? o2.updateTimetag(e3, u2) : c.resolve();
                  });
                }).catch(function(e3) {
                  r2.logger.error("msgExtend::pinMsgChange:error", e3);
                });
              }(), c.resolve;
            }).then(function() {
            }), e2.promise = l3;
          }
        }, y.getMsgPins = function(e2) {
          var t2 = this;
          if (!e2.error) {
            var n2 = this.db, r2 = e2.content || {};
            if (r2.pins = r2.pins || [], r2.modify) {
              var o2, i2 = [];
              if (n2.enable)
                n2.updateTimetag("pin-" + e2.obj.id, r2.timetag), s(o2 = r2.pins).call(o2, function(t3) {
                  t3.sessionId = e2.obj.id, i2.push(n2.getMsgByIdClient(t3.idClient));
                });
              e2.promise = c.all(i2).then(function(o3) {
                var i3;
                s(i3 = r2.pins).call(i3, function(n3, r3) {
                  o3[r3] ? u(n3, o3[r3]) : (n3.sessionId = e2.obj.id, S.call(t2, n3));
                }), e2.obj.pins = r2.pins, n2.enable && n2.deleteMsgPins(e2.obj.id).then(function() {
                  return n2.putMsgPins(r2.pins);
                }).catch(function(e3) {
                  t2.logger.error("msgExtend::getMsgPins:change db error", e3);
                });
              });
            } else
              n2.enable ? (n2.updateTimetag("pin-" + e2.obj.id, r2.timetag), e2.promise = n2.getMsgPins(e2.obj.id).then(function(t3) {
                e2.obj.pins = t3 || [];
              })) : e2.obj.pins = [];
          }
        };
      }, function(e, t, n) {
        var r = n(818);
        e.exports = r;
      }, function(e, t, n) {
        n(819);
        var r = n(13);
        e.exports = r.Number.isInteger;
      }, function(e, t, n) {
        n(1)({ target: "Number", stat: true }, { isInteger: n(820) });
      }, function(e, t, n) {
        var r = n(28), o = Math.floor;
        e.exports = Number.isInteger || function(e2) {
          return !r(e2) && isFinite(e2) && o(e2) === e2;
        };
      }, function(e, t, n) {
        var r = n(125), o = n(3), s = n(2), i = n(6), a = ["time", "from"], c = n(35).fn, u = n(0);
        c.onOfflineMsgReceipts = function(e2) {
          var t2, n2 = this, r2 = n2.db, i2 = e2.content.msgReceipts, a2 = [], c2 = o.resolve();
          this.logger.info("onOfflineMsgReceipts", i2), s(i2).call(i2, function(e3) {
            t2 = { id: "p2p-" + e3.from, msgReceiptTime: +e3.time }, n2.cacheSyncedSession(t2);
          }), n2.syncResult.msgReceipts = a2, r2.enable && (c2 = r2.updateMsgReceiptsTimetag(e2.content.timetag)), c2.cmd = a2, n2.syncPromiseArray.push(c2);
        }, c.shouldUpdateSessionFromMsgReceipt = function(e2, t2) {
          return !e2 || !e2.msgReceiptServerTime || t2.time > e2.msgReceiptServerTime;
        }, c.genSessionFromMsgReceipt = function(e2, t2) {
          var n2 = t2.time, r2 = { id: t2.sessionId, msgReceiptTime: n2, msgReceiptServerTime: n2 };
          return e2 && e2.id === t2.sessionId && (r2 = u.merge({}, e2, r2)), e2 && e2.updateTime || (r2.updateTime = n2), r2;
        }, c.onMsgReceipt = function(e2) {
          var t2 = this, n2 = t2.db, s2 = e2.content.msgReceipt;
          s2.time = +s2.time;
          var i2 = s2.idClient, c2 = o.resolve();
          n2.enable && i2 && (c2 = n2.getMsgByIdClient(i2)), this.logger.info("onMsgReceipt::", s2), c2.then(function(e3) {
            if (e3) {
              if (!e3.idServer)
                return void (t2.msgReceiptTasks[i2] = s2);
              e3.time;
            } else
              s2.time;
            s2.msgReceiptTime = s2.time, s2.sessionId = "p2p-".concat(s2.from), t2.updateSessionMsgReceiptTime(s2);
            s2.time, s2.from;
            var n3 = r(s2, a);
            t2.options.onMsgReceipts([n3]);
          });
        }, c.resolveMsgReceiptTask = function(e2) {
          var t2 = this.msgReceiptTasks[e2.idClient];
          t2 && (t2.msgReceiptTime = e2.time, this.updateSessionMsgReceiptTime(t2));
        }, c.updateSessionMsgReceiptTime = function(e2) {
          var t2 = this.db, n2 = { id: "p2p-" + e2.from, msgReceiptTime: e2.msgReceiptTime, msgReceiptServerTime: e2.time };
          (this.getSessionInCache(n2.id) || {}).msgReceiptTime >= n2.msgReceiptTime ? this.logger.warn("receive old msgReceiptTime", e2) : (t2.enable && t2.putSession(n2), this.onUpdateSession(n2));
        }, c.onSendMsgReceipt = function(e2) {
          var t2;
          if (!e2.error)
            if (e2.obj && e2.obj.msgReceipt) {
              var n2 = e2.obj.msgReceipt, r2 = +n2.time, o2 = +e2.content.msgReceipt.time, s2 = this.getSessionInCache("p2p-" + n2.to);
              s2 ? (this.logger.info(i(t2 = "sendMsgReceipt on:: param time ".concat(r2, ", res time ")).call(t2, o2)), s2.msgReceiptSendTime = Math.min(r2, o2)) : this.logger.info("sendMsgReceipt on:: session is undefined or logically deleted, failed to send read receipt");
            } else
              this.logger.info("sendMsgReceipt on:: origin msg is missing, it maybe timeout");
        }, c.shouldSendMsgReceipt = function(e2) {
          if (e2 && "p2p" === e2.scene && "success" === e2.status) {
            var t2 = this.getSessionInCache(e2.sessionId);
            if (t2) {
              var n2 = t2.msgReceiptSendTime;
              return !n2 || n2 < e2.time;
            }
          }
          return false;
        }, c.isMsgRemoteRead = function(e2) {
          if (e2 && "p2p" === e2.scene && "out" === e2.flow && "success" === e2.status) {
            var t2 = this.getSessionInCache(e2.sessionId);
            if (t2 && t2.msgReceiptTime)
              return e2.time <= t2.msgReceiptTime;
          }
          return false;
        };
      }, function(e, t, n) {
        var r = n(57), o = n(58), s = n(60), i = n(10), a = n(2), c = n(6), u = n(9), l2 = n(3), m = n(90), p = n(123), d = n(4), f2 = n(16), g = n(48), h = n(15), y = n(26), v = n(158), b = n(88), T = n(89), S = n(72), M = n(32);
        function k(e2, t2) {
          var n2 = void 0 !== T && S(e2) || e2["@@iterator"];
          if (!n2) {
            if (M(e2) || (n2 = function(e3, t3) {
              var n3;
              if (!e3)
                return;
              if ("string" == typeof e3)
                return x(e3, t3);
              var r3 = h(n3 = Object.prototype.toString.call(e3)).call(n3, 8, -1);
              "Object" === r3 && e3.constructor && (r3 = e3.constructor.name);
              if ("Map" === r3 || "Set" === r3)
                return b(e3);
              if ("Arguments" === r3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r3))
                return x(e3, t3);
            }(e2)) || t2 && e2 && "number" == typeof e2.length) {
              n2 && (e2 = n2);
              var r2 = 0, o2 = function() {
              };
              return { s: o2, n: function() {
                return r2 >= e2.length ? { done: true } : { done: false, value: e2[r2++] };
              }, e: function(e3) {
                throw e3;
              }, f: o2 };
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          }
          var s2, i2 = true, a2 = false;
          return { s: function() {
            n2 = n2.call(e2);
          }, n: function() {
            var e3 = n2.next();
            return i2 = e3.done, e3;
          }, e: function(e3) {
            a2 = true, s2 = e3;
          }, f: function() {
            try {
              i2 || null == n2.return || n2.return();
            } finally {
              if (a2)
                throw s2;
            }
          } };
        }
        function x(e2, t2) {
          (null == t2 || t2 > e2.length) && (t2 = e2.length);
          for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
            r2[n2] = e2[n2];
          return r2;
        }
        var C = n(35).fn, I = n(153), w = n(154), _ = n(0), P = n(107).EMSyncType;
        function A(e2, t2) {
          return N.apply(this, arguments);
        }
        function N() {
          return (N = o(r.mark(function e2(t2, n2) {
            var o2, s2, i2, c2, u2, l3, m2, p2, d2, f3, g2, h2, b2, T2 = this;
            return r.wrap(function(e3) {
              for (; ; )
                switch (e3.prev = e3.next) {
                  case 0:
                    if (i2 = (s2 = this).db, c2 = [], a(t2).call(t2, function(e4) {
                      T2.revokeMsgUniqueCheck(e4.idClient), c2.push(e4.idClient);
                    }), s2.options.rollbackDelMsgUnread) {
                      e3.next = 14;
                      break;
                    }
                    return e3.next = 7, i2.deleteMsg(c2);
                  case 7:
                    if (e3.t0 = e3.sent, e3.t0) {
                      e3.next = 10;
                      break;
                    }
                    e3.t0 = [];
                  case 10:
                    return u2 = e3.t0, u2 = "[object Array]" === Object.prototype.toString.call(u2) ? u2 : [u2], s2.logger.info("msg::_deleteMsgSelfBatchInDb, rollback false, affect: ".concat(u2.length, " rows")), e3.abrupt("return");
                  case 14:
                    return l3 = false, m2 = s2.options.cbUpdateSession || y(o2 = s2.updateSessionInDbWithNotify).call(o2, s2), p2 = s2.getSessionInCache(n2) || { id: n2 }, d2 = p2.lastMsg || {}, v(c2).call(c2, d2.idClient) && (l3 = true), s2.logger.info("msg::_deleteMsgSelfBatchInDb session change before:", n2, l3, p2.unread), e3.next = 22, i2.deleteMsg(c2);
                  case 22:
                    if (e3.t1 = e3.sent, e3.t1) {
                      e3.next = 25;
                      break;
                    }
                    e3.t1 = [];
                  case 25:
                    if (f3 = e3.t1, f3 = "[object Array]" === Object.prototype.toString.call(f3) ? f3 : [f3], s2.logger.info("msg::_deleteMsgSelfBatchInDb affect:", f3.length, " rows"), !l3) {
                      e3.next = 34;
                      break;
                    }
                    return e3.next = 31, i2.getMsgs({ sessionId: n2, limit: 1 });
                  case 31:
                    g2 = e3.sent, d2 = g2 && g2[0] ? g2[0] : null, p2.lastMsg = d2;
                  case 34:
                    if (h2 = false, p2 && p2.unread && (b2 = p2 && p2.ack || 0, a(f3).call(f3, function(e4) {
                      var t3 = true;
                      if ("notification" === e4.type)
                        try {
                          t3 = s2.options.shouldCountNotifyUnread(e4);
                        } catch (e5) {
                          throw s2.logger.error("userOption:shouldCountNotifyUnread function error", e5), e5;
                        }
                      t3 && b2 < e4.time && "in" === e4.flow && (p2.unread = p2.unread > 0 ? p2.unread - 1 : 0, h2 = true);
                    })), !l3 && !h2) {
                      e3.next = 39;
                      break;
                    }
                    return s2.logger.info("msg::_deleteMsgSelfBatchInDb session change after:", n2, p2.unread), e3.abrupt("return", m2(p2));
                  case 39:
                  case "end":
                    return e3.stop();
                }
            }, e2, this);
          }))).apply(this, arguments);
        }
        function O(e2, t2) {
          t2 = t2 || (/* @__PURE__ */ new Date()).getTime();
          var n2 = this.db, r2 = this.getSessionInCache(e2), o2 = false !== this.options.rollbackClearMsgsUnread, s2 = [];
          return n2.enable && s2.push(n2.deleteMsgsBySessionId({ sessionId: e2, end: t2 })), o2 && r2 && (r2 = this.mergeSession({ id: r2.id, unread: 0, lastMsg: null, unreadMsgs: [] }), r2 = this.onUpdateSession(r2)), n2.enable && o2 && r2 && s2.push(n2.updateSession(r2)), l2.all(s2);
        }
        C.onDeleteMsg = function(e2) {
          var t2 = this.db;
          if (delete e2.obj.sysMsg, !e2.error) {
            var n2 = e2.obj.msg;
            e2.promise = this.deleteLocalMsg(n2).then(function() {
              if (t2.enable) {
                var e3 = "superTeam" === n2.scene ? "deleteSuperTeamMsg" : "deleteMsg";
                t2.getTimetag(e3).then(function(n3) {
                  n3 = n3 || 0, s() + 1 >= n3 && t2.updateTimetag(e3, s() + 1);
                });
              }
            });
          }
        }, C.onMsgDeleted = function(e2, t2) {
          var n2 = this;
          if (!n2.canHandleDeletedMsgInSyncing)
            return n2.logger.info("msg::onMsgDeleted:is in syncing ..."), void n2.unhandledSysMsgsForDeletedMsgs.push({ packet: e2, isSuperTeam: t2 });
          if (!e2.error) {
            var r2 = n2.db, o2 = i(I).call(I, e2.content.sysMsg);
            o2 = n2.processDeleteMsgSysMsg(o2), t2 || n2.markSysMsgRead(o2), n2.deleteLocalMsg(o2.msg).then(function() {
              if (r2.enable) {
                var e3 = t2 ? "deleteSuperTeamMsg" : "deleteMsg";
                r2.updateTimetag(e3, o2.time + 1);
              }
              n2.handleSysMsg(o2);
            });
          }
        }, C.processDeleteMsgSysMsg = function(e2) {
          var t2;
          return e2.msg = {}, a(t2 = ["scene", "from", "to"]).call(t2, function(t3) {
            e2.msg[t3] = e2[t3];
          }), e2.msg.idClient = e2.deletedIdClient, e2.msg.idServer = e2.deletedIdServer, e2.msg.time = e2.deletedMsgTime, e2.msg.fromNick = e2.deletedMsgFromNick, e2.opeAccount = e2.opeAccount || e2.from, e2.msg.opeAccount = e2.opeAccount, this.message.Message.setExtra(e2.msg, this.account), e2;
        }, C.onDeleteMsgOfflineRoaming = function(e2) {
          if (!e2.error) {
            var t2, n2 = this, r2 = 1 == +e2.content.type ? "offline" : "roaming", o2 = I.reverseSysMsgs(e2.content.sysMsgs, { mapper: function(e3) {
              return n2.processDeleteMsgSysMsg(e3);
            } }), s2 = o2 && o2[0] && "superTeam" === o2[0].scene;
            n2.logger.info(c(t2 = "msg::onDeleteMsgOfflineRoaming: on delete ".concat(r2, " ")).call(t2, s2 ? "superTeam" : "", " idServer deletedIdClient deletedIdClient="), u(o2).call(o2, function(e3) {
              var t3, n3;
              return c(t3 = c(n3 = "".concat(e3.idServer, "-")).call(n3, e3.deletedIdServer, "-")).call(t3, e3.deletedIdClient);
            })), "offline" === r2 && n2.markSysMsgRead(o2);
            var i2 = e2.content.timetag;
            s2 ? (n2.timetags.deleteSuperTeamMsg = i2, n2.syncResult.deleteSuperTeamMsgTimetag = i2) : (n2.timetags.deleteMsg = i2, n2.syncResult.deleteMsgTimetag = i2);
            var a2 = n2.putSysMsg(o2, "offlineSysMsgs").catch(function(e3) {
              return n2.logger.error("msgDelete::onDeleteMsgOfflineRoaming: ", e3), l2.reject(e3);
            });
            a2.cmd = "deleteMsgSysMsgs " + r2, n2.syncPromiseArray.push(a2), n2.syncResult.deleteMsgSysMsgs = n2.syncResult.deleteMsgSysMsgs || [], n2.syncResult.deleteMsgSysMsgs.push({ type: r2, sysMsgs: o2 });
          }
        }, C.deleteMsgOfflineRoaming = function(e2, t2) {
          if (!e2)
            return l2.resolve();
          var n2 = this;
          n2.logger.info("msg::deleteMsgOfflineRoaming: ", u(e2).call(e2, function(e3) {
            var t3;
            return e3.type + " " + u(t3 = e3.sysMsgs).call(t3, function(e4) {
              var t4, n3;
              return c(t4 = c(n3 = "".concat(e4.idServer, "-")).call(n3, e4.deletedIdServer, "-")).call(t4, e4.deletedIdClient);
            });
          }), _.secureOutput("session", t2));
          var r2 = n2.db, o2 = [];
          return a(e2).call(e2, function(e3) {
            var s2;
            a(s2 = e3.sysMsgs).call(s2, function(e4) {
              var s3 = n2.deleteLocalMsg(e4.msg, { cbUpdateSession: function(e5) {
                e5 = n2.mergeSession(e5), e5 = m(w).call(w, e5);
                var o3 = _.findObjIndexInArray(t2, { value: e5.id });
                if (-1 !== o3 && (t2[o3] = _.merge({}, t2[o3], e5)), r2.enable)
                  return r2.updateSession(e5);
              } });
              o2.push(s3);
            });
          }), l2.all(o2).then(function() {
            r2.enable && (n2.syncResult.deleteMsgTimetag && r2.updateTimetag("deleteMsg", n2.syncResult.deleteMsgTimetag), n2.syncResult.deleteSuperTeamMsgTimetag && r2.updateTimetag("deleteSuperTeamMsg", n2.syncResult.deleteSuperTeamMsgTimetag));
          });
        }, C.deleteMsgSelf = function(e2) {
          if (!e2.error) {
            var t2 = this.db, n2 = e2.obj && e2.obj.deleteMsgSelfTag;
            if (n2) {
              var r2 = e2.content && e2.content.timetag;
              n2.scene = n2.scene + "" == "1" ? "p2p" : "team";
              var o2 = [this.deleteLocalMsg(n2)];
              r2 <= this.timetags.deleteMsgSelf || (this.timetags.deleteMsgSelf = r2, t2.enable && o2.push(t2.updateDeleteMsgSelf(r2))), e2.promise = l2.all(o2);
            }
          }
        }, C.deleteMsgSelfBatch = function() {
          var e2 = o(r.mark(function e3(t2) {
            var n2, o2, s2, i2, c2, m2, g2, h2;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    if (!t2.error) {
                      e4.next = 2;
                      break;
                    }
                    return e4.abrupt("return");
                  case 2:
                    if (o2 = this, s2 = this.db, (i2 = t2.obj && t2.obj.deleteMsgSelfTags) && i2.length > 0) {
                      e4.next = 7;
                      break;
                    }
                    return e4.abrupt("return");
                  case 7:
                    if (c2 = p(i2).call(i2, function(e5, t3) {
                      var n3 = t3.sessionId;
                      if (e5[n3] = e5[n3] || [], e5[n3].push(t3), !s2.enable) {
                        var r2 = o2.getSessionInCache(n3);
                        r2 && r2.lastMsg && t3 && r2.lastMsg.idClient === t3.idClient && (r2.lastMsg = null, o2.onUpdateSession(r2));
                      }
                      return e5;
                    }, {}), s2.enable) {
                      e4.next = 11;
                      break;
                    }
                    return a(m2 = d(c2)).call(m2, function(e5) {
                      var t3 = c2[e5], n3 = o2.getSessionInCache(e5);
                      if (o2.options.rollbackDelMsgUnread && n3) {
                        var r2 = n3.ack || 0, s3 = f2(t3).call(t3, function(e6) {
                          var t4 = true;
                          if ("notification" === e6.type)
                            try {
                              t4 = o2.options.shouldCountNotifyUnread(e6);
                            } catch (e7) {
                              throw o2.logger.error("userOption:shouldCountNotifyUnread function error", e7), e7;
                            }
                          return o2.message.Message.setFlow(e6, o2.account), t4 && r2 < e6.time && "in" === e6.flow;
                        });
                        s3.length > 0 && n3.unread && (n3.unread = n3.unread - s3.length >= 0 ? n3.unread - s3.length : 0, o2.onUpdateSession(n3));
                      }
                    }), e4.abrupt("return", l2.resolve());
                  case 11:
                    g2 = u(n2 = d(c2)).call(n2, function(e5) {
                      var t3 = c2[e5];
                      return A.call(o2, t3, e5);
                    }), (h2 = t2.content && t2.content.timetag) <= o2.timetags.deleteMsgSelf || (o2.timetags.deleteMsgSelf = h2, g2.push(s2.updateDeleteMsgSelf(h2))), t2.promise = l2.all(g2);
                  case 15:
                  case "end":
                    return e4.stop();
                }
            }, e3, this);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), C.onDeleteMsgSelf = function(e2) {
          var t2 = this, n2 = this.db, r2 = e2.content.deleteMsgSelfTag;
          r2.scene = r2.scene + "" == "1" ? "p2p" : "team", t2.options.onDeleteMsgSelf([r2]), t2.deleteLocalMsg(r2).then(function() {
            var e3 = r2.deletedTime;
            return e3 <= t2.timetags.deleteMsgSelf || !n2.enable ? l2.resolve() : (t2.timetags.deleteMsgSelf = e3, n2.updateDeleteMsgSelf(e3));
          }).catch(function(e3) {
            t2.logger.error("onDeleteMsgSelf error", e3);
          });
        }, C.onDeleteMsgSelfBatch = function(e2) {
          var t2 = this;
          if (!e2.error) {
            var n2 = { 1: "p2p", 2: "team" }, r2 = _.get(e2, "content.deleteMsgSelfTags") || [];
            a(r2).call(r2, function(e3) {
              var r3;
              e3.scene = n2[e3.scene], e3.sessionId = c(r3 = "".concat(e3.scene, "-")).call(r3, t2.message.Message.getMsgTarget(e3, t2.account)), e3.deletedTime = g(e3.deletedTime), e3.time = g(e3.time);
            });
            var o2 = _.get(e2, "content.deleteMsgSelfTags[0].deletedTime");
            o2 = g(o2) || 0, this.options.onDeleteMsgSelf(r2), this.deleteMsgSelfBatch({ obj: { deleteMsgSelfTags: r2 }, content: { timetag: o2 } });
          }
        }, C.clearServerHistoryMsgs = function(e2) {
          if (!e2.error) {
            var t2 = this.db, n2 = e2.obj && e2.obj.clearMsgsParamsWithSync;
            if (n2) {
              var r2 = "p2p" === (n2.type && "2" === n2.type.toString() ? "team" : "p2p") ? "p2p-".concat(n2.otherAccid) : "team-".concat(n2.toTid), o2 = e2.content && g(e2.content.timetag);
              o2 && o2 > this.timetags.sessionHistoryMsgsDelete && (this.timetags.sessionHistoryMsgsDelete = o2, t2.enable && t2.updateTimetag("sessionHistoryMsgsDelete", this.timetags.sessionHistoryMsgsDelete)), O.call(this, r2, o2);
            }
          }
        }, C.onClearServerHistoryMsgs = function(e2) {
          if (!e2.error) {
            var t2 = this.db, n2 = e2.content && e2.content.sessionHistoryMsgsDeleteTag;
            if (n2) {
              var r2 = "p2p" === (n2.type && "2" === n2.type.toString() ? "team" : "p2p") ? "p2p-".concat(n2.otherAccid) : "team-".concat(n2.toTid), o2 = n2.ext, s2 = g(n2.time);
              this.options.onClearServerHistoryMsgs && this.options.onClearServerHistoryMsgs([{ sessionId: r2, time: s2, ext: o2 }]), s2 <= this.timetags.sessionHistoryMsgsDelete || (this.timetags.sessionHistoryMsgsDelete = s2, t2.enable && t2.updateTimetag("sessionHistoryMsgsDelete", this.timetags.sessionHistoryMsgsDelete)), O.call(this, r2, s2);
            }
          }
        }, C.syncSessionHistoryMsgsDelete = function(e2) {
          if (!e2.error) {
            var t2 = this.db, n2 = e2.content && e2.content.sessionHistoryMsgsDeleteTags;
            if (n2 && n2.length > 0) {
              var r2 = u(n2).call(n2, function(e3) {
                return { sessionId: "p2p" === (e3.type && "2" === e3.type.toString() ? "team" : "p2p") ? "p2p-".concat(e3.otherAccid) : "team-".concat(e3.toTid), time: g(e3.time) };
              });
              this.reporterHook.emit("reporter/syncItemComplete", P.kSyncType4_24), this.options.onClearServerHistoryMsgs && this.options.onClearServerHistoryMsgs(r2), this.syncResult.clearServerHistoryMsgs = r2;
              var o2 = 0;
              a(r2).call(r2, function(e3) {
                e3.time > o2 && (o2 = e3.time);
              }), t2.enable && t2.updateTimetag("sessionHistoryMsgsDelete", o2);
            }
          }
        }, C.syncDeleteMsgSelf = function(e2) {
          var t2 = this, n2 = this.db, r2 = e2.content.deletedMsgs;
          if (r2 && 0 !== r2.length) {
            var o2 = [];
            a(r2).call(r2, function(e3) {
              e3.scene = "1" === e3.scene ? "p2p" : "team", e3.deletedTime = +e3.deletedTime, e3.time = +e3.time, o2.push(t2.deleteLocalMsg(e3));
            }), t2.options.onDeleteMsgSelf(r2), l2.all(o2).then(function() {
              var e3 = h(r2).call(r2, -1)[0].deletedTime;
              if (!(t2.timetags.deleteMsgSelf >= e3))
                return t2.timetags.deleteMsgSelf = e3, n2.enable ? n2.updateDeleteMsgSelf(e3) : void 0;
            }).catch(function(e3) {
              t2.logger.error("syncDeleteMsgSelf error", e3);
            });
          }
        }, C.deleteLocalMsg = function() {
          var e2 = o(r.mark(function e3(t2, n2) {
            var o2, s2, i2, a2, c2, u2, l3, m2, p2, d2, f3, g2;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    if (t2) {
                      e4.next = 2;
                      break;
                    }
                    return e4.abrupt("return");
                  case 2:
                    if (i2 = (s2 = this).db, a2 = (n2 = n2 || {}).cbUpdateSession || y(o2 = s2.updateSessionInDbWithNotify).call(o2, s2), this.revokeMsgUniqueCheck(t2 && t2.idClient), c2 = t2.sessionId || t2.scene + "-" + this.message.Message.getMsgTarget(t2, this.account), u2 = false, l3 = s2.getSessionInCache(c2), m2 = true, "notification" !== t2.type) {
                      e4.next = 20;
                      break;
                    }
                    e4.prev = 12, m2 = s2.options.shouldCountNotifyUnread(t2), e4.next = 20;
                    break;
                  case 16:
                    throw e4.prev = 16, e4.t0 = e4.catch(12), s2.logger.error("userOption:shouldCountNotifyUnread function error", e4.t0), e4.t0;
                  case 20:
                    if (s2.options.rollbackDelMsgUnread && l3 && (p2 = l3.ack || 0, m2 && l3 && p2 < t2.time && t2.from !== s2.account && l3.unread && (s2.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: unread", l3.id, l3.unread), l3.unread = l3.unread - 1, u2 = true)), l3 && l3.lastMsg && l3.lastMsg.idClient == t2.idClient && (s2.logger.info("msgDelete::deleteLocalMsg:cache.getSessions: lastMsg", l3.id, l3.unread), l3.lastMsg = null, u2 = true), !i2.enable) {
                      e4.next = 49;
                      break;
                    }
                    return d2 = null, e4.next = 26, i2.getMsgByIdClient(t2.idClient);
                  case 26:
                    return e4.sent || (s2.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg no find in DB", t2), t2), s2.logger.info("msgDelete::deleteLocalMsg::db.deleteMsg ", t2.idClient), e4.next = 31, i2.deleteMsg(t2.idClient);
                  case 31:
                    if (!l3 || null !== l3.lastMsg) {
                      e4.next = 36;
                      break;
                    }
                    return e4.next = 34, i2.getMsgs({ sessionId: c2, limit: 1 });
                  case 34:
                    (f3 = e4.sent) && f3[0] && (d2 = f3[0]);
                  case 36:
                    if (l3 || !s2.options.rollbackDelMsgUnread) {
                      e4.next = 46;
                      break;
                    }
                    return s2.logger.info("msgDelete::deleteLocalMsg::Can not find session in cache,will find in DB", c2), e4.next = 40, i2.getSession(c2);
                  case 40:
                    if (g2 = e4.sent) {
                      e4.next = 43;
                      break;
                    }
                    return e4.abrupt("return");
                  case 43:
                    p2 = (l3 = g2).ack || 0, m2 && l3 && p2 < t2.time && "in" === t2.flow && l3.unread && (s2.logger.info("msgDelete::deleteLocalMsg:db.getSessions: unread", g2.id, g2.unread), l3.unread = l3.unread - 1, u2 = true);
                  case 46:
                    if (l3 && null === l3.lastMsg && d2 && (s2.logger.info("msgDelete::deleteLocalMsg:db.getSessions: lastMsg", c2, d2), l3.lastMsg = d2 || null, u2 = true), !u2) {
                      e4.next = 49;
                      break;
                    }
                    return e4.abrupt("return", a2(l3));
                  case 49:
                    if (i2.enable || !u2) {
                      e4.next = 52;
                      break;
                    }
                    return s2.onUpdateSession(l3), e4.abrupt("return");
                  case 52:
                  case "end":
                    return e4.stop();
                }
            }, e3, this, [[12, 16]]);
          }));
          return function(t2, n2) {
            return e2.apply(this, arguments);
          };
        }(), C.deleteLocalMsgs = function(e2) {
          var t2 = this, n2 = t2.db;
          return new l2(function(r2, o2) {
            if (function(r3) {
              var o3 = t2.getSessionInCache(e2.sessionId);
              if (o3 && e2.updateSession) {
                var s2 = o3.lastMsg;
                s2 && (!e2.start && !e2.end || s2.time > e2.start && s2.time < e2.end) && (o3.lastMsg = null, t2.logger.log("deleteLocalMsgs::delete cacheSession lastMsg done, options is", e2), n2.enable || (t2.onUpdateSession(o3), r3()));
              }
            }(r2), n2.enable)
              return n2.deleteMsgsBySessionId(e2).then(function() {
                e2.updateSession && t2.checkAndUpdateLocalSessionByMsg(e2.sessionId), r2();
              }, function(e3) {
                return o2(e3);
              });
          });
        }, C.deleteLocalMsgsByTime = function() {
          var e2 = o(r.mark(function e3(t2) {
            var n2, o2, s2, i2, a2, c2, u2, m2, p2, d2, f3, g2, h2, y2;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    return o2 = (n2 = this).db, e4.next = 4, o2.getDeletedMsgsCountByTime(t2);
                  case 4:
                    return s2 = e4.sent, i2 = 0, a2 = [], e4.next = 9, o2.deleteMsgsByTime(t2);
                  case 9:
                    return t2.deletedone && t2.deletedone({ deletedMsgCount: s2 }), e4.next = 12, o2.getAllSessions();
                  case 12:
                    c2 = e4.sent, u2 = k(c2), e4.prev = 14, u2.s();
                  case 16:
                    if ((m2 = u2.n()).done) {
                      e4.next = 47;
                      break;
                    }
                    return p2 = m2.value, d2 = p2.id, f3 = false, e4.next = 22, o2.getSession(d2);
                  case 22:
                    if (g2 = e4.sent) {
                      e4.next = 25;
                      break;
                    }
                    return e4.abrupt("continue", 45);
                  case 25:
                    return e4.next = 27, o2.getMsgCountAfterAck({ shouldCountNotifyUnread: n2.options.shouldCountNotifyUnread, sessionId: d2, ack: g2.ack || 0 });
                  case 27:
                    if (h2 = e4.sent, g2.unread !== h2 && (g2.unread = h2, f3 = true), !(g2.lastMsg && g2.lastMsg.time > t2.start && g2.lastMsg.time < t2.end)) {
                      e4.next = 39;
                      break;
                    }
                    if (0 !== t2.start) {
                      e4.next = 34;
                      break;
                    }
                    g2.lastMsg = null, e4.next = 38;
                    break;
                  case 34:
                    return e4.next = 36, o2.getMsgs({ sessionId: d2, limit: 1 });
                  case 36:
                    y2 = e4.sent, g2.lastMsg = y2 && y2[0] ? y2[0] : null;
                  case 38:
                    f3 = true;
                  case 39:
                    if (!f3) {
                      e4.next = 45;
                      break;
                    }
                    return e4.next = 42, o2.updateSession(g2);
                  case 42:
                    n2.sessionSet[d2] && a2.push(g2), i2++;
                  case 45:
                    e4.next = 16;
                    break;
                  case 47:
                    e4.next = 52;
                    break;
                  case 49:
                    e4.prev = 49, e4.t0 = e4.catch(14), u2.e(e4.t0);
                  case 52:
                    return e4.prev = 52, u2.f(), e4.finish(52);
                  case 55:
                    return n2.onUpdateSessions(a2), e4.abrupt("return", l2.resolve({ deletedMsgCount: s2, sessionUpdateCount: i2 }));
                  case 57:
                  case "end":
                    return e4.stop();
                }
            }, e3, this, [[14, 49, 52, 55]]);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }();
      }, function(e, t, n) {
        var r = n(71), o = n(9), s = n(10), i = n(6), a = n(3), c = n(24), u = n(16), l2 = n(2), m = n(35).fn, p = n(0), d = n(153);
        m.splitSysMsgs = function(e2, t2) {
          for (var n2, o2 = e2.length - 1; o2 >= 0; o2--)
            n2 = e2[o2], d.isCustom(n2) && (r(e2).call(e2, o2, 1), t2.push(n2));
        }, m.onOfflineSysMsgs = function(e2, t2) {
          var n2, r2 = this, c2 = o(n2 = e2.content.sysMsgs).call(n2, function(e3) {
            return e3 = s(d).call(d, e3), t2 && (e3.filter = true), e3;
          });
          c2 = s(c2).call(c2), r2.markSysMsgRead(c2);
          var u2 = [];
          r2.splitSysMsgs(c2, u2);
          var l3, m2 = t2 ? "offlineFilterSysMsgs" : "offlineSysMsgs", p2 = t2 ? "offlineFilterCustomSysMsgs" : "offlineCustomSysMsgs";
          if (c2.length) {
            var f2 = r2.putSysMsg(c2, "offlineSysMsgs").then(function(e3) {
              var t3;
              (c2 = e3).length && (r2.logger.info("sysmsg::onOfflineSysMsgs: ", m2, c2.length, c2 && o(c2).call(c2, function(e4) {
                return e4.idServer;
              })), r2.syncResult[m2] = r2.syncResult[m2] || [], r2.syncResult[m2] = i(t3 = r2.syncResult[m2]).call(t3, c2));
            }).catch(function(e3) {
              return r2.logger.error("sysMsg::onOfflineSysMsgs: ", e3), a.reject(e3);
            });
            f2.cmd = "sysMsgs", r2.syncPromiseArray.push(f2);
          }
          u2.length && (r2.logger.info("sysmsg::onOfflineSysMsgs: ", p2, o(u2).call(u2, function(e3) {
            return e3.idServer;
          })), r2.syncResult[p2] = r2.syncResult[p2] || [], r2.syncResult[p2] = i(l3 = r2.syncResult[p2]).call(l3, u2));
        }, m.onSendSysMsg = function(e2, t2) {
          var n2 = e2.obj || {};
          n2 ? (this.completeSysMsg(n2), e2.error ? n2.status = "fail" : n2.status = "success", n2 = s(d).call(d, n2), t2 && (e2.obj.filter = true), e2.obj = n2) : this.logger.warn("onSendSysMsg::no obj");
        }, m.completeSysMsg = function(e2) {
          return e2.from = this.account, e2;
        }, m.onSysMsg = function(e2, t2) {
          var n2 = s(d).call(d, e2.content.sysMsg);
          t2 && (n2.filter = true), this.markSysMsgRead(n2), d.isCustom(n2) ? (this.logger.info("sysmsg::onSysMsg: on customSysMsg"), this.options.oncustomsysmsg(n2)) : this.syncing ? (this.logger.info("sysmsg::onSysMsg:is in syncing ..."), this.unhandledSysMsgs.push(n2)) : this.handleSysMsg(n2);
        }, m.handleSysMsg = function(e2) {
          var t2 = this, n2 = e2.type, r2 = e2.from, o2 = e2.serverex;
          t2.sysMsgPromise = t2.sysMsgPromise.then(function() {
            return t2.putSysMsg(e2, "onSysMsg");
          }).then(function(t3) {
            e2 = t3[0];
          }).then(function() {
            if (e2) {
              var s2, i2 = a.resolve();
              switch (n2) {
                case "addFriend":
                  s2 = { type: "addFriend", account: r2 }, o2 && (s2.serverex = o2), i2 = t2.onFriendRequest(s2);
                  break;
                case "passFriendApply":
                  s2 = { type: "passFriendApply", account: r2 }, i2 = t2.onFriendRequest(s2);
                  break;
                case "deleteFriend":
                  i2 = t2.onDeleteFriend({ account: r2 });
              }
              return s2 && s2.friend && (e2.friend = s2.friend), i2;
            }
          }).then(function() {
            e2 && (t2.logger.info("sysmsg::handleSysMsg: ", n2, p.pickAsString(e2, ["idServer", "deletedIdClient", "deletedIdServer"])), c(function() {
              t2.options.onsysmsg(e2);
            }, 0));
          });
        }, m.putSysMsg = function(e2, t2) {
          if (p.isArray(e2) || (e2 = [e2]), u(e2[0]))
            return a.resolve(e2);
          var n2 = this, r2 = n2.db, o2 = r2.enable, s2 = a.resolve(), i2 = [];
          return (s2 = (s2 = s2.then(function() {
            return o2 ? r2.putSysMsg(e2) : e2;
          }).then(function(t3) {
            var r3 = [];
            l2(e2).call(e2, function(e3) {
              n2.checkSysMsgUnique(e3) && r3.push(e3);
            }), e2 = r3, i2 = o2 ? t3 : e2;
          })).then(function() {
            return n2.getSysMsgUnread().then(function(r3) {
              return i2.length || ((i2 = e2).backward = true), n2.updateSysMsgUnread(i2, r3, 1).then(function(e3) {
                "offlineSysMsgs" === t2 && (n2.syncResult.sysMsgUnread = e3), "onSysMsg" === t2 && n2.onUpdateSysMsgUnread(e3);
              });
            });
          })).then(function() {
            return e2;
          });
        }, m.checkSysMsgUnique = p.genCheckUniqueFunc("idServer"), m.getSysMsgUnread = function() {
          var e2 = this, t2 = e2.db;
          return new a(function(n2) {
            t2.enable ? t2.getSysMsgUnread().then(function(e3) {
              n2(e3);
            }, function() {
              n2(e2.sysMsgUnread);
            }) : n2(e2.sysMsgUnread);
          });
        }, m.updateSysMsgUnread = function(e2, t2, n2) {
          if (p.isArray(e2) || (e2 = [e2]), !e2.length)
            return a.resolve(t2);
          t2 = t2 || {};
          var r2, o2 = this.db;
          return l2(e2).call(e2, function(e3) {
            (n2 > 0 && !e3.read || n2 < 0 && e3.read) && (r2 = e3.type, t2[r2] = (t2[r2] || 0) + n2);
          }), t2 = d.completeUnread(t2), this.sysMsgUnread = t2, o2.enable && !e2.backward ? o2.updateSysMsgUnread(t2) : a.resolve(t2);
        }, m.reduceSysMsgUnread = function(e2) {
          var t2 = this;
          return t2.getSysMsgUnread().then(function(n2) {
            return t2.updateSysMsgUnread(e2, n2, -1);
          }).then(function(e3) {
            t2.onUpdateSysMsgUnread(e3);
          });
        }, m.onUpdateSysMsgUnread = function(e2) {
          var t2 = this;
          c(function() {
            t2.logger.info("sysmsg::onUpdateSysMsgUnread:", e2), t2.options.onupdatesysmsgunread(e2);
          }, 0);
        }, m.updateSysMsg = function(e2) {
          var t2 = this, n2 = t2.db;
          (n2.enable ? n2.updateSysMsg(e2) : a.resolve(e2)).then(function(e3) {
            t2.onUpdateSysMsg(e3);
          });
        }, m.onUpdateSysMsg = function(e2) {
          var t2 = this;
          c(function() {
            p.isArray(e2) || (e2 = [e2]), l2(e2).call(e2, function(e3) {
              t2.logger.info("sysmsg::onUpdateSysMsg:", e3.idServer), t2.options.onupdatesysmsg(e3);
            });
          }, 0);
        }, m.processUnsettledSysMsgs = function() {
          var e2, t2, n2 = this;
          l2(e2 = n2.unhandledSysMsgs).call(e2, function(e3) {
            n2.handleSysMsg(e3);
          }), l2(t2 = n2.unhandledSysMsgsForDeletedMsgs).call(t2, function(e3) {
            n2.onMsgDeleted(e3.packet, e3.isSuperTeam);
          }), n2.resetUnsettledSysMsgs();
        };
      }, function(e, t, n) {
        var r = n(759), o = n(51), s = n(2), i = n(7), a = n(15), c = n(10), u = n(3), l2 = n(9), m = n(90), p = n(16), d = n(37), f2 = n(4), g = n(6), h = n(52), y = n(53), v = n(54), b = n(55), T = n(43);
        function S(e2, t2) {
          var n2 = f2(e2);
          if (h) {
            var r2 = h(e2);
            t2 && (r2 = p(r2).call(r2, function(t3) {
              return y(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        function M(e2) {
          for (var t2 = 1; t2 < arguments.length; t2++) {
            var n2, r2, i2 = null != arguments[t2] ? arguments[t2] : {};
            t2 % 2 ? s(n2 = S(Object(i2), true)).call(n2, function(t3) {
              o(e2, t3, i2[t3]);
            }) : v ? b(e2, v(i2)) : s(r2 = S(Object(i2))).call(r2, function(t3) {
              T(e2, t3, y(i2, t3));
            });
          }
          return e2;
        }
        var k = n(35).fn, x = n(0), C = n(154), I = n(41), w = n(153);
        k.processSession = function(e2) {
          if (!e2.error)
            switch (e2.cmd) {
              case "getServerSessions":
                this.onGetServerSessions(e2);
                break;
              case "getServerSession":
                this.onGetServerSession(e2);
                break;
              case "updateServerSession":
                this.onUpdateServerSession(e2);
            }
        }, k.onGetServerSessions = function(e2) {
          var t2 = this, n2 = e2.content && e2.content.sessionReqTag, r2 = e2.content && e2.content.sessionList, o2 = [];
          s(r2).call(r2, function(e3) {
            var n3, r3;
            (e3.id = e3.id.split("|").join("-"), 0 === i(n3 = e3.id).call(n3, "super_team")) && (e3.id = "superTeam" + a(r3 = e3.id).call(r3, 10));
            if (e3.updateTime = +e3.updateTime, e3.lastMsg) {
              var s2 = "1" === e3.lastMsgType ? "sysMsg" : "msg";
              o2.push(t2.parser.unserialize(JSON.parse(e3.lastMsg), s2).then(function(n4) {
                var r4;
                e3.lastMsg = "msg" === s2 ? c(r4 = t2.message).call(r4, n4) : c(w).call(w, n4);
              }));
            }
          }), e2.promise = u.all(o2).then(function() {
            e2.obj = { sessionList: r2, hasMore: "1" === n2.hasMore }, n2.minTimestamp && (e2.obj.minTimestamp = +n2.minTimestamp);
          });
        }, k.onGetServerSession = function(e2) {
          var t2, n2 = this, r2 = e2.content && e2.content.session;
          if (r2) {
            var o2;
            if (r2.id = r2.id.split("|").join("-"), 0 === i(t2 = r2.id).call(t2, "super_team"))
              r2.id = "superTeam" + a(o2 = r2.id).call(o2, 10);
            if (r2.updateTime = +r2.updateTime, r2.lastMsg) {
              var s2 = e2.content.session && "1" === e2.content.session.lastMsgType ? "sysMsg" : "msg";
              e2.promise = n2.parser.unserialize(JSON.parse(r2.lastMsg), s2).then(function(t3) {
                var o3;
                r2.lastMsg = "msg" === s2 ? c(o3 = n2.message).call(o3, t3) : c(w).call(w, t3), e2.obj = r2;
              });
            } else
              e2.obj = r2;
          }
        }, k.onUpdateServerSession = function(e2) {
          e2.obj = {};
        }, k.onSyncUpdateServerSession = function(e2) {
          var t2, n2 = this, r2 = this, o2 = e2.content && e2.content.session;
          if (o2) {
            var s2;
            if (o2.id = o2.id.split("|").join("-"), 0 === i(t2 = o2.id).call(t2, "super_team"))
              o2.id = "superTeam" + a(s2 = o2.id).call(s2, 10);
            o2.updateTime = +o2.updateTime, o2.lastMsg ? r2.parser.unserialize(JSON.parse(o2.lastMsg), "msg").then(function(e3) {
              var t3;
              o2.lastMsg = c(t3 = r2.message).call(t3, e3), n2.options.onSyncUpdateServerSession(x.simpleClone(o2));
            }) : this.options.onSyncUpdateServerSession(x.simpleClone(o2));
          }
        }, k.mergeSession = function(e2) {
          e2 = x.copyWithNull(e2);
          var t2 = this.sessionSet, n2 = e2.id, r2 = t2[n2] || {}, o2 = false;
          return C.isComplete(e2) ? delete r2.isDeleted : r2.isDeleted && (o2 = true), t2[n2] = x.merge(r2, e2), e2 = o2 ? e2 : t2[n2], x.undef(e2.unread) && (e2.unread = 0), e2;
        }, k.mergeSessions = function(e2) {
          var t2 = this;
          return l2(e2 = e2 || []).call(e2, function(e3) {
            return t2.mergeSession(e3);
          });
        }, k.onDeleteSessions = function(e2) {
          var t2;
          e2.obj = l2(t2 = e2.obj.sessions).call(t2, function(e3) {
            return C.parse(e3);
          });
        }, k.onUpdateSession = function(e2) {
          if (e2) {
            if (e2 = this.mergeSession(e2), e2 = m(C).call(C, e2), C.isComplete(e2))
              return this.logger.info("session::onUpdateSession: ".concat(e2.id), e2.id, x.secureOutput("session", e2)), this.options.onupdatesessions ? this.options.onupdatesessions([e2]) : this.options.onupdatesession(e2), e2;
            this.logger.warn("session::onUpdateSession::session is not complete", x.secureOutput("session", e2));
          }
        }, k.onUpdateSessions = function(e2) {
          var t2 = this;
          if (e2) {
            e2 = t2.mergeSessions(e2), e2 = l2(e2).call(e2, function(e3) {
              return m(C).call(C, e3);
            });
            var n2 = p(e2).call(e2, function(e3) {
              return C.isComplete(e3);
            }), r2 = p(e2).call(e2, function(e3) {
              return !C.isComplete(e3);
            });
            if (r2 && r2.length > 0 && t2.logger.warn("session::onUpdateSessions::sessions is not complete", l2(r2).call(r2, function(e3) {
              return e3.id;
            }), x.secureOutput("session", r2)), 0 !== n2.length)
              return t2.logger.info("session::onUpdateSessions:", x.secureOutput("session", n2)), t2.options.onupdatesessions ? t2.options.onupdatesessions(n2) : s(n2).call(n2, function(e3) {
                t2.options.onupdatesession(e3);
              }), n2;
            t2.logger.warn("session::onUpdateSessions::completeSessions is empty");
          }
        }, k.setCurrSession = function(e2) {
          e2 = "" + e2, this.currSessionId = e2, this.logger.info("session::setCurrSession:", e2);
        }, k.resetSessionUnread = function(e2) {
          var t2 = e2.id;
          this.db.enable && this.db.updateSession({ id: t2, unread: 0 }), !this.options.autoMarkRead && this.sessionUnreadMsgs && this.sessionUnreadMsgs[t2] && (this.markMsgRead(this.sessionUnreadMsgs[t2], true), this.sessionUnreadMsgs[t2] = []), this.getSessionInCache(t2) ? this.onUpdateSession({ id: t2, unread: 0 }) : this.onUpdateSession(M(M({}, e2), {}, { unread: 0 }));
        }, k.resetSessionsUnread = function(e2) {
          var t2 = this, n2 = this.db;
          n2.enable && l2(e2).call(e2, function(e3) {
            n2.updateSession({ id: e3.id, unread: 0 });
          });
          var r2 = !this.options.autoMarkRead && this.sessionUnreadMsgs;
          e2 = l2(e2).call(e2, function(e3) {
            return r2 && t2.sessionUnreadMsgs[e3.id] && (t2.markMsgRead(t2.sessionUnreadMsgs[e3.id], true), t2.sessionUnreadMsgs[e3.id] = []), t2.getSessionInCache(e3.id) ? { id: e3.id, unread: 0 } : M(M({}, e3), {}, { unread: 0 });
          }), this.onUpdateSessions(e2);
        }, k.insertLocalSession = function(e2) {
          var t2 = this, n2 = t2.db, r2 = e2.scene + "-" + e2.to, o2 = t2.getSessionInCache(r2);
          return o2 && C.isComplete(o2) ? u.reject(I.sessionExist({ callFunc: "session::insertLocalSession", session: o2 })) : (n2.enable ? n2.getMsgs({ sessionId: r2, limit: 1 }) : u.resolve()).then(function(s2) {
            if (x.isArray(s2) && 1 === s2.length) {
              var i2 = s2[0];
              (o2 = C.genSessionByMsg(i2)).updateTime = i2.time;
            } else
              o2 = { id: r2, scene: e2.scene, to: e2.to, updateTime: +e2.updateTime || +/* @__PURE__ */ new Date(), lastMsg: null };
            return t2.onUpdateSession(o2), n2.enable ? n2.putSession(o2) : u.resolve(o2);
          });
        }, k.checkAndUpdateLocalSessionByMsg = function(e2) {
          var t2, n2 = this.db, o2 = this, i2 = this.options.syncSessionUnread && e2 !== this.currSessionId, a2 = n2.getMsgs({ sessionId: e2, limit: 1 }), c2 = n2.getSession(e2).then(function(r2) {
            if (r2)
              return t2 = d({}, r2), r2.ack = r2.ack || 0, i2 ? n2.getMsgs({ sessionId: e2, start: r2.ack }) : u.resolve();
            o2.logger.error("can't find session that sessionId = ".concat(e2));
          });
          return u.all([a2, c2]).then(function(i3) {
            var a3, c3, l3 = r(i3, 2), m2 = l3[0], p2 = l3[1], d2 = { id: e2 };
            if (!t2)
              return o2.logger.error("checkAndUpdateLocalSessionByMsg:can not find session", e2), u.resolve(200);
            if (a3 = t2 && !t2.lastMsg ? null : t2.lastMsg.idClient, m2 && m2[0] ? c3 = (m2 = m2[0]).idClient : (c3 = null, m2 = null), a3 !== c3 && (d2.lastMsg = m2), void 0 !== p2) {
              var g2 = 0;
              s(p2 = p2 || []).call(p2, function(e3) {
                var t3;
                try {
                  t3 = o2.options.shouldCountNotifyUnread(e3);
                } catch (e4) {
                  throw o2.logger.error("userOption:shouldCountNotifyUnread function error", e4), e4;
                }
                e3.isUnreadable && "in" === e3.flow && ("notification" !== e3.type || t3) && g2++;
              }), g2 !== t2.unread && (d2.unread = g2);
            }
            return f2(d2).length > 1 ? (o2.logger.info("session::checkAndUpdateLocalSessionByMsg::needUpdate newSession:", x.secureOutput("session", d2)), n2.updateSession(d2).then(function() {
              return o2.onUpdateSession(d2);
            })) : u.resolve(200);
          });
        }, k.syncSessionsWithMoreRoaming = function(e2) {
          var t2 = this, n2 = e2 && e2.content && e2.content.sessions;
          if (n2 && n2.length) {
            var r2 = { 0: "p2p", 1: "team", 5: "superTeam" };
            if (s(n2).call(n2, function(e3) {
              var n3, o3 = e3.to === t2.options.account ? e3.from : e3.to;
              e3.scene = r2[e3.scene], e3.id = g(n3 = "".concat(e3.scene, "-")).call(n3, o3), e3.time = +e3.time;
            }), this.db.enable) {
              var o2 = this.db.putSessionsWithMoreRoaming(n2);
              o2.cmd = "syncSessionsWithMoreRoaming", this.syncPromiseArray.push(o2);
            }
            this.syncing && this.syncResult ? this.syncResult.sessionsWithMoreRoaming = n2 : this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult");
          }
        }, k.syncStickTopSessions = function(e2) {
          var t2 = this, n2 = this.db, r2 = [], o2 = [], a2 = u.resolve(), c2 = e2.content.sessions || [];
          this.syncing && this.syncResult ? (s(c2).call(c2, function(e3) {
            var t3 = e3.id.split("|");
            "super_team" === t3[0] && (t3[0] = "superTeam"), e3.id = t3.join("-"), e3.scene = t3[0], e3.to = t3[1], e3.isTop = true, r2.push(t3.join("-")), delete e3.createTime, delete e3.updateTime, n2.enable && o2.push(n2.putSession(e3));
          }), n2.enable && (a2 = n2.updateTimetag("stickTopSessions", e2.content.timetag)), a2.then(function() {
            return n2.enable ? n2.getStickTopSessions() : [];
          }).then(function(a3) {
            if (e2.content.modify) {
              var c3 = [];
              s(a3).call(a3, function(e3) {
                i(r2).call(r2, e3.id) > -1 || (c3.push(e3.id), e3.isTop = false, e3.topCustom = "", o2.push(n2.putSession(e3)));
              });
            } else
              t2.syncResult.stickTopSessions = a3;
            return u.all(o2);
          }), this.syncResult.stickTopSessions = c2, a2.cmd = "syncStickTopSessions", this.syncPromiseArray.push(a2)) : this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult");
        }, k.getSessionInCache = function(e2, t2) {
          var n2 = this.sessionSet[e2];
          return !n2 || n2.isDeleted && !t2 ? void 0 : n2;
        }, k.deleteSessionInCache = function(e2, t2) {
          var n2 = this;
          x.isArray(e2) || (e2 = [e2]), t2 ? s(e2).call(e2, function(e3) {
            n2.sessionSet[e3] && (n2.sessionSet[e3].isDeleted = true);
          }) : s(e2).call(e2, function(e3) {
            return delete n2.sessionSet[e3];
          }), this.logger.info("sessions::deleteSessionInCache::delete session done", e2, t2);
        }, k.updateSessionInCache = function(e2) {
          return this.logger.info("session::updateSessionInCache: ".concat(e2.id), e2.id, e2), this.getSessionInCache(e2.id) ? e2 = this.mergeSession(e2) : (this.logger.info("session::updateSessionInCache: can not find session in cache ".concat(e2.id)), null);
        }, k.updateSessionInDbWithNotify = function(e2, t2) {
          var n2 = this;
          return new u(function(r2, o2) {
            var s2 = n2.db;
            if (n2.getSessionInCache(e2.id)) {
              var i2 = u.resolve(), a2 = x.filterObj(e2, "id lastMsg localCustom unread");
              s2.enable && (i2 = s2.updateSession(a2)), i2.then(function(e3) {
                return n2.onUpdateSession(e3, t2);
              }).then(r2, function(e3) {
                o2({ callFunc: "session::updateLocalSession", event: e3 });
              });
            } else
              o2(I.sessionNotExist({ sessionId: e2.id, callFunc: "session::updateLocalSession" }));
          });
        };
      }, function(e, t, n) {
        var r = n(750);
        e.exports = function(e2) {
          if (r(e2))
            return e2;
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(155), o = n(72);
        e.exports = function(e2, t2) {
          var n2 = null == e2 ? null : void 0 !== r && o(e2) || e2["@@iterator"];
          if (null != n2) {
            var s, i, a, c, u = [], l2 = true, m = false;
            try {
              if (a = (n2 = n2.call(e2)).next, 0 === t2) {
                if (Object(n2) !== n2)
                  return;
                l2 = false;
              } else
                for (; !(l2 = (s = a.call(n2)).done) && (u.push(s.value), u.length !== t2); l2 = true)
                  ;
            } catch (e3) {
              m = true, i = e3;
            } finally {
              try {
                if (!l2 && null != n2.return && (c = n2.return(), Object(c) !== c))
                  return;
              } finally {
                if (m)
                  throw i;
              }
            }
            return u;
          }
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t) {
        e.exports = function() {
          throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(2), o = n(4), s = n(6), i = n(37), a = n(35).fn, c = n(0);
        a.syncSessionAck = function(e2) {
          var t2, n2 = this;
          if (this.logger.info("syncSessionAck::", e2.content), n2.syncing && n2.syncResult) {
            n2.saveAck.p2pTeam = e2.content.timetag;
            var a2 = {};
            r(t2 = [[e2.content.p2p, "p2p"], [e2.content.team.m_map, "team"]]).call(t2, function(e3) {
              var t3, i2 = e3[0], c2 = e3[1];
              r(t3 = o(i2)).call(t3, function(e4) {
                var t4, r2;
                a2[s(t4 = "".concat(c2, "-")).call(t4, e4)] = i2[e4];
                var o2 = { id: s(r2 = "".concat(c2, "-")).call(r2, e4), ack: i2[e4] };
                n2.cacheSyncedSession(o2);
              });
            }), n2.syncResult.ackMap ? n2.syncResult.ackMap = i(n2.syncResult.ackMap, a2) : n2.syncResult.ackMap = a2;
          } else
            n2.logger.warn("syncSessionAck: not in syncing or no syncResult", n2.syncing, !!n2.syncResult);
        }, a.syncSuperTeamSessionAck = function(e2) {
          var t2, n2 = this;
          if (n2.syncResult) {
            n2.saveAck.superTeam = e2.content.timetag;
            var s2 = {}, a2 = e2.content.superTeam.m_map;
            r(t2 = o(a2)).call(t2, function(e3) {
              s2["superTeam-".concat(e3)] = a2[e3];
              var t3 = { id: "superTeam-".concat(e3), ack: a2[e3] };
              n2.cacheSyncedSession(t3);
            }), n2.syncResult.ackMap ? n2.syncResult.ackMap = i(n2.syncResult.ackMap, s2) : n2.syncResult.ackMap = s2;
          }
        }, a.onMarkSessionAck = function(e2) {
          e2.error || this.storeSessionAck(e2.obj);
        }, a.syncMarkSessionAck = function(e2) {
          this.storeSessionAck(e2.content, true);
        }, a.storeSessionAck = function(e2, t2) {
          var n2;
          if (this.options.syncSessionUnread && e2) {
            var r2;
            switch (e2.scene) {
              case 0:
                r2 = "p2p";
                break;
              case 1:
                r2 = "team";
                break;
              case void 0:
              default:
                r2 = "superTeam";
            }
            var o2 = s(n2 = "".concat(r2, "-")).call(n2, e2.to), i2 = e2.timetag;
            if (i2 <= ((this.getSessionInCache(o2) || {}).ack || 0))
              this.logger.warn("session::storeSessionAck: ack <= ackInMemory", i2);
            else {
              var a2 = { id: o2, ack: i2 };
              this.mergeSession(a2), this.logger.info("session::storeSessionAck:", c.secureOutput("session", a2)), this.markUnreadBySessionAck({ sessionId: o2, ack: a2.ack }, t2);
            }
          }
        }, a.markUnreadBySessionAck = function(e2, t2) {
          var n2 = e2.sessionId, r2 = e2.ack, o2 = this, s2 = o2.db;
          if (s2.enable)
            o2.pushMsgTask(function() {
              return s2.getMsgCountAfterAck({ shouldCountNotifyUnread: o2.options.shouldCountNotifyUnread, sessionId: n2, ack: r2 }).then(function(e3) {
                var i3 = { id: n2, unread: e3, ack: r2 };
                return o2.logger.info("session::markUnreadBySessionAck: db.getMsgCountAfterAck done", i3), o2.syncing ? o2.cacheSyncedSession(i3) : t2 && o2.onUpdateSession(i3), s2.updateSession(i3);
              }).catch(function(e3) {
                o2.logger.error("markUnreadBySessionAck::error", e3);
              });
            });
          else {
            var i2 = o2.getSessionInCache(n2);
            if (i2) {
              var a2 = i2.unreadMsgs;
              if (a2 && a2.length) {
                for (var c2 = 0, u = [], l2 = a2.length - 1; l2 >= 0; l2--) {
                  var m = a2[l2];
                  if (!(m.time > r2))
                    break;
                  c2++, u.push(m);
                }
                i2.unreadMsgs = u, i2.unread = c2, o2.logger.info("session::markUnreadBySessionAck: unread ".concat(c2)), o2.syncing ? o2.cacheSyncedSession(i2) : t2 && o2.onUpdateSession(i2);
              }
            }
          }
        };
      }, function(e, t, n) {
        var r = n(35).fn;
        r.processChatroom = function(e2) {
          switch (e2.cmd) {
            case "getChatroomAddress":
              this.onChatroomAddress(e2);
          }
        }, r.onChatroomAddress = function(e2) {
          e2.error || (e2.obj.address = e2.content.address);
        };
      }, function(e, t, n) {
        var r = n(35).fn;
        r.processQchat = function(e2) {
          switch (e2.cmd) {
            case "getQChatAddress":
              this.onQChatAddress(e2);
          }
        }, r.onQChatAddress = function(e2) {
          e2.error || (e2.obj.address = e2.content.address);
        };
      }, function(e, t, n) {
        n(35).fn.processFilter = function(e2) {
          switch (e2.cmd) {
            case "sendFilterMsg":
              this.onSendMsg(e2, true);
              break;
            case "filterMsg":
              this.onMsg(e2, true);
              break;
            case "filterSysMsg":
              this.onSysMsg(e2, true);
              break;
            case "sendFilterCustomSysMsg":
              this.onSendSysMsg(e2, true);
          }
        };
      }, function(e, t, n) {
        var r = n(9), o = n(45), s = n(35).fn, i = n(0), a = o.clientTypeMap;
        function c(e2) {
          e2 = e2 || {};
          var t2 = i.copy(e2);
          return t2.clientType && (t2.clientType = a[t2.clientType] || ""), t2.serverCustom && (t2.custom = JSON.parse(t2.serverCustom), "string" == typeof t2.custom[0] && (t2.custom = t2.custom[0]), delete t2.serverCustom), t2;
        }
        s.processEventService = function(e2) {
          var t2 = e2.content, n2 = e2.error, o2 = this.options || {};
          switch (n2 && (n2.callFunc = "events::processsEventService", this.onCustomError("事件服务解包失败", "EVENT_SERVICE_ERROR", n2)), e2.cmd) {
            case "pushEvent":
              if (i.isFunction(o2.onpushevents)) {
                var s2 = { msgEvents: [c(t2.msgEvent)] };
                o2.onpushevents(s2);
              }
              break;
            case "pushEvents":
              if (i.isFunction(o2.onpushevents)) {
                var a2 = t2.msgEvents;
                a2 = { msgEvents: r(a2).call(a2, function(e3) {
                  return c(e3);
                }) }, o2.onpushevents(a2);
              }
          }
        };
      }, function(e, t, n) {
        var r = n(35).fn, o = n(0);
        r.processProxyService = function(e2) {
          var t2 = e2.error;
          switch (t2 && (t2.callFunc = "events::processProxyService", this.onCustomError("proxyService", "EVENT_PROXY_SERVICE_ERROR", t2)), e2.cmd) {
            case "onProxyMsg":
              if (o.isFunction(this.options.onProxyMsg)) {
                var n2 = e2.content.proxyMsg || {};
                n2.time && (n2.time = +n2.time), this.options.onProxyMsg(n2);
              }
              break;
            case "httpProxy":
              e2.obj = e2.content && e2.content.proxyTag;
          }
        };
      }, function(e, t, n) {
        var r = n(10), o = n(9), s = n(0), i = function(e2) {
          this.account = e2.account;
        }, a = i.prototype, c = a.Message = n(76), u = a.TextMessage = n(835), l2 = a.FileMessage = n(205), m = a.GeoMessage = n(839), p = a.NotificationMessage = n(840), d = a.CustomMessage = n(841), f2 = a.TipMessage = n(842), g = a.RobotMessage = n(843), h = a.G2Message = n(844);
        a.validScenes = c.validScenes, a.validTypes = c.validTypes, a.sceneMap = c.sceneMap, a.sceneReverseMap = c.sceneReverseMap, a.reverse = function(e2) {
          var t2;
          switch (c.getType(e2)) {
            case "text":
              t2 = r(u).call(u, e2);
              break;
            case "image":
            case "audio":
            case "video":
            case "file":
              t2 = r(l2).call(l2, e2);
              break;
            case "geo":
              t2 = r(m).call(m, e2);
              break;
            case "notification":
              t2 = r(p).call(p, e2);
              break;
            case "custom":
              t2 = r(d).call(d, e2);
              break;
            case "tip":
              t2 = r(f2).call(f2, e2);
              break;
            case "g2":
              t2 = r(h).call(h, e2);
              break;
            case "robot":
              t2 = r(g).call(g, e2);
              break;
            default:
              t2 = r(c).call(c, e2);
          }
          return c.setExtra(t2, this.account), t2;
        }, a.reverseMsgs = function(e2, t2) {
          var n2, i2, a2 = this;
          return o(e2).call(e2, function(e3) {
            return e3 = r(a2).call(a2, e3), t2 && ((n2 = t2.modifyObj) && (e3 = s.merge(e3, n2)), i2 = t2.mapper, s.isFunction(i2) && (e3 = i2(e3))), e3;
          });
        }, e.exports = i;
      }, function(e, t, n) {
        var r = n(18), o = n(10), s = n(76), i = n(0);
        function a(e2) {
          i.verifyOptions(e2, "text", "msg::TextMessage"), e2.type = "text", s.call(this, e2);
        }
        a.prototype = r(s.prototype), a.reverse = function(e2) {
          return o(s).call(s, e2);
        }, e.exports = a;
      }, function(e, t, n) {
        var r = n(18), o = n(205);
        function s() {
        }
        s.prototype = r(o.prototype), s.verifyFile = function(e2, t2) {
          return true;
        }, e.exports = s;
      }, function(e, t, n) {
        var r = n(18), o = n(205);
        function s() {
        }
        s.prototype = r(o.prototype), s.verifyFile = function() {
        }, e.exports = s;
      }, function(e, t, n) {
        var r = n(18), o = n(205);
        function s() {
        }
        s.prototype = r(o.prototype), s.verifyFile = function() {
        }, e.exports = s;
      }, function(e, t, n) {
        var r = n(8), o = n(18), s = n(10), i = n(76), a = n(0);
        function c(e2) {
          e2.type = "geo", a.verifyOptions(e2, "geo", "msg::GeoMessage"), a.verifyOptions(e2.geo, "lng lat title", true, "geo.", "msg::GeoMessage"), a.verifyParamType("geo.lng", e2.geo.lng, "number", "msg::GeoMessage"), a.verifyParamType("geo.lat", e2.geo.lat, "number", "msg::GeoMessage"), a.verifyParamType("geo.title", e2.geo.title, "string", "msg::GeoMessage"), i.call(this, e2), this.attach = r(e2.geo);
        }
        c.prototype = o(i.prototype), c.reverse = function(e2) {
          var t2 = s(i).call(i, e2);
          return e2.attach = e2.attach ? "" + e2.attach : "", t2.geo = e2.attach ? JSON.parse(e2.attach) : {}, t2;
        }, e.exports = c;
      }, function(e, t, n) {
        var r = n(18), o = n(10), s = n(9), i = n(121), a = n(0).notundef, c = n(76), u = n(149).IM, l2 = n(194), m = n(204), p = { 0: "addTeamMembers", 1: "removeTeamMembers", 2: "leaveTeam", 3: "updateTeam", 4: "dismissTeam", 5: "passTeamApply", 6: "transferTeam", 7: "addTeamManagers", 8: "removeTeamManagers", 9: "acceptTeamInvite", 10: "updateTeamMute", 101: "netcallMiss", 102: "netcallBill", 103: "netcallReject", 401: "addSuperTeamMembers", 402: "removeSuperTeamMembers", 403: "leaveSuperTeam", 404: "updateSuperTeam", 405: "dismissSuperTeam", 406: "transferSuperTeam", 407: "addSuperTeamManagers", 408: "removeSuperTeamManagers", 409: "updateSuperTeamMembersMute", 410: "passSuperTeamApply", 411: "acceptSuperTeamInvite" };
        function d() {
        }
        d.prototype = r(c.prototype), d.reverse = function(e2) {
          var t2 = o(c).call(c, e2);
          if (e2.attach = e2.attach ? "" + e2.attach : "", e2.attach) {
            var n2 = JSON.parse(e2.attach);
            if (t2.attach = { type: p[n2.id] || n2.id }, a(n2.data)) {
              var r2, d2, f2 = n2.data;
              if (a(f2.tinfo) && (t2.attach.team = o(l2).call(l2, u.syncUnserialize(f2.tinfo, "team"), true)), a(f2.ids) && (t2.attach.accounts = f2.ids), a(f2.id) && (t2.attach.account = f2.id), a(f2.uinfos))
                t2.attach.users = s(r2 = f2.uinfos).call(r2, function(e3) {
                  return o(m).call(m, u.syncUnserialize(e3, "user"));
                });
              if (a(f2.mute) && (t2.attach.mute = 1 == +f2.mute), a(f2.attach) && (t2.attach.custom = f2.attach), a(f2.channel) && (t2.attach.channelId = f2.channel), a(f2.calltype) && (t2.attach.netcallType = f2.calltype), a(f2.duration) && (t2.attach.duration = f2.duration), a(f2.time) && (t2.attach.time = f2.time), a(f2.from) && (t2.attach.from = f2.from), a(f2.ext) && (t2.attach.ext = f2.ext), t2.attach.accounts && t2.attach.accounts.length <= 2 && t2.from === t2.to)
                i(d2 = t2.attach.accounts).call(d2, function(e3) {
                  if (e3 !== t2.to)
                    return t2.to = e3, true;
                });
            }
          } else
            t2.attach = {};
          return t2;
        }, e.exports = d;
      }, function(e, t, n) {
        var r = n(18), o = n(10), s = n(76), i = n(0);
        function a(e2) {
          i.verifyOptions(e2, "content", "msg::CustomMessage"), e2.type = "custom", s.call(this, e2), this.attach = e2.content;
        }
        a.prototype = r(s.prototype), a.reverse = function(e2) {
          var t2 = o(s).call(s, e2);
          return t2.content = e2.attach, t2;
        }, e.exports = a;
      }, function(e, t, n) {
        var r = n(18), o = n(10), s = n(76), i = n(0);
        function a(e2) {
          i.verifyOptions(e2, "tip", "msg::TipMessage"), e2.type = "tip", s.call(this, e2), this.body = e2.tip;
        }
        a.prototype = r(s.prototype), a.reverse = function(e2) {
          var t2 = o(s).call(s, e2);
          return t2.text = "", t2.tip = e2.body, e2.attach && (t2.attach = e2.attach), t2;
        }, e.exports = a;
      }, function(e, t, n) {
        var r = n(8), o = n(18), s = n(10), i = n(9), a = n(76), c = n(0), u = { welcome: "00", text: "01", link: "03" }, l2 = { "01": "text", "02": "image", "03": "answer", 11: "template" };
        function m(e2) {
          c.verifyOptions(e2, "content", "msg::RobotMessage"), c.undef(e2.robotAccid) && (e2.robotAccid = e2.to);
          var t2 = e2.content;
          switch (t2.type) {
            case "welcome":
              c.undef(e2.body) && (this.body = "欢迎消息");
              break;
            case "text":
              c.verifyOptions(t2, "content", "msg::RobotMessage"), c.undef(e2.body) && (this.body = t2.content);
              break;
            case "link":
              c.verifyOptions(t2, "target", "msg::RobotMessage");
          }
          t2.type && (t2.type = u[t2.type]), t2 = { param: t2, robotAccid: e2.robotAccid }, this.attach = r(t2), e2.type = "robot", a.call(this, e2);
        }
        m.prototype = o(a.prototype), m.reverse = function(e2) {
          var t2 = s(a).call(a, e2);
          if ("robot" === t2.type) {
            var n2 = JSON.parse(e2.attach);
            if (n2.param && (n2.param.type = l2[n2.param.type] || "unknown"), n2.robotMsg) {
              var r2 = (n2 = c.merge(n2, n2.robotMsg)).message;
              "bot" === n2.flag ? n2.message = i(r2).call(r2, function(e3) {
                return e3.type = l2[e3.type] || "unknown", e3;
              }) : n2.flag, delete n2.robotMsg;
            }
            t2.content = n2;
          }
          return t2;
        }, e.exports = m;
      }, function(e, t, n) {
        var r = n(8), o = n(18), s = n(10), i = n(76), a = n(0);
        function c(e2) {
          a.verifyOptions(e2, "attach", "msg::G2Message"), e2.type = "g2", i.call(this, e2), this.attach = r(e2.attach);
        }
        c.prototype = o(i.prototype), c.reverse = function(e2) {
          var t2 = s(i).call(i, e2);
          return e2.attach && (t2.attach = JSON.parse(e2.attach)), t2;
        }, e.exports = c;
      }, function(e, t, n) {
        var r = n(51), o = n(57), s = n(22), i = n(58), a = n(9), c = n(16), u = n(7), l2 = n(3), m = n(2), p = n(37), d = n(4), f2 = n(52), g = n(53), h = n(54), y = n(55), v = n(43);
        function b(e2, t2) {
          var n2 = d(e2);
          if (f2) {
            var r2 = f2(e2);
            t2 && (r2 = c(r2).call(r2, function(t3) {
              return g(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        function T(e2) {
          for (var t2 = 1; t2 < arguments.length; t2++) {
            var n2, o2, s2 = null != arguments[t2] ? arguments[t2] : {};
            t2 % 2 ? m(n2 = b(Object(s2), true)).call(n2, function(t3) {
              r(e2, t3, s2[t3]);
            }) : h ? y(e2, h(s2)) : m(o2 = b(Object(s2))).call(o2, function(t3) {
              v(e2, t3, g(s2, t3));
            });
          }
          return e2;
        }
        var S = n(40).fn, M = n(0), k = M.isArray, x = n(152);
        S.mergeObjArray = function(e2, t2, n2) {
          return e2 || (e2 = []), t2 ? (k(t2) || (t2 = [t2]), t2.length ? (n2 = n2 || {}, M.mergeObjArray(e2, t2, n2)) : e2) : e2;
        }, S.cutObjArray = function(e2, t2, n2) {
          return e2 && t2 ? (k(t2) || (t2 = [t2]), t2.length ? (n2 = n2 || {}, M.cutObjArray(e2, t2, n2)) : e2) : e2;
        }, S.mergeLoginPorts = function(e2, t2) {
          return this.mergeObjArray(e2, t2, { keyPath: "deviceId" });
        }, S.cutLoginPorts = function(e2, t2) {
          return this.cutObjArray(e2, t2, { keyPath: "deviceId", sortPath: "type" });
        }, S.mergeRelations = function(e2, t2) {
          return this.mergeObjArray(e2, t2, { keyPath: "account" });
        }, S.cutRelations = function(e2, t2) {
          return this.cutObjArray(e2, t2, { keyPath: "account" });
        }, S.findRelation = function(e2, t2) {
          return M.findObjInArray(e2, { keyPath: "account", value: t2 });
        }, S.mergeFriends = function(e2, t2) {
          return this.mergeObjArray(e2, t2, { keyPath: "account" });
        }, S.cutFriends = function(e2, t2) {
          return this.cutObjArray(e2, t2, { keyPath: "account" });
        }, S.cutFriendsByAccounts = function(e2, t2) {
          k(t2) || (t2 = [t2]);
          var n2 = a(t2).call(t2, function(e3) {
            return { account: e3 };
          });
          return this.cutFriends(e2, n2);
        }, S.findFriend = function(e2, t2) {
          return M.findObjInArray(e2, { keyPath: "account", value: t2 });
        }, S.mergeUsers = function(e2, t2) {
          return this.mergeObjArray(e2, t2, { keyPath: "account" });
        }, S.findUser = function(e2, t2) {
          return M.findObjInArray(e2, { keyPath: "account", value: t2 });
        }, S.mergeTeams = function(e2, t2) {
          return this.mergeObjArray(e2, t2, { keyPath: "teamId" });
        }, S.cutTeams = function(e2, t2) {
          return this.cutObjArray(e2, t2, { keyPath: "teamId" });
        }, S.findTeam = function(e2, t2) {
          return M.findObjInArray(e2, { keyPath: "teamId", value: t2 });
        }, S.assembleTeamOwner = x.assembleOwner, S.assembleTeamMembers = x.assembleMembers, S.genTeamMemberId = x.genId, S.mergeTeamMembers = function(e2, t2) {
          return this.mergeObjArray(e2, t2);
        }, S.cutTeamMembers = function(e2, t2) {
          return this.cutObjArray(e2, t2);
        }, S.cutTeamMembersByAccounts = function(e2, t2, n2) {
          k(n2) || (n2 = [n2]);
          var r2 = x.assembleMembers({ teamId: t2 }, n2);
          return this.cutTeamMembers(e2, r2);
        }, S.findTeamMember = function(e2, t2) {
          return M.findObjInArray(e2, { keyPath: "id", value: t2 });
        }, S.mergeSessions = function(e2, t2) {
          return this.mergeObjArray(e2, t2, { sortPath: "updateTime", desc: true });
        }, S.cutSessions = function(e2, t2) {
          return this.cutObjArray(e2, t2);
        }, S.cutSessionsByIds = function(e2, t2) {
          k(t2) || (t2 = [t2]);
          var n2 = a(t2).call(t2, function(e3) {
            return { id: e3 };
          });
          return this.cutSessions(e2, n2);
        }, S.findSession = function(e2, t2) {
          return M.findObjInArray(e2, { keyPath: "id", value: t2 });
        }, S.mergeMsgs = function(e2, t2) {
          return this.mergeObjArray(e2, t2, { keyPath: "idClient", sortPath: "time" });
        }, S.cutMsgs = function(e2, t2) {
          return this.cutObjArray(e2, t2, { keyPath: "idClient" });
        }, S.cutMsgsByIdClients = function(e2, t2) {
          k(t2) || (t2 = [t2]);
          var n2 = a(t2).call(t2, function(e3) {
            return { idClient: e3 };
          });
          return this.cutMsgs(e2, n2);
        }, S.findMsg = function(e2, t2) {
          return M.findObjInArray(e2, { keyPath: "idClient", value: t2 });
        }, S.mergeSysMsgs = function(e2, t2) {
          return this.mergeObjArray(e2, t2, { keyPath: "idServer", desc: true });
        }, S.cutSysMsgs = function(e2, t2) {
          return this.cutObjArray(e2, t2, { keyPath: "idServer" });
        }, S.cutSysMsgsByIdServers = function(e2, t2) {
          k(t2) || (t2 = [t2]);
          var n2 = a(t2).call(t2, function(e3) {
            return { idServer: e3 };
          });
          return this.cutSysMsgs(e2, n2);
        }, S.findSysMsg = function(e2, t2) {
          return M.findObjInArray(e2, { keyPath: "idServer", value: t2 });
        }, S.searchLocal = function(e2) {
          if (M.verifyOptions(e2, "keyword", "searchLocal"), this.db.enable) {
            var t2, n2 = this, r2 = this.db, f3 = e2.keyword + "", g2 = ["account", "nick", "alias"], h2 = ["id", "scene", "lastMsg.type", "lastMsg.text", "localCustom", "target.account", "target.nick", "target.alias", "target.name"], y2 = "", v2 = e2.keyPath;
            switch (v2 ? (y2 = (v2 = (v2 + "").split(".")).shift(), v2 = v2.join(".")) : y2 = "all", y2) {
              case "user":
                v2 && (g2 = c(g2).call(g2, function(e3) {
                  return e3 === v2 || 0 === u(e3).call(e3, v2 + ".");
                })), k2(g2).then(function(t3) {
                  e2.done(null, { sessions: [], users: t3 });
                });
                break;
              case "session":
                v2 && (h2 = c(h2).call(h2, function(e3) {
                  return e3 === v2 || 0 === u(e3).call(e3, v2 + ".");
                })), b2(h2, !v2 || u(v2).call(v2, "target") > -1).then(function(t3) {
                  e2.done(null, { sessions: t3, users: [] });
                });
                break;
              case "all":
                C().then(function() {
                  l2.all([b2(h2, true), k2(g2)]).then(function(t3) {
                    e2.done(null, { sessions: t3[0], users: t3[1] });
                  });
                });
                break;
              default:
                e2.done(null, { sessions: [], users: [], msg: 'keyPath must start with "user" or "session"' });
            }
          } else
            e2.done(null, { sessions: [], users: [], msg: "no db" });
          function b2(e3, t3) {
            return S2.apply(this, arguments);
          }
          function S2() {
            return (S2 = i(o.mark(function e3(t3, n3) {
              var s2;
              return o.wrap(function(e4) {
                for (; ; )
                  switch (e4.prev = e4.next) {
                    case 0:
                      return s2 = n3 ? [r2.getSessions(), C(), r2.getTeams(), r2.getSuperTeams()] : [r2.getSessions()], e4.abrupt("return", l2.all(s2).then(function(e5) {
                        var r3, o2 = e5[0] || [], s3 = { p2p: e5[1] || [], team: e5[2] || [], superTeam: e5[3] || [] }, i2 = {};
                        n3 && (m(r3 = d(s3)).call(r3, function(e6) {
                          var t4;
                          m(t4 = s3[e6]).call(t4, function(t5) {
                            var n4 = t5.teamId || t5.account;
                            i2[e6 + "-" + n4] = t5;
                          });
                        }), m(o2).call(o2, function(e6) {
                          e6.target = i2[e6.id];
                        }));
                        return w(t3, o2);
                      }));
                    case 2:
                    case "end":
                      return e4.stop();
                  }
              }, e3);
            }))).apply(this, arguments);
          }
          function k2(e3) {
            return x2.apply(this, arguments);
          }
          function x2() {
            return (x2 = i(o.mark(function e3(t3) {
              var n3;
              return o.wrap(function(e4) {
                for (; ; )
                  switch (e4.prev = e4.next) {
                    case 0:
                      return e4.next = 2, C();
                    case 2:
                      return n3 = e4.sent, e4.abrupt("return", w(t3, n3));
                    case 4:
                    case "end":
                      return e4.stop();
                  }
              }, e3);
            }))).apply(this, arguments);
          }
          function C() {
            return I.apply(this, arguments);
          }
          function I() {
            return (I = i(o.mark(function e3() {
              var r3, s2;
              return o.wrap(function(e4) {
                for (; ; )
                  switch (e4.prev = e4.next) {
                    case 0:
                      if (!t2) {
                        e4.next = 2;
                        break;
                      }
                      return e4.abrupt("return", t2);
                    case 2:
                      return e4.next = 4, n2.db.getFriends();
                    case 4:
                      if (e4.t0 = e4.sent, e4.t0) {
                        e4.next = 7;
                        break;
                      }
                      e4.t0 = [];
                    case 7:
                      return r3 = e4.t0, s2 = n2.protocol.userSet || {}, t2 = a(r3).call(r3, function(e5) {
                        return T(T({}, e5), s2[e5.account]);
                      }), e4.abrupt("return", t2);
                    case 11:
                    case "end":
                      return e4.stop();
                  }
              }, e3);
            }))).apply(this, arguments);
          }
          function w(e3, t3) {
            var n3 = [];
            return m(t3).call(t3, function(t4) {
              for (var r3 = 0; r3 < e3.length; r3++) {
                var o2 = _(t4, e3[r3].split("."));
                if (o2 && u(o2).call(o2, f3) > -1) {
                  n3.push(p({}, t4));
                  break;
                }
              }
            }), n3;
          }
          function _(e3, t3) {
            if ("object" === s(e3) && e3)
              return 1 === t3.length ? e3[t3[0]] : _(e3[t3.shift()], t3);
          }
        };
      }, function(e, t, n) {
        var r = n(15), o = n(40).fn, s = n(0), i = n(25).reportAPI;
        o.kick = function(e2) {
          var t2;
          (e2 = e2 || {}).done = i({ instance: this, className: "NIMFn", funcName: "kick", done: e2.done }), s.verifyOptions(e2, "deviceIds", "link::kick"), this.processCallback(e2), this.sendCmd("kick", { deviceIds: r(t2 = e2.deviceIds).call(t2, 0) }, e2.callback);
        }, o.disconnect = function(e2) {
          (e2 = e2 || {}).done = i({ instance: this, className: "NIMFn", funcName: "disconnect", done: e2.done }), e2 = e2 || {}, this.protocol.disconnect(e2.done);
        };
      }, function(e, t, n) {
        var r = n(40).fn, o = n(0), s = n(25).reportAPI;
        r.markInBlacklist = function(e2) {
          (e2 = e2 || {}).done = s({ instance: this, className: "NIMFn", funcName: "markInBlacklist", done: e2.done }), o.verifyOptions(e2, "account isAdd", "relation::markInBlacklist"), o.verifyParamType("isAdd", e2.isAdd, "boolean", "relation::markInBlacklist"), this.processCallback(e2), this.sendCmd("markInBlacklist", { account: e2.account, isAdd: e2.isAdd }, e2.callback);
        }, r.addToBlacklist = function(e2) {
          return (e2 = e2 || {}).done = s({ instance: this, className: "NIMFn", funcName: "addToBlacklist", done: e2.done }), e2.isAdd = true, this.markInBlacklist(e2);
        }, r.removeFromBlacklist = function(e2) {
          return (e2 = e2 || {}).done = s({ instance: this, className: "NIMFn", funcName: "removeFromBlacklist", done: e2.done }), e2.isAdd = false, this.markInBlacklist(e2);
        }, r.markInMutelist = function(e2) {
          (e2 = e2 || {}).done = s({ instance: this, className: "NIMFn", funcName: "markInMutelist", done: e2.done }), o.verifyOptions(e2, "account", "relation::markInMutelist"), o.verifyParamType("isAdd", e2.isAdd, "boolean", "relation::markInMutelist"), this.processCallback(e2), this.sendCmd("markInMutelist", { account: e2.account, isAdd: e2.isAdd }, e2.callback);
        }, r.addToMutelist = function(e2) {
          return (e2 = e2 || {}).done = s({ instance: this, className: "NIMFn", funcName: "addToMutelist", done: e2.done }), e2.isAdd = true, this.markInMutelist(e2);
        }, r.removeFromMutelist = function(e2) {
          return (e2 = e2 || {}).done = s({ instance: this, className: "NIMFn", funcName: "removeFromMutelist", done: e2.done }), e2.isAdd = false, this.markInMutelist(e2);
        }, r.getRelations = function(e2) {
          (e2 = e2 || {}).done = s({ instance: this, className: "NIMFn", funcName: "getRelations", done: e2.done });
          var t2 = this, n2 = t2.db, r2 = 0;
          function i() {
            t2.sendCmd("getRelations", { timetag: r2, NOTSTORE: "timetag" }, e2.callback);
          }
          e2 = o.verifyOptions(e2), t2.processCallback(e2), n2.enable ? n2.getRelationsTimetag().then(function(e3) {
            r2 = e3, i();
          }, i) : i();
        };
      }, function(e, t, n) {
        var r = n(57), o = n(58), s = n(6), i = n(2), a = n(7), c = n(40).fn, u = n(0), l2 = u.objs2accounts, m = n(204), p = n(25).reportAPI;
        c.updateMyInfo = function(e2) {
          (e2 = e2 || {}).done = p({ instance: this, className: "NIMFn", funcName: "updateMyInfo", done: e2.done }), u.verifyOptions(e2), this.processCallback(e2), e2.user = new m(e2), delete e2.user.account, this.sendCmd("updateMyInfo", { user: e2.user, antispamTag: { antiSpamBusinessId: e2.antiSpamBusinessId }, single: true }, e2.callback);
        }, c.getMyInfo = function(e2) {
          (e2 = e2 || {}).done = p({ instance: this, className: "NIMFn", funcName: "getMyInfo", done: e2.done });
          return (e2 = e2 || {}).account = this.account, this.getUser(e2);
        }, c.getUser = function(e2) {
          (e2 = e2 || {}).done = p({ instance: this, className: "NIMFn", funcName: "getUser", done: e2.done });
          var t2, n2 = this, r2 = n2.db;
          function o2() {
            n2.sendCmd("getUsers", { accounts: [t2], single: true }, e2.callback);
          }
          u.verifyOptions(e2, "account", "user::getUser"), n2.processCallback(e2), e2.cbaop = function(e3, r3) {
            if (!e3)
              return r3 = r3[0] || null, n2.logger.info("api::getUser: cbaop ".concat(t2)), r3;
          }, t2 = e2.account, e2.sync ? o2() : r2.enable ? r2.getUser(t2).then(function(t3) {
            t3 ? e2.done(null, t3) : o2();
          }, o2) : o2();
        }, c.getUsers = function(e2) {
          (e2 = e2 || {}).done = p({ instance: this, className: "NIMFn", funcName: "getUsers", done: e2.done });
          var t2, n2 = this, r2 = n2.db, o2 = [];
          function c2() {
            n2.sendCmd("getUsers", { accounts: t2, single: true }, e2.callback);
          }
          u.verifyOptions(e2, "accounts", "user::getUsers"), u.verifyParamType("accounts", e2.accounts, "array", "user::getUsers"), n2.processCallback(e2), e2.cbaop = function(e3, r3) {
            if (!e3)
              return r3 = s(r3).call(r3, o2), n2.logger.info("api::getUsers: cbaop ".concat(t2)), r3;
          }, t2 = u.deduplicate(e2.accounts), u.verifyArrayMax("accounts", e2.accounts, 150, "user::getUsers"), e2.sync ? c2() : r2.enable ? r2.getUsers({ accountIds: t2 }).then(function(n3) {
            if (n3 && n3.length === t2.length)
              e2.done(null, n3);
            else {
              o2 = n3;
              var r3 = l2(n3), s2 = [];
              i(t2).call(t2, function(e3) {
                -1 === a(r3).call(r3, e3) && s2.push(e3);
              }), t2 = s2, c2();
            }
          }, c2) : c2();
        }, c.getUsersFromDB = function() {
          var e2 = o(r.mark(function e3(t2) {
            var n2, o2, s2;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    return o2 = (n2 = this).db, (t2 = t2 || {}).done = p({ instance: this, className: "NIMFn", funcName: "getUsersFromDB", done: t2.done }), u.validate({ accountIds: { type: "array", required: false } }, t2, "user::getUsersFromDB"), n2.processCallback(t2), e4.next = 8, o2.getUsers(t2);
                  case 8:
                    return s2 = e4.sent, t2.callback(null, s2), e4.abrupt("return", s2);
                  case 11:
                  case "end":
                    return e4.stop();
                }
            }, e3, this);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }();
      }, function(e, t, n) {
        var r = n(57), o = n(58), s = n(122), i = n(40).fn, a = n(0), c = a.notundef, u = n(755), l2 = n(25).reportAPI;
        i.friendRequest = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "NIMFn", funcName: "friendRequest", done: e2.done }), a.verifyOptions(e2, "type account", "friend::friendRequest"), a.verifyParamValid("type", e2.type, u.validTypes(), "friend::friendRequest"), this.processPs(e2), this.processCallback(e2);
          var t2 = { account: e2.account, type: u.getByteFromType(e2.type), ps: e2.ps };
          c(e2.idServer) && (t2.idServer = e2.idServer), this.sendCmd("friendRequest", t2, e2.callback);
        }, i.addFriend = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "NIMFn", funcName: "addFriend", done: e2.done }), e2.type = "addFriend", this.friendRequest(e2);
        }, i.applyFriend = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "NIMFn", funcName: "applyFriend", done: e2.done }), e2.type = "applyFriend", this.friendRequest(e2);
        }, i.passFriendApply = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "NIMFn", funcName: "passFriendApply", done: e2.done }), a.verifyOptions(e2, "idServer", "friend::passFriendApply"), e2.type = "passFriendApply", this.friendRequest(e2);
        }, i.rejectFriendApply = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "NIMFn", funcName: "rejectFriendApply", done: e2.done }), a.verifyOptions(e2, "idServer", "friend::rejectFriendApply"), e2.type = "rejectFriendApply", this.friendRequest(e2);
        }, i.deleteFriend = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "NIMFn", funcName: "deleteFriend", done: e2.done }), a.verifyOptions(e2, "account", "friend::deleteFriend");
          var t2 = true === e2.delAlias;
          this.processCallback(e2), this.sendCmd("deleteFriend", { account: e2.account, delFriendParams: { delAlias: t2 ? 1 : 0 } }, e2.callback);
        }, i.updateFriend = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "NIMFn", funcName: "updateFriend", done: e2.done }), this.processCallback(e2);
          var t2 = new u(e2);
          this.sendCmd("updateFriend", { friend: t2, single: true }, e2.callback);
        }, i.getFriends = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "NIMFn", funcName: "getFriends", done: e2.done });
          var t2 = this.db;
          a.validate({ timetag: { type: "number", required: false } }, e2, "friend::getFriends"), this.processCallback(e2), t2.enable ? t2.getFriends({ updateTime: e2.updateTime || 0 }).then(function(t3) {
            (t3 = s(t3).call(t3, function(e3, t4) {
              return e3.updateTime - t4.updateTime;
            })).invalid = [], e2.done(null, t3);
          }) : this.sendCmd("getFriends", { timetag: e2.updateTime || 0, NOTSTORE: "timetag" }, e2.callback);
        }, i.getFriendsFromDB = function() {
          var e2 = o(r.mark(function e3(t2) {
            var n2, o2, s2;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    return o2 = (n2 = this).db, (t2 = t2 || {}).done = l2({ instance: this, className: "NIMFn", funcName: "getFriendsFromDB", done: t2.done }), a.validate({ accountIds: { type: "array", required: false } }, t2, "friend::getFriendsFromDB"), n2.processCallback(t2), e4.next = 8, o2.getFriends(t2);
                  case 8:
                    return s2 = e4.sent, t2.callback(null, s2), e4.abrupt("return", s2);
                  case 11:
                  case "end":
                    return e4.stop();
                }
            }, e3, this);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), i.isMyFriend = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "NIMFn", funcName: "isMyFriend", done: e2.done });
          var t2 = this.db;
          a.validate({ account: { type: "string", allowEmpty: false, require: true } }, e2), this.processCallback(e2), t2.enable || e2.done(null, false), t2.getFriend(e2.account).then(function(t3) {
            t3 && true === t3.valid ? e2.done(null, true) : e2.done(null, false);
          });
        }, i.isUserInBlackList = function(e2) {
          (e2 = e2 || {}).done = l2({ instance: this, className: "NIMFn", funcName: "isUserInBlackList", done: e2.done });
          var t2 = this.db;
          a.validate({ account: { type: "string", allowEmpty: false, require: true } }, e2), this.processCallback(e2), t2.enable || e2.done(null, false), t2.getUserFromBlackList(e2.account).then(function(t3) {
            t3 && t3.account ? e2.done(null, true) : e2.done(null, false);
          });
        };
      }, function(e, t, n) {
        var r = n(40).fn, o = n(25).reportAPI;
        r.getRobots = function(e2) {
          (e2 = e2 || {}).done = o({ instance: this, className: "NIMFn", funcName: "getRobots", done: e2.done }), this.logger.warn("this api will be abandon"), (e2 = e2 || {}).type = "getRobots", this.processCallback(e2), this.sendCmd("sync", { sync: { robots: 0 } }, e2.callback);
        };
      }, function(e, t, n) {
        var r = n(57), o = n(58), s = n(15), i = n(9), a = n(16), c = n(3), u = n(8), l2 = n(40).fn, m = n(0), p = m.undef, d = n(194), f2 = n(152), g = n(25).reportAPI;
        l2.createTeam = function(e2) {
          var t2;
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "createTeam", done: e2.done }), m.verifyOptions(e2, "type name", "team::createTeam"), p(e2.accounts) ? e2.accounts = [] : m.verifyParamType("accounts", e2.accounts, "array", "team::createTeam"), e2.action = "create", this.processPs(e2), this.processCallback(e2), e2.team = new d(e2);
          var n2 = { team: e2.team, accounts: s(t2 = e2.accounts).call(t2, 0), ps: e2.ps, antispamTag: { antiSpamBusinessId: e2.antiSpamBusinessId } };
          this.sendCmd("createTeam", n2, e2.callback);
        }, l2.updateTeam = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "updateTeam", done: e2.done }), m.verifyOptions(e2, "teamId", "team::updateTeam"), e2.action = "update", this.processCallback(e2), e2.team = new d(e2), this.sendCmd("updateTeam", { team: e2.team, antispamTag: { antiSpamBusinessId: e2.antiSpamBusinessId }, single: true }, e2.callback);
        }, l2.addTeamMembers = function(e2) {
          var t2;
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "addTeamMembers", done: e2.done }), m.verifyOptions(e2, "teamId accounts", "team::addTeamMembers"), m.verifyParamType("accounts", e2.accounts, "array", "team::addTeamMembers"), this.processPs(e2), m.notexist(e2.custom) && (e2.custom = ""), this.processCallback(e2);
          var n2 = { teamId: e2.teamId, accounts: s(t2 = e2.accounts).call(t2, 0), ps: e2.ps, attach: e2.custom };
          this.sendCmd("addTeamMembers", n2, e2.callback);
        }, l2.removeTeamMembers = function(e2) {
          var t2;
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "removeTeamMembers", done: e2.done }), m.verifyOptions(e2, "teamId accounts", "team::removeTeamMembers"), m.verifyParamType("accounts", e2.accounts, "array", "team::removeTeamMembers"), this.processCallback(e2);
          var n2 = { teamId: e2.teamId, accounts: s(t2 = e2.accounts).call(t2, 0) };
          this.sendCmd("removeTeamMembers", n2, e2.callback);
        }, l2.acceptTeamInvite = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "acceptTeamInvite", done: e2.done }), m.verifyOptions(e2, "idServer teamId from", "team::acceptTeamInvite"), this.processCallback(e2);
          var t2 = { idServer: e2.idServer, teamId: e2.teamId, from: e2.from, type: "teamInvite" };
          this.sendCmd("acceptTeamInvite", t2, e2.callback);
        }, l2.rejectTeamInvite = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "rejectTeamInvite", done: e2.done }), m.verifyOptions(e2, "idServer teamId from", "team::rejectTeamInvite"), this.processPs(e2), this.processCallback(e2);
          var t2 = { idServer: e2.idServer, teamId: e2.teamId, from: e2.from, ps: e2.ps, type: "teamInvite" };
          this.sendCmd("rejectTeamInvite", t2, e2.callback);
        }, l2.applyTeam = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "applyTeam", done: e2.done }), m.verifyOptions(e2, "teamId", "team::applyTeam"), this.processPs(e2), this.processCallback(e2);
          var t2 = { teamId: e2.teamId, ps: e2.ps };
          this.sendCmd("applyTeam", t2, e2.callback);
        }, l2.passTeamApply = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "passTeamApply", done: e2.done }), m.verifyOptions(e2, "idServer teamId from", "team::passTeamApply"), this.processCallback(e2);
          var t2 = { idServer: e2.idServer, teamId: e2.teamId, from: e2.from, type: "applyTeam" };
          this.sendCmd("passTeamApply", t2, e2.callback);
        }, l2.rejectTeamApply = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "rejectTeamApply", done: e2.done }), m.verifyOptions(e2, "idServer teamId from", "team::rejectTeamApply"), this.processPs(e2), this.processCallback(e2);
          var t2 = { idServer: e2.idServer, teamId: e2.teamId, from: e2.from, ps: e2.ps, type: "applyTeam" };
          this.sendCmd("rejectTeamApply", t2, e2.callback);
        }, l2.addTeamManagers = function(e2) {
          var t2;
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "addTeamManagers", done: e2.done }), m.verifyOptions(e2, "teamId accounts", "team::addTeamManagers"), m.verifyParamType("accounts", e2.accounts, "array", "team::addTeamManagers"), this.processCallback(e2);
          var n2 = { teamId: e2.teamId, accounts: s(t2 = e2.accounts).call(t2, 0) };
          this.sendCmd("addTeamManagers", n2, e2.callback);
        }, l2.removeTeamManagers = function(e2) {
          var t2;
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "removeTeamManagers", done: e2.done }), m.verifyOptions(e2, "teamId accounts", "team::removeTeamManagers"), m.verifyParamType("accounts", e2.accounts, "array", "team::removeTeamManagers"), this.processCallback(e2);
          var n2 = { teamId: e2.teamId, accounts: s(t2 = e2.accounts).call(t2, 0) };
          this.sendCmd("removeTeamManagers", n2, e2.callback);
        }, l2.updateInfoInTeam = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "updateInfoInTeam", done: e2.done }), m.verifyOptions(e2, "teamId", "team::updateInfoInTeam"), this.processCallback(e2), this.sendCmd("updateInfoInTeam", { teamMember: new f2(e2), single: true }, e2.callback);
        }, l2.updateNickInTeam = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "updateNickInTeam", done: e2.done }), m.verifyOptions(e2, "teamId account", "team::updateNickInTeam"), this.processCallback(e2), this.sendCmd("updateNickInTeam", { teamMember: new f2(e2), single: true }, e2.callback);
        }, l2.updateMuteStateInTeam = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "updateMuteStateInTeam", done: e2.done });
          m.verifyOptions(e2, "teamId account mute", "team::updateMuteStateInTeam"), this.processCallback(e2), e2.mute = e2.mute ? 1 : 0, this.sendCmd("updateMuteStateInTeam", e2);
        }, l2.getMutedTeamMembers = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getMutedTeamMembers", done: e2.done });
          m.verifyOptions(e2, "teamId", "team::getMutedTeamMembers"), this.processCallback(e2), this.sendCmd("getMutedTeamMembers", e2);
        }, l2.leaveTeam = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "leaveTeam", done: e2.done }), m.verifyOptions(e2, "teamId", "team::leaveTeam"), this.processCallback(e2);
          var t2 = { teamId: e2.teamId };
          this.sendCmd("leaveTeam", t2, e2.callback);
        }, l2.transferTeam = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "transferTeam", done: e2.done }), m.verifyOptions(e2, "teamId account leave", "team::transferTeam"), m.verifyParamType("leave", e2.leave, "boolean", "team::transferTeam"), this.processCallback(e2);
          var t2 = { teamId: e2.teamId, account: e2.account, leave: e2.leave };
          this.sendCmd("transferTeam", t2, e2.callback);
        }, l2.dismissTeam = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "dismissTeam", done: e2.done }), m.verifyOptions(e2, "teamId", "team::dismissTeam"), this.processCallback(e2);
          var t2 = { teamId: e2.teamId };
          this.sendCmd("dismissTeam", t2, e2.callback);
        }, l2.getTeam = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getTeam", done: e2.done });
          var t2, n2 = this, r2 = n2.db;
          function o2() {
            n2.sendCmd("getTeam", { teamId: e2.teamId }, e2.callback);
          }
          m.verifyOptions(e2, "teamId", "team::getTeam"), n2.processCallback(e2), e2.cbaop = function(e3) {
            e3 || n2.logger.info("api::getTeam: cbaop ".concat(t2));
          }, t2 = e2.teamId, r2.enable && !e2.sync ? r2.getTeam(t2).then(function(r3) {
            r3 && r3.validToCurrentUser ? (n2.logger.log("api::getTeam: db.getTeam ".concat(t2)), e2.done(null, r3)) : o2();
          }, o2) : o2();
        }, l2.getTeams = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getTeams", done: e2.done });
          var t2 = this, n2 = t2.db, r2 = 0;
          function o2() {
            t2.sendCmd("getTeams", { timetag: r2, NOTSTORE: "timetag" }, e2.callback);
          }
          m.verifyOptions(e2), t2.processCallback(e2), n2.enable ? n2.getTeamsTimetag().then(function(e3) {
            r2 = e3, o2();
          }, o2) : o2();
        }, l2.getTeamsById = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getTeamsById", done: e2.done });
          m.verifyOptions(e2, "teamIds", "teams::getTeamsById"), this.processCallback(e2), this.sendCmd("getTeamsById", { teamIds: e2.teamIds }, e2.callback);
        }, l2.getTeamMembers = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getTeamMembers", done: e2.done });
          var t2 = this;
          m.verifyOptions(e2, "teamId", "team::getTeamMembers"), t2.processCallback(e2), t2.sendCmd("getTeamMembers", { teamId: e2.teamId, timetag: 0, NOTSTORE: "timetag" }, e2.callback);
        }, l2.getTeamMemberByTeamIdAndAccount = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getTeamMemberByTeamIdAndAccount", done: e2.done });
          var t2 = this;
          m.verifyParamType("teamId", e2.teamId, "numeric or numeric string", "team::getTeamMemberByTeamIdAndAccount"), m.verifyOptions(e2, "account", "team::getTeamMemberByTeamIdAndAccount"), t2.processCallback(e2), t2.sendCmd("getTeamMembers", { teamId: e2.teamId, timetag: 0, NOTSTORE: "timetag" }, function(t3, n2, r2) {
            var o2 = {};
            if (n2 && n2.members && n2.members.length) {
              for (var s2 = 0; s2 < n2.members.length; s2++)
                if (n2.members[s2].account === e2.account) {
                  o2[e2.account] = n2.members[s2];
                  break;
                }
            }
            e2.callback(t3, o2, r2);
          });
        }, l2.getTeamMemberInvitorAccid = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getTeamMemberInvitorAccid", done: e2.done });
          m.verifyParamType("teamId", e2.teamId, "numeric or numeric string", "team::getTeamMemberInvitorAccid"), p(e2.accounts) || (m.verifyParamType("accounts", e2.accounts, "array", "team::getTeamMemberInvitorAccid"), e2.accounts.length > 200 && m.onParamError("accounts 参数数组长度不能超过200", "team::getTeamMemberInvitorAccid"));
          var t2, n2 = { teamId: e2.teamId };
          e2.accounts.length && (n2.accounts = s(t2 = e2.accounts).call(t2, 0));
          this.processCallback(e2), this.sendCmd("getTeamMemberInvitorAccid", n2, function(t3, n3, r2) {
            e2.callback(t3, r2 && r2.accountsMap || {});
          });
        }, l2.notifyForNewTeamMsg = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "notifyForNewTeamMsg", done: e2.done });
          m.verifyOptions(e2, "teamIds", "team::notifyForNewTeamMsg"), this.protocol.notifyForNewTeamMsg(e2.teamIds).then(function(t2) {
            e2.done(t2.error || null, i(t2), t2.miss);
          }, function(t2) {
            e2.done(t2);
          });
        }, l2.getMyTeamMembers = function(e2) {
          g({ instance: this, className: "NIMFn", funcName: "getMyTeamMembers", done: e2.done, hasCallback: false });
          var t2 = e2.done;
          m.verifyOptions(e2, "teamIds", "team::getMyTeamMembers");
          var n2 = this.processCallbackPromise(e2);
          return this.sendCmd("getMyTeamMembers", e2), n2.then(function(e3) {
            return "function" == typeof t2 ? t2(null, e3) : e3;
          }).catch(function(e3) {
            if ("function" == typeof t2)
              return t2(e3);
            throw e3;
          });
        }, l2.getLocalTeams = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getLocalTeams", done: e2.done });
          var t2, n2 = this.db, r2 = [];
          function o2() {
            e2.teams = r2, e2.done(t2, e2);
          }
          m.verifyOptions(e2, "teamIds", "team::getLocalTeams"), m.verifyParamType("teamIds", e2.teamIds, "array", "team::getLocalTeams"), this.processCallback(e2), n2.enable ? n2.getTeamsByTeamIds(e2.teamIds).then(function(e3) {
            r2 = a(e3).call(e3, function(e4) {
              return !!e4;
            }), o2();
          }, function(e3) {
            t2 = e3, o2();
          }) : o2();
        }, l2.getTeamsFromDB = function() {
          var e2 = o(r.mark(function e3(t2) {
            var n2, o2, s2;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    return o2 = (n2 = this).db, (t2 = t2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getTeamsFromDB", done: t2.done }), m.validate({ teamIds: { type: "array", required: false } }, t2, "team::getTeamsFromDB"), n2.processCallback(t2), e4.next = 8, o2.getTeams(t2);
                  case 8:
                    return s2 = e4.sent, t2.callback(null, s2), e4.abrupt("return", s2);
                  case 11:
                  case "end":
                    return e4.stop();
                }
            }, e3, this);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), l2.getLocalTeamMembers = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getLocalTeamMembers", done: e2.done });
          var t2, n2 = this.db, r2 = [];
          function o2() {
            e2.members = r2, e2.done(t2, e2);
          }
          m.verifyOptions(e2, "teamId accounts", "team::getLocalTeamMembers"), m.verifyParamType("accounts", e2.accounts, "array", "team::getLocalTeamMembers"), this.processCallback(e2), n2.enable ? n2.getInvalidTeamMembers(e2.teamId, e2.accounts).then(function(e3) {
            r2 = a(e3).call(e3, function(e4) {
              return !!e4;
            }), o2();
          }, function(e3) {
            t2 = e3, o2();
          }) : o2();
        }, l2.getTeamMembersFromDB = function() {
          var e2 = o(r.mark(function e3(t2) {
            var n2, o2, s2;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    return o2 = (n2 = this).db, (t2 = t2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getTeamMembersFromDB", done: t2.done }), m.validate({ teamIds: { type: "array", required: false }, accountIds: { type: "array", required: false } }, t2, "team::getTeamMembersFromDB"), n2.processCallback(t2), e4.next = 8, o2.getTeamMembers(t2);
                  case 8:
                    return s2 = e4.sent, t2.callback(null, s2), e4.abrupt("return", s2);
                  case 11:
                  case "end":
                    return e4.stop();
                }
            }, e3, this);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), l2.deleteLocalTeam = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "deleteLocalTeam", done: e2.done });
          var t2, n2 = this.db;
          function r2() {
            e2.done(t2, e2);
          }
          m.verifyOptions(e2, "teamId", "team::deleteLocalTeam"), this.processCallback(e2), n2.enable ? n2.deleteTeam(e2.teamId).then(function() {
            r2();
          }, function(e3) {
            t2 = e3, r2();
          }) : r2();
        }, l2.muteTeamAll = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "muteTeamAll", done: e2.done });
          m.verifyOptions(e2, "teamId mute", "team::muteTeamAll"), e2.mute = e2.mute ? 1 : 0, this.processCallback(e2), this.sendCmd("muteTeamAll", e2);
        }, l2.sendTeamMsgReceipt = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "sendTeamMsgReceipt", done: e2.done });
          m.verifyOptions(e2, "teamMsgReceipts", "team::sendTeamMsgReceipt"), e2.teamMsgReceipts.length > 50 ? this.logger.error("team::sendTeamMsgReceipt：teamMsgReceipts length over 50") : (this.processCallback(e2), this.sendCmd("sendTeamMsgReceipt", e2));
        }, l2.getTeamMsgReads = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getTeamMsgReads", done: e2.done });
          m.verifyOptions(e2, "teamMsgReceipts", "team::getTeamMsgReads"), this.processCallback(e2), this.sendCmd("getTeamMsgReads", e2);
        }, l2.getTeamMsgReadAccounts = function(e2) {
          var t2 = this;
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getTeamMsgReadAccounts", done: e2.done });
          var n2, r2 = this;
          m.verifyOptions(e2, "teamMsgReceipt", "team::getTeamMsgReadAccounts"), e2.callback = function(t3, r3, o2) {
            t3 && n2 ? (r3 = r3 || { teamMsgReceipt: e2.teamMsgReceipt }, e2.done(t3, r3, { teamMsgReceipt: e2.teamMsgReceipt, unreadAccounts: n2.unreadAccounts, readAccounts: n2.readAccounts })) : e2.done(t3, r3, o2);
          }, this.db.enable && e2.teamMsgReceipt.idClient ? this.db.getMsgReadDetail(e2.teamMsgReceipt.idClient).then(function(t3) {
            if (n2 = t3, !t3)
              return c.reject("no record");
            if (t3.unreadAccounts && t3.unreadAccounts.length > 0)
              return c.reject("unreadAccounts.length > 0");
            var o2 = { teamMsgReceipt: e2.teamMsgReceipt, unreadAccounts: t3.unreadAccounts, readAccounts: t3.readAccounts };
            r2.logger.info("getTeamMsgReadAccounts from db"), e2.done(null, { teamMsgReceipt: e2.teamMsgReceipt }, o2);
          }).catch(function(n3) {
            t2.logger.warn("db.getMsgReadDetail invalid", n3), r2.sendCmd("getTeamMsgReadAccounts", e2);
          }) : r2.sendCmd("getTeamMsgReadAccounts", e2);
        }, l2.addTeamMembersFollow = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          m.validate({ teamId: { type: "string", allowEmpty: false, required: true }, accountIds: { type: "array", min: 1, itemType: "string", required: true } }, e2), e2.done = g({ instance: this, className: "NIMFn", funcName: "addTeamMembersFollow", done: e2.done }), this.processCallback(e2), this.sendCmd("updateInfoInTeam", { teamMember: { teamId: e2.teamId }, teamSpecialFollowUpdateTag: { accountIds: u(e2.accountIds), type: 1 }, single: true }, e2.callback);
        }, l2.removeTeamMembersFollow = function(e2) {
          m.validate({ teamId: { type: "string", allowEmpty: false, required: true }, accountIds: { type: "array", min: 1, itemType: "string", required: true } }, e2), e2.done = g({ instance: this, className: "NIMFn", funcName: "removeTeamMembersFollow", done: e2.done }), this.processCallback(e2), this.sendCmd("updateInfoInTeam", { teamMember: { teamId: e2.teamId }, teamSpecialFollowUpdateTag: { accountIds: u(e2.accountIds), type: 0 }, single: true }, e2.callback);
        };
      }, function(e, t, n) {
        var r = n(759), o = n(3), s = n(10), i = n(26), a = n(15), c = n(9), u = n(2), l2 = n(6), m = n(8), p = n(40).fn, d = n(0), f2 = d.undef, g = n(308), h = n(203), y = n(25).reportAPI;
        function v(e2) {
          var t2 = this.db;
          if (!t2.enable)
            return o.resolve({ valid: false });
          var n2 = t2.getSuperTeam(e2), s2 = t2.getSuperTeamMembersTimetag(e2);
          return o.all([n2, s2]).then(function(e3) {
            var t3 = r(e3, 2), n3 = t3[0], s3 = t3[1], i2 = n3 && n3.memberUpdateTime, a2 = { timetag: s3 = s3 || 0 };
            return i2 && s3 >= i2 && (a2.valid = true), o.resolve(a2);
          }).catch(function() {
            return o.resolve({ timetag: 0 });
          });
        }
        p.addSuperTeamMembers = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "addSuperTeamMembers", done: e2.done }), d.verifyOptions(e2, "teamId accounts", "superTeam::addSuperTeamMembers"), d.verifyParamType("accounts", e2.accounts, "array", "superTeam::addSuperTeamMembers");
          var t2 = d.deduplicate(e2.accounts);
          this.processPs(e2), this.processCallback(e2);
          var n2 = { teamId: e2.teamId, accounts: t2, ps: e2.ps };
          this.sendCmd("addSuperTeamMembers", n2, e2.callback);
        }, p.removeSuperTeamMembers = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "removeSuperTeamMembers", done: e2.done }), d.verifyOptions(e2, "teamId accounts", "team::removeSuperTeamMembers"), d.verifyParamType("accounts", e2.accounts, "array", "team::removeSuperTeamMembers");
          var t2 = d.deduplicate(e2.accounts);
          this.processCallback(e2);
          var n2 = { teamId: e2.teamId, accounts: t2 };
          this.sendCmd("removeSuperTeamMembers", n2, e2.callback);
        }, p.leaveSuperTeam = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "leaveSuperTeam", done: e2.done }), d.verifyOptions(e2, "teamId", "superTeam::leaveSuperTeam"), this.processCallback(e2);
          var t2 = { teamId: e2.teamId };
          this.sendCmd("leaveSuperTeam", t2, e2.callback);
        }, p.getSuperTeam = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "getSuperTeam", done: e2.done });
          var t2, n2 = this, r2 = n2.db;
          function o2() {
            n2.sendCmd("getSuperTeam", { teamId: e2.teamId }, e2.callback);
          }
          d.verifyOptions(e2, "teamId", "team::getSuperTeam"), n2.processCallback(e2), e2.cbaop = function(e3) {
            e3 || n2.logger.info("api::getSuperTeam: cbaop ".concat(t2));
          }, t2 = e2.teamId, r2.enable && !e2.sync ? r2.getSuperTeam(t2).then(function(r3) {
            r3 && r3.validToCurrentUser ? (n2.logger.log("api::getSuperTeam: db.getSuperTeam ".concat(t2)), e2.done(null, r3)) : o2();
          }).catch(function() {
            o2();
          }) : o2();
        }, p.getSuperTeams = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "getSuperTeams", done: e2.done });
          var t2 = this, n2 = t2.db, r2 = 0;
          function o2() {
            t2.sendCmd("getSuperTeams", { timetag: r2, NOTSTORE: "timetag" }, e2.callback);
          }
          d.verifyOptions(e2), t2.processCallback(e2), n2.enable ? n2.getSuperTeamsTimetag().then(function(e3) {
            r2 = e3, o2();
          }, o2) : o2();
        }, p.updateSuperTeam = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "updateSuperTeam", done: e2.done }), d.verifyOptions(e2, "teamId", "superTeam::updateSuperTeam"), e2.action = "update", this.processCallback(e2), e2.team = new g(e2), this.sendCmd("updateSuperTeam", { team: e2.team, antispamTag: { antiSpamBusinessId: e2.antiSpamBusinessId }, single: true }, e2.callback);
        }, p.updateInfoInSuperTeam = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "updateInfoInSuperTeam", done: e2.done }), d.verifyOptions(e2, "teamId", "superTeam::updateInfoInSuperTeam"), this.processCallback(e2), this.sendCmd("updateInfoInSuperTeam", { superTeamMember: new h(e2), single: true }, e2.callback);
        }, p.getSuperTeamMembersByJoinTime = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "getSuperTeamMembersByJoinTime", done: e2.done });
          var t2 = this, n2 = e2, r2 = n2.joinTime, o2 = s(n2), i2 = n2.limit, a2 = n2.teamId;
          o2 = !!o2, f2(r2) && (r2 = 0), f2(i2) && (i2 = 100), d.verifyOptions(e2, "teamId", "superTeam::getSuperTeamMembersByJoinTime"), d.verifyParamType("joinTime", r2, "number", "api::superTeam::getSuperTeamMembersByJoinTime"), d.verifyParamType("limit", i2, "number", "api::superTeam::getSuperTeamMembersByJoinTime"), t2.processCallback(e2), t2.sendCmd("getSuperTeamMembersByJoinTime", { teamId: a2, limit: i2, joinTime: r2, reverse: o2, timetag: 0, NOTSTORE: "timetag" }, e2.callback);
        }, p.getAllSuperTeamMembers = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "getAllSuperTeamMembers", done: e2.done });
          var t2 = this, n2 = this.db;
          function r2(n3) {
            n3 = n3 || 0, t2.sendCmd("getSuperTeamMembers", { teamId: e2.teamId, timetag: n3, NOTSTORE: "timetag" }, e2.callback);
          }
          d.verifyOptions(e2, "teamId", "superTeam::getAllSuperTeamMembers"), t2.processCallback(e2), i(v).call(v, this)(e2.teamId).then(function(o2) {
            var s2 = o2.valid, i2 = o2.timetag;
            s2 ? (t2.logger.info("getAllSuperTeamMembers from local db"), n2.getSuperTeamMembers(e2.teamId).then(function(t3) {
              var n3 = { teamId: e2.teamId, members: t3 };
              e2.done(null, n3);
            }, function() {
              return r2();
            })) : r2(i2);
          });
        }, p.applySuperTeam = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "applySuperTeam", done: e2.done }), d.verifyOptions(e2, "teamId", "team::applySuperTeam"), d.verifyOptions(e2, "teamId", "team::applySuperTeam"), this.processPs(e2), this.processCallback(e2);
          var t2 = { teamId: e2.teamId, ps: e2.ps };
          this.sendCmd("applySuperTeam", t2, e2.callback);
        }, p.passSuperTeamApply = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "passSuperTeamApply", done: e2.done }), d.verifyOptions(e2, "idServer teamId from", "team::passSuperTeamApply"), this.processCallback(e2);
          var t2 = { idServer: e2.idServer, teamId: e2.teamId, from: e2.from };
          this.sendCmd("passSuperTeamApply", t2, e2.callback);
        }, p.rejectSuperTeamApply = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "rejectSuperTeamApply", done: e2.done }), d.verifyOptions(e2, "idServer teamId from", "team::rejectSuperTeamApply"), this.processPs(e2), this.processCallback(e2);
          var t2 = { idServer: e2.idServer, teamId: e2.teamId, from: e2.from, ps: e2.ps };
          this.sendCmd("rejectSuperTeamApply", t2, e2.callback);
        }, p.acceptSuperTeamInvite = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "acceptSuperTeamInvite", done: e2.done }), d.verifyOptions(e2, "idServer teamId from", "team::acceptSuperTeamInvite"), this.processCallback(e2);
          var t2 = { idServer: e2.idServer, teamId: e2.teamId, from: e2.from };
          this.sendCmd("acceptSuperTeamInvite", t2, e2.callback);
        }, p.rejectSuperTeamInvite = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "rejectSuperTeamInvite", done: e2.done }), d.verifyOptions(e2, "idServer teamId from", "team::rejectSuperTeamInvite"), this.processPs(e2), this.processCallback(e2);
          var t2 = { idServer: e2.idServer, teamId: e2.teamId, from: e2.from, ps: e2.ps };
          this.sendCmd("rejectSuperTeamInvite", t2, e2.callback);
        }, p.addSuperTeamManagers = function(e2) {
          var t2;
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "addSuperTeamManagers", done: e2.done }), d.verifyOptions(e2, "teamId accounts", "team::addSuperTeamManagers"), d.verifyParamType("accounts", e2.accounts, "array", "team::addSuperTeamManagers"), this.processCallback(e2);
          var n2 = { teamId: e2.teamId, accounts: a(t2 = e2.accounts).call(t2, 0) };
          this.sendCmd("addSuperTeamManagers", n2, e2.callback);
        }, p.removeSuperTeamManagers = function(e2) {
          var t2;
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "removeSuperTeamManagers", done: e2.done }), d.verifyOptions(e2, "teamId accounts", "team::removeSuperTeamManagers"), d.verifyParamType("accounts", e2.accounts, "array", "team::removeSuperTeamManagers"), this.processCallback(e2);
          var n2 = { teamId: e2.teamId, accounts: a(t2 = e2.accounts).call(t2, 0) };
          this.sendCmd("removeSuperTeamManagers", n2, e2.callback);
        }, p.updateSuperTeamMembersMute = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "updateSuperTeamMembersMute", done: e2.done });
          d.verifyOptions(e2, "teamId accounts mute", "team::updateSuperTeamMembersMute"), d.verifyParamType("accounts", e2.accounts, "array", "team::updateSuperTeamMembersMute"), d.verifyArrayMax("accounts", e2.accounts, 10), this.processCallback(e2), e2.mute = e2.mute ? 1 : 0, this.sendCmd("updateSuperTeamMembersMute", e2);
        }, p.updateSuperTeamMute = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "updateSuperTeamMute", done: e2.done });
          d.verifyOptions(e2, "teamId mute", "team::updateSuperTeamMute"), e2.mute = e2.mute ? 1 : 0, this.processCallback(e2), this.sendCmd("updateSuperTeamMute", e2);
        }, p.updateNickInSuperTeam = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "updateNickInSuperTeam", done: e2.done }), d.verifyOptions(e2, "teamId account", "team::updateNickInSuperTeam"), this.processCallback(e2), this.sendCmd("updateNickInSuperTeam", { superTeamMember: new h(e2), single: true }, e2.callback);
        }, p.transferSuperTeam = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "transferSuperTeam", done: e2.done }), d.verifyOptions(e2, "teamId account leave", "team::transferSuperTeam"), d.verifyParamType("leave", e2.leave, "boolean", "team::transferSuperTeam"), this.processCallback(e2);
          var t2 = { teamId: e2.teamId, account: e2.account, leave: e2.leave };
          this.sendCmd("transferSuperTeam", t2, e2.callback);
        }, p.getSuperTeamMembersByAccounts = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "getSuperTeamMembersByAccounts", done: e2.done });
          var t2 = this, n2 = this.db, r2 = e2, s2 = r2.teamId, i2 = r2.accounts;
          if (d.verifyOptions(e2, "teamId accounts", "superTeam::getSuperTeamMembersByAccounts"), d.verifyParamType("accounts", i2, "array", "superTeam::getSuperTeamMembersByAccounts"), d.verifyArrayMax("accounts", i2, 20), i2.length <= 0)
            return d.onParamError("参数accounts不能为空数组", "superTeam::getSuperTeamMembersByAccounts");
          function a2() {
            var n3 = c(i2).call(i2, function(e3) {
              return s2 + "|" + e3;
            });
            t2.processCallback(e2), t2.sendCmd("getSuperTeamMembersByAccounts", { memberIds: n3 }, function(t3, n4) {
              e2.done(null, { accounts: i2, members: n4.members, invaldAccounts: n4.invalid });
            });
          }
          v.call(this, s2).then(function(t3) {
            var r3, c2, m2;
            return t3.valid ? (r3 = [], c2 = [], m2 = [], u(i2).call(i2, function(e3) {
              var t4, o2 = n2.getSuperTeamMemberById(l2(t4 = "".concat(s2, "-")).call(t4, e3)).then(function(e4) {
                c2.push(e4);
              }).catch(function() {
                m2.push(e3);
              });
              r3.push(o2);
            }), void o.all(r3).then(function() {
              e2.done(null, { accounts: i2, members: c2, invaldAccounts: m2 });
            })) : a2();
          }).catch(function() {
            return a2();
          });
        }, p.getMutedSuperTeamMembers = function(e2) {
          (e2 = e2 || {}).done = y({ instance: this, className: "NIMFn", funcName: "getMutedSuperTeamMembers", done: e2.done });
          var t2 = this, n2 = e2, r2 = n2.joinTime, o2 = s(n2), i2 = n2.limit, a2 = n2.teamId;
          o2 = !!o2, f2(r2) && (r2 = 0), f2(i2) && (i2 = 100), d.verifyOptions(e2, "teamId", "superTeam::getSuperTeamMembersByJoinTime"), d.verifyParamType("joinTime", r2, "number", "api::superTeam::getSuperTeamMembersByJoinTime"), d.verifyParamType("limit", i2, "number", "api::superTeam::getSuperTeamMembersByJoinTime"), this.processCallback(e2), t2.sendCmd("getMutedSuperTeamMembers", { teamId: a2, limit: i2, joinTime: r2, reverse: o2 }, e2.callback);
        }, p.addSuperTeamMembersFollow = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          d.validate({ teamId: { type: "string", allowEmpty: false, required: true }, accountIds: { type: "array", min: 1, itemType: "string", required: true } }, e2), e2.done = y({ instance: this, className: "NIMFn", funcName: "addSuperTeamMembersFollow", done: e2.done }), this.processCallback(e2), this.sendCmd("updateInfoInSuperTeam", { superTeamMember: { teamId: e2.teamId }, teamSpecialFollowUpdateTag: { accountIds: m(e2.accountIds), type: 1 }, single: true }, e2.callback);
        }, p.removeSuperTeamMembersFollow = function(e2) {
          d.validate({ teamId: { type: "string", allowEmpty: false, required: true }, accountIds: { type: "array", min: 1, itemType: "string", required: true } }, e2), e2.done = y({ instance: this, className: "NIMFn", funcName: "removeSuperTeamMembersFollow", done: e2.done }), this.processCallback(e2), this.sendCmd("updateInfoInSuperTeam", { superTeamMember: { teamId: e2.teamId }, teamSpecialFollowUpdateTag: { accountIds: m(e2.accountIds), type: 0 }, single: true }, e2.callback);
        }, p.getMySuperTeamMembers = function(e2) {
          y({ instance: this, className: "NIMFn", funcName: "getMySuperTeamMembers", done: e2.done, hasCallback: false });
          this.processCallback(e2), d.verifyOptions(e2, "teamIds", "team::getMySuperTeamMembers"), this.sendCmd("getMySuperTeamMembers", e2);
        };
      }, function(e, t, n) {
        var r = n(57), o = n(9), s = n(3), i = n(2), a = n(6), c = n(10), u = n(754), l2 = n(37), m = n(15), p = n(90), d = n(32), f2 = n(16), g = n(7), h = n(88), y = n(89), v = n(72), b = n(58);
        function T(e2, t2) {
          var n2 = void 0 !== y && v(e2) || e2["@@iterator"];
          if (!n2) {
            if (d(e2) || (n2 = function(e3, t3) {
              var n3;
              if (!e3)
                return;
              if ("string" == typeof e3)
                return S(e3, t3);
              var r3 = m(n3 = Object.prototype.toString.call(e3)).call(n3, 8, -1);
              "Object" === r3 && e3.constructor && (r3 = e3.constructor.name);
              if ("Map" === r3 || "Set" === r3)
                return h(e3);
              if ("Arguments" === r3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r3))
                return S(e3, t3);
            }(e2)) || t2 && e2 && "number" == typeof e2.length) {
              n2 && (e2 = n2);
              var r2 = 0, o2 = function() {
              };
              return { s: o2, n: function() {
                return r2 >= e2.length ? { done: true } : { done: false, value: e2[r2++] };
              }, e: function(e3) {
                throw e3;
              }, f: o2 };
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          }
          var s2, i2 = true, a2 = false;
          return { s: function() {
            n2 = n2.call(e2);
          }, n: function() {
            var e3 = n2.next();
            return i2 = e3.done, e3;
          }, e: function(e3) {
            a2 = true, s2 = e3;
          }, f: function() {
            try {
              i2 || null == n2.return || n2.return();
            } finally {
              if (a2)
                throw s2;
            }
          } };
        }
        function S(e2, t2) {
          (null == t2 || t2 > e2.length) && (t2 = e2.length);
          for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
            r2[n2] = e2[n2];
          return r2;
        }
        var M = n(40).fn, k = n(0), x = k.undef, C = k.notundef, I = n(297), w = n(154), _ = n(25).reportAPI, P = n(854);
        function A(e2, t2) {
          var n2 = this, r2 = [], o2 = [], c2 = this.db, u2 = this;
          return c2.enable ? (i(e2).call(e2, function(e3) {
            var t3 = n2.protocol.getSessionInCache(e3);
            t3 ? l3(t3, e3) : o2.push(c2.getSession(e3).then(function(t4) {
              return l3(t4, e3);
            }));
          }), s.all(o2).then(function() {
            return r2;
          })) : (i(e2).call(e2, function(e3) {
            return l3(n2.protocol.getSessionInCache(e3), e3);
          }), s.resolve(r2));
          function l3(e3, n3) {
            var o3, s2, i2, c3;
            e3 ? e3.lastMsg ? e3.scene && e3.to ? e3.ack >= e3.lastMsg.time ? u2.logger.warn(a(o3 = "".concat(t2, " not need ack ")).call(o3, e3.id)) : r2.push(e3) : u2.logger.warn(a(s2 = "".concat(t2, " session.scene|to undefined ")).call(s2, e3.id)) : u2.logger.warn(a(i2 = "".concat(t2, " session.lastMsg undefined ")).call(i2, e3.id)) : u2.logger.warn(a(c3 = "".concat(t2, " session undefined ")).call(c3, n3));
          }
        }
        M.setCurrSession = function(e2) {
          _({ instance: this, className: "NIMFn", funcName: "setCurrSession", hasCallback: false });
          this.resetSessionUnread(e2), this.protocol.setCurrSession(e2);
        }, M.resetAllSessionUnread = function() {
          _({ instance: this, className: "NIMFn", funcName: "resetAllSessionUnread", hasCallback: false });
          for (var e2 in this.protocol.sessionSet)
            this.protocol.sessionSet[e2].unread > 0 && this.resetSessionUnread(e2);
        }, M.resetSessionsUnread = function() {
          var e2 = b(r.mark(function e3(t2) {
            var n2, i2, a2, c2, u2, l3, m2, p2, d2 = arguments;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    return n2 = d2.length > 1 && void 0 !== d2[1] ? d2[1] : function() {
                    }, n2 = _({ instance: this, className: "NIMFn", funcName: "resetSessionsUnread", done: n2 }), (i2 = this).logger.info("resetSessionsUnread::", t2), e4.next = 6, A.call(this, t2, "api::resetSessionsUnread");
                  case 6:
                    if (a2 = e4.sent, i2.protocol.resetSessionsUnread(a2), i2.options.syncSessionUnread && 0 !== a2.length) {
                      e4.next = 11;
                      break;
                    }
                    return n2(), e4.abrupt("return");
                  case 11:
                    c2 = o(a2).call(a2, function(e5) {
                      return { scene: "p2p" === e5.scene ? 0 : 1, to: e5.to, timetag: e5.lastMsg.time };
                    }), u2 = P(c2, 50), l3 = T(u2), e4.prev = 14, p2 = r.mark(function e5() {
                      var t3;
                      return r.wrap(function(e6) {
                        for (; ; )
                          switch (e6.prev = e6.next) {
                            case 0:
                              return t3 = m2.value, e6.next = 3, new s(function(e7, r2) {
                                i2.sendCmd("markSessionAckBatch", { sessionAckTags: t3 }, function(t4) {
                                  t4 ? (n2(t4), r2(t4)) : e7();
                                });
                              });
                            case 3:
                            case "end":
                              return e6.stop();
                          }
                      }, e5);
                    }), l3.s();
                  case 17:
                    if ((m2 = l3.n()).done) {
                      e4.next = 21;
                      break;
                    }
                    return e4.delegateYield(p2(), "t0", 19);
                  case 19:
                    e4.next = 17;
                    break;
                  case 21:
                    e4.next = 26;
                    break;
                  case 23:
                    e4.prev = 23, e4.t1 = e4.catch(14), l3.e(e4.t1);
                  case 26:
                    return e4.prev = 26, l3.f(), e4.finish(26);
                  case 29:
                    n2(null);
                  case 30:
                  case "end":
                    return e4.stop();
                }
            }, e3, this, [[14, 23, 26, 29]]);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), M.resetSuperTeamSessionsUnread = function() {
          var e2 = b(r.mark(function e3(t2) {
            var n2, i2, a2, c2, u2, l3, m2, p2, d2 = arguments;
            return r.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    return n2 = d2.length > 1 && void 0 !== d2[1] ? d2[1] : function() {
                    }, n2 = _({ instance: this, className: "NIMFn", funcName: "resetSuperTeamSessionsUnread", done: n2 }), (i2 = this).logger.info("resetSuperTeamSessionsUnread::", t2), e4.next = 6, A.call(this, t2, "api::resetSuperTeamSessionsUnread");
                  case 6:
                    if (a2 = e4.sent, i2.protocol.resetSessionsUnread(a2), i2.options.syncSessionUnread && 0 !== a2.length) {
                      e4.next = 11;
                      break;
                    }
                    return n2(), e4.abrupt("return");
                  case 11:
                    c2 = o(a2).call(a2, function(e5) {
                      return { to: e5.to, timetag: e5.lastMsg.time };
                    }), u2 = P(c2, 50), l3 = T(u2), e4.prev = 14, p2 = r.mark(function e5() {
                      var t3;
                      return r.wrap(function(e6) {
                        for (; ; )
                          switch (e6.prev = e6.next) {
                            case 0:
                              return t3 = m2.value, e6.next = 3, new s(function(e7, r2) {
                                i2.sendCmd("markSuperTeamSessionsAck", { sessionAckTags: t3 }, function(t4) {
                                  t4 ? (n2(t4), r2(t4)) : e7();
                                });
                              });
                            case 3:
                            case "end":
                              return e6.stop();
                          }
                      }, e5);
                    }), l3.s();
                  case 17:
                    if ((m2 = l3.n()).done) {
                      e4.next = 21;
                      break;
                    }
                    return e4.delegateYield(p2(), "t0", 19);
                  case 19:
                    e4.next = 17;
                    break;
                  case 21:
                    e4.next = 26;
                    break;
                  case 23:
                    e4.prev = 23, e4.t1 = e4.catch(14), l3.e(e4.t1);
                  case 26:
                    return e4.prev = 26, l3.f(), e4.finish(26);
                  case 29:
                    n2(null);
                  case 30:
                  case "end":
                    return e4.stop();
                }
            }, e3, this, [[14, 23, 26, 29]]);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), M.resetSessionUnread = function(e2) {
          var t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : function() {
          };
          t2 = _({ instance: this, className: "NIMFn", funcName: "resetSessionUnread", done: t2 });
          var n2 = this, r2 = false !== n2.options.resetUnreadMode, o2 = function() {
            var n3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null;
            n3 ? t2(n3, e2) : t2(null);
          };
          n2.logger.info("resetSessionUnread::use reset mode", r2);
          var i2 = n2.protocol.getSessionInCache(e2), a2 = !i2 && this.db.enable ? n2.db.getSession(e2) : s.resolve(i2);
          function c2(t3) {
            if (!t3.lastMsg && !t3.updateTime)
              return n2.logger.warn("api::resetSessionUnread: session.lastMsg undefined ".concat(e2)), o2();
            if (!t3.scene || !t3.to)
              return n2.logger.warn("api::resetSessionUnread: session.scene|to undefined ".concat(e2)), o2();
            var s2;
            if (s2 = t3.lastMsg ? t3.lastMsg.time : t3.updateTime, t3 && t3.ack && t3.ack >= s2)
              return n2.logger.warn("api::resetSessionUnread: session ack not needs ".concat(e2)), o2();
            var i3 = { done: function(e3) {
              e3 ? (n2.logger.error({ message: e3 || "mark ack failed", callFunc: "resetSessionUnread" }), o2(e3 || "mark ack failed")) : (r2 || n2.protocol.resetSessionUnread(t3), o2());
            } };
            if (n2.processCallback(i3), "superTeam" === t3.scene)
              n2.sendCmd("markSuperTeamSessionAck", { to: t3.to, timetag: s2 }, i3.callback);
            else {
              var a3 = { scene: "p2p" === t3.scene ? 0 : 1, to: t3.to, timetag: s2 };
              n2.sendCmd("markSessionAck", a3, i3.callback);
            }
          }
          a2.then(function(t3) {
            return t3 ? n2.options.syncSessionUnread ? (r2 && n2.protocol.resetSessionUnread(t3), void c2(t3)) : (n2.protocol.resetSessionUnread(t3), o2()) : (n2.logger.warn("api::resetSessionUnread: session undefined ".concat(e2)), o2());
          });
        }, M.resetCurrSession = function() {
          _({ instance: this, className: "NIMFn", funcName: "resetCurrSession", hasCallback: false }), this.protocol.setCurrSession("");
        }, M.insertLocalSession = function(e2) {
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "insertLocalSession", done: e2.done });
          var t2, n2;
          function r2() {
            e2.session = n2, e2.done(t2, e2);
          }
          k.verifyOptions(e2, "scene to", "scene::insertLocalSession"), k.verifyParamValid("scene", e2.scene, this.message.validScenes, "scene::insertLocalSession"), this.protocol.insertLocalSession(e2).then(function(e3) {
            n2 = e3, r2();
          }, function(e3) {
            t2 = e3, r2();
          });
        }, M.getLocalSessions = function(e2) {
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "getLocalSessions", done: e2.done });
          var t2 = [];
          k.verifyOptions(e2), x(e2.limit) && (e2.limit = 100), k.verifyParamType("limit", e2.limit, "number", "scene::getLocalSessions"), C(c(e2)) ? k.verifyParamType("reverse", c(e2), "boolean", "scene::getLocalSessions") : e2.reverse = false, this.processCallback(e2);
          var n2 = u(this.protocol.sessionSet), r2 = 0, s2 = e2.lastSessionId;
          if (c(e2)) {
            var i2, a2 = T(n2);
            try {
              for (a2.s(); !(i2 = a2.n()).done; ) {
                var d2 = i2.value, f3 = d2.id;
                if (s2)
                  f3 === s2 && (s2 = void 0);
                else if (void 0 !== d2.lastMsg && !d2.isDeleted) {
                  if (++r2 > e2.limit)
                    break;
                  t2.push(l2({}, d2));
                }
              }
            } catch (e3) {
              a2.e(e3);
            } finally {
              a2.f();
            }
          } else {
            var g2, h2, y2 = T(n2);
            try {
              for (y2.s(); !(h2 = y2.n()).done; ) {
                var v2 = h2.value;
                if (s2 === v2.id)
                  break;
                void 0 === v2.lastMsg || v2.isDeleted || t2.push(v2);
              }
            } catch (e3) {
              y2.e(e3);
            } finally {
              y2.f();
            }
            t2 = c(g2 = m(t2).call(t2, -e2.limit)).call(g2);
          }
          this.logger.debug("getLocalSessions::sessions is", t2), t2 = o(t2).call(t2, function(e3) {
            return p(w).call(w, e3);
          }), e2.sessions = t2, delete e2.callback, e2.done(void 0, e2);
        }, M.getLocalSession = function(e2) {
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "getLocalSession", done: e2.done });
          var t2 = this, n2 = t2.db, r2 = null;
          if (k.verifyOptions(e2, "sessionId", "scene::getLocalSession"), k.verifyParamType("sessionId", e2.sessionId, "string", "scene::getLocalSession"), r2 = t2.protocol.getSessionInCache(e2.sessionId), t2.logger.debug("getLocalSession::cache session is", r2), !r2 && n2.enable)
            return t2.processCallback(e2), void n2.getSession(e2.sessionId).then(function(n3) {
              n3 && (r2 = n3, t2.logger.debug("getLocalSession::db session is", r2)), e2.done(null, r2);
            }).catch(function(t3) {
              e2.done(t3);
            });
          e2.done(null, p(w).call(w, r2));
        }, M.getLocalSessionsByMsgType = function(e2) {
          var t2;
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "getLocalSessionsByMsgType", done: e2.done });
          var n2 = this.db, r2 = e2.exclude, a2 = [], c2 = m(t2 = I.validTypes).call(t2, 0);
          if (C(r2)) {
            if ("string" == typeof r2)
              r2 = [r2];
            else if (!d(r2))
              return void k.onParamInvalidType("exclude", ["string", "string array"], "", "exclude::getLocalSessionsByMsgType");
            r2 = f2(r2).call(r2, function(e3) {
              return g(c2).call(c2, e3) > -1;
            }), c2 = f2(c2).call(c2, function(e3) {
              return -1 === g(r2).call(r2, e3);
            });
          }
          this.processCallback(e2), n2.enable ? n2.getSessions().then(function(t3) {
            r2 && 0 !== r2.length ? c2 && 0 !== c2.length ? (i(t3).call(t3, function(e3, o2) {
              var i2, u2, l3;
              e3.lastMsg && g(r2).call(r2, e3.lastMsg.type) > -1 && (i2 = o2, u2 = e3.id, l3 = n2.getMsgs({ sessionId: u2, limit: 1, types: c2 }).then(function(e4) {
                return e4 && e4[0] ? t3[i2].lastMsg = e4[0] : t3[i2].lastMsg = null, s.resolve();
              }), a2.push(l3));
            }), s.all(a2).then(function() {
              e2.done(null, { exclude: r2, sessions: t3 });
            })) : e2.done(null, { exclude: r2, sessions: o(t3).call(t3, function(e3) {
              e3.lastMsg = null;
            }) }) : e2.done(null, { exclude: r2, sessions: t3 });
          }) : e2.done(null, { exclude: r2, sessions: [] });
        }, M.updateLocalSession = function(e2) {
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "updateLocalSession", done: e2.done });
          var t2, n2 = this, r2 = n2.db;
          k.verifyOptions(e2, "id", "scene::updateLocalSession"), n2.processCallback(e2);
          var o2 = k.filterObj(e2, "id localCustom");
          function s2() {
            false !== e2.needNotify && n2.protocol.onUpdateSession(o2), e2.session = o2, e2.done(t2, e2);
          }
          o2 = n2.protocol.updateSessionInCache(e2), r2.enable && o2 ? r2.updateSession(o2).then(function(e3) {
            o2 = e3, s2();
          }, function(e3) {
            t2 = e3, s2();
          }) : s2();
        }, M.deleteLocalSession = function(e2) {
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "deleteLocalSession", done: e2.done });
          var t2, n2 = this, r2 = n2.db;
          k.verifyOptions(e2, "id", "session::deleteLocalSession"), n2.processCallback(e2);
          var s2 = n2.protocol.getSessionInCache(e2.id);
          if (n2.protocol.deleteSessionInCache(e2.id, e2.isLogic), r2.enable ? (e2.isLogic ? r2.deleteSessionLogic(e2.id) : r2.deleteSession(e2.id, s2)).then(function() {
            n2.logger.info("sessions::deleteSessionInDb::delete session done", e2.id), a2();
          }, function(e3) {
            t2 = e3, a2();
          }) : a2(), e2.isDeleteRoaming) {
            var i2 = "string" == typeof e2.id ? [e2.id] : e2.id;
            i2 = o(i2).call(i2, function(e3) {
              return e3.replace("-", "|");
            }), this.sendCmd("deleteSessions", { sessions: i2 }, function() {
            });
          }
          function a2() {
            e2.done(t2, e2);
          }
        }, M.deleteSession = function(e2, t2) {
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "deleteSession", done: e2.done }), t2 || this.logger.warn('this api will be abandon,please use "deleteLocalSession"'), k.verifyOptions(e2, "scene to", "session::deleteSession"), this.processCallback(e2), e2.sessions = [{ scene: e2.scene, to: e2.to }], this.deleteSessions(e2);
        }, M.deleteRoamingMsgBySession = function(e2) {
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "deleteRoamingMsgBySession", done: e2.done }), this.deleteSession(e2, true);
        }, M.deleteSessions = function(e2) {
          var t2, n2;
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "deleteSessions", done: e2.done }), k.verifyOptions(e2, "sessions", "session::deleteSessions"), k.verifyParamType("sessions", e2.sessions, "array", "session::deleteSessions"), i(t2 = e2.sessions).call(t2, function(e3, t3) {
            k.verifyOptions(e3, "scene to", true, "sessions[" + t3 + "].", "session::deleteSessions");
          }), this.processCallback(e2), this.sendCmd("deleteSessions", { sessions: o(n2 = e2.sessions).call(n2, function(e3) {
            return e3.scene + "|" + e3.to;
          }) }, e2.callback);
        }, M.getServerSessions = function(e2) {
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "getServerSessions", done: e2.done }), C(e2.minTimestamp) && k.verifyParamType("minTimestamp", e2.minTimestamp, "number", "session::deleteSessions"), C(e2.maxTimestamp) && k.verifyParamType("maxTimestamp", e2.maxTimestamp, "number", "session::deleteSessions"), C(e2.needLastMsg) && (e2.needLastMsg = false === e2.needLastMsg ? 0 : 1), C(e2.limit) && (k.verifyParamType("limit", e2.limit, "number", "session::deleteSessions"), k.verifyParamMax("limit", e2.limit, 100, "scene::getLocalSessions")), this.processCallback(e2), this.sendCmd("getServerSessions", { sessionReqTag: e2 }, e2.callback);
        }, M.getServerSession = function(e2) {
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "getServerSession", done: e2.done }), k.verifyOptions(e2, "scene to", "scene::getServerSession"), k.verifyParamValid("scene", e2.scene, this.message.validScenes, "scene::getServerSession"), k.verifyParamType("to", e2.to, "string", "to::getServerSession");
          var t2 = e2.scene + "|" + e2.to;
          "superTeam" === e2.scene && (t2 = "super_team|" + e2.to), this.processCallback(e2), this.sendCmd("getServerSession", { session: { id: t2 } }, e2.callback);
        }, M.updateServerSession = function(e2) {
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "updateServerSession", done: e2.done }), k.verifyOptions(e2, "scene to", "scene::updateServerSession"), k.verifyParamValid("scene", e2.scene, this.message.validScenes, "scene::updateServerSession"), k.verifyParamType("to", e2.to, "string", "to::updateServerSession"), C(e2.extra) && k.verifyParamType("extra", e2.extra, "string", "extra::updateServerSession");
          var t2 = e2.scene + "|" + e2.to;
          "superTeam" === e2.scene && (t2 = "super_team|" + e2.to), this.processCallback(e2), this.sendCmd("updateServerSession", { session: { id: t2, ext: e2.extra || "" } }, e2.callback);
        }, M.deleteServerSessions = function(e2) {
          var t2, n2 = this;
          (e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "deleteServerSessions", done: e2.done }), k.verifyOptions(e2, "sessions", "scene::deleteServerSessions"), k.verifyParamType("sessions", e2.sessions, "array", "sessions::deleteServerSessions");
          var r2 = [];
          i(t2 = e2.sessions).call(t2, function(e3) {
            k.verifyParamValid("scene", e3.scene, n2.message.validScenes, "scene::deleteServerSessions"), k.verifyParamType("to", e3.to, "string", "to::deleteServerSessions");
            var t3 = e3.scene + "|" + e3.to;
            "superTeam" === e3.scene && (t3 = "super_team|" + e3.to), r2.push({ id: t3 });
          }), this.processCallback(e2), this.sendCmd("deleteServerSessions", { sessions: r2 }, e2.callback);
        }, M.updateSessionsWithMoreRoaming = function(e2) {
          var t2;
          if ((e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "updateSessionsWithMoreRoaming", done: e2.done }), k.verifyOptions(e2, "msg", "session::updateSessionsWithMoreRoaming"), k.verifyCallback(e2, "done", "session::updateSessionsWithMoreRoaming"), !this.db.enable)
            return e2.done(null, "db is disable");
          var n2 = { time: e2.msg.time, idServer: e2.msg.idServer, to: e2.msg.to, from: e2.msg.from };
          k.verifyParamType("msg.time", e2.msg.time, "number", "time::updateSessionsWithMoreRoaming"), k.verifyParamType("msg.idServer", e2.msg.idServer, "string", "idServer::updateSessionsWithMoreRoaming"), k.verifyParamType("msg.from", e2.msg.from, "string", "from::updateSessionsWithMoreRoaming"), k.verifyParamType("msg.to", e2.msg.to, "string", "to::updateSessionsWithMoreRoaming"), k.verifyParamValid("scene", e2.msg.scene, this.message.validScenes, "scene::updateSessionsWithMoreRoaming");
          var r2 = n2.to === this.account ? n2.from : n2.to;
          n2.id = a(t2 = "".concat(e2.msg.scene, "-")).call(t2, r2), this.db.updateSessionsWithMoreRoaming(n2).then(function(t3) {
            e2.done(null, t3);
          }).catch(function(t3) {
            e2.done(t3);
          });
        }, M.deleteSessionsWithMoreRoaming = function(e2) {
          if ((e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "deleteSessionsWithMoreRoaming", done: e2.done }), k.verifyOptions(e2, "id", "session::deleteSessionsWithMoreRoaming"), k.verifyCallback(e2, "done", "session::deleteSessionsWithMoreRoaming"), !this.db.enable)
            return e2.done(null, "db is disable");
          this.db.deleteSessionsWithMoreRoaming(e2.id).then(function(t2) {
            e2.done(null, t2);
          }).catch(function(t2) {
            e2.done(t2);
          });
        }, M.getSessionsWithMoreRoaming = function(e2) {
          if ((e2 = e2 || {}).done = _({ instance: this, className: "NIMFn", funcName: "getSessionsWithMoreRoaming", done: e2.done }), k.verifyCallback(e2, "done", "session::getSessionsWithMoreRoaming"), !this.db.enable)
            return e2.done(null, "db is disable");
          this.db.getSessionsWithMoreRoaming(e2.id).then(function(t2) {
            e2.done(null, t2);
          }).catch(function(t2) {
            e2.done(t2);
          });
        };
      }, function(e, t, n) {
        var r = n(855), o = n(856), s = n(857), i = Math.ceil, a = Math.max;
        e.exports = function(e2, t2, n2) {
          t2 = (n2 ? o(e2, t2, n2) : void 0 === t2) ? 1 : a(s(t2), 0);
          var c = null == e2 ? 0 : e2.length;
          if (!c || t2 < 1)
            return [];
          for (var u = 0, l2 = 0, m = Array(i(c / t2)); u < c; )
            m[l2++] = r(e2, u, u += t2);
          return m;
        };
      }, function(e, t) {
        e.exports = function(e2, t2, n) {
          var r = -1, o = e2.length;
          t2 < 0 && (t2 = -t2 > o ? 0 : o + t2), (n = n > o ? o : n) < 0 && (n += o), o = t2 > n ? 0 : n - t2 >>> 0, t2 >>>= 0;
          for (var s = Array(o); ++r < o; )
            s[r] = e2[r + t2];
          return s;
        };
      }, function(e, t, n) {
        var r = n(201), o = n(202), s = n(302), i = n(91);
        e.exports = function(e2, t2, n2) {
          if (!i(n2))
            return false;
          var a = typeof t2;
          return !!("number" == a ? o(n2) && s(t2, n2.length) : "string" == a && t2 in n2) && r(n2[t2], e2);
        };
      }, function(e, t, n) {
        var r = n(858);
        e.exports = function(e2) {
          var t2 = r(e2), n2 = t2 % 1;
          return t2 == t2 ? n2 ? t2 - n2 : t2 : 0;
        };
      }, function(e, t, n) {
        var r = n(859);
        e.exports = function(e2) {
          return e2 ? (e2 = r(e2)) === 1 / 0 || e2 === -1 / 0 ? 17976931348623157e292 * (e2 < 0 ? -1 : 1) : e2 == e2 ? e2 : 0 : 0 === e2 ? e2 : 0;
        };
      }, function(e, t, n) {
        var r = n(860), o = n(91), s = n(862), i = /^[-+]0x[0-9a-f]+$/i, a = /^0b[01]+$/i, c = /^0o[0-7]+$/i, u = parseInt;
        e.exports = function(e2) {
          if ("number" == typeof e2)
            return e2;
          if (s(e2))
            return NaN;
          if (o(e2)) {
            var t2 = "function" == typeof e2.valueOf ? e2.valueOf() : e2;
            e2 = o(t2) ? t2 + "" : t2;
          }
          if ("string" != typeof e2)
            return 0 === e2 ? e2 : +e2;
          e2 = r(e2);
          var n2 = a.test(e2);
          return n2 || c.test(e2) ? u(e2.slice(2), n2 ? 2 : 8) : i.test(e2) ? NaN : +e2;
        };
      }, function(e, t, n) {
        var r = n(861), o = /^\s+/;
        e.exports = function(e2) {
          return e2 ? e2.slice(0, r(e2) + 1).replace(o, "") : e2;
        };
      }, function(e, t) {
        var n = /\s/;
        e.exports = function(e2) {
          for (var t2 = e2.length; t2-- && n.test(e2.charAt(t2)); )
            ;
          return t2;
        };
      }, function(e, t, n) {
        var r = n(124), o = n(106);
        e.exports = function(e2) {
          return "symbol" == typeof e2 || o(e2) && "[object Symbol]" == r(e2);
        };
      }, function(e, t, n) {
        var r = n(125), o = n(864), s = n(865), i = n(57), a = n(58), c = n(51), u = n(16), l2 = n(15), m = n(2), p = n(32), d = n(121), f2 = n(9), g = n(6), h = n(10), y = n(8), v = n(870), b = n(4), T = n(52), S = n(53), M = n(54), k = n(55), x = n(43), C = ["callback", "done"];
        function I(e2, t2) {
          var n2 = b(e2);
          if (T) {
            var r2 = T(e2);
            t2 && (r2 = u(r2).call(r2, function(t3) {
              return S(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        function w(e2) {
          for (var t2 = 1; t2 < arguments.length; t2++) {
            var n2, r2, o2 = null != arguments[t2] ? arguments[t2] : {};
            t2 % 2 ? m(n2 = I(Object(o2), true)).call(n2, function(t3) {
              c(e2, t3, o2[t3]);
            }) : M ? k(e2, M(o2)) : m(r2 = I(Object(o2))).call(r2, function(t3) {
              x(e2, t3, S(o2, t3));
            });
          }
          return e2;
        }
        var _ = n(40).fn, P = n(0), A = P.undef, N = P.notundef, O = n(45), E = n(154), R = n(153), j2 = n(41), F = n(76), D = n(25).reportAPI, U = n(11);
        _.sendG2Msg = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "sendG2Msg", done: e2.done });
          return this.processCallback(e2), e2.msg = new this.message.G2Message(e2), this.sendMsg(e2);
        }, _.beforeSendMsg = function(e2) {
          var t2, n2 = this.protocol, r2 = e2.msg;
          switch (r2.to === this.account && (r2.fromDeviceId = O.deviceId), r2.userUpdateTime = n2.myInfo && n2.myInfo.updateTime, r2.getScene()) {
            case "p2p":
              t2 = "sendMsg";
              break;
            case "team":
              t2 = "sendTeamMsg";
              break;
            case "superTeam":
              t2 = "sendSuperTeamMsg";
          }
          u(e2) && (t2 = "sendFilterMsg", r2.filter = true), e2.cmd = t2;
        }, _.afterSendMsg = function(e2) {
          var t2 = e2.rtnMsg;
          if (!t2 || !t2.ignore) {
            var n2 = this.protocol.getSessionInCache(t2.sessionId);
            e2.isLocal && n2 && n2.lastMsg && t2.time < n2.lastMsg.time || this.protocol.onUpdateSession(E.genSessionByMsg(t2));
          }
        }, _.beforeForwardMsg = function(e2) {
          P.verifyOptions(e2, "msg scene to", "msg::beforeForwardMsg"), e2.msg.scene = e2.scene, e2.msg.to = e2.to;
        }, _.markMsgRead = function(e2) {
          var t2 = this.protocol;
          !e2 || this.db.enable || t2.options.autoMarkRead ? this.logger.warn("api::markMsgRead: 不需要标记消息为已收到 (没有消息, 或者启用了数据库, 或者启用了自动标记已收到)") : t2.markMsgRead(e2, true);
        }, _.sendMsgReceipt = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "sendMsgReceipt", done: e2.done });
          if (P.verifyOptions(e2), this.processCallback(e2), e2.msg) {
            P.verifyOptions(e2, "msg", "msg::sendMsgReceipt");
            var t2 = e2.msg;
            P.verifyOptions(t2, "target idClient time", true, "msg.", "msg::sendMsgReceipt"), this.protocol.shouldSendMsgReceipt(t2) ? this.sendCmd("sendMsgReceipt", { msgReceipt: { to: t2.target, idClient: t2.idClient, time: t2.time } }, e2.callback) : e2.done();
          } else
            e2.done();
        }, _.isMsgRemoteRead = function(e2) {
          return D({ instance: this, className: "NIMFn", funcName: "isMsgRemoteRead", hasCallback: false }), this.protocol.isMsgRemoteRead(e2);
        }, _.recallMsg = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "recallMsg", done: e2.done }), this.deleteMsg(e2, true);
        }, _.deleteMsg = function(e2, t2) {
          var n2;
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "deleteMsg", done: e2.done }), t2 || this.logger.warn("this api will be abandon,please use “recallMsg”");
          P.verifyOptions(e2, "msg", "msg::deleteMsg");
          var r2 = e2.msg;
          if ("team" !== r2.scene && r2.from !== this.account || "success" !== r2.status || r2.isLocal)
            return e2.done(j2.newParamError("只能删除自己发的, 并且发送成功的消息，且不能是本地消息", { callFunc: "msg::deleteMsg" }), e2);
          P.verifyOptions(r2, ["scene", "to", "from", "time", "idClient", "idServer"], true, "msg.", "msg::deleteMsg"), P.verifyParamValid("msg.scene", r2.scene, this.message.validScenes, "msg::deleteMsg"), this.processPs(e2), this.processCallback(e2);
          var o2 = { deletedIdClient: r2.idClient, deletedIdServer: r2.idServer, time: r2.time, from: r2.from, to: r2.to, opeAccount: r2.from }, s2 = "superTeam" === r2.scene ? "deleteSuperTeamMsg" : "deleteMsg";
          o2.type = "deleteMsg" + r2.scene[0].toUpperCase() + l2(n2 = r2.scene).call(n2, 1);
          var i2 = ["ps", "apnsText", "pushPayload", "env", "opeAccount", "attach"];
          m(i2).call(i2, function(t3) {
            e2[t3] && (o2[t3] = e2[t3]);
          }), o2 = new R(o2), this.sendCmd(s2, { sysMsg: o2, msg: r2 }, e2.callback);
        }, _.deleteMsgSelf = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "deleteMsgSelf", done: e2.done }), P.verifyOptions(e2, "msg", "msg::deleteMsgSelf");
          var t2 = e2.msg;
          if ("superTeam" === t2.scene)
            return e2.done(j2.newParamError("单向删除暂不支持超大群场景", { callFunc: "msg::deleteMsgSelf" }), e2);
          P.verifyOptions(t2, ["scene", "to", "from", "time", "idClient", "idServer"], true, "msg.", "msg::deleteMsgSelf"), P.verifyParamValid("msg.scene", t2.scene, this.message.validScenes, "msg::deleteMsgSelf"), this.processCallback(e2);
          var n2 = { scene: "p2p" === t2.scene ? 1 : 2, from: t2.from, to: t2.to, time: t2.time, idClient: t2.idClient, idServer: t2.idServer, custom: e2.custom, type: t2.type };
          this.sendCmd("deleteMsgSelf", { deleteMsgSelfTag: n2 }, e2.callback);
        }, _.deleteMsgSelfBatch = function(e2) {
          var t2, n2, r2, o2 = this;
          if ((e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "deleteMsgSelfBatch", done: e2.done }), P.verifyOptions(e2, "msgs", "msg::deleteMsgSelfBatch"), (!p(e2.msgs) || 0 === e2.msgs.length || e2.msgs.length > 100) && P.onParamError("msgs应该是数组且数据长度应大于0小于等于100", "msg::deleteMsgSelfBatch"), d(t2 = e2.msgs).call(t2, function(e3) {
            return "superTeam" === e3.scene;
          }))
            return e2.done(j2.newParamError("消息列表中存在超大群消息，单向删除暂不支持超大群场景", { callFunc: "msg::deleteMsgSelfBatch" }), e2);
          m(n2 = e2.msgs).call(n2, function(e3) {
            P.verifyOptions(e3, ["scene", "to", "from", "time", "idClient", "idServer"], true, "msg.", "msg::deleteMsgSelfBatch"), P.verifyParamValid("msg.scene", e3.scene, o2.message.validScenes, "msg::deleteMsgSelfBatch");
          }), this.processCallback(e2);
          var s2 = f2(r2 = e2.msgs).call(r2, function(t3) {
            var n3;
            return { scene: "p2p" === t3.scene ? 1 : 2, from: t3.from, to: t3.to, time: t3.time, idClient: t3.idClient, idServer: t3.idServer, sessionId: t3.sessionId || g(n3 = "".concat(t3.scene, "-")).call(n3, t3.to), custom: e2.custom, type: t3.type };
          });
          this.sendCmd("deleteMsgSelfBatch", { deleteMsgSelfTags: s2 }, e2.callback);
        };
        var L = { text: 0, image: 1, audio: 2, video: 3, geo: 4, notification: 5, file: 6, tip: 10, robot: 11, custom: 100 };
        _.getHistoryMsgs = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "getHistoryMsgs", done: e2.done });
          this.protocol.syncing && this.logger.warn("Please call getHistoryMsgs after onsyncdone callback"), P.verifyOptions(e2, "scene to", "msg::getHistoryMsgs"), P.verifyParamValid("scene", e2.scene, this.message.validScenes, "msg::getHistoryMsgs"), void 0 === e2.beginTime && (e2.beginTime = 0);
          var t2, n2 = this.protocol.getSessionInCache(e2.scene + "-" + e2.to), r2 = n2 && n2.lastEmptyTime;
          if (r2 > e2.beginTime && (e2.beginTime = r2), P.verifyParamType("beginTime", e2.beginTime, "number", "msg::getHistoryMsgs"), void 0 === e2.endTime && (e2.endTime = 0), P.verifyParamType("endTime", e2.endTime, "number", "msg::getHistoryMsgs"), e2.lastMsgId = e2.lastMsgId && +e2.lastMsgId ? e2.lastMsgId : "0", void 0 === e2.limit && (e2.limit = 100), P.verifyParamType("limit", e2.limit, "number", "msg::getHistoryMsgs"), P.verifyParamMax("limit", e2.limit, 100, "msg::getHistoryMsgs"), N(h(e2)) ? P.verifyParamType("reverse", h(e2), "boolean", "msg::getHistoryMsgs") : e2.reverse = false, N(e2.asc) ? P.verifyParamType("asc", e2.asc, "boolean", "msg::getHistoryMsgs") : e2.asc = false, A(e2.msgTypes))
            e2.msgTypes = [];
          else if (p(e2.msgTypes)) {
            var o2, s2;
            e2.msgTypes = f2(o2 = e2.msgTypes).call(o2, function(e3) {
              return L[e3];
            }), e2.msgTypes = u(s2 = e2.msgTypes).call(s2, function(e3) {
              return "number" == typeof e3;
            });
          } else
            "number" == typeof L[e2.msgTypes] ? e2.msgTypes = [L[e2.msgTypes]] : e2.msgTypes = [];
          switch (this.processCallback(e2), e2.cbaop = function(t3, n3) {
            if (!t3) {
              var r3;
              if (e2.asc)
                n3.msgs = h(r3 = n3.msgs).call(r3);
              n3.msgs = F.deduplication(n3.msgs);
            }
          }, e2.scene) {
            case "p2p":
              t2 = "getHistoryMsgs";
              break;
            case "team":
              t2 = "getTeamHistoryMsgs";
              break;
            case "superTeam":
              t2 = "getSuperTeamHistoryMsgs";
          }
          var i2 = { scene: e2.scene, to: e2.to, beginTime: e2.beginTime, endTime: e2.endTime, lastMsgId: e2.lastMsgId, limit: e2.limit, reverse: h(e2), msgTypes: e2.msgTypes };
          this.sendCmd(t2, i2, e2.callback);
        }, _.searchHistoryMsgs = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "searchHistoryMsgs", done: e2.done });
          P.verifyOptions(e2, "scene to keyword", "msg::searchHistoryMsgs"), P.verifyParamValid("scene", e2.scene, this.message.validScenes, "msg::searchHistoryMsgs"), void 0 === e2.beginTime && (e2.beginTime = 0);
          var t2, n2 = this.protocol.getSessionInCache(e2.scene + "-" + e2.to), r2 = n2 && n2.lastEmptyTime;
          switch (r2 > e2.beginTime && (e2.beginTime = r2), P.verifyParamType("beginTime", e2.beginTime, "number", "msg::searchHistoryMsgs"), void 0 === e2.endTime && (e2.endTime = 0), P.verifyParamType("endTime", e2.endTime, "number", "msg::searchHistoryMsgs"), void 0 === e2.limit && (e2.limit = 100), P.verifyParamType("limit", e2.limit, "number", "msg::searchHistoryMsgs"), P.verifyParamMax("limit", e2.limit, 100, "msg::searchHistoryMsgs"), N(h(e2)) ? P.verifyParamType("reverse", h(e2), "boolean", "msg::searchHistoryMsgs") : e2.reverse = false, N(e2.asc) ? P.verifyParamType("asc", e2.asc, "boolean", "msg::searchHistoryMsgs") : e2.asc = false, this.processCallback(e2), e2.asc && (e2.cbaop = function(e3, t3) {
            var n3;
            e3 || (t3.msgs = h(n3 = t3.msgs).call(n3));
          }), e2.scene) {
            case "p2p":
              t2 = "searchHistoryMsgs";
              break;
            case "team":
              t2 = "searchTeamHistoryMsgs";
          }
          var o2 = P.filterObj(e2, "scene to beginTime endTime keyword limit reverse");
          this.sendCmd(t2, o2, e2.callback);
        }, _.getLocalMsgs = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "getLocalMsgs", done: e2.done });
          var t2 = this, n2 = t2.db, r2 = [];
          P.verifyOptions(e2);
          var o2 = false;
          N(e2.start) && (o2 = true, P.verifyParamType("start", e2.start, "number", "msg::getLocalMsgs"));
          var s2 = false;
          if (N(e2.end) && (s2 = true, P.verifyParamType("end", e2.end, "number", "msg::getLocalMsgs")), o2 && s2 && e2.end <= e2.start && P.onParamError("参数 end 必须晚于 start"), N(e2.subTypes) && P.verifyParamType("subTypes", e2.subTypes, "array", "msg::getLocalMsgs"), A(e2.limit) && (e2.limit = 100), P.verifyParamType("limit", e2.limit, "number", "msg::getLocalMsgs"), P.verifyParamMin("limit", e2.limit, 1, "msg::getLocalMsgs"), t2.processCallback(e2), n2.enable) {
            var i2 = (/* @__PURE__ */ new Date()).getTime();
            n2.getMsgs(e2).then(function(n3) {
              var o3;
              r2 = n3, t2.logger.info(g(o3 = "api::getLocalMsgs: query db cost ".concat((/* @__PURE__ */ new Date()).getTime() - i2, " ms and the conditions is ")).call(o3, y(e2))), a2();
            }, function(e3) {
              (e3 = e3 || {}).message = e3.message || "msg::getLocalMsgs:db error", a2();
            });
          } else
            a2();
          function a2() {
            var t3 = P.simpleClone(e2);
            t3.msgs = r2, delete t3.callback, delete t3.done, e2.done(null, t3);
          }
        }, _.getLocalMsgsInUnread = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "getLocalMsgsInUnread", done: e2.done });
          var t2 = this;
          P.validate({ sessionId: { type: "string", allowEmpty: false } }, e2), this.getLocalSession({ sessionId: e2.sessionId, done: function(n2, r2) {
            n2 ? e2.done && e2.done(n2) : r2 ? (r2.ack = r2.ack || 0, t2.getLocalMsgs(w({ sessionId: e2.sessionId, start: r2.ack, limit: v, filterFunc: function(e3) {
              return "in" === e3.flow && true === e3.isUnreadable;
            }, done: function() {
            } }, e2))) : e2.done && e2.done(new Error("session ".concat(e2.sessionId, " not exist")));
          } });
        }, _.getLocalMsgByIdClient = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "getLocalMsgByIdClient", done: e2.done });
          var t2 = this.db, n2 = null, r2 = null;
          function o2() {
            e2.msg = r2, e2.done(n2, e2);
          }
          P.verifyOptions(e2, "idClient", "msg::getLocalMsgByIdClient"), this.processCallback(e2), t2.enable ? t2.getMsgByIdClient(e2.idClient).then(function(e3) {
            e3 && (r2 = e3), o2();
          }, function(e3) {
            n2 = e3, o2();
          }) : (this.logger.warn("because db is false,error is null"), o2());
        }, _.getLocalMsgsByIdClients = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "getLocalMsgsByIdClients", done: e2.done });
          var t2, n2 = this.db, r2 = [];
          function o2() {
            e2.msgs = r2, e2.done(t2, e2);
          }
          P.verifyOptions(e2, "idClients", "msg::getLocalMsgByIdClients"), P.verifyParamType("idClients", e2.idClients, "array", "msg::getLocalMsgByIdClients"), this.processCallback(e2), n2.enable ? n2.getMsgsByIdClients(e2.idClients).then(function(e3) {
            r2 = u(e3).call(e3, function(e4) {
              return !!e4;
            }), o2();
          }, function(e3) {
            t2 = e3, o2();
          }) : o2();
        }, _.updateLocalMsg = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "updateLocalMsg", done: e2.done });
          var t2, n2 = this.db, r2 = null;
          if (P.verifyOptions(e2, "idClient", "msg::updateLocalMsg"), this.processCallback(e2), n2.enable) {
            var o2 = P.filterObj(e2, "idClient localCustom");
            n2.updateMsg(o2).then(function(e3) {
              r2 = e3, s2();
            }, function(e3) {
              t2 = e3, s2();
            });
          } else
            s2();
          function s2() {
            e2.msg = r2, e2.done(t2, e2);
          }
        }, _.deleteLocalMsg = function() {
          var e2 = a(i.mark(function e3(t2) {
            var n2, r2, o2, s2;
            return i.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    return s2 = function() {
                      t2.done(r2, t2);
                    }, (t2 = t2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "deleteLocalMsg", done: t2.done }), n2 = this, P.verifyOptions(t2, "msg", "msg::deleteLocalMsg"), o2 = t2.msg, P.verifyOptions(o2, "idClient sessionId", true, "msg.", "msg::deleteLocalMsg"), n2.processCallback(t2), e4.prev = 8, e4.next = 11, n2.protocol.deleteLocalMsg(o2);
                  case 11:
                    s2(), e4.next = 18;
                    break;
                  case 14:
                    e4.prev = 14, e4.t0 = e4.catch(8), r2 = e4.t0, s2();
                  case 18:
                  case "end":
                    return e4.stop();
                }
            }, e3, this, [[8, 14]]);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), _.deleteLocalMsgsBySession = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "deleteLocalMsgsBySession", done: e2.done });
          var t2, n2 = this, r2 = n2.db;
          P.verifyOptions(e2, "scene to", "msg::deleteLocalMsgsBySession"), P.verifyParamValid("scene", e2.scene, n2.message.validScenes, "msg::deleteLocalMsgsBySession"), e2.sessionId = e2.scene + "-" + e2.to, e2.delLastMsg = true === e2.delLastMsg, e2.isTag = true === e2.isTag;
          var o2 = (/* @__PURE__ */ new Date()).getTime();
          function s2() {
            e2.done(t2, e2);
          }
          n2.processCallback(e2);
          var i2 = { id: e2.sessionId };
          e2.delLastMsg && (i2.lastMsg = null), e2.isTag && (i2.lastEmptyTime = o2), r2.enable ? r2.deleteMsgsBySessionId(e2).then(function() {
            e2.delLastMsg || e2.isTag ? r2.updateSession(i2).then(function(t3) {
              n2.protocol.onUpdateSession(t3), e2.session = t3, s2();
            }) : s2();
          }).catch(function(e3) {
            t2 = e3, s2();
          }) : (this.logger.warn("because db is false,error is null"), s2(), (e2.delLastMsg || e2.isTag) && n2.protocol.onUpdateSession(i2));
        }, _.deleteLocalMsgsByTime = function(e2) {
          var t2 = this.db;
          U.isBrowser && t2.enable && (N((e2 = e2 || {}).start) ? P.verifyParamType("start", e2.start, "number", "msg::deleteLocalMsgsByTime") : e2.start = 0, N(e2.end) ? P.verifyParamType("end", e2.end, "number", "msg::deleteLocalMsgsByTime") : e2.end = 1 / 0, N(e2.end) && N(e2.start) && e2.end <= e2.start && P.onParamError("参数 end 必须大于 start"), this.processCallback(e2), this.protocol.deleteLocalMsgsByTime(e2).then(function(t3) {
            e2.done(null, t3);
          }, function(t3) {
            e2.done(t3, null);
          }));
        }, _.deleteLocalMsgs = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "deleteLocalMsgs", done: e2.done });
          var t2;
          function n2() {
            e2.done(t2, e2);
          }
          e2.updateSession = false !== e2.updateSession, P.verifyOptions(e2, "sessionId", "msg::deleteLocalMsgsBySession"), N(e2.start) && P.verifyParamType("start", e2.start, "number", "msg::deleteLocalMsgs"), N(e2.end) && P.verifyParamType("end", e2.end, "number", "msg::deleteLocalMsgs"), N(e2.end) && N(e2.start) && e2.end <= e2.start && P.onParamError("参数 end 必须大于 start"), this.processCallback(e2), this.protocol.deleteLocalMsgs(e2).then(function() {
            n2();
          }, function(e3) {
            t2 = e3, n2();
          });
        }, _.deleteAllLocalMsgs = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "deleteAllLocalMsgs", done: e2.done });
          var t2, n2 = this.db;
          function r2() {
            e2.done(t2, e2);
          }
          this.processCallback(e2), this.protocol.sessionSet = {}, n2.enable ? n2.deleteAllMsgs().then(function() {
            r2();
          }, function(e3) {
            t2 = e3, r2();
          }) : (this.logger.warn("because db is false,error is null"), r2());
        }, _.saveMsgsToLocal = function(e2) {
          var t2;
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "saveMsgsToLocal", done: e2.done }), this.db.enable || (this.logger.warn("because db is false,error is null"), e2.done(null, [])), P.verifyOptions(e2, "msgs done", "msg::saveMsgsToLocal"), P.verifyParamType("msgs", e2.msgs, "Array", "msg::saveMsgsToLocal");
          var n2 = f2(t2 = e2.msgs).call(t2, function(e3) {
            var t3 = w({}, e3);
            return t3.hasOwnProperty("needUpdateSession") || (t3.needUpdateSession = true), t3;
          });
          this.db.putMsg(n2).then(function(t3, n3) {
            n3 ? e2.done(n3) : e2.done(null, t3);
          });
        }, _.clearServerHistoryMsgs = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "clearServerHistoryMsgs", done: e2.done });
          P.verifyOptions(e2, "account", "msg::clearServerHistoryMsgs");
          var t2 = false !== e2.delRoam;
          this.processCallback(e2), this.sendCmd("clearServerHistoryMsgs", { clearMsgsParams: { account: e2.account, delRoam: t2 ? 1 : 0 } }, e2.callback);
        }, _.clearServerHistoryMsgsWithSync = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "clearServerHistoryMsgsWithSync", done: e2.done }), P.verifyOptions(e2, "scene to", "msg::clearServerHistoryMsgsWithSync");
          var t2 = void 0 === e2.isDeleteRoam || true === e2.isDeleteRoam, n2 = { type: "team" === e2.scene ? 2 : 1, isDeleteRoam: t2 ? 1 : 0, isSyncSelf: true === e2.isSyncSelf ? 1 : 0 };
          n2[2 === n2.type ? "toTid" : "otherAccid"] = e2.to, void 0 !== e2.ext && (n2.ext = e2.ext), this.processCallback(e2), this.sendCmd("clearServerHistoryMsgsWithSync", { clearMsgsParamsWithSync: n2 }, e2.callback);
        }, _.msgFtsInServer = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "msgFtsInServer", done: e2.done }), this.processCallback(e2);
          var t2 = e2, n2 = s({}, (o(t2), t2));
          P.validate({ keyword: { type: "string" }, fromTime: { type: "number", required: false }, toTime: { type: "number", required: false }, sessionLimit: { type: "number", min: 0, required: false }, msgLimit: { type: "number", min: 0, required: false }, order: { type: "enum", values: ["ASC", "DESC"], required: false }, p2pList: { type: "array", required: false }, teamList: { type: "array", required: false }, senderList: { type: "array", required: false }, msgTypeList: { type: "array", required: false }, msgSubTypeList: { type: "array", required: false } }, n2, "msg::msgFtsInServer"), N(n2.toTime) && N(n2.fromTime) && n2.toTime < n2.fromTime && P.onParamError("Options error: toTime should be greater than fromTime");
          var r2, i2 = { ASC: 1, DESC: 2 };
          (n2.order && i2[n2.order] && (n2.order = i2[n2.order]), n2.msgTypeList) && (n2.msgTypeList = f2(r2 = n2.msgTypeList).call(r2, function(e3) {
            return L[e3];
          }));
          var a2 = ["p2pList", "teamList", "senderList", "msgTypeList", "msgSubTypeList"];
          m(a2).call(a2, function(e3) {
            p(n2[e3]) && (n2[e3] = n2[e3].join(","));
          }), this.sendCmd("msgFtsInServer", { msgFullSearchRequestTag: n2 }, e2.callback);
        }, _.msgFtsInServerByTiming = function(e2) {
          (e2 = e2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "msgFtsInServerByTiming", done: e2.done }), this.processCallback(e2);
          var t2 = e2, n2 = (t2.callback, t2.done, r(t2, C));
          P.validate({ keyword: { type: "string" }, fromTime: { type: "number", required: false }, toTime: { type: "number", required: false }, msgLimit: { type: "number", min: 0, required: false }, order: { type: "enum", values: ["ASC", "DESC"], required: false }, p2pList: { type: "array", required: false }, teamList: { type: "array", required: false }, senderList: { type: "array", required: false }, msgTypeList: { type: "array", required: false }, msgSubTypeList: { type: "array", required: false } }, n2, "msg::msgFtsInServerByTimeSort"), N(n2.toTime) && N(n2.fromTime) && n2.toTime < n2.fromTime && P.onParamError("Options error: toTime should be greater than fromTime");
          var o2, s2 = { ASC: 1, DESC: 2 };
          (void 0 === n2.msgLimit && (n2.msgLimit = 20), n2.order && s2[n2.order] && (n2.order = s2[n2.order]), n2.msgTypeList) && (n2.msgTypeList = f2(o2 = n2.msgTypeList).call(o2, function(e3) {
            return L[e3];
          }));
          var i2 = ["p2pList", "teamList", "senderList", "msgTypeList", "msgSubTypeList"];
          m(i2).call(i2, function(e3) {
            p(n2[e3]) && (n2[e3] = n2[e3].join(","));
          }), this.sendCmd("msgFtsInServerByTiming", { msgTimingFullSearchRequestTag: n2 }, e2.callback);
        }, _.subMessages = function() {
          var e2 = a(i.mark(function e3(t2) {
            var n2, r2, o2;
            return i.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    if (n2 = this, (t2 = t2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "subMessages", done: t2.done }), P.verifyOptions(t2, "msg", "msg::subMessages"), P.verifyOptions(t2.msg, "idClient", "msg::subMessages"), this.processCallback(t2), !n2.db.enable) {
                      e4.next = 23;
                      break;
                    }
                    return r2 = [], e4.prev = 8, e4.next = 11, n2.db.getSubMessages(t2.msg.idClient);
                  case 11:
                    r2 = e4.sent, e4.next = 20;
                    break;
                  case 14:
                    return e4.prev = 14, e4.t0 = e4.catch(8), (o2 = e4.t0 || {}).message = o2.message || "msg::subMessages:db error", t2 && "function" == typeof t2.done && t2.done(o2), e4.abrupt("return");
                  case 20:
                    t2.done(null, r2), e4.next = 25;
                    break;
                  case 23:
                    n2.logger.warn("subMessages need db"), t2 && "function" == typeof t2.done && t2.done(j2.noDBError("subMessages need db"));
                  case 25:
                  case "end":
                    return e4.stop();
                }
            }, e3, this, [[8, 14]]);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }(), _.subMessagesCount = function() {
          var e2 = a(i.mark(function e3(t2) {
            var n2, r2, o2;
            return i.wrap(function(e4) {
              for (; ; )
                switch (e4.prev = e4.next) {
                  case 0:
                    if (n2 = this, (t2 = t2 || {}).done = D({ instance: this, className: "NIMFn", funcName: "subMessagesCount", done: t2.done }), P.verifyOptions(t2, "msg", "msg::subMessagesCount"), P.verifyOptions(t2.msg, "idClient", "msg::subMessagesCount"), this.processCallback(t2), !n2.db.enable) {
                      e4.next = 23;
                      break;
                    }
                    return r2 = [], e4.prev = 8, e4.next = 11, n2.db.getSubMessages(t2.msg.idClient);
                  case 11:
                    r2 = e4.sent, e4.next = 20;
                    break;
                  case 14:
                    return e4.prev = 14, e4.t0 = e4.catch(8), (o2 = e4.t0 || {}).message = o2.message || "msg::subMessages:db error", t2 && "function" == typeof t2.done && t2.done(o2), e4.abrupt("return");
                  case 20:
                    t2.done(null, r2.length), e4.next = 25;
                    break;
                  case 23:
                    n2.logger.warn("subMessagesCount need db"), t2 && "function" == typeof t2.done && t2.done(j2.noDBError("subMessagesCount need db"));
                  case 25:
                  case "end":
                    return e4.stop();
                }
            }, e3, this, [[8, 14]]);
          }));
          return function(t2) {
            return e2.apply(this, arguments);
          };
        }();
      }, function(e, t) {
        e.exports = function(e2) {
          if (null == e2)
            throw new TypeError("Cannot destructure " + e2);
        }, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        var r = n(866), o = n(151);
        function s() {
          var t2;
          return e.exports = s = r ? o(t2 = r).call(t2) : function(e2) {
            for (var t3 = 1; t3 < arguments.length; t3++) {
              var n2 = arguments[t3];
              for (var r2 in n2)
                Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
            }
            return e2;
          }, e.exports.__esModule = true, e.exports.default = e.exports, s.apply(this, arguments);
        }
        e.exports = s, e.exports.__esModule = true, e.exports.default = e.exports;
      }, function(e, t, n) {
        e.exports = n(867);
      }, function(e, t, n) {
        e.exports = n(868);
      }, function(e, t, n) {
        var r = n(869);
        e.exports = r;
      }, function(e, t, n) {
        var r = n(305);
        e.exports = r;
      }, function(e, t, n) {
        e.exports = n(871);
      }, function(e, t, n) {
        var r = n(872);
        e.exports = r;
      }, function(e, t, n) {
        n(873), e.exports = 9007199254740991;
      }, function(e, t, n) {
        n(1)({ target: "Number", stat: true, nonConfigurable: true, nonWritable: true }, { MAX_SAFE_INTEGER: 9007199254740991 });
      }, function(e, t, n) {
        var r = n(10), o = n(32), s = n(15), i = n(2), a = n(8), c = n(4), u = n(16), l2 = n(40).fn, m = n(0), p = n(756), d = n(758), f2 = (n(76), m.notundef), g = n(25).reportAPI;
        function h(e2, t2, n2, r2) {
          n2 = n2 || "", m.verifyParamType(n2 + "from", e2.from, "string", t2), m.verifyParamType(n2 + "to", e2.to, "string", t2), m.verifyParamType(n2 + "idServer", e2.idServer, "string", t2), m.verifyParamType(n2 + "time", e2.time, "number", t2), m.verifyParamValid(n2 + "scene", e2.scene, this.message.validScenes, t2), r2 || m.verifyParamType(n2 + "idClient", e2.idClient, "string", t2);
        }
        l2.getThreadMsgs = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getThreadMsgs", done: e2.done }), m.verifyCallback(e2, "done", "msg::getThreadMsgs"), m.verifyOptions(e2, "scene threadMsgFromAccount threadMsgToAccount threadMsgIdServer threadMsgTime", "msg::getThreadMsgs"), m.verifyParamType("threadMsgFromAccount", e2.threadMsgFromAccount, "string", "msg::getThreadMsgs"), m.verifyParamType("threadMsgToAccount", e2.threadMsgToAccount, "string", "msg::getThreadMsgs"), m.verifyParamType("threadMsgIdServer", e2.threadMsgIdServer, "string", "msg::getThreadMsgs"), m.verifyParamType("threadMsgTime", e2.threadMsgTime, "number", "msg::getThreadMsgs"), m.verifyParamValid("scene", e2.scene, this.message.validScenes, "msg::getThreadMsgs"), this.processCallback(e2);
          var t2 = { scene: this.message.sceneMap[e2.scene], from: e2.threadMsgFromAccount, to: e2.threadMsgToAccount, time: e2.threadMsgTime, idServer: e2.threadMsgIdServer }, n2 = { limit: e2.limit < 100 ? e2.limit : 100, beginTime: "number" == typeof e2.beginTime ? e2.beginTime : 0, reverse: true === r(e2) ? 1 : 0 };
          "number" == typeof e2.endTime && (n2.endTime = e2.endTime, n2.endTime <= n2.beginTime && m.onParamError("endTime应该大于beginTime", "msg::getThreadMsgs")), e2.lastMsgId && (n2.lastMsgId = e2.lastMsgId), this.sendCmd("getThreadMsgs", { msg: t2, threadMsgReq: n2, NOTSTORE: "msg threadMsgReq" }, e2.callback);
        }, l2.getMsgsByIdServer = function(e2) {
          var t2, n2, r2 = this;
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getMsgsByIdServer", done: e2.done });
          var a2 = this, c2 = "msg::getMsgsByIdServer";
          m.verifyCallback(e2, "done", c2), (!o(e2.reqMsgs) || 0 === e2.reqMsgs.length || e2.reqMsgs.length > 100) && m.onParamError("reqMsgs应该是数组且数据长度应大于0小于等于100", c2), e2.reqMsgs = s(t2 = e2.reqMsgs).call(t2, 0), i(n2 = e2.reqMsgs).call(n2, function(e3, t3) {
            h.call(a2, e3, c2, "reqMsgs[".concat(t3, "]."), true), e3.scene = r2.message.sceneMap[e3.scene];
          }), this.processCallback(e2), this.sendCmd("getMsgsByIdServer", { reqMsgs: e2.reqMsgs }, e2.callback);
        }, l2.addQuickComment = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "addQuickComment", done: e2.done }), m.verifyOptions(e2, "msg body", "msg::addQuickComment"), h.call(this, e2.msg, "msg::addQuickComment");
          var t2 = new p(e2, "msg::addQuickComment");
          t2.from = this.account;
          var n2 = { scene: this.message.sceneMap[e2.msg.scene], from: e2.msg.from, to: e2.msg.to, time: e2.msg.time, idServer: e2.msg.idServer, idClient: e2.msg.idClient };
          this.processCallback(e2), this.sendCmd("addQuickComment", { msg: n2, comment: t2 }, e2.callback);
        }, l2.deleteQuickComment = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "deleteQuickComment", done: e2.done }), m.verifyOptions(e2, "msg body", "msg::deleteQuickComment"), h.call(this, e2.msg, "msg::deleteQuickComment");
          var t2 = new p(e2, "msg::addQuickComment");
          t2.from = this.account;
          var n2 = { scene: this.message.sceneMap[e2.msg.scene], from: e2.msg.from, to: e2.msg.to, time: e2.msg.time, idServer: e2.msg.idServer, idClient: e2.msg.idClient };
          this.processCallback(e2), this.sendCmd("deleteQuickComment", { msg: n2, comment: t2 }, e2.callback);
        }, l2.getQuickComments = function(e2) {
          var t2 = this;
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getQuickComments", done: e2.done });
          var n2 = "msg::getQuickComments", r2 = this, s2 = {}, l3 = {};
          m.verifyOptions(e2, "msgs", "msg::getQuickComments"), (!o(e2.msgs) || 0 === e2.msgs.length || e2.msgs.length > 20) && m.onParamError("msgs应该是数组且数据长度应大于0小于等于20", n2);
          var p2 = [];
          try {
            p2 = JSON.parse(a(e2.msgs));
          } catch (e3) {
            m.onParamError("msgs 不是合法的对象", n2);
          }
          i(p2).call(p2, function(e3, o2) {
            h.call(r2, e3, n2, "msgs[".concat(o2, "]."), true), e3.scene = t2.message.sceneMap[e3.scene], s2[e3.idClient] = null, l3[e3.idClient] = o2;
          }), this.processCallback(e2), this.getLocalMsgsByIdClients({ idClients: c(s2), done: function(t3, n3) {
            var o2, a2 = r2.protocol.timetags.sync;
            !t3 && n3.msgs && n3.msgs.length && a2 && (i(o2 = n3.msgs).call(o2, function(e3) {
              s2[e3.idClient] = e3;
            }), p2 = u(p2).call(p2, function(e3) {
              var t4 = s2[e3.idClient];
              return !t4 || (t4.commentTimetag && (e3.timestamp = t4.commentTimetag), !(t4.commentTimetag > a2));
            }));
            r2.sendCmd("getQuickComments", { commentReq: p2, idMap: s2, indexMap: l3 }, e2.callback);
          } });
        }, l2.addCollect = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "addCollect", done: e2.done }), m.verifyOptions(e2, "type data", "msg::addCollect");
          var t2 = new d(e2, "msg::addCollect");
          this.processCallback(e2), this.sendCmd("addCollect", { collect: t2 }, e2.callback);
        }, l2.deleteCollects = function(e2) {
          var t2;
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "deleteCollects", done: e2.done }), m.verifyOptions(e2, "collectList", "msg::deleteCollects"), (!o(e2.collectList) || 0 === e2.collectList.length || e2.collectList.length > 100) && m.onParamError("collectList应该是数组且数据长度应大于0小于等于100", "msg::deleteCollects"), i(t2 = e2.collectList).call(t2, function(e3, t3) {
            m.verifyParamType("collectList[".concat(t3, "].id"), e3.id, "string", "msg::deleteCollects"), m.verifyParamType("collectList[".concat(t3, "].createTime"), e3.createTime, "number", "msg::deleteCollects");
          }), this.processCallback(e2), this.sendCmd("deleteCollects", { collectList: e2.collectList }, e2.callback);
        }, l2.updateCollect = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "updateCollect", done: e2.done }), m.verifyOptions(e2, "collect", "msg::updateCollect"), m.verifyParamType("collect.id", e2.collect.id, "string", "msg::updateCollect"), m.verifyParamType("collect.createTime", e2.collect.createTime, "number", "msg::updateCollect"), this.processCallback(e2), this.sendCmd("updateCollect", { collect: e2.collect }, e2.callback);
        }, l2.getCollects = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getCollects", done: e2.done }), m.verifyCallback(e2, "done", "msg::getCollects");
          var t2 = {}, n2 = ["type", "beginTime", "endTime", "limit"];
          i(n2).call(n2, function(n3) {
            f2(e2[n3]) && (m.verifyParamType(n3, e2[n3], "number", "msg::getCollects"), t2[n3] = e2[n3]);
          }), e2.limit > 100 && m.onParamError("limit不能大于100", "msg::getCollects"), e2.beginTime > e2.endTime && m.onParamError("beginTime不能大于endTime", "msg::getCollects"), f2(e2.lastId) && (m.verifyParamType("lastId", e2.lastId, "string", "msg::getCollects"), t2.lastMsgId = e2.lastId), f2(r(e2)) && (t2.reverse = true === r(e2) ? 1 : 0), this.processCallback(e2), this.sendCmd("getCollects", { collectQuery: t2, NOTSTORE: "collectQuery" }, e2.callback);
        }, l2.addStickTopSession = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "addStickTopSession", done: e2.done }), m.verifyOptions(e2, "id", "msg::addStickTopSession");
          var t2 = m.getIdArray(e2.id);
          m.verifyParamValid("id的前半部分", t2[0], this.message.validScenes, "msg::addStickTopSession"), m.verifyParamType("id的后半部分", t2[1], "string", "msg::addStickTopSession"), "superTeam" === t2[0] && (t2[0] = "super_team");
          var n2 = { id: t2 = t2.join("|") };
          e2.topCustom && (m.verifyParamType("topCustom", e2.topCustom, "string", "msg::addStickTopSession"), n2.topCustom = e2.topCustom), this.processCallback(e2), this.sendCmd("addStickTopSession", { stickTopSession: n2 }, e2.callback);
        }, l2.deleteStickTopSession = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "deleteStickTopSession", done: e2.done }), m.verifyOptions(e2, "id", "msg::deleteStickTopSession");
          var t2 = m.getIdArray(e2.id);
          m.verifyParamValid("id的前半部分", t2[0], this.message.validScenes, "msg::deleteStickTopSession"), m.verifyParamType("id的后半部分", t2[1], "string", "msg::deleteStickTopSession"), "superTeam" === t2[0] && (t2[0] = "super_team"), t2 = t2.join("|"), this.processCallback(e2), this.sendCmd("deleteStickTopSession", { stickTopSession: { id: t2 } }, e2.callback);
        }, l2.updateStickTopSession = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "updateStickTopSession", done: e2.done }), m.verifyOptions(e2, "id", "msg::updateStickTopSession");
          var t2 = m.getIdArray(e2.id);
          m.verifyParamValid("id的前半部分", t2[0], this.message.validScenes, "msg::updateStickTopSession"), m.verifyParamType("id的后半部分", t2[1], "string", "msg::updateStickTopSession"), "superTeam" === t2[0] && (t2[0] = "super_team");
          var n2 = { id: t2 = t2.join("|") };
          e2.topCustom && (m.verifyParamType("topCustom", e2.topCustom, "string", "msg::updateStickTopSession"), n2.topCustom = e2.topCustom), this.processCallback(e2), this.sendCmd("updateStickTopSession", { stickTopSession: n2 }, e2.callback);
        }, l2.getStickTopSessions = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getStickTopSessions", done: e2.done }), m.verifyOptions(e2, "done", "msg::getStickTopSessions"), this.processCallback(e2);
          var t2, n2 = this.protocol.sessionSet, r2 = [];
          for (var o2 in n2)
            (t2 = this.protocol.getSessionInCache(o2, e2.findDelete)) && t2.isTop && r2.push(n2[o2]);
          e2.callback(null, r2);
        }, l2.addMsgPin = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "addMsgPin", done: e2.done }), m.verifyOptions(e2, "msg", "msg::addMsgPin"), h.call(this, e2.msg, "msg::addMsgPin");
          var t2 = { pinFrom: this.account };
          f2(e2.pinCustom) && (m.verifyParamType("pinCustom", e2.pinCustom, "string", "msg::addMsgPin"), t2.pinCustom = e2.pinCustom);
          var n2 = { scene: this.message.sceneMap[e2.msg.scene], from: e2.msg.from, to: e2.msg.to, time: e2.msg.time, idServer: e2.msg.idServer, idClient: e2.msg.idClient };
          this.processCallback(e2), this.sendCmd("addMsgPin", { msg: n2, pinTag: t2 }, e2.callback);
        }, l2.updateMsgPin = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "updateMsgPin", done: e2.done }), m.verifyOptions(e2, "msg", "msg::updateMsgPin"), h.call(this, e2.msg, "msg::updateMsgPin");
          var t2 = { pinFrom: this.account };
          f2(e2.pinCustom) && (m.verifyParamType("pinCustom", e2.pinCustom, "string", "msg::updateMsgPin"), t2.pinCustom = e2.pinCustom);
          var n2 = { scene: this.message.sceneMap[e2.msg.scene], from: e2.msg.from, to: e2.msg.to, time: e2.msg.time, idServer: e2.msg.idServer, idClient: e2.msg.idClient };
          this.processCallback(e2), this.sendCmd("updateMsgPin", { msg: n2, pinTag: t2 }, e2.callback);
        }, l2.deleteMsgPin = function(e2) {
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "deleteMsgPin", done: e2.done }), m.verifyOptions(e2, "msg", "msg::deleteMsgPin"), h.call(this, e2.msg, "msg::deleteMsgPin");
          var t2 = { pinFrom: this.account }, n2 = { scene: this.message.sceneMap[e2.msg.scene], from: e2.msg.from, to: e2.msg.to, time: e2.msg.time, idServer: e2.msg.idServer, idClient: e2.msg.idClient };
          this.processCallback(e2), this.sendCmd("deleteMsgPin", { msg: n2, pinTag: t2 }, e2.callback);
        }, l2.getMsgPins = function(e2) {
          var t2 = this;
          (e2 = e2 || {}).done = g({ instance: this, className: "NIMFn", funcName: "getMsgPins", done: e2.done }), m.verifyOptions(e2, "id", "msg::getMsgPins");
          var n2 = this.db, r2 = m.getIdArray(e2.id);
          m.verifyParamValid("id的前半部分", r2[0], this.message.validScenes, "msg::getMsgPins"), m.verifyParamType("id的后半部分", r2[1], "string", "msg::getMsgPins"), "superTeam" === r2[0] && (r2[0] = "super_team");
          var o2 = { sessionId: r2 = r2.join("|"), timetag: 0 };
          if (this.processCallback(e2), n2.enable) {
            var s2 = this.protocol.timetags.sync;
            n2.getTimetag("pin-" + e2.id).then(function(r3) {
              r3 > s2 ? n2.getMsgPins(e2.id).then(function(t3) {
                return e2.callback(null, { pins: t3 || [] });
              }).catch(function(t3) {
                return e2.callback(t3);
              }) : (o2.timetag = r3, i2.call(t2));
            });
          } else
            i2.call(this);
          function i2() {
            this.sendCmd("getMsgPins", { msgPinReq: o2, id: e2.id, NOTSTORE: "msgPinReq" }, e2.callback);
          }
        };
      }, function(e, t, n) {
        var r = n(3), o = n(16), s = n(2), i = n(10), a = n(40).fn, c = n(0), u = c.undef, l2 = c.notundef, m = n(153), p = n(25).reportAPI;
        a.markSysMsgRead = function(e2) {
          (e2 = e2 || {}).done = p({ instance: this, className: "NIMFn", funcName: "markSysMsgRead", done: e2.done });
          var t2, n2 = this.db, i2 = r.resolve(), a2 = this.protocol;
          c.verifyOptions(e2, "sysMsgs", "sysmsg::markSysMsgRead");
          var u2 = e2.sysMsgs;
          function l3() {
            e2.done(t2, e2);
          }
          c.isArray(u2) || (u2 = [u2]), n2.enable ? i2 = n2.markSysMsgRead(u2).then(function(e3) {
            u2 = e3, a2.onUpdateSysMsg(e3);
          }) : (u2 = o(u2).call(u2, function(e3) {
            return !e3.read;
          })).length && (a2.options.autoMarkRead || a2.markSysMsgRead(u2, true), s(u2).call(u2, function(e3) {
            e3.read = true;
          }), a2.onUpdateSysMsg(u2)), i2.then(function() {
            return a2.reduceSysMsgUnread(u2);
          }).then(l3, function(e3) {
            t2 = e3, l3();
          });
        }, a.sendCustomSysMsg = function(e2) {
          (e2 = e2 || {}).done = p({ instance: this, className: "NIMFn", funcName: "sendCustomSysMsg", done: e2.done });
          c.verifyOptions(e2, "scene to content", "sysmsg::sendCustomSysMsg"), c.verifyParamValid("scene", e2.scene, this.message.validScenes, "sysmsg::sendCustomSysMsg"), this.processCallback(e2);
          var t2 = "sendCustomSysMsg";
          return "p2p" === e2.scene ? e2.type = "customP2p" : "superTeam" === e2.scene ? (e2.type = "customSuperTeam", t2 = "sendSuperTeamCustomSysMsg") : e2.type = "customTeam", e2.sysMsg = new m(e2), o(e2) && (t2 = "sendFilterCustomSysMsg"), this.sendCmd(t2, { sysMsg: e2.sysMsg, single: true }, e2.callback), this.formatReturnSysMsg(e2.sysMsg);
        }, a.formatReturnSysMsg = function(e2) {
          return e2 = c.copy(e2), this.protocol.completeSysMsg(e2), e2.status = "sending", e2 = i(m).call(m, e2);
        }, a.getLocalSysMsgs = function(e2) {
          (e2 = e2 || {}).done = p({ instance: this, className: "NIMFn", funcName: "getLocalSysMsgs", done: e2.done });
          var t2, n2 = this.db, r2 = [];
          function o2() {
            e2.sysMsgs = r2, e2.done(t2, e2);
          }
          c.verifyOptions(e2), e2.category && c.verifyParamValid("category", e2.category, m.validCategories, "sysmsg::getLocalSysMsgs"), e2.type && c.verifyParamValid("type", e2.type, m.validTypes, "sysmsg::getLocalSysMsgs"), u(e2.limit) && (e2.limit = 100), c.verifyParamType("limit", e2.limit, "number", "sysmsg::getLocalSysMsgs"), c.verifyParamMax("limit", e2.limit, 100, "sysmsg::getLocalSysMsgs"), l2(i(e2)) ? c.verifyParamType("reverse", i(e2), "boolean", "sysmsg::getLocalSysMsgs") : e2.reverse = false, this.processCallback(e2), n2.enable ? n2.getSysMsgs(e2).then(function(e3) {
            r2 = e3, o2();
          }, function(e3) {
            t2 = e3, o2();
          }) : o2();
        }, a.updateLocalSysMsg = function(e2) {
          (e2 = e2 || {}).done = p({ instance: this, className: "NIMFn", funcName: "updateLocalSysMsg", done: e2.done });
          var t2, n2 = this.db, r2 = null;
          if (c.verifyOptions(e2, "idServer", "sysmsg::updateLocalSysMsg"), this.processCallback(e2), n2.enable) {
            var o2 = c.filterObj(e2, "idServer state localCustom");
            n2.updateSysMsg(o2).then(function(e3) {
              r2 = e3, s2();
            }, function(e3) {
              t2 = e3, s2();
            });
          } else
            s2();
          function s2() {
            e2.sysMsg = r2, e2.done(t2, e2);
          }
        }, a.deleteLocalSysMsg = function(e2) {
          (e2 = e2 || {}).done = p({ instance: this, className: "NIMFn", funcName: "deleteLocalSysMsg", done: e2.done });
          var t2, n2 = this.db;
          function r2() {
            e2.done(t2, e2);
          }
          c.verifyOptions(e2, "idServer", "sysmsg::deleteLocalSysMsg"), this.processCallback(e2), n2.enable ? n2.deleteSysMsg(e2.idServer).then(function() {
            r2();
          }, function(e3) {
            t2 = e3, r2();
          }) : r2();
        }, a.deleteAllLocalSysMsgs = function(e2) {
          var t2;
          (e2 = e2 || {}).done = p({ instance: this, className: "NIMFn", funcName: "deleteAllLocalSysMsgs", done: e2.done });
          var n2 = this, r2 = n2.db;
          function o2() {
            n2.protocol.onUpdateSysMsgUnread({}), e2.done(t2, e2);
          }
          n2.processCallback(e2), r2.enable ? r2.deleteAllSysMsgs().then(function() {
            o2();
          }, function(e3) {
            t2 = e3, o2();
          }) : o2();
        };
      }, function(e, t, n) {
        var r = n(40).fn, o = n(0), s = n(11), i = n(25).reportAPI;
        r.getChatroomAddress = function(e2) {
          (e2 = e2 || {}).done = i({ instance: this, className: "NIMFn", funcName: "getChatroomAddress", done: e2.done }), o.verifyOptions(e2, "chatroomId", "chatroom::getChatroomAddress");
          e2.isWeixinApp = s.isWeixinApp, e2.type = s.ipVersion, this.processCallback(e2), this.sendCmd("getChatroomAddress", e2);
        };
      }, function(e, t) {
      }, function(e, t) {
      }, function(e, t, n) {
        var r = n(40).fn, o = n(0), s = n(25).reportAPI;
        r.audioToText = function(e2) {
          (e2 = e2 || {}).done = s({ instance: this, className: "NIMFn", funcName: "audioToText", done: e2.done }), o.verifyOptions(e2, "url", "audio::audioToText"), e2.audioToText = o.filterObj(e2, "url");
          this.processCallback(e2), this.sendCmd("audioToText", e2);
        };
      }, function(e, t, n) {
        var r = n(40).fn;
        r.clearDB = function(e2) {
          var t2 = this.db;
          this.processCallback(e2);
          var n2 = e2.done;
          t2.enable ? t2.clear().then(n2, n2) : n2();
        }, r.removeDB = function(e2) {
          var t2 = this.db;
          this.processCallback(e2);
          var n2 = e2.done;
          t2.enable ? t2.destroy().then(n2, n2) : n2();
        }, r.closeDB = function(e2) {
          var t2 = this.db;
          this.processCallback(e2);
          var n2 = e2.done;
          t2.enable ? t2.close().then(n2, n2) : n2();
        };
      }, function(e, t, n) {
        var r = n(40).fn, o = n(310), s = n(0), i = s.undef, a = n(25).reportAPI;
        r.getPushNotificationMultiportConfig = function() {
          return a({ instance: this, className: "NIMFn", funcName: "getPushNotificationMultiportConfig", hasCallback: false }), this.protocol.getPushNotificationMultiportConfig();
        }, r.updatePushNotificationMultiportConfig = function(e2) {
          (e2 = e2 || {}).done = a({ instance: this, className: "NIMFn", funcName: "updatePushNotificationMultiportConfig", done: e2.done }), s.verifyOptions(e2), i(e2.shouldPushNotificationWhenPCOnline) && (e2.shouldPushNotificationWhenPCOnline = true), e2.donnop = new o(e2), this.processCallback(e2), this.sendCmd("updateDonnop", e2);
        };
      }, function(e, t, n) {
        var r = n(2), o = n(3), s = n(6), i = n(22), a = n(40).fn, c = n(0), u = n(883), l2 = n(884), m = n(25).reportAPI;
        function p(e2) {
          return "object" === i(e2) && (e2.msgEventSubscribes ? e2 = e2.msgEventSubscribes : e2.msgEventSubscribe ? e2 = e2.msgEventSubscribe : e2.accounts ? e2 = e2.accounts : e2.msgEvent && (e2 = e2.msgEvent).time && (e2.time = +e2.time), 1 === e2.sync ? e2.sync = true : 0 === e2.sync && (e2.sync = false)), e2;
        }
        a.batchSendEventsCmds = function(e2, t2, n2) {
          var i2 = this, a2 = c.dropArrayDuplicates(t2.accounts);
          a2 = c.reshape2d(a2, 100);
          var u2 = [];
          r(a2).call(a2, function(n3) {
            u2.push(new o(function(r2, o2) {
              var s2 = c.simpleClone(t2);
              s2.accounts = n3, i2.sendCmdWithResp(e2, s2, function(e3, t3) {
                e3 ? o2(e3) : r2(p(t3));
              });
            }));
          }), o.all(u2).then(function(e3) {
            var t3 = null;
            if (e3.length > 0)
              if (e3[0].msgEventSubscribe) {
                var o2 = e3[0].msgEventSubscribe;
                o2 = p(o2);
                var i3 = [];
                r(e3).call(e3, function(e4) {
                  i3 = s(i3).call(i3, e4.accounts);
                }), t3 = { accounts: i3, msgEventSubscribe: o2 };
              } else
                t3 = [], r(e3).call(e3, function(e4) {
                  t3 = s(t3).call(t3, e4);
                });
            n2(null, t3);
          }, function(e3) {
            n2(e3, null);
          });
        }, a.publishEvent = function(e2) {
          (e2 = e2 || {}).done = m({ instance: this, className: "NIMFn", funcName: "publishEvent", done: e2.done });
          var t2 = new u(e2);
          t2 = t2.assembleEvent(), this.processCallback(e2), this.sendCmdWithResp("publishEvent", { msgEvent: t2 }, function(t3, n2) {
            t3 || (n2 = p(n2)), e2.callback(t3, n2);
          });
        }, a.subscribeEvent = function(e2) {
          (e2 = e2 || {}).done = m({ instance: this, className: "NIMFn", funcName: "subscribeEvent", done: e2.done });
          c.verifyOptions(e2, "accounts", "event::subscribeEvent");
          var t2 = new l2(e2);
          c.verifyParamType("accounts", e2.accounts, "array", "event::subscribeEvent"), this.processCallback(e2), t2 = t2.assembleEvent(), this.batchSendEventsCmds("subscribeEvent", { msgEventSubscribe: t2, accounts: e2.accounts }, function(t3, n2) {
            !t3 && n2 && (n2 = { failedAccounts: n2 }), e2.callback(t3, n2);
          });
        }, a.unSubscribeEventsByAccounts = function(e2) {
          (e2 = e2 || {}).done = m({ instance: this, className: "NIMFn", funcName: "unSubscribeEventsByAccounts", done: e2.done });
          c.verifyOptions(e2, "accounts", "event::unSubscribeEventsByAccounts"), c.verifyParamType("accounts", e2.accounts, "array", "event::unSubscribeEventsByAccounts");
          var t2 = new l2(e2);
          t2 = t2.assembleEvent(), this.processCallback(e2), this.batchSendEventsCmds("unSubscribeEventsByAccounts", { msgEventSubscribe: t2, accounts: e2.accounts }, function(t3, n2) {
            !t3 && n2 && (n2 = { failedAccounts: n2 }), e2.callback(t3, n2);
          });
        }, a.unSubscribeEventsByType = function(e2) {
          (e2 = e2 || {}).done = m({ instance: this, className: "NIMFn", funcName: "unSubscribeEventsByType", done: e2.done });
          var t2 = new l2(e2);
          t2 = t2.assembleEvent(), this.processCallback(e2), this.sendCmdWithResp("unSubscribeEventsByType", { msgEventSubscribe: t2 }, function(t3, n2) {
            e2.callback(t3, n2);
          });
        }, a.querySubscribeEventsByAccounts = function(e2) {
          (e2 = e2 || {}).done = m({ instance: this, className: "NIMFn", funcName: "querySubscribeEventsByAccounts", done: e2.done });
          c.verifyOptions(e2, "accounts", "event::querySubscribeEventsByAccounts"), c.verifyParamType("accounts", e2.accounts, "array", "event::querySubscribeEventsByAccounts");
          var t2 = new l2(e2);
          t2 = t2.assembleEvent(), this.processCallback(e2), this.batchSendEventsCmds("querySubscribeEventsByAccounts", { msgEventSubscribe: t2, accounts: e2.accounts }, function(t3, n2) {
            !t3 && n2 && (n2 = { msgEventSubscribes: n2 }), e2.callback(t3, n2);
          });
        }, a.querySubscribeEventsByType = function(e2) {
          (e2 = e2 || {}).done = m({ instance: this, className: "NIMFn", funcName: "querySubscribeEventsByType", done: e2.done });
          var t2 = new l2(e2);
          t2 = t2.assembleEvent(), this.processCallback(e2), this.sendCmdWithResp("querySubscribeEventsByType", { msgEventSubscribe: t2 }, function(t3, n2) {
            t3 || (n2 = { msgEventSubscribes: p(n2) }), e2.callback(t3, n2);
          });
        };
      }, function(e, t, n) {
        var r = n(7), o = n(0), s = o.notundef, i = n(41);
        function a(e2) {
          if (o.verifyOptions(e2, "type value", "event::MsgEvent"), o.verifyParamType("type", e2.type, "number", "event::MsgEvent"), o.verifyParamType("value", e2.value, "number", "event::MsgEvent"), this.type = e2.type, this.value = e2.value, this.idClient = o.guid(), s(e2.custom) && (this.custom = "" + e2.custom), this.validTime = e2.validTime || 604800, o.verifyParamType("validTime", this.validTime, "number", "event::MsgEvent"), o.verifyParamMin("validTime", this.validTime, 60, "event::MsgEvent"), o.verifyParamMax("validTime", this.validTime, 604800, "event::MsgEvent"), s(e2.broadcastType)) {
            var t2;
            if (o.verifyParamType("broadcastType", e2.broadcastType, "number", "event::MsgEvent"), r(t2 = [1, 2]).call(t2, e2.broadcastType) < 0)
              throw new i('参数错误"broadcastType":只能为1或2');
            this.broadcastType = e2.broadcastType;
          } else
            this.broadcastType = 2;
          s(e2.sync) ? (o.verifyParamType("sync", e2.sync, "boolean", "event::MsgEvent"), this.sync = e2.sync) : this.sync = false;
        }
        a.prototype.assembleEvent = function() {
          return { type: this.type, value: this.value, idClient: this.idClient, custom: this.custom || "", validTime: this.validTime, broadcastType: this.broadcastType, sync: true === this.sync ? 1 : 0 };
        }, e.exports = a;
      }, function(e, t, n) {
        var r = n(0), o = r.notundef;
        function s(e2) {
          r.verifyOptions(e2, "type", "event::MsgEventSubscribe"), r.verifyParamType("type", e2.type, "number", "event::MsgEventSubscribe"), r.findObjIndexInArray([1, 2, 3], e2.type) < 0 && r.verifyParamMin("type", e2.type, 1e5, "event::MsgEventSubscribe"), this.type = e2.type, o(e2.subscribeTime) ? (r.verifyParamType("subscribeTime", e2.subscribeTime, "number", "event::MsgEventSubscribe"), r.verifyParamMin("subscribeTime", e2.subscribeTime, 60, "event::MsgEventSubscribe"), r.verifyParamMax("subscribeTime", e2.subscribeTime, 2592e3, "event::MsgEventSubscribe"), this.subscribeTime = e2.subscribeTime) : this.subscribeTime = 2592e3, o(e2.sync) ? (r.verifyParamType("sync", e2.sync, "boolean", "event::MsgEventSubscribe"), this.sync = e2.sync) : this.sync = true;
        }
        s.prototype.assembleEvent = function() {
          return { type: this.type, subscribeTime: this.subscribeTime, sync: true === this.sync ? 1 : 0 };
        }, e.exports = s;
      }, function(e, t, n) {
        var r = n(37), o = n(40).fn, s = n(0), i = n(25).reportAPI;
        o.httpRequestProxy = function(e2) {
          (e2 = e2 || {}).done = i({ instance: this, className: "NIMFn", funcName: "httpRequestProxy", done: e2.done }), s.verifyOptions(e2, "path", "misc::httpRequestProxy");
          var t2 = r({}, e2);
          delete t2.done, this.processCallback(e2), this.sendCmd("httpProxy", { proxyTag: t2 }, e2.callback);
        };
      }, function(e, t, n) {
        var r = n(40).fn, o = n(11), s = n(25).reportAPI;
        r.getQChatAddress = function(e2) {
          (e2 = e2 || {}).done = s({ instance: this, className: "NIMFn", funcName: "getQChatAddress", done: e2.done }), this.processCallback(e2), this.sendCmd("getQChatAddress", { getQChatAddressTag: { ipType: o.ipVersion } }, e2.done);
        };
      }, function(e, t, n) {
        n(299);
        var r = n(197);
        n(311)(r), e.exports = r;
      }, function(e, t, n) {
        var r = n(314), o = n(15), s = n(3), i = n(60), a = n(6), c = n(24), u = n(198).fn, l2 = n(11), m = n(157).V2NIMConnectStatus;
        u.connect = function() {
          l2.isBrowser && this.reporter.restore(), r(u).connect.call(this);
        }, u.refreshSocketUrl = function() {
          var e2;
          return this.socketUrlsBackup = this.socketUrlsBackup || [], this.socketUrls = o(e2 = this.socketUrlsBackup).call(e2, 0), this.logger.info("link::refreshSocketUrl"), this.statusProtector.emit("auth/loginLifeCycleAddressing"), s.resolve(this.socketUrls);
        }, u.onHandshakeFailed = function(e2, t2) {
          var n2;
          this.reporter.report("chatroomLogin", { accid: this.account, roomId: this.options && this.options.chatroomId, serverIps: this.options && this.options.chatroomAddresses && this.options.chatroomAddresses.join(","), currentServerIp: t2, rt: i() - e2, result: 408, failReason: "ws_handshake_failed", time: i(), net_connect: this.checkNetworkAvailable() }), this.logger.warn(a(n2 = "link::onHandshakeFailed: shandshake failed, startTime: ".concat(e2, ", targetUrl: ")).call(n2, t2));
        }, u.onConnectFailed = function(e2, t2, n2) {
          var r2, o2, s2 = "string" == typeof e2 ? "connect_failed:".concat(e2) : "connect_failed";
          this.reporter.report("chatroomLogin", { accid: this.account, roomId: this.options && this.options.chatroomId, serverIps: this.options && this.options.chatroomAddresses && this.options.chatroomAddresses.join(","), currentServerIp: n2, rt: i() - t2, result: 408, failReason: "ws_".concat(s2), time: i(), net_connect: this.checkNetworkAvailable() }), this.logger.warn(a(r2 = a(o2 = "link::onConnectFailed: connect failed due to ".concat(e2, ", startTime: ")).call(o2, t2, ", targetUrl: ")).call(r2, n2));
        }, u.onSocketError = function(e2, t2, n2) {
          var r2, o2, s2 = "string" == typeof e2 ? "socket.io error:".concat(e2) : "socket.io error";
          this.reporter.report("chatroomLogin", { accid: this.account, roomId: this.options && this.options.chatroomId, serverIps: this.options && this.options.chatroomAddresses && this.options.chatroomAddresses.join(","), currentServerIp: n2, rt: i() - t2, result: 408, failReason: "ws_".concat(s2), time: i(), net_connect: this.checkNetworkAvailable() }), this.logger.warn(a(r2 = a(o2 = "link::onSocketError: due to ".concat(e2, ", startTime: ")).call(o2, t2, ", targetUrl: ")).call(r2, n2));
        }, u.notifyDisconnect = function(e2) {
          r(u).notifyDisconnect.call(this, e2);
        }, u.disconnect = function() {
          var e2 = this, t2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : function() {
          };
          if (this.isConnected())
            return this.sendCmd("logout"), void c(function() {
              r(u).disconnect.call(e2, t2);
            }, 0);
          this.connecting ? this.logger.warn("ChatroomProtocolFn api disconnect:: connecting but exiting") : this.statusProtector.getConnectStatus() !== m.V2NIM_CONNECT_STATUS_DISCONNECTED ? this.logger.warn("ChatroomProtocolFn api disconnect:: has tried to disconnect actively") : this.logger.warn("ChatroomProtocolFn api disconnect:: other logic entered");
          var n2 = r(u);
          n2.disconnect.call(this, t2);
        };
      }, function(e, t, n) {
        var r = n(57), o = n(51), s = n(58), i = n(8), a = n(60), c = n(3), u = n(26), l2 = n(4), m = n(52), p = n(16), d = n(53), f2 = n(2), g = n(54), h = n(55), y = n(43);
        function v(e2, t2) {
          var n2 = l2(e2);
          if (m) {
            var r2 = m(e2);
            t2 && (r2 = p(r2).call(r2, function(t3) {
              return d(e2, t3).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        function b(e2) {
          for (var t2 = 1; t2 < arguments.length; t2++) {
            var n2, r2, s2 = null != arguments[t2] ? arguments[t2] : {};
            t2 % 2 ? f2(n2 = v(Object(s2), true)).call(n2, function(t3) {
              o(e2, t3, s2[t3]);
            }) : g ? h(e2, g(s2)) : f2(r2 = v(Object(s2))).call(r2, function(t3) {
              y(e2, t3, d(s2, t3));
            });
          }
          return e2;
        }
        var T = n(198).fn, S = n(45), M = n(0);
        function k(e2) {
          var t2 = this;
          if (398 === e2.code)
            return this.logger.warn("pendingLoginFailed:398 try to reconnect socket link，backoff set min 5s"), t2.forceDisconnect(), t2.backoff.setMin(5e3), void (0 === t2.retryCount ? t2.refreshSocketUrl() : c.resolve()).then(function() {
              var n2;
              t2.reconnect({ allFailedCB: u(n2 = function(e3) {
                this.logger.error("pendingLoginFailed: ", e3.code, e3), this.onAuthError(e3, "link::onLoginReconnectFailed");
              }).call(n2, t2, e2) });
            });
          this.logger.error("pendingLoginFailed: ", e2.code, e2), t2.onAuthError(e2, "link::onLogin");
        }
        T.assembleLogin = function() {
          var e2 = this.options;
          this.sdkSession = this.genSessionKey();
          var t2 = { appKey: e2.appKey, account: e2.account, deviceId: S.deviceId, chatroomId: e2.chatroomId, session: this.sdkSession, appLogin: this.autoconnect ? 1 : 0 }, n2 = true;
          if (void 0 === e2.loc_x || void 0 === e2.loc_y || void 0 === e2.loc_z ? n2 = false : ("number" != typeof e2.loc_x && (e2.loc_x = 0), "number" != typeof e2.loc_y && (e2.loc_y = 0), "number" != typeof e2.loc_z && (e2.loc_z = 0)), e2.authType = e2.loginAuthType, t2 = M.merge(t2, M.filterObj(e2, n2 ? "chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt loc_x loc_y loc_z distance antiSpamBusinessId" : "chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags loginAuthType loginExt distance antiSpamBusinessId")), e2.tags && e2.tags.length > 0)
            try {
              t2.tags = i(e2.tags);
            } catch (t3) {
              this.logger.error("assembleLogin::format tags error", e2.tags, t3);
            }
          return { type: 1, login: t2, imLogin: this.assembleIMLogin() };
        }, T.login = s(r.mark(function e2() {
          var t2, n2, o2, s2 = this;
          return r.wrap(function(e3) {
            for (; ; )
              switch (e3.prev = e3.next) {
                case 0:
                  return t2 = this, e3.next = 3, t2.assembleLogin();
                case 3:
                  if (n2 = e3.sent, !(o2 = this.socket && this.socket.socket && this.socket.socket.sessionid)) {
                    e3.next = 13;
                    break;
                  }
                  if (this.socketIds || (this.socketIds = {}), !this.socketIds[o2]) {
                    e3.next = 10;
                    break;
                  }
                  return this.logger.warn("onConnect::repeat login", o2), e3.abrupt("return");
                case 10:
                  this.socketIds[o2] = true, e3.next = 14;
                  break;
                case 13:
                  this.logger.warn("onConnect:: no socketId ", this.socket && this.socket.socket);
                case 14:
                  this.logger.warn("link::doLogin: " + o2 + " appLogin is " + n2.login.appLogin), t2.createLoginTime = a(), t2.sendCmd("login", b({}, n2), function(e4, n3) {
                    if (e4)
                      t2.reporter.report("chatroomLogin", { accid: t2.account, roomId: t2.options && t2.options.chatroomId, serverIps: t2.options && t2.options.chatroomAddresses && t2.options.chatroomAddresses.join(","), currentServerIp: t2.url, rt: a() - t2.createLoginTime, result: e4 ? e4.code : 408, failReason: e4 ? e4.message : "", time: a(), net_connect: t2.checkNetworkAvailable() }), k.call(t2, e4), t2.statusProtector.emit("auth/loginLifeCycleLoginFail", e4);
                    else if (t2.reporter.report("chatroomLogin", { accid: t2.account, roomId: t2.options && t2.options.chatroomId, serverIps: t2.options && t2.options.chatroomAddresses && t2.options.chatroomAddresses.join(","), currentServerIp: t2.url, rt: a() - t2.createLoginTime, result: 200, failReason: "", time: a(), net_connect: t2.checkNetworkAvailable() }), t2.resetReconnectStatus(), s2.heartbeatFail = 0, s2.hasLogin = true, s2.autoconnect = true, t2.startHeartbeat(), t2.initOnlineListener(), t2.statusProtector.emit("auth/loginLifeCycleLoginSucc"), t2.keepNosSafeUrl)
                      t2.afterLogin(n3);
                    else {
                      var r2 = [];
                      t2.parser.checkObjSafeUrl(n3, r2, []), c.all(r2).then(function() {
                        t2.afterLogin(n3);
                      }).catch(function() {
                        t2.afterLogin(n3);
                      });
                    }
                  });
                case 17:
                case "end":
                  return e3.stop();
              }
          }, e2, this);
        })), T.afterLogin = function(e2) {
          var t2 = e2.chatroom;
          this.sendCmd("getNosCdnHost", {}), this.chatroom = t2, this.notifyLogin(e2);
        }, T.kickedReasons = ["", "chatroomClosed", "managerKick", "samePlatformKick", "silentlyKick", "blacked"], T.kickedMessages = ["", "聊天室关闭了", "被房主或者管理员踢出", "不允许同一个帐号在多个地方同时登录", "悄悄被踢", "被拉黑了"];
      }, function(e, t, n) {
        var r = n(10), o = n(24), s = n(71), i = n(2), a = n(48), c = n(37), u = n(15), l2 = n(32), m = n(126), p = n(4), d = n(198).fn, f2 = n(0), g = n(11), h = n(891), y = n(768), v = n(896), b = n(897), T = n(898);
        d.completeMsg = function(e2) {
          e2.chatroomId = this.chatroom && this.chatroom.id, e2.from = this.options.account, e2.fromClientType = "Web", e2.time || (e2.time = +/* @__PURE__ */ new Date());
        }, d.amendMsg = function(e2) {
          return e2;
        }, d.onMsg = function(e2) {
          var t2, n2 = r(t2 = this.message).call(t2, e2.content.msg);
          if (this.checkMsgUnique(n2)) {
            if (n2.__handleTime = this.reporterHook.getSafeClock(), n2.__receiveTime = e2.__receiveTime, f2.get(e2, "content.msg.__clientExt"))
              try {
                n2.__clientExt = JSON.parse(e2.content.msg.__clientExt);
              } catch (t3) {
                this.logger.warn("ChatroomProtocolFn:onMsg __clientExt parse failed ".concat(e2.content.msg.__clientExt));
              }
            this.msgBuffer.push(n2), this.msgFlushTimer || this.startMsgFlushTimer(), e2 && e2.content && e2.content.msg && "1" === e2.content.msg.needHighPriorityMsgAck && this.sendCmd("sendChatroomMsgAck", { chatRoomMsgAckTag: { idClient: n2.idClient, chatroomId: n2.chatroomId } });
          } else
            this.logger.warn("onMsg::msg::repeat", n2.idClient);
        }, d.startMsgFlushTimer = function() {
          var e2 = this, t2 = e2.options;
          e2.msgFlushTimer = o(function() {
            var n2, r2 = s(n2 = e2.msgBuffer).call(n2, 0, t2.msgBufferSize);
            if (g.isBrowser) {
              var o2 = e2.reporterHook.getSafeClock();
              i(r2).call(r2, function(t3) {
                if ("out" !== t3.flow) {
                  var n3 = { msgId: t3.idServer, clientId: t3.idClient, receiveTime: e2.reporterHook.getNTPTime(t3.__receiveTime), serverTime: t3.time, callbackTime: e2.reporterHook.getNTPTime(o2), preHandleTime: e2.reporterHook.getNTPTime(t3.__handleTime), fromAccid: t3.from, toAccid: e2.options.account, type: 4, tid: "", roomId: t3.chatroomId, result: 200, failReason: "", rt: a(o2 - t3.__receiveTime) }, r3 = f2.get(t3, "__clientExt.statistics.apiCallingTime"), s2 = f2.get(t3, "__clientExt.statistics.sendTime");
                  r3 && s2 && (n3.apiCallingTime = r3, n3.sendTime = s2, n3.attachUploadDuration = f2.get(t3, "__clientExt.statistics.attachUploadDuration") || 0), e2.reporter && e2.reporter.report("msgReceive", n3);
                }
                delete t3.__handleTime, delete t3.__receiveTime, delete t3.__clientExt;
              });
            }
            e2.options.onmsgs(r2), e2.msgBuffer.length ? e2.startMsgFlushTimer() : delete e2.msgFlushTimer;
          }, t2.msgBufferInterval);
        }, d.checkMsgUnique = f2.genCheckUniqueFunc("idClient"), d.onSendMsg = function(e2) {
          var t2, n2 = e2.obj.msg;
          e2.error ? n2.status = "fail" : (n2 = e2.content.msg).status = "success", c(n2, e2.obj.msg), n2 = r(t2 = this.message).call(t2, n2), this.checkMsgUnique(n2), e2.obj = n2;
        }, d.onHistoryMsgs = function(e2) {
          e2.error || (e2.obj || (e2.obj = {}), e2.obj.msgs = this.message.reverseMsgs(e2.content.msgs));
        }, d.onCdnMsgInfo = function(e2) {
          if (e2) {
            e2.cdnUrls && (e2.cdnUrls = e2.cdnUrls.split("|")), e2.interval && (e2.interval = 1e3 * a(e2.interval)), e2.timeout && (e2.timeout = +e2.timeout), e2.enable && (e2.enable = +e2.enable), e2.timestamp && (e2.timestamp = +e2.timestamp, this.correctCdnTime(e2.timestamp));
            var t2 = !this.cdnInfo.enable && e2.enable;
            c(this.cdnInfo, e2), t2 && this.queryCdnMsgs();
          }
        }, d.correctCdnTime = function(e2) {
          e2 && "number" == typeof e2 && (this.cdnInfo || (this.cdnInfo = {}), this.cdnInfo.timestamp = e2, this.cdnInfo.localTime = +/* @__PURE__ */ new Date(), this.cdnInfo.lastNow = null, this.logger.info("correctCdnTime: timestamp, localTime", e2, this.cdnInfo.localTime, new Date(e2), new Date(this.cdnInfo.localTime)));
        }, d.queryCdnMsgs = function(e2) {
          var t2, n2 = this;
          if (this.cdnInfo && this.cdnInfo.enable && this.isConnected()) {
            this.queryCdnTimer = o(function() {
              return n2.queryCdnMsgs();
            }, this.cdnInfo.interval);
            var r2 = +/* @__PURE__ */ new Date();
            if (r2 = r2 - this.cdnInfo.localTime + this.cdnInfo.timestamp, r2 -= r2 % this.cdnInfo.interval, this.cdnInfo.lastNow !== r2 && this.cdnInfo.cdnUrls && this.cdnInfo.cdnUrls.length) {
              this.cdnInfo.cdnUrls.push(this.cdnInfo.cdnUrls.shift());
              var s2 = this, i2 = this.cdnInfo.decryptKey, a2 = this.cdnInfo.timeout || Math.ceil(this.cdnInfo.interval / 2), c2 = u(t2 = this.cdnInfo.cdnUrls).call(t2, 0);
              e2 = e2 || 0, function t3() {
                if (e2 >= 3)
                  return void s2.finalFail++;
                if (!c2.length)
                  return;
                var n3 = c2.shift().replace("#time", r2), o2 = n3.split("/")[2], u2 = +/* @__PURE__ */ new Date();
                s2.adaptersRequest(n3, { timeout: a2, onload: function(e3) {
                  if (s2.cdnInfo.lastNow > r2)
                    s2.logger.warn("queryCdnMsgs::doQuery cdnInfo.lastNow > now, will throw data ", s2.cdnInfo.lastNow, r2, e3);
                  else {
                    s2.cdnInfo.lastNow = r2, s2.afterQueryCdn(o2, +/* @__PURE__ */ new Date() - u2, true);
                    try {
                      e3 = JSON.parse(e3);
                    } catch (e4) {
                      s2.logger.warn("queryCdnMsgs::doQuery::onload parse res error: ", e4);
                    }
                    if (e3 && e3.data) {
                      e3.ptm && (s2.cdnInfo.timeout = e3.ptm), e3.pis && (s2.cdnInfo.interval = 1e3 * e3.pis);
                      var t4, n4, a3 = true === e3.e ? (t4 = e3.data, n4 = i2, h.decrypt(t4, y.parse(n4), { mode: v, padding: b }).toString(T)) : e3.data;
                      s2.onCdnMsgsSmoothly(a3, r2, 1e3 * e3.c);
                    }
                  }
                }, onerror: function(n4) {
                  if (e2++, s2.afterQueryCdn(o2, +/* @__PURE__ */ new Date() - u2, false), 404 === n4.status) {
                    var r3;
                    try {
                      var i3 = JSON.parse(n4.result);
                      404 === i3.code && i3.timestamp && (r3 = i3.timestamp);
                    } catch (e3) {
                      s2.logger.warn("queryCdnMsgs::doQuery::parse 404 result error", e3, n4);
                    }
                    !r3 && n4.date && (r3 = +new Date(n4.date)), r3 && (s2.correctCdnTime(r3), clearTimeout(s2.queryCdnTimer), s2.queryCdnMsgs(e2));
                  } else
                    t3();
                } }, { exception_service: 8 });
              }();
            }
          }
        }, d.onCdnMsgsSmoothly = function(e2, t2, n2) {
          try {
            e2 = JSON.parse(e2);
          } catch (e3) {
            this.logger.warn("onCdnMsgsSmoothly::JSON.parse error", e3);
          }
          if (this.logger.info("receive cdn msgs " + e2.length + " and request time is " + new Date(t2)), l2(e2) && e2.length) {
            var r2 = this, o2 = this.options.msgBufferInterval, a2 = Math.ceil(e2.length * o2 / n2);
            c2(), clearInterval(r2.cdnSmoothTimer), r2.cdnSmoothTimer = m(function() {
              return c2();
            }, o2);
          }
          function c2() {
            if (r2.isConnected()) {
              var t3 = s(e2).call(e2, 0, a2);
              i(t3).call(t3, function(e3) {
                var t4 = r2.parser.syncUnserialize(e3, "msg");
                r2.onMsg({ content: { msg: t4 } });
              }), e2.length || clearInterval(r2.cdnSmoothTimer);
            }
          }
        }, d.resetCdnData = function() {
          this.cdnData = {}, this.finalFail = 0, this.cdnDataTime = +/* @__PURE__ */ new Date();
        }, d.initCdnData = function() {
          this.resetCdnData(), f2.isFunction(this.options.onCdnRequestData) ? (this.options.cdnRequestDataInterval = this.options.cdnRequestDataInterval || 3e4, this.afterQueryCdn = function(e2, t2, n2) {
            var r2, o2 = this;
            this.cdnData[e2] || (this.cdnData[e2] = { success: 0, fail: 0, sr: 0, fr: 0, smr: 0, fmr: 0 }), n2 ? (this.cdnData[e2].success++, this.cdnData[e2].sr += t2, t2 > this.cdnData[e2].smr && (this.cdnData[e2].smr = t2)) : (this.cdnData[e2].fail++, this.cdnData[e2].fr += t2, t2 > this.cdnData[e2].fmr && (this.cdnData[e2].fmr = t2)), +/* @__PURE__ */ new Date() - this.cdnDataTime < this.options.cdnRequestDataInterval || (i(r2 = p(this.cdnData)).call(r2, function(e3) {
              o2.cdnData[e3].sr = o2.cdnData[e3].sr / o2.cdnData[e3].success || 0, o2.cdnData[e3].fr = o2.cdnData[e3].fr / o2.cdnData[e3].fail || 0;
            }), this.options.onCdnRequestData(c({}, this.cdnData), this.finalFail), this.resetCdnData());
          }) : this.afterQueryCdn = function() {
          };
        };
      }, function(e, t, n) {
        var r;
        e.exports = (r = n(94), n(768), n(893), n(769), n(313), function() {
          var e2 = r, t2 = e2.lib.BlockCipher, n2 = e2.algo, o = [], s = [], i = [], a = [], c = [], u = [], l2 = [], m = [], p = [], d = [];
          !function() {
            for (var e3 = [], t3 = 0; t3 < 256; t3++)
              e3[t3] = t3 < 128 ? t3 << 1 : t3 << 1 ^ 283;
            var n3 = 0, r2 = 0;
            for (t3 = 0; t3 < 256; t3++) {
              var f3 = r2 ^ r2 << 1 ^ r2 << 2 ^ r2 << 3 ^ r2 << 4;
              f3 = f3 >>> 8 ^ 255 & f3 ^ 99, o[n3] = f3, s[f3] = n3;
              var g2 = e3[n3], h = e3[g2], y = e3[h], v = 257 * e3[f3] ^ 16843008 * f3;
              i[n3] = v << 24 | v >>> 8, a[n3] = v << 16 | v >>> 16, c[n3] = v << 8 | v >>> 24, u[n3] = v, v = 16843009 * y ^ 65537 * h ^ 257 * g2 ^ 16843008 * n3, l2[f3] = v << 24 | v >>> 8, m[f3] = v << 16 | v >>> 16, p[f3] = v << 8 | v >>> 24, d[f3] = v, n3 ? (n3 = g2 ^ e3[e3[e3[y ^ g2]]], r2 ^= e3[e3[r2]]) : n3 = r2 = 1;
            }
          }();
          var f2 = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], g = n2.AES = t2.extend({ _doReset: function() {
            if (!this._nRounds || this._keyPriorReset !== this._key) {
              for (var e3 = this._keyPriorReset = this._key, t3 = e3.words, n3 = e3.sigBytes / 4, r2 = 4 * ((this._nRounds = n3 + 6) + 1), s2 = this._keySchedule = [], i2 = 0; i2 < r2; i2++)
                i2 < n3 ? s2[i2] = t3[i2] : (u2 = s2[i2 - 1], i2 % n3 ? n3 > 6 && i2 % n3 == 4 && (u2 = o[u2 >>> 24] << 24 | o[u2 >>> 16 & 255] << 16 | o[u2 >>> 8 & 255] << 8 | o[255 & u2]) : (u2 = o[(u2 = u2 << 8 | u2 >>> 24) >>> 24] << 24 | o[u2 >>> 16 & 255] << 16 | o[u2 >>> 8 & 255] << 8 | o[255 & u2], u2 ^= f2[i2 / n3 | 0] << 24), s2[i2] = s2[i2 - n3] ^ u2);
              for (var a2 = this._invKeySchedule = [], c2 = 0; c2 < r2; c2++) {
                if (i2 = r2 - c2, c2 % 4)
                  var u2 = s2[i2];
                else
                  u2 = s2[i2 - 4];
                a2[c2] = c2 < 4 || i2 <= 4 ? u2 : l2[o[u2 >>> 24]] ^ m[o[u2 >>> 16 & 255]] ^ p[o[u2 >>> 8 & 255]] ^ d[o[255 & u2]];
              }
            }
          }, encryptBlock: function(e3, t3) {
            this._doCryptBlock(e3, t3, this._keySchedule, i, a, c, u, o);
          }, decryptBlock: function(e3, t3) {
            var n3 = e3[t3 + 1];
            e3[t3 + 1] = e3[t3 + 3], e3[t3 + 3] = n3, this._doCryptBlock(e3, t3, this._invKeySchedule, l2, m, p, d, s), n3 = e3[t3 + 1], e3[t3 + 1] = e3[t3 + 3], e3[t3 + 3] = n3;
          }, _doCryptBlock: function(e3, t3, n3, r2, o2, s2, i2, a2) {
            for (var c2 = this._nRounds, u2 = e3[t3] ^ n3[0], l3 = e3[t3 + 1] ^ n3[1], m2 = e3[t3 + 2] ^ n3[2], p2 = e3[t3 + 3] ^ n3[3], d2 = 4, f3 = 1; f3 < c2; f3++) {
              var g2 = r2[u2 >>> 24] ^ o2[l3 >>> 16 & 255] ^ s2[m2 >>> 8 & 255] ^ i2[255 & p2] ^ n3[d2++], h = r2[l3 >>> 24] ^ o2[m2 >>> 16 & 255] ^ s2[p2 >>> 8 & 255] ^ i2[255 & u2] ^ n3[d2++], y = r2[m2 >>> 24] ^ o2[p2 >>> 16 & 255] ^ s2[u2 >>> 8 & 255] ^ i2[255 & l3] ^ n3[d2++], v = r2[p2 >>> 24] ^ o2[u2 >>> 16 & 255] ^ s2[l3 >>> 8 & 255] ^ i2[255 & m2] ^ n3[d2++];
              u2 = g2, l3 = h, m2 = y, p2 = v;
            }
            g2 = (a2[u2 >>> 24] << 24 | a2[l3 >>> 16 & 255] << 16 | a2[m2 >>> 8 & 255] << 8 | a2[255 & p2]) ^ n3[d2++], h = (a2[l3 >>> 24] << 24 | a2[m2 >>> 16 & 255] << 16 | a2[p2 >>> 8 & 255] << 8 | a2[255 & u2]) ^ n3[d2++], y = (a2[m2 >>> 24] << 24 | a2[p2 >>> 16 & 255] << 16 | a2[u2 >>> 8 & 255] << 8 | a2[255 & l3]) ^ n3[d2++], v = (a2[p2 >>> 24] << 24 | a2[u2 >>> 16 & 255] << 16 | a2[l3 >>> 8 & 255] << 8 | a2[255 & m2]) ^ n3[d2++], e3[t3] = g2, e3[t3 + 1] = h, e3[t3 + 2] = y, e3[t3 + 3] = v;
          }, keySize: 8 });
          e2.AES = t2._createHelper(g);
        }(), r.AES);
      }, function(e, t) {
      }, function(e, t, n) {
        var r;
        e.exports = (r = n(94), function(e2) {
          var t2 = r, n2 = t2.lib, o = n2.WordArray, s = n2.Hasher, i = t2.algo, a = [];
          !function() {
            for (var t3 = 0; t3 < 64; t3++)
              a[t3] = 4294967296 * e2.abs(e2.sin(t3 + 1)) | 0;
          }();
          var c = i.MD5 = s.extend({ _doReset: function() {
            this._hash = new o.init([1732584193, 4023233417, 2562383102, 271733878]);
          }, _doProcessBlock: function(e3, t3) {
            for (var n3 = 0; n3 < 16; n3++) {
              var r2 = t3 + n3, o2 = e3[r2];
              e3[r2] = 16711935 & (o2 << 8 | o2 >>> 24) | 4278255360 & (o2 << 24 | o2 >>> 8);
            }
            var s2 = this._hash.words, i2 = e3[t3 + 0], c2 = e3[t3 + 1], d = e3[t3 + 2], f2 = e3[t3 + 3], g = e3[t3 + 4], h = e3[t3 + 5], y = e3[t3 + 6], v = e3[t3 + 7], b = e3[t3 + 8], T = e3[t3 + 9], S = e3[t3 + 10], M = e3[t3 + 11], k = e3[t3 + 12], x = e3[t3 + 13], C = e3[t3 + 14], I = e3[t3 + 15], w = s2[0], _ = s2[1], P = s2[2], A = s2[3];
            w = u(w, _, P, A, i2, 7, a[0]), A = u(A, w, _, P, c2, 12, a[1]), P = u(P, A, w, _, d, 17, a[2]), _ = u(_, P, A, w, f2, 22, a[3]), w = u(w, _, P, A, g, 7, a[4]), A = u(A, w, _, P, h, 12, a[5]), P = u(P, A, w, _, y, 17, a[6]), _ = u(_, P, A, w, v, 22, a[7]), w = u(w, _, P, A, b, 7, a[8]), A = u(A, w, _, P, T, 12, a[9]), P = u(P, A, w, _, S, 17, a[10]), _ = u(_, P, A, w, M, 22, a[11]), w = u(w, _, P, A, k, 7, a[12]), A = u(A, w, _, P, x, 12, a[13]), P = u(P, A, w, _, C, 17, a[14]), w = l2(w, _ = u(_, P, A, w, I, 22, a[15]), P, A, c2, 5, a[16]), A = l2(A, w, _, P, y, 9, a[17]), P = l2(P, A, w, _, M, 14, a[18]), _ = l2(_, P, A, w, i2, 20, a[19]), w = l2(w, _, P, A, h, 5, a[20]), A = l2(A, w, _, P, S, 9, a[21]), P = l2(P, A, w, _, I, 14, a[22]), _ = l2(_, P, A, w, g, 20, a[23]), w = l2(w, _, P, A, T, 5, a[24]), A = l2(A, w, _, P, C, 9, a[25]), P = l2(P, A, w, _, f2, 14, a[26]), _ = l2(_, P, A, w, b, 20, a[27]), w = l2(w, _, P, A, x, 5, a[28]), A = l2(A, w, _, P, d, 9, a[29]), P = l2(P, A, w, _, v, 14, a[30]), w = m(w, _ = l2(_, P, A, w, k, 20, a[31]), P, A, h, 4, a[32]), A = m(A, w, _, P, b, 11, a[33]), P = m(P, A, w, _, M, 16, a[34]), _ = m(_, P, A, w, C, 23, a[35]), w = m(w, _, P, A, c2, 4, a[36]), A = m(A, w, _, P, g, 11, a[37]), P = m(P, A, w, _, v, 16, a[38]), _ = m(_, P, A, w, S, 23, a[39]), w = m(w, _, P, A, x, 4, a[40]), A = m(A, w, _, P, i2, 11, a[41]), P = m(P, A, w, _, f2, 16, a[42]), _ = m(_, P, A, w, y, 23, a[43]), w = m(w, _, P, A, T, 4, a[44]), A = m(A, w, _, P, k, 11, a[45]), P = m(P, A, w, _, I, 16, a[46]), w = p(w, _ = m(_, P, A, w, d, 23, a[47]), P, A, i2, 6, a[48]), A = p(A, w, _, P, v, 10, a[49]), P = p(P, A, w, _, C, 15, a[50]), _ = p(_, P, A, w, h, 21, a[51]), w = p(w, _, P, A, k, 6, a[52]), A = p(A, w, _, P, f2, 10, a[53]), P = p(P, A, w, _, S, 15, a[54]), _ = p(_, P, A, w, c2, 21, a[55]), w = p(w, _, P, A, b, 6, a[56]), A = p(A, w, _, P, I, 10, a[57]), P = p(P, A, w, _, y, 15, a[58]), _ = p(_, P, A, w, x, 21, a[59]), w = p(w, _, P, A, g, 6, a[60]), A = p(A, w, _, P, M, 10, a[61]), P = p(P, A, w, _, d, 15, a[62]), _ = p(_, P, A, w, T, 21, a[63]), s2[0] = s2[0] + w | 0, s2[1] = s2[1] + _ | 0, s2[2] = s2[2] + P | 0, s2[3] = s2[3] + A | 0;
          }, _doFinalize: function() {
            var t3 = this._data, n3 = t3.words, r2 = 8 * this._nDataBytes, o2 = 8 * t3.sigBytes;
            n3[o2 >>> 5] |= 128 << 24 - o2 % 32;
            var s2 = e2.floor(r2 / 4294967296), i2 = r2;
            n3[15 + (o2 + 64 >>> 9 << 4)] = 16711935 & (s2 << 8 | s2 >>> 24) | 4278255360 & (s2 << 24 | s2 >>> 8), n3[14 + (o2 + 64 >>> 9 << 4)] = 16711935 & (i2 << 8 | i2 >>> 24) | 4278255360 & (i2 << 24 | i2 >>> 8), t3.sigBytes = 4 * (n3.length + 1), this._process();
            for (var a2 = this._hash, c2 = a2.words, u2 = 0; u2 < 4; u2++) {
              var l3 = c2[u2];
              c2[u2] = 16711935 & (l3 << 8 | l3 >>> 24) | 4278255360 & (l3 << 24 | l3 >>> 8);
            }
            return a2;
          }, clone: function() {
            var e3 = s.clone.call(this);
            return e3._hash = this._hash.clone(), e3;
          } });
          function u(e3, t3, n3, r2, o2, s2, i2) {
            var a2 = e3 + (t3 & n3 | ~t3 & r2) + o2 + i2;
            return (a2 << s2 | a2 >>> 32 - s2) + t3;
          }
          function l2(e3, t3, n3, r2, o2, s2, i2) {
            var a2 = e3 + (t3 & r2 | n3 & ~r2) + o2 + i2;
            return (a2 << s2 | a2 >>> 32 - s2) + t3;
          }
          function m(e3, t3, n3, r2, o2, s2, i2) {
            var a2 = e3 + (t3 ^ n3 ^ r2) + o2 + i2;
            return (a2 << s2 | a2 >>> 32 - s2) + t3;
          }
          function p(e3, t3, n3, r2, o2, s2, i2) {
            var a2 = e3 + (n3 ^ (t3 | ~r2)) + o2 + i2;
            return (a2 << s2 | a2 >>> 32 - s2) + t3;
          }
          t2.MD5 = s._createHelper(c), t2.HmacMD5 = s._createHmacHelper(c);
        }(Math), r.MD5);
      }, function(e, t, n) {
        var r, o, s, i, a, c, u, l2;
        e.exports = (l2 = n(94), o = (r = l2).lib, s = o.WordArray, i = o.Hasher, a = r.algo, c = [], u = a.SHA1 = i.extend({ _doReset: function() {
          this._hash = new s.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
        }, _doProcessBlock: function(e2, t2) {
          for (var n2 = this._hash.words, r2 = n2[0], o2 = n2[1], s2 = n2[2], i2 = n2[3], a2 = n2[4], u2 = 0; u2 < 80; u2++) {
            if (u2 < 16)
              c[u2] = 0 | e2[t2 + u2];
            else {
              var l3 = c[u2 - 3] ^ c[u2 - 8] ^ c[u2 - 14] ^ c[u2 - 16];
              c[u2] = l3 << 1 | l3 >>> 31;
            }
            var m = (r2 << 5 | r2 >>> 27) + a2 + c[u2];
            m += u2 < 20 ? 1518500249 + (o2 & s2 | ~o2 & i2) : u2 < 40 ? 1859775393 + (o2 ^ s2 ^ i2) : u2 < 60 ? (o2 & s2 | o2 & i2 | s2 & i2) - 1894007588 : (o2 ^ s2 ^ i2) - 899497514, a2 = i2, i2 = s2, s2 = o2 << 30 | o2 >>> 2, o2 = r2, r2 = m;
          }
          n2[0] = n2[0] + r2 | 0, n2[1] = n2[1] + o2 | 0, n2[2] = n2[2] + s2 | 0, n2[3] = n2[3] + i2 | 0, n2[4] = n2[4] + a2 | 0;
        }, _doFinalize: function() {
          var e2 = this._data, t2 = e2.words, n2 = 8 * this._nDataBytes, r2 = 8 * e2.sigBytes;
          return t2[r2 >>> 5] |= 128 << 24 - r2 % 32, t2[14 + (r2 + 64 >>> 9 << 4)] = Math.floor(n2 / 4294967296), t2[15 + (r2 + 64 >>> 9 << 4)] = n2, e2.sigBytes = 4 * t2.length, this._process(), this._hash;
        }, clone: function() {
          var e2 = i.clone.call(this);
          return e2._hash = this._hash.clone(), e2;
        } }), r.SHA1 = i._createHelper(u), r.HmacSHA1 = i._createHmacHelper(u), l2.SHA1);
      }, function(e, t, n) {
        var r, o, s, i;
        e.exports = (r = n(94), s = (o = r).lib.Base, i = o.enc.Utf8, void (o.algo.HMAC = s.extend({ init: function(e2, t2) {
          e2 = this._hasher = new e2.init(), "string" == typeof t2 && (t2 = i.parse(t2));
          var n2 = e2.blockSize, r2 = 4 * n2;
          t2.sigBytes > r2 && (t2 = e2.finalize(t2)), t2.clamp();
          for (var o2 = this._oKey = t2.clone(), s2 = this._iKey = t2.clone(), a = o2.words, c = s2.words, u = 0; u < n2; u++)
            a[u] ^= 1549556828, c[u] ^= 909522486;
          o2.sigBytes = s2.sigBytes = r2, this.reset();
        }, reset: function() {
          var e2 = this._hasher;
          e2.reset(), e2.update(this._iKey);
        }, update: function(e2) {
          return this._hasher.update(e2), this;
        }, finalize: function(e2) {
          var t2 = this._hasher, n2 = t2.finalize(e2);
          return t2.reset(), t2.finalize(this._oKey.clone().concat(n2));
        } })));
      }, function(e, t, n) {
        var r, o;
        e.exports = (o = n(94), n(313), o.mode.ECB = ((r = o.lib.BlockCipherMode.extend()).Encryptor = r.extend({ processBlock: function(e2, t2) {
          this._cipher.encryptBlock(e2, t2);
        } }), r.Decryptor = r.extend({ processBlock: function(e2, t2) {
          this._cipher.decryptBlock(e2, t2);
        } }), r), o.mode.ECB);
      }, function(e, t, n) {
        var r;
        e.exports = (r = n(94), n(313), r.pad.Pkcs7);
      }, function(e, t, n) {
        var r;
        e.exports = (r = n(94), r.enc.Utf8);
      }, function(e, t, n) {
        var r = n(10), o = n(198).fn, s = n(312);
        o.onChatroomMembersInfo = o.onChatroomMembers = function(e2) {
          e2.error || (e2.obj.members = s.reverseMembers(e2.content.members));
        }, o.onGetChatroomMemberCountByTag = function(e2) {
          e2.error || (e2.obj = e2.content);
        }, o.onMarkChatroomMember = function(e2) {
          e2.error || (e2.obj.member = r(s).call(s, e2.content.chatroomMember));
        }, o.onSyncRobot = function(e2) {
          !e2.error && this.options.onrobots ? this.options.onrobots(null, e2.content) : this.ontions.onrobots(e2.error, {});
        };
      }, function(e, t, n) {
        var r = n(10), o = n(9), s = n(0), i = function(e2) {
          this.account = e2.account;
        }, a = i.prototype, c = a.Message = n(119), u = a.TextMessage = n(901), l2 = a.FileMessage = n(206), m = a.GeoMessage = n(905), p = a.NotificationMessage = n(906), d = a.CustomMessage = n(907), f2 = a.TipMessage = n(908), g = a.RobotMessage = n(909);
        a.validTypes = c.validTypes, a.reverse = function(e2) {
          var t2;
          switch (c.getType(e2)) {
            case "text":
              t2 = r(u).call(u, e2);
              break;
            case "image":
            case "audio":
            case "video":
            case "file":
              t2 = r(l2).call(l2, e2);
              break;
            case "geo":
              t2 = r(m).call(m, e2);
              break;
            case "notification":
              t2 = r(p).call(p, e2);
              break;
            case "custom":
              t2 = r(d).call(d, e2);
              break;
            case "tip":
              t2 = r(f2).call(f2, e2);
              break;
            case "robot":
              t2 = r(g).call(g, e2);
              break;
            default:
              t2 = r(c).call(c, e2);
          }
          return c.setExtra(t2, this.account), t2;
        }, a.reverseMsgs = function(e2, t2) {
          var n2, i2, a2 = this;
          return o(e2).call(e2, function(e3) {
            return e3 = r(a2).call(a2, e3), t2 && ((n2 = t2.modifyObj) && (e3 = s.merge(e3, n2)), i2 = t2.mapper, s.isFunction(i2) && (e3 = i2(e3))), e3;
          });
        }, e.exports = i;
      }, function(e, t, n) {
        var r = n(18), o = n(10), s = n(119), i = n(0);
        function a(e2) {
          i.verifyOptions(e2, "text", "msg::TextMessage"), e2.type = "text", s.call(this, e2), this.attach = e2.text, this.body = "";
        }
        a.prototype = r(s.prototype), a.reverse = function(e2) {
          var t2 = o(s).call(s, e2);
          return t2.text = e2.attach, t2;
        }, e.exports = a;
      }, function(e, t, n) {
        var r = n(18), o = n(0), s = n(206);
        function i() {
        }
        i.prototype = r(s.prototype), i.verifyFile = function(e2, t2) {
          o.verifyOptions(e2, "w h", true, "file.", t2);
        }, e.exports = i;
      }, function(e, t, n) {
        var r = n(18), o = n(206), s = n(0);
        function i() {
        }
        i.prototype = r(o.prototype), i.verifyFile = function(e2, t2) {
          s.verifyOptions(e2, "dur", true, "file.", t2);
        }, e.exports = i;
      }, function(e, t, n) {
        var r = n(18), o = n(206), s = n(0);
        function i() {
        }
        i.prototype = r(o.prototype), i.verifyFile = function(e2, t2) {
          s.verifyOptions(e2, "dur w h", true, "file.", t2);
        }, e.exports = i;
      }, function(e, t, n) {
        var r = n(8), o = n(18), s = n(10), i = n(119), a = n(0);
        function c(e2) {
          e2.type = "geo", a.verifyOptions(e2, "geo", "msg::GeoMessage"), a.verifyOptions(e2.geo, "lng lat title", true, "geo.", "msg::GeoMessage"), a.verifyParamType("geo.lng", e2.geo.lng, "number", "msg::GeoMessage"), a.verifyParamType("geo.lat", e2.geo.lat, "number", "msg::GeoMessage"), a.verifyParamType("geo.title", e2.geo.title, "string", "msg::GeoMessage"), i.call(this, e2), this.attach = r(e2.geo);
        }
        c.prototype = o(i.prototype), c.reverse = function(e2) {
          var t2 = s(i).call(i, e2);
          return e2.attach = e2.attach ? "" + e2.attach : "", t2.geo = e2.attach ? JSON.parse(e2.attach) : {}, t2;
        }, e.exports = c;
      }, function(e, t, n) {
        var r = n(18), o = n(10), s = n(48), i = n(0).notundef, a = n(119), c = { 301: "memberEnter", 302: "memberExit", 303: "blackMember", 304: "unblackMember", 305: "gagMember", 306: "ungagMember", 307: "addManager", 308: "removeManager", 309: "addCommon", 310: "removeCommon", 311: "closeChatroom", 312: "updateChatroom", 313: "kickMember", 314: "addTempMute", 315: "removeTempMute", 316: "updateMemberInfo", 317: "updateQueue", 318: "muteRoom", 319: "unmuteRoom", 320: "batchUpdateQueue", 321: "addTempMuteTag", 322: "removeTempMuteTag", 324: "batchQueueOffer", 323: "deleteChatroomMsg", 325: "updateChatroomTags" };
        function u() {
        }
        u.prototype = r(a.prototype), u.reverse = function(e2) {
          var t2 = o(a).call(a, e2);
          if (e2.attach = e2.attach ? "" + e2.attach : "", e2.attach) {
            var n2 = JSON.parse(e2.attach);
            if (t2.attach = { type: c[n2.id] }, i(n2.data)) {
              var r2 = n2.data;
              if (i(r2.operator) && (t2.attach.from = r2.operator), i(r2.opeNick) && (t2.attach.fromNick = r2.opeNick), i(r2.target) && (t2.attach.to = r2.target), i(r2.tarNick) && (t2.attach.toNick = r2.tarNick), i(r2.muteDuration) && (t2.attach.duration = s(r2.muteDuration, 10)), i(r2.tags) && (t2.attach.tags = r2.tags), "memberEnter" === t2.attach.type && (i(r2.muted) ? t2.attach.gaged = 1 == +r2.muted : t2.attach.gaged = false, i(r2.tempMuted) ? t2.attach.tempMuted = 1 == +r2.tempMuted : t2.attach.tempMuted = false, i(r2.muteTtl) ? t2.attach.tempMuteDuration = +r2.muteTtl : t2.attach.tempMuteDuration = 0), "deleteChatroomMsg" === t2.attach.type && (t2.attach.msgId = r2.msgId, t2.attach.msgTime = r2.msgTime), i(r2.ext) && (t2.attach.custom = r2.ext), i(r2.queueChange)) {
                var u2 = JSON.parse(r2.queueChange);
                switch (u2._e) {
                  case "OFFER":
                    t2.attach.queueChange = { type: "OFFER", elementKey: u2.key, elementValue: u2.content };
                    break;
                  case "POLL":
                    t2.attach.queueChange = { type: "POLL", elementKey: u2.key, elementValue: u2.content };
                    break;
                  case "DROP":
                    t2.attach.queueChange = { type: "DROP" };
                    break;
                  case "PARTCLEAR":
                  case "BATCH_UPDATE":
                    t2.attach.queueChange = { type: u2._e, elementKv: u2.kvObject };
                    break;
                  case "BATCH_OFFER":
                    t2.attach.queueChange = { type: u2._e, elements: u2.elements };
                }
              }
            }
          } else
            t2.attach = {};
          return t2;
        }, e.exports = u;
      }, function(e, t, n) {
        var r = n(8), o = n(18), s = n(10), i = n(119), a = n(0);
        function c(e2) {
          a.verifyOptions(e2, "content", "msg::CustomMessage"), e2.type = "custom", i.call(this, e2), "string" != typeof e2.content && (e2.content = r(e2.content)), this.attach = e2.content;
        }
        c.prototype = o(i.prototype), c.reverse = function(e2) {
          var t2 = s(i).call(i, e2);
          return t2.content = e2.attach, t2;
        }, e.exports = c;
      }, function(e, t, n) {
        var r = n(18), o = n(10), s = n(119), i = n(0);
        function a(e2) {
          i.verifyOptions(e2, "tip", "msg::TipMessage"), e2.type = "tip", s.call(this, e2), this.attach = e2.tip;
        }
        a.prototype = r(s.prototype), a.reverse = function(e2) {
          var t2 = o(s).call(s, e2);
          return t2.tip = e2.attach, t2;
        }, e.exports = a;
      }, function(e, t, n) {
        var r = n(8), o = n(18), s = n(10), i = n(9), a = n(119), c = n(0), u = { welcome: "00", text: "01", link: "03" }, l2 = { "01": "text", "02": "image", "03": "answer", 11: "template" };
        function m(e2) {
          c.verifyOptions(e2, "content", "msg::RobotMessage");
          var t2 = e2.content;
          switch (t2.type) {
            case "welcome":
              c.undef(e2.body) && (this.body = "欢迎消息");
              break;
            case "text":
              c.verifyOptions(t2, "content", "msg::RobotMessage"), c.undef(e2.body) && (this.body = t2.content);
              break;
            case "link":
              c.verifyOptions(t2, "target", "msg::RobotMessage");
          }
          t2.type && (t2.type = u[t2.type]), t2 = { param: t2, robotAccid: e2.robotAccid }, this.attach = r(t2), e2.type = "robot", a.call(this, e2);
        }
        m.prototype = o(a.prototype), m.reverse = function(e2) {
          var t2 = s(a).call(a, e2);
          if ("robot" === t2.type) {
            var n2 = JSON.parse(e2.attach);
            if (n2.param && (n2.param.type = l2[n2.param.type] || "unknown"), n2.robotMsg) {
              var r2 = (n2 = c.merge(n2, n2.robotMsg)).message;
              "bot" === n2.flag ? n2.message = i(r2).call(r2, function(e3) {
                return e3.type = l2[e3.type] || "unknown", e3;
              }) : n2.flag, delete n2.robotMsg;
            }
            t2.content = n2;
          }
          return t2;
        }, e.exports = m;
      }, function(e, t, n) {
        var r = n(10), o = n(32), s = n(9), i = n(16), a = n(8), c = n(0), u = c.undef, l2 = n(197).fn, m = n(25).reportAPI;
        l2.beforeSendMsg = function(e2) {
          e2.cmd = "sendMsg";
        };
        var p = { text: 0, image: 1, audio: 2, video: 3, geo: 4, notification: 5, file: 6, tip: 10, robot: 11, custom: 100 };
        l2.getHistoryMsgs = function(e2) {
          if ((e2 = e2 || {}).done = m({ instance: this, className: "ChatroomFn", funcName: "getHistoryMsgs", done: e2.done }), c.verifyOptions(e2), u(e2.timetag) ? e2.timetag = 0 : c.verifyParamType("timetag", e2.timetag, "number", "msg::getHistoryMsgs"), u(e2.limit) ? e2.limit = 100 : c.verifyParamType("limit", e2.limit, "number", "msg::getHistoryMsgs"), u(r(e2)) ? e2.reverse = false : c.verifyParamType("reverse", r(e2), "boolean", "msg::getHistoryMsgs"), u(e2.msgTypes))
            e2.msgTypes = [];
          else if (o(e2.msgTypes)) {
            var t2, n2;
            e2.msgTypes = s(t2 = e2.msgTypes).call(t2, function(e3) {
              return p[e3];
            }), e2.msgTypes = i(n2 = e2.msgTypes).call(n2, function(e3) {
              return "number" == typeof e3;
            });
          } else
            "number" == typeof p[e2.msgTypes] ? e2.msgTypes = [p[e2.msgTypes]] : e2.msgTypes = [];
          this.processCallback(e2), this.sendCmd("getHistoryMsgs", e2, function(t3, n3, r2) {
            o(r2) && (r2 = s(r2).call(r2, function(e3) {
              return p[e3.type] && (e3.type = p[e3.type]), e3;
            })), e2.callback(t3, n3, r2);
          });
        }, l2.getHistoryMsgsByTags = function(e2) {
          if ((e2 = e2 || {}).done = m({ instance: this, className: "ChatroomFn", funcName: "getHistoryMsgsByTags", done: e2.done }), c.verifyOptions(e2, "tags", "api::msg::getHistoryMsgsByTags"), c.verifyParamType("tags", e2.tags, "array", "api::msg::getHistoryMsgsByTags"), u(e2.fromTime) ? e2.fromTime = 0 : c.verifyParamType("fromTime", e2.fromTime, "number", "api::msg::getHistoryMsgsByTags"), u(e2.toTime) ? e2.toTime = 0 : c.verifyParamType("toTime", e2.toTime, "number", "api::msg::getHistoryMsgsByTags"), u(e2.limit) ? e2.limit = 100 : c.verifyParamType("limit", e2.limit, "number", "msg::getHistoryMsgs"), u(r(e2)) ? e2.reverse = 0 : c.verifyParamType("reverse", r(e2), "number", "msg::getHistoryMsgs"), u(e2.types))
            e2.types = [];
          else if (o(e2.types)) {
            var t2, n2;
            e2.types = s(t2 = e2.types).call(t2, function(e3) {
              return p[e3];
            }), e2.types = i(n2 = e2.types).call(n2, function(e3) {
              return "number" == typeof e3;
            });
          } else
            "number" == typeof p[e2.types] ? e2.types = [p[e2.types]] : e2.types = [];
          this.processCallback(e2), e2.types = a(e2.types), e2.tags = a(e2.tags), this.sendCmd("getHistoryMsgsByTags", { chatRoomTagHistoryMsgRequestTag: e2 }, e2.callback);
        };
      }, function(e, t, n) {
        var r = n(197).fn, o = n(25).reportAPI;
        r.disconnect = function(e2) {
          (e2 = e2 || {}).done = o({ instance: this, className: "ChatroomFn", funcName: "disconnect", done: e2.done }), this.protocol.disconnect(e2.done);
        };
      }, function(e, t, n) {
        var r = n(0), o = r.undef, s = r.verifyOptions, i = r.verifyParamType, a = n(312), c = n(197).fn, u = n(25).reportAPI;
        c.updateMyChatroomMemberInfo = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "updateMyChatroomMemberInfo", done: e2.done }), s(e2, "member needNotify", "member::updateMyChatroomMemberInfo"), i("needNotify", e2.needNotify, "boolean", "member::updateMyChatroomMemberInfo"), e2.needSave = e2.needSave || false, i("needSave", e2.needSave, "boolean", "member::updateMyChatroomMemberInfo"), this.processCustom(e2), this.processCallback(e2), e2.chatroomMember = new a(e2.member), e2.antispamTag = { antiSpamBusinessId: e2.antiSpamBusinessId }, this.sendCmd("updateMyChatroomMemberInfo", e2);
        }, c.getChatroomMembers = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "getChatroomMembers", done: e2.done });
          s(e2, "guest", "member::getChatroomMembers"), i("guest", e2.guest, "boolean", "member::getChatroomMembers"), o(e2.time) ? e2.time = 0 : i("time", e2.time, "number", "member::getChatroomMembers"), o(e2.limit) ? e2.limit = 100 : i("limit", e2.limit, "number", "member::getChatroomMembers"), this.processCallback(e2), e2.guest ? e2.type = false === e2.desc ? 3 : 1 : e2.type = e2.onlyOnline ? 2 : 0, this.sendCmd("getChatroomMembers", e2);
        }, c.getChatroomMembersByTag = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "getChatroomMembersByTag", done: e2.done });
          s(e2, "tag", "getChatroomMembersByTag::rag"), o(e2.time) ? e2.time = 0 : i("time", e2.time, "number", "getChatroomMembersByTag::time"), o(e2.limit) ? e2.limit = 100 : i("limit", e2.limit, "number", "getChatroomMembersByTag::limit"), this.processCallback(e2), this.sendCmd("getChatroomMembersByTag", { tagMemberReq: r.filterObj(e2, "tag limit time"), callback: e2.callback });
        }, c.getChatroomMemberCountByTag = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "getChatroomMemberCountByTag", done: e2.done }), s(e2, "tag", "getChatroomMemberCountByTag::rag"), this.processCallback(e2), this.sendCmd("getChatroomMemberCountByTag", e2);
        }, c.getChatroomMembersInfo = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "getChatroomMembersInfo", done: e2.done });
          s(e2, "accounts", "member::getChatroomMembersInfo"), i("accounts", e2.accounts, "array", "member::getChatroomMembersInfo"), this.processCallback(e2), this.sendCmd("getChatroomMembersInfo", e2);
        }, c.markChatroomIdentity = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "markChatroomIdentity", done: e2.done });
          s(e2, "identity", "member::markChatroomIdentity"), e2.type = { manager: 1, common: 2, black: -1, mute: -2 }[e2.identity], delete e2.identity, isNaN(e2.type) ? s(e2, "identity", 'member::markChatroomIdentity. The valid value of the identity is "manager" or "common" or "black" or "mute".') : this.markChatroomMember(e2);
        }, c.markChatroomManager = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "markChatroomManager", done: e2.done }), e2.type = 1, this.markChatroomMember(e2);
        }, c.markChatroomCommonMember = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "markChatroomCommonMember", done: e2.done }), e2.type = 2, this.markChatroomMember(e2);
        }, c.markChatroomBlacklist = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "markChatroomBlacklist", done: e2.done }), e2.type = -1, this.markChatroomMember(e2);
        }, c.markChatroomGaglist = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "markChatroomGaglist", done: e2.done }), e2.type = -2, this.markChatroomMember(e2);
        }, c.markChatroomMember = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "markChatroomMember", done: e2.done }), s(e2, "account type isAdd", "member::markChatroomMember"), i("isAdd", e2.isAdd, "boolean", "member::markChatroomMember"), o(e2.level) ? e2.level = 0 : i("level", e2.level, "number", "member::markChatroomMember");
          this.processCustom(e2), this.processCallback(e2), this.sendCmd("markChatroomMember", e2);
        }, c.kickChatroomMember = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "kickChatroomMember", done: e2.done });
          s(e2, "account", "member::kickChatroomMember"), this.processCustom(e2), this.processCallback(e2), this.sendCmd("kickChatroomMember", e2);
        }, c.updateChatroomMemberTempMute = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "updateChatroomMemberTempMute", done: e2.done });
          s(e2, "account duration needNotify", "member::updateChatroomMemberTempMute"), i("duration", e2.duration, "number", "member::updateChatroomMemberTempMute"), i("needNotify", e2.needNotify, "boolean", "member::updateChatroomMemberTempMute"), this.processCustom(e2), this.processCallback(e2), this.sendCmd("updateChatroomMemberTempMute", e2);
        }, c.updateTagMembersTempMute = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "updateTagMembersTempMute", done: e2.done });
          s(e2, "tag duration needNotify", "member::updateTagMembersTempMute"), i("duration", e2.duration, "number", "member::updateTagMembersTempMute"), i("needNotify", e2.needNotify, "boolean", "member::updateTagMembersTempMute"), this.processCustom(e2), this.processCallback(e2);
          var t2 = r.filterObj(e2, "tag duration custom notifyTargetTags");
          t2.needNotify = e2.needNotify ? 1 : 0, this.sendCmd("updateTagMembersTempMute", { tagMuteReq: t2, callback: e2.callback });
        }, c.updateCoordinate = r.throttle(function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "updateCoordinate", done: e2.done });
          var t2 = true;
          void 0 === e2.x || void 0 === e2.y || void 0 === e2.z ? t2 = false : ("number" != typeof e2.x && (e2.x = 0), "number" != typeof e2.y && (e2.y = 0), "number" != typeof e2.z && (e2.z = 0)), this.processCallback(e2);
          var n2 = r.filterObj(e2, t2 ? "x y z distance" : "distance");
          this.sendCmd("updateCoordinate", { coordinateReq: n2, callback: e2.callback });
        }, 300, {}, function(e2) {
          e2 && e2.done && e2.done({ code: 416, chatroomId: this.options.chatroomId });
        }), c.getRobotList = function(e2) {
          (e2 = e2 || {}).done = u({ instance: this, className: "ChatroomFn", funcName: "getRobotList", done: e2.done }), this.logger.warn("this api will be abandon");
          o(e2.timetag) && (e2.timetag = 0), this.processCallback(e2), this.sendCmd("syncRobot", e2);
        };
      }, function(e, t, n) {
        var r = n(197).fn, o = n(0), s = n(25).reportAPI;
        r.queueOffer = function(e2) {
          (e2 = e2 || {}).done = s({ instance: this, className: "ChatroomFn", funcName: "queueOffer", done: e2.done }), o.verifyOptions(e2, "elementKey elementValue", "msg::queueOffer");
          var t2 = { elementKey: e2.elementKey, elementValue: e2.elementValue, transient: !!e2.transient };
          e2.elementAccount && (t2.elementAccount = e2.elementAccount), this.processCallback(e2), this.sendCmd("queueOffer", t2, e2.callback);
        }, r.queuePoll = function() {
          var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          (e2 = e2 || {}).done = s({ instance: this, className: "ChatroomFn", funcName: "queuePoll", done: e2.done }), e2.elementKey = e2.elementKey || "", this.processCallback(e2), this.sendCmd("queuePoll", e2, e2.callback);
        }, r.queueList = function(e2) {
          (e2 = e2 || {}).done = s({ instance: this, className: "ChatroomFn", funcName: "queueList", done: e2.done }), this.processCallback(e2), this.sendCmd("queueList", e2, e2.callback);
        }, r.peak = function(e2) {
          (e2 = e2 || {}).done = s({ instance: this, className: "ChatroomFn", funcName: "peak", done: e2.done }), this.processCallback(e2), this.sendCmd("peak", e2, e2.callback);
        }, r.queueDrop = function(e2) {
          (e2 = e2 || {}).done = s({ instance: this, className: "ChatroomFn", funcName: "queueDrop", done: e2.done }), this.processCallback(e2), this.sendCmd("queueDrop", e2, e2.callback);
        }, r.queueChange = function(e2) {
          (e2 = e2 || {}).done = s({ instance: this, className: "ChatroomFn", funcName: "queueChange", done: e2.done }), o.verifyOptions(e2, "elementMap", "msg::queueOffer"), e2.needNotify ? (e2.needNotify = true, o.verifyOptions(e2, "notifyExt", "msg::queueOffer")) : e2.needNotify = false, this.processCallback(e2), this.sendCmd("queueChange", e2, e2.callback);
        };
      }, , , function(e, t, n) {
        e.exports = n(917);
      }, function(e, t, n) {
        n(299);
        var r = { NIM: n(770), Chatroom: n(887) };
        n(311)(r), e.exports = r;
      }]);
    });
  }
});
export default require_NIM_Web_SDK();
/*! Bundled license information:

@yxim/nim-web-sdk/dist/SDK/NIM_Web_SDK.js:
  (*!
   * 
   * VERSION: 8.9.124
   * Git Hash: 4f8cb8077466d54ee9de28bb4302c1b7ec7436a3
   * 
   * Create At: 2024/2/27 下午7:05:27
   * 
   * Target: NIM_Web_SDK
   *)
  (*! Socket.IO.js build:0.9.11, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed *)
  (*!
   * EventEmitter v5.2.9 - git.io/ee
   * Unlicense - http://unlicense.org/
   * Oliver Caldwell - https://oli.me.uk/
   * @preserve
   *)
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)
*/
//# sourceMappingURL=@yxim_nim-web-sdk.js.map
