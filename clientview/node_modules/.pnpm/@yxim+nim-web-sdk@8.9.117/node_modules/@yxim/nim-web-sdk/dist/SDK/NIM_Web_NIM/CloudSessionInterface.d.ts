import { NIMMessage, NIMMsgScene } from './MessageInterface';
import { NIMSystemMessage } from './SystemMessageInterface';
import { NIMCommonError, NIMStrAnyObj } from '../types';
/**
 * 云端会话服务 API 定义
 *
 * 注：SessionInterface 是本地会话，而 CloudSessionInterface 是远端会话。远端会话需要开通服务才能使用。
 */
export interface CloudSessionInterface {
    /**
     * 查询云端会话列表
     */
    getServerSessions(options: {
        /**
         * 最小的时间戳。与 maxTimestamp 组成一个时间段作为查询条件。
         *
         * 默认 0 表示不限制。
         */
        minTimestamp?: number;
        /**
         * 最大的时间戳。与 minTimestamp 组成一个时间段作为查询条件。
         *
         * 默认当前时间戳
         */
        maxTimestamp?: number;
        /**
         * 分页大小，默认 100
         */
        limit?: number;
        /**
         * 是否需要返回 last msg。默认 true
         */
        needLastMsg?: boolean;
        done: (err: NIMCommonError | Error | NIMStrAnyObj | null, data: {
            /**
             * 会话列表
             */
            sessionList: NIMCloudSession[];
            /**
             * 是否下一页还有数据
             */
            hasMore: boolean;
        }) => void;
    }): void;
    /**
     * 查询某个云端会话
     */
    getServerSession(options: {
        /**
         * 消息的场景
         */
        scene: NIMMsgScene;
        /**
         * 消息接收者
         */
        to: string;
        done: (err: NIMCommonError | Error | NIMStrAnyObj | null, data: NIMCloudSession) => void;
    }): void;
    /**
     * 更新服务器上某个会话的扩展字段
     */
    updateServerSession(options: {
        /**
         * 消息的场景
         */
        scene: NIMMsgScene;
        /**
         * 消息接收者
         */
        to: string;
        /**
         * 扩展字段，仅自己可见
         */
        extra: string;
        done: (err: NIMCommonError | Error | NIMStrAnyObj | null) => void;
    }): void;
    /**
     * 删除云端会话列表
     *
     * - 删除后不可恢复，其他端也不能再拉取到，直至会话重新被产生
     */
    deleteServerSessions(options: {
        /**
         * 要删除的会话 ID 的列表
         */
        sessions: {
            /**
             * 消息的场景
             */
            scene: NIMMsgScene;
            /**
             * 消息接收者
             */
            to: string;
        }[];
        done: (err: NIMCommonError | Error | NIMStrAnyObj | null, data: NIMCloudSession) => void;
    }): void;
}
/**
 * 云端会话定义
 */
export interface NIMCloudSession {
    /**
     * sessionId
     *
     * 例如 p2p-cs1、team-113879441
     */
    id: string;
    /**
     * 更新时间
     */
    updateTime: number;
    /**
     * 扩展字段，仅自己可见
     */
    ext?: string;
    /**
     * 上一条消息的类型. "0" 或者缺失表示普通消息, "1" 表示消息撤回通知
     */
    lastMsgType?: string;
    /**
     * 上一条消息内容.
     *
     * 若 lastMsgType 为普通消息时，类型为 NIMMessage
     * 若 lastMsgType 为消息撤回通知时，类型为 NIMSystemMessage
     */
    lastMsg?: NIMMessage | NIMSystemMessage;
}
